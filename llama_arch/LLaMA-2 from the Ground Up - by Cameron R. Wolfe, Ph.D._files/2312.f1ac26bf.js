"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["2312"],{16104:function(e,t,i){i(16584),i(64515)},39341:function(e,t,i){i(16584);var n=i(6400);i(30396),(0,n.createContext)({}).displayName="WWWContext"},62514:function(e,t,i){i(30396),i(20042),i(39341),i(68833),i(48980)},76971:function(e,t,i){i.d(t,{Z:()=>m});var n=i(16584),a=i(20253),r=i(35047),d=i(35702),l=i(68833),o=i(65205),c=i(15771),u=i(38841),s=i(76560),p=i(60308);let m=e=>{let{pub:t,user:i,setStep:m,entry:h}=e;return(0,n.tZ)("div",{className:"pub-landing-step",children:(0,n.BX)(a.ZP,{method:"post",action:"/api/v1/reader/signup/pub",loading:!1,autoLock:!0,onSuccess:e=>{(0,l.j)(l.FP.READER_ONBOARDING_PUB_LANDING_SIGNUP_SUCCEEDED,{entry:h}),i||(0,d.a)({user:e.body.user}),m(s.c.CATEGORIES)},children:[(0,n.BX)("div",{className:"headings",children:[(0,n.tZ)(u.wk,{pub:t,size:84}),(0,n.tZ)("h3",{className:"publication-title",children:t.name}),(0,n.tZ)("p",{className:"publication-description",children:t.editorial_bio||t.hero_text}),(0,n.tZ)("p",{className:"publication-details",children:(0,r.sv)(t)})]}),(0,n.tZ)("input",{type:"hidden",name:"email",value:null==i?void 0:i.email}),(0,n.tZ)("input",{type:"hidden",name:"source",value:"".concat(h,"-reader-onboarding")}),(0,n.tZ)("input",{type:"hidden",name:"publication_id",value:t.id}),(0,n.tZ)("input",{type:"hidden",name:"noWelcomeEmail",value:"true"}),(0,n.tZ)("input",{type:"hidden",name:"first_url",value:o.xY}),(0,n.tZ)("input",{type:"hidden",name:"first_referrer",value:o.ip}),(0,n.tZ)("input",{type:"hidden",name:"first_session_url",value:o.ac}),(0,n.tZ)("input",{type:"hidden",name:"first_session_referrer",value:o.qR}),(0,n.tZ)("input",{type:"hidden",name:"current_url",value:o.UE}),(0,n.tZ)("input",{type:"hidden",name:"current_referrer",value:o.xU}),(0,n.BX)("div",{className:"modal-ctas",children:[(0,n.tZ)("a",{className:"button let-me-read",href:(0,p.n1t)((0,p.SVA)(t),{no_cover:!0,utm_source:"".concat(h,"-reader-onboarding")}),onClick:()=>{(0,l.j)(l.FP.READER_ONBOARDING_PUB_LANDING_LET_ME_READ_CLICKED,{entry:h}),(0,l.x6)(t,h)},children:"Let me read it first"}),(0,n.tZ)(c.zx,{priority:"primary",onClick:e=>{(0,l.j)(l.FP.READER_ONBOARDING_PUB_LANDING_SUBSCRIBE_CLICKED,{entry:h}),i||(e.preventDefault(),m(s.c.PUB_SIGNUP))},type:"submit",children:"Subscribe"})]})]})})}},48146:function(e,t,i){i.d(t,{Z:()=>v});var n=i(16584),a=i(30396),r=i(20253),d=i(35047),l=i(60807),o=i(35702),c=i(68833),u=i(65205),s=i(15771),p=i(19081),m=i(38841),h=i(58175),b=i(57641),y=i(76560),_=i(60308);let v=e=>{let{pub:t,user:i,profile:v,setStep:Z,entry:f}=e,{setUser:g}=(0,l.SE)(),[N,E]=(0,a.eJ)(""),[B,C]=(0,a.eJ)(!1),[k,I]=(0,a.eJ)(!1);return(0,n.BX)("div",{className:"pub-signup-step",children:[(0,n.BX)("div",{className:"headings",children:[(0,n.tZ)(m.wk,{pub:t,size:84,className:"pub-icon"}),(0,n.tZ)("h3",{className:"publication-title",children:v?"Create an account to start reading":"Subscribe to ".concat(t.name)}),(0,n.tZ)("p",{className:"publication-description",children:v?"Create a Substack account to subscribe to ".concat(v.name):t.editorial_bio||t.hero_text}),(0,n.tZ)("p",{className:"publication-details",children:v?"Author of ".concat(t.name):(0,d.sv)(t)})]}),(0,n.BX)(r.ZP,{method:"post",action:"/api/v1/reader/signup/pub",loading:!1,autoLock:!0,onSuccess:e=>{i||((0,o.a)({user:e.body.user}),g(e.body.user)),e.body.requires_confirmation?((0,c.j)(c.FP.READER_ONBOARDING_PUB_SIGNUP_FAILED,{reason:"user_exists",entry:f}),C(!0)):((0,c.j)(c.FP.READER_ONBOARDING_PUB_SIGNUP_SUCCEEDED,{entry:f}),(0,o.a)({user:e.body.user}),Z(y.c.CATEGORIES))},children:[(0,n.BX)("p",{children:[(0,n.tZ)("label",{for:"email",children:"Email"}),(0,n.tZ)("input",{type:"email",name:"email","aria-label":"Email",value:N,tabIndex:0,onInput:e=>{E(e.target.value)},onChange:e=>{E(e.target.value)}}),(0,n.tZ)("input",{type:"hidden",name:"source",value:"".concat(f,"-reader-onboarding")}),(0,n.tZ)("input",{type:"hidden",name:"publication_id",value:t.id}),(0,n.tZ)("input",{type:"hidden",name:"noWelcomeEmail",value:"true"}),(0,n.tZ)("input",{type:"hidden",name:"first_url",value:u.xY}),(0,n.tZ)("input",{type:"hidden",name:"first_referrer",value:u.ip}),(0,n.tZ)("input",{type:"hidden",name:"first_session_url",value:u.ac}),(0,n.tZ)("input",{type:"hidden",name:"first_session_referrer",value:u.qR}),(0,n.tZ)("input",{type:"hidden",name:"current_url",value:u.UE}),(0,n.tZ)("input",{type:"hidden",name:"current_referrer",value:u.xU}),B&&(0,n.BX)("div",{className:"error",children:["Additional confirmation is required to complete your signup. Please"," ",(0,n.tZ)("a",{href:(0,_.uXE)({for_pub:t.subdomain,email:N}),children:"login"})," ","or click the confirmation link in your email."]})]}),(0,n.tZ)("div",{id:"error-container"}),(0,n.BX)(p.tu,{alignItems:"center",justifyContent:"space-between",paddingTop:64,gap:4,children:[(0,n.tZ)(b.O,{checked:k,onCheckboxChange:e=>{I(e)}}),(0,n.tZ)(s.zx,{type:"submit",priority:"primary",disabled:!k||!N,style:{marginTop:12,marginBottom:4},children:"Subscribe and continue"}),(0,n.BX)(h.xv.B5,{weight:"light",color:"secondary",children:["Already have a Substack account?"," ",(0,n.tZ)(h.xv.B5,{as:"a",weight:"light",color:"secondary",href:(0,_.uXE)({for_pub:t.subdomain}),target:"_blank",style:{textDecoration:"underline"},children:"Sign in"})]})]})]})]})}},41427:function(e,t,i){function n(e,t){return e.startsWith(t.replace(/\?.*$/,""))}function a(e,t){return e.replace(/\?.*$/,"")===t.replace(/\?.*$/,"")}i.d(t,{M:()=>a,h:()=>n})},94827:function(e,t,i){i.d(t,{Rj:()=>p});var n=i(16584);i(6400);var a=i(30396),r=i(94184),d=i.n(r),l=i(32224),o=i(1852);i(16104),i(35047),i(94499);var c=i(95441);i(62514),i(68833),i(98914);var u=i(15771);i(38841),i(60308);let s={desktop:15,mobile:6},p=e=>{let{className:t,hasFeatured:i,categories:r,categoryId:p,categoryIds:m,loadingCategoryId:h,ranking:b,onCategoryClicked:y,defaultExpanded:_}=e,[v,Z]=(0,a.eJ)(_||!1),[f,g]=(0,a.eJ)(new Set),N=s[(0,o.useMediaQuery)({query:"only screen and (max-width: 650px)"})?"mobile":"desktop"],{iString:E}=(0,c.M1)(),B=r?v?r:r.slice(0,N):[],C=e=>e.id===p||(null==m?void 0:m.includes(e.id)),k=e=>{g(t=>{let i=new Set(t);return i.has(e)?i.delete(e):i.add(e),i})};return(0,n.BX)("div",{className:d()("categories",t),children:[i&&(0,n.tZ)(u.zx,{priority:"featured"!==p||h&&"featured"!==h?"secondary":"primary-mono",loading:"featured"===h&&"featured"!==p,onClick:()=>{y({categoryId:"featured",ranking:"all",categories:r})},children:E("Featured")}),B.map(e=>{var t;let i=f.has(e.id),a=e.subcategories&&e.subcategories.length>0,d=C(e)&&(!h||h===e.id),l=h===e.id&&p!==e.id;return(0,n.BX)(n.HY,{children:[(0,n.tZ)(u.zx,{priority:d?"primary-mono":"secondary-outline",loading:l,onClick:()=>{y({categoryId:e.id,ranking:b,categories:r}),a&&k(e.id)},className:d?"test-active":"test-inactive",children:E(e.name||"")}),i&&a&&(null==e?void 0:null===(t=e.subcategories)||void 0===t?void 0:t.map(e=>{let t=C(e)&&(!h||h===e.id),i=h===e.id&&p!==e.id;return(0,n.tZ)(u.zx,{priority:t?"primary-mono":"secondary",loading:i,onClick:()=>y({categoryId:e.id,ranking:b,categories:r}),children:E(e.name)},e.id)}))]})}),r&&r.length>N&&!v&&(0,n.tZ)(u.hU,{priority:"secondary-outline",onClick:()=>Z(!0),children:(0,n.tZ)(l.Z,{size:20})})]})}}}]);