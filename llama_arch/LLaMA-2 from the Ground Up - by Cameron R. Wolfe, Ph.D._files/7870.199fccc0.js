"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["7870"],{35047:function(e,t,n){n.d(t,{Eh:()=>D,ZP:()=>j,sv:()=>V});var r=n(7409),i=n(99282),l=n(58865),a=n(16584),o=n(98661),s=n(30396),d=n(94184),c=n.n(d),u=n(36808),p=n(2564),m=n(71375),h=n(91925),g=n(12620),b=n(64343),v=n(21312),f=n(20888),Z=n(75744),_=n(57391),y=n(95441),x=n(56629),N=n(40647),w=n(35702),S=n(68833),C=n(98914),B=n(71068),k=n(15771),E=n(19081),I=n(38841),P=n(58175),L=n(64528),A=n(71460),F=n(74312),T=n(34590),M=n(31377),R=n(60308),X=n(26111),H=n(6911),O=n(70408),q=n(84864),z=n(47929),W=n(31190);function J(){let e=(0,l._)(["By ",""]);return J=function(){return e},e}let U="intro_popup_last_hidden_at";function V(e){let{includePrice:t=!0,includeRankingDetail:r=!0,includeByline:i=!0,includeBadge:l=!1,rankingDetailOverrideText:o=null,language:s="en"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=s||e.language,{iTemplate:c}=I18N.i(s||e.language),u=(0,q.getByLine)(e),p=null;return r&&(p=o||(e.rankingDetailByLanguage&&"en"!==d&&e.rankingDetailByLanguage[d]?e.rankingDetailByLanguage[d].rankingDetail:e.rankingDetail)),(0,a.BX)(L.N,{separator:" \xb7 ",children:[i&&u?(0,a.BX)(E.hs,{inline:!0,gap:4,children:[c(J(),u),l&&(0,a.tZ)(F.cr,{module:"../pencraft/unstable/UserBadge",resolve:e=>e.UserBadge,onRequest:()=>Promise.resolve().then(n.bind(n,71460)),size:"sm",tier:e.author_bestseller_tier,userId:e.author_id,whileLoading:e.author_bestseller_tier?(0,a.tZ)(E.hs,{alignItems:"center",children:(0,a.tZ)(A.UserBadge,{size:"sm",tier:e.author_bestseller_tier})}):(0,a.tZ)(a.HY,{})})]}):null,p,t&&function(e,t){let{language:n}=t,r=!e.disable_monthly_subscriptions&&e.plans&&e.plans.filter(e=>"month"===e.interval).sort((e,t)=>e.amount-t.amount)[0],i=!e.disable_annual_subscriptions&&e.plans&&e.plans.filter(e=>"year"===e.interval).sort((e,t)=>e.amount-t.amount)[0],l=r||i;if(l)return(0,T.bP)(l,{language:n})}(e,{language:s})]})}let j=(0,o.memo)(e=>{var t,n,l;let{publication:o,user:d,post:c,onHide:p,freeSignup:m,hidden:g,alwaysShow:b,showOnMount:v,freeSignupEmail:f,email:Z,referralCode:y,blurbs:B,launchWelcomePage:k,topThreePosts:E,topThreeSubscribers:I}=e,{getConfigFor:P}=(0,N.xR)(),L=P("welcome_page_query_params"),[A,F]=(0,s.eJ)(!1),[T,H]=(0,s.eJ)(!!(k||b)),O=(e,t)=>{var n;return L&&null!==(n=(0,X.x)(e))&&void 0!==n?n:t},[W]=(0,s.eJ)(O("no_skip",void 0)),[J]=(0,s.eJ)(O("no_blurbs",!1)),[V]=(0,s.eJ)(()=>{let e=O("hero_text",void 0);return e?decodeURIComponent(e):void 0}),{getExperimentVariant:j,exposeExperiment:D}=(0,_.jc)(),{getSettingFor:Q}=(0,x.So)(),$=null!==(t=(0,X.x)("force"))&&void 0!==t?t:void 0;(0,s.d4)(()=>{let e=e=>{"Escape"===e.key&&er(!0)};if(T)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[T]),(0,s.d4)(()=>{if(k&&!ei()||et()){if("undefined"!=typeof window&&(0,C.cn)(document.documentElement,"has-intro-popup"),(0,X.x)("r")){let e=(0,X.x)("r");d&&(0,q.userReferralKey)(d)===e||(0,S.j)(S.FP.COVER_PAGE_REFERRAL_VISIT,{referral_key:e,referring_user:(0,q.userFromReferralKey)(e)})}ee()}else p&&p(),(0,w.a)({hide_intro_popup:!0}),"undefined"!=typeof window&&(0,C.IV)(document.documentElement,"has-intro-popup"),!b&&"undefined"!=typeof window&&(0,C.pv)(document.documentElement,"show-intro-popup")&&(0,C.IV)(document.documentElement,"show-intro-popup");return["no_skip","no_blurbs","hero_text","hide_intro_popup"].forEach(e=>(0,C.iO)(e)),()=>{"undefined"!=typeof window&&(0,C.IV)(document.documentElement,"has-intro-popup"),er(!0)}},[]);let ee=()=>{"undefined"==typeof window||((0,C.cn)(document.documentElement,"show-intro-popup"),(0,S.j)(S.FP.COVER_PAGE_SHOWN,{has_cover_photo:!!o.cover_photo_url,has_free_signup_email:!!f,has_free_signup:!!m,functional_version:!0,launch_welcome_page:k,always_show:b,hidden:g,screen_height:"undefined"!=typeof window?window.innerHeight:null,screen_width:"undefined"!=typeof window?window.innerWidth:null,test_experiment_variant_v5:j("test_experiment_v5")}),D("test_experiment_v5"),b||(0,S.XY)("pageview",{dl:"".concat(document.location.origin,"/welcome").concat(document.location.search)})),H(!0)},et=(0,s.I4)(()=>!!b||!g&&(!!v||!!A||!ei()&&!!(null==c||c&&!(0,M.isPaidAudience)(c.audience))&&!m&&(!d||!d.is_free_subscribed&&!d.is_subscribed)),[b,m,g,c,v,A,d]),en=Q("display_welcome_page_details")&&o.freeSubscriberCount&&!(0,C.K1)()&&!$&&!o.invite_only&&!y&&!o.custom_domain&&(null==E?void 0:E.length)&&(null==I?void 0:I.length)&&!W&&!V;(0,s.d4)(()=>{T&&et()&&en&&D("welcome_page_update_desktop_visuals_limited")},[D,Q,en,et,T]);let er=e=>{e||(el(),setTimeout(()=>{(0,w.a)({hide_intro_popup:!0})},500)),p&&p(),!b&&"undefined"!=typeof window&&(0,C.pv)(document.documentElement,"show-intro-popup")&&(0,C.IV)(document.documentElement,"show-intro-popup")},ei=()=>{let e=u.get(U);return!!(e&&new Date(e)>new Date(Date.now()-864e5))},el=()=>{u.set(U,new Date().toJSON(),{expires:3650})},ea=async e=>{(0,S.j)(S.FP.COVER_PAGE_EMAIL_SUBMITTED,{is_paying_sub:!!e.body.prompt_to_login,has_plans:!!o.plans,functional_version:!0,homepage_type:o.homepage_type}),el(),F(!0),(0,w.a)({freeSignup:!0,freeSignupEmail:e.body.email});let t=b?"/":document.location.href;e.body.prompt_to_login?setTimeout(()=>{document.location.href=(0,R.n1t)("/account/login",{redirect:t,email:e.body.email})},30):document.location.href=(0,R.n1t)("/subscribe",(0,i._)((0,r._)({next:t,later:!0,just_signed_up:!0},e.body.subscription_id&&{subscription_id:e.body.subscription_id},e.body.referral_token&&{referral_token:e.body.referral_token}),{requires_confirmation:e.body.requires_confirmation?"true":"",utm_source:z.b3.coverPage,email:e.body.email,skip_redirect_check:!0}))},eo=()=>{(0,S.j)(S.FP.COVER_PAGE_MAYBE_LATER_CLICKED,{functional_version:!0}),er()};if(!T||!et())return null;let es=(0,a.tZ)(K,{source:"cover_page",email:Z,pub:o,user:null!=d?d:null,freeSignup:m,freeSignupEmail:f,referralCode:y,forceSignup:null!==(l=null!==(n=(0,X.x)("force"))&&void 0!==n?n:W)&&void 0!==l?l:void 0,onMaybeLater:W?void 0:eo,onFreeSignup:ea,blurbs:B,hideBlurbs:J,overrideSubtitle:V});if(en)switch(j("welcome_page_update_desktop_visuals_limited")){case"treatment_social_proof":es=(0,a.tZ)(Y,{email:Z,pub:o,user:null!=d?d:null,freeSignup:m,freeSignupEmail:f,onMaybeLater:eo,onFreeSignup:ea,blurbs:B,topThreeSubscribers:I});break;case"treatment_large_fonts":es=(0,a.tZ)(G,{email:Z,pub:o,user:null!=d?d:null,freeSignup:m,freeSignupEmail:f,onMaybeLater:eo,onFreeSignup:ea,blurbs:B})}return(0,a.tZ)(h.s,{children:(0,a.tZ)("div",{className:"intro-popup",children:(0,a.tZ)("div",{className:"intro-popup-page",children:es})})})}),D=e=>(0,a.tZ)("div",{className:"intro-inline",children:(0,a.tZ)(K,(0,r._)({},e))}),Y=e=>{var t,i,l,o,d;let{pub:u,user:p,email:m,freeSignup:h,freeSignupEmail:_,onMaybeLater:N,onFreeSignup:w,blurbs:C,topThreeSubscribers:k}=e,L="cover_page",A=(0,s.qp)(x.vz),{iString:T,language:M}=(0,y.M1)(),{title:X,subtitle:H,logoUrl:q,coverPhotoUrl:z,hideTitle:J,hideSubtitle:U}=Q(u),j=z&&(0,R.zJH)(z),D=j&&j.width/j.height,Y=!!(D&&D<2),G=!J||z&&Y,K=!U||z&&Y;(0,s.d4)(()=>{(0,S.j)(S.FP.FULL_EMAIL_FORM_SHOWN,{source:L,functional_version:!0,version:"social-proof"})},[L]);let $=C?C.filter(e=>""!=e.description):[],et=V(u,{includePrice:!1,includeBadge:!0,includeRankingDetail:!1,language:M});return(0,a.BX)("div",{className:"full-email-form",children:[(0,a.BX)("div",{className:"vertically-centered",children:[(0,a.tZ)(ee,{onClick:N}),z?Y?null:(0,a.tZ)(B.xu,{paddingBottom:48,children:(0,a.tZ)(f.e,{className:W.Z.publicationCoverPhotoCenter,src:z,imageProps:{quality:"auto:best"},maxWidth:840,loading:"eager",style:(0,r._)({},j&&j.width&&{height:"min(168px, ".concat(840*j.height/j.width,"px)")}),imageIsFixedWidth:!0})}):q&&(0,a.tZ)(B.xu,{paddingBottom:32,children:(0,a.tZ)(I.wk,{logoUrl:q,size:88})}),(0,a.BX)(E.hs,{gap:48,children:[(0,a.BX)(E.tu,{className:Y?W.Z.column:W.Z.centeredColumn,gap:32,children:[(0,a.BX)(E.tu,{gap:16,children:[G?(0,a.tZ)(P.xv.H1,{textAlign:Y?"left":"center",font:"pub-headings",className:W.Z.coverPrimary,textWrap:"balance",children:X}):null,K?(0,a.tZ)(P.xv.B3,{textAlign:Y?"left":"center",font:"display",size:15,lineHeight:20,className:W.Z.coverSecondary,textWrap:"balance",children:H}):null,et&&(null===(o=et.props)||void 0===o?void 0:null===(l=o.children)||void 0===l?void 0:null===(i=l.filter)||void 0===i?void 0:null===(t=i.call(l,Boolean))||void 0===t?void 0:t.length)?(0,a.tZ)(P.xv.B2,{textAlign:Y?"left":"center",weight:"semibold",font:"display",size:17,lineHeight:24,className:W.Z.coverSecondary,children:et}):null]}),(0,a.BX)(E.tu,{gap:16,children:[(0,a.BX)(E.hs,{alignItems:"center",alignSelf:Y?"start":"center",gap:8,children:[(0,a.tZ)(E.hs,{alignItems:"center",className:c()(W.Z.faces),children:k.map((e,t)=>{let{id:r,photo_url:i}=e,l=(0,a.tZ)(f.e,{className:c()(W.Z.face,0===t&&W.Z.first,t===k.length-1&&W.Z.last),style:{zIndex:k.length-t},maxWidth:80,src:(0,R.zF4)(i||(0,O.I4)(r),64),imageIsFixedWidth:!0});return(0,a.tZ)(F.cr,{module:"@/frontend/components/ProfileHoverCard",resolve:e=>e.ProfileHoverCard,onRequest:()=>Promise.all([n.e("8173"),n.e("7030"),n.e("6566"),n.e("5924"),n.e("221"),n.e("9631"),n.e("1262"),n.e("7415"),n.e("4860"),n.e("8519")]).then(n.bind(n,85685)),whileLoading:l,subject:e,dontStopPropagation:!1,disabled:!1,placement:"top-start",children:l})})}),u.freeSubscriberCount?(0,a.BX)(P.xv.H3,{font:"display",weight:"semibold",size:20,lineHeight:24,className:W.Z.coverPrimary,translated:!0,children:["Join over ",I18N.p(u.freeSubscriberCount)," subscribers"]}):null]}),(0,a.tZ)(g.Z,{email:m,isWelcomePageColor:!0,freeSignup:h,freeSignupEmail:_,pub:u,source:L,user:p,onConfirmationRequired:"enabled"===u.payments_state?()=>null:void 0,onSuccess:w||(()=>document.location.href="/"),autoFocus:!0,className:W.Z.containerClassName,promptClassName:W.Z.promptClassName,inputClassName:W.Z.inputClassName,subscribeButtonClassName:W.Z.subscribeButtonClassName}),(0,a.BX)(E.hs,{gap:4,cursor:"pointer",alignItems:"center",alignSelf:Y?"start":"center",inline:!0,onClick:N,children:[(0,a.tZ)(P.xv.B3,{style:{color:"var(--cover_print_secondary)"},children:"No thanks"===A.getSettingFor("welcome_page_opt_out_text")?T("No thanks"):null!==(d=A.getSettingFor("welcome_page_opt_out_text"))&&void 0!==d?d:T("No thanks")}),(0,a.tZ)(b.Z,{height:18,stroke:"var(--cover_print_secondary)",strokeWidth:2})]})]})]}),z&&Y?(0,a.tZ)(E.tu,{className:c()(W.Z.column,W.Z.hideColumnSmallScreens),gap:32,children:(0,a.tZ)(f.e,{className:W.Z.publicationCoverPhotoRight,src:z,imageProps:{quality:"auto:best"},maxWidth:476,loading:"eager",imageIsFixedWidth:!0})}):null]}),!!(null==$?void 0:$.length)&&(0,a.tZ)("div",{className:"blurb-buffer"}),!!(null==$?void 0:$.length)&&(0,a.tZ)(E.gq,{className:"blurbs",gap:20,children:$.map(e=>(0,a.BX)(E.tu,{gap:8,className:"blurb",children:[(0,a.tZ)(P.xv.B4,{className:"blurb-text",children:(0,a.tZ)(v.Z,{maxLines:4,ellipsesText:"...”",text:"“".concat(e.description,"”")})}),(0,a.BX)(P.xv.B4,{weight:"semibold",className:"blurb-text",children:[e.author_name||e.recommendingPublication.email_from_name||e.recommendingPublication.copyright,", ",(0,a.tZ)("a",{href:(0,R.SVA)(e.recommendingPublication),children:e.recommendingPublication.name})]})]}))})]}),(0,a.tZ)(Z.fJ,{publication:u})]})},G=e=>{var t;let{pub:n,user:i,email:l,freeSignup:o,freeSignupEmail:d,onMaybeLater:u,onFreeSignup:p,blurbs:m}=e,h="cover_page",_=(0,s.qp)(x.vz),{getSettingFor:N}=(0,x.So)(),{iString:w,language:C}=(0,y.M1)(),{title:k,subtitle:L,logoUrl:A,coverPhotoUrl:F,hideTitle:T,hideSubtitle:M}=Q(n),X=F&&(0,R.zJH)(F),H=X&&X.width/X.height,O=!!(H&&H<2),q=!T||F&&O,z=!M||F&&O;(0,s.d4)(()=>{(0,S.j)(S.FP.FULL_EMAIL_FORM_SHOWN,{source:h,functional_version:!0,version:"large-fonts"})},[h]);let J=m?m.filter(e=>""!=e.description):[],U=N("display_welcome_page_details");return(0,a.BX)("div",{className:"full-email-form",children:[(0,a.BX)("div",{className:"vertically-centered",children:[(0,a.tZ)(ee,{onClick:u}),F?O?null:(0,a.tZ)(B.xu,{paddingBottom:48,children:(0,a.tZ)(f.e,{className:W.Z.publicationCoverPhotoCenter,src:F,imageProps:{quality:"auto:best"},maxWidth:840,loading:"eager",style:(0,r._)({},X&&X.width&&{height:"min(168px, ".concat(840*X.height/X.width,"px)")}),imageIsFixedWidth:!0})}):A&&(0,a.tZ)(B.xu,{paddingBottom:32,children:(0,a.tZ)(I.wk,{logoUrl:A,size:88})}),(0,a.BX)(E.hs,{gap:48,children:[(0,a.BX)(E.tu,{className:O?W.Z.largeColumn:W.Z.largeCenteredColumn,gap:32,children:[(0,a.BX)(E.tu,{gap:16,children:[q?(0,a.tZ)(P.xv.H1,{textAlign:O?"left":"center",font:"pub-headings",className:c()(W.Z.coverPrimary,W.Z.largeHeading),textWrap:"balance",children:k}):null,z?(0,a.tZ)(P.xv.B3,{textAlign:O?"left":"center",font:"display",size:15,lineHeight:20,className:c()(W.Z.coverSecondary,W.Z.largeSubHeading),textWrap:"balance",children:L}):null,(0,a.tZ)(P.xv.B2,{textAlign:"left",weight:"semibold",font:"display",size:17,lineHeight:24,className:W.Z.coverSecondary,alignSelf:O?"start":"center",children:V(n,{includePrice:!1,includeBadge:!0,rankingDetailOverrideText:n.rankingDetailFreeSubscriberCount,includeRankingDetail:!!U,language:C})})]}),(0,a.BX)(E.tu,{gap:16,children:[(0,a.tZ)(g.Z,{email:l,isWelcomePageColor:!0,freeSignup:o,freeSignupEmail:d,pub:n,source:h,user:i,onConfirmationRequired:"enabled"===n.payments_state?()=>null:void 0,onSuccess:p||(()=>document.location.href="/"),autoFocus:!0,className:W.Z.containerClassName,promptClassName:W.Z.largePromptClassName,inputClassName:W.Z.largeInputClassName,inputWrapperClassName:W.Z.largeInputWrapperClassName,subscribeButtonClassName:W.Z.largeSubscribeButtonClassName}),(0,a.BX)(E.hs,{gap:4,cursor:"pointer",alignItems:"center",alignSelf:"center",inline:!0,onClick:u,children:[(0,a.tZ)(P.xv.B1,{size:20,lineHeight:30,weight:"semibold",style:{color:"var(--cover_print_secondary)"},children:"No thanks"===_.getSettingFor("welcome_page_opt_out_text")?w("No thanks"):null!==(t=_.getSettingFor("welcome_page_opt_out_text"))&&void 0!==t?t:w("No thanks")}),(0,a.tZ)(b.Z,{height:18,stroke:"var(--cover_print_secondary)",strokeWidth:2})]})]})]}),F&&O?(0,a.tZ)(E.tu,{className:c()(W.Z.largeColumn,W.Z.hideLargeColumnSmallScreens),gap:32,children:(0,a.tZ)(f.e,{className:W.Z.largePublicationCoverPhotoRight,src:F,imageProps:{quality:"auto:best"},maxWidth:568,loading:"eager",imageIsFixedWidth:!0})}):null]}),!!(null==J?void 0:J.length)&&(0,a.tZ)("div",{className:"blurb-buffer"}),!!(null==J?void 0:J.length)&&(0,a.tZ)(E.gq,{className:"blurbs",gap:20,children:J.map(e=>(0,a.BX)(E.tu,{gap:8,className:"blurb",children:[(0,a.tZ)(P.xv.B4,{className:"blurb-text",children:(0,a.tZ)(v.Z,{maxLines:4,ellipsesText:"...”",text:"“".concat(e.description,"”")})}),(0,a.BX)(P.xv.B4,{weight:"semibold",className:"blurb-text",children:[e.author_name||e.recommendingPublication.email_from_name||e.recommendingPublication.copyright,", ",(0,a.tZ)("a",{href:(0,R.SVA)(e.recommendingPublication),children:e.recommendingPublication.name})]})]}))})]}),(0,a.tZ)(Z.fJ,{publication:n})]})},K=e=>{var t;let{autoFocus:i=!0,pub:l,user:o,email:d,freeSignup:u,freeSignupEmail:m,referralCode:h,source:b,forceSignup:f,submitButtonText:Z,onMaybeLater:_,onFreeSignup:N,blurbs:w,hideBlurbs:C,overrideSubtitle:B}=e,I=(0,s.qp)(x.vz),{iString:L}=(0,y.M1)(),A=(0,X.x)("referralCode"),T=(0,X.x)("refSource"),M=L("Learn More"),O=(0,R.d6h)(l,{params:(0,r._)({utm_source:z.b3.subscribeEmail,utm_content:z.fZ.learnMore},A&&{referralCode:A},T&&{refSource:T})});(0,s.d4)(()=>{"subscribe_page"===b&&(0,S.j)(S.FP.SUBSCRIBE_EMAIL_FULL_SCREEN_SHOWN,{functional_version:!0}),(0,S.j)(S.FP.FULL_EMAIL_FORM_SHOWN,{source:b,functional_version:!0})},[b]);let q=w&&!C?w.filter(e=>""!=e.description):[];return(0,a.tZ)("div",{className:"full-email-form",children:(0,a.BX)("div",{className:"vertically-centered",children:[_&&!l.invite_only&&(0,a.tZ)(ee,{onClick:_}),(0,a.tZ)($,{pub:l,overrideSubtitle:B}),!l.invite_only||o&&o.is_free_subscribed?(0,a.BX)(a.HY,{children:[(0,a.tZ)(E.gq,{justifyContent:"center",style:{width:"100%"},children:(0,a.BX)(E.tu,{gap:4,style:{width:"100%",maxWidth:"380px"},children:[(0,a.tZ)(g.Z,{email:d,isWelcomePageColor:!0,freeSignup:u,freeSignupEmail:m,pub:l,referralCode:h,source:b,submitButtonText:Z,user:o,onConfirmationRequired:"enabled"===l.payments_state?()=>null:void 0,onSuccess:N||(()=>document.location.href="/"),autoFocus:i}),(0,a.BX)(P.xv.B4,{paddingX:{mobile:16,desktop:0},paddingTop:16,className:W.Z.tosText,translated:!0,children:["By subscribing, I agree to Substack’s"," ",(0,a.tZ)("a",{className:W.Z.tosLink,href:(0,H._Q)(),target:"_blank",rel:"noopener noreferrer",children:"Terms of Use"})," ","and acknowledge its"," ",(0,a.tZ)("a",{className:W.Z.tosLink,href:(0,H.WF)(),target:"_blank",rel:"noopener noreferrer",children:"Information Collection Notice"})," ","and"," ",(0,a.tZ)("a",{className:W.Z.tosLink,href:(0,H.Zz)(),target:"_blank",rel:"noopener noreferrer",children:"Privacy Policy"})]})]})}),!f&&(_?(0,a.tZ)("a",{onClick:e=>e.preventDefault(),className:"no-styles",children:(0,a.BX)(k.zx,{priority:"quaternary",className:W.Z.maybeLater,onClick:_,"data-testid":"maybeLater",children:["No thanks"===I.getSettingFor("welcome_page_opt_out_text")?L("No thanks"):null!==(t=I.getSettingFor("welcome_page_opt_out_text"))&&void 0!==t?t:L("No thanks"),(0,a.tZ)(p.Z,{size:20})]})}):(0,a.BX)(k.zx,{priority:"quaternary",className:W.Z.maybeLater,href:O,localNavigation:!1,children:[M,(0,a.tZ)(p.Z,{size:20})]}))]}):(0,a.tZ)(F.cr,{onRequest:()=>n.e("2457").then(n.bind(n,51323)),resolve:e=>e.InviteActions,module:"./InviteActions",pub:l,user:o,freeSignupEmail:m}),!!(null==q?void 0:q.length)&&(0,a.tZ)("div",{className:"blurb-buffer"}),!!(null==q?void 0:q.length)&&(0,a.tZ)(E.gq,{className:"blurbs",gap:20,children:q.map(e=>(0,a.BX)(E.tu,{gap:8,className:"blurb",children:[(0,a.tZ)(P.xv.B4,{className:c()("blurb-text",W.Z.blurbText),children:(0,a.tZ)(v.Z,{maxLines:4,ellipsesText:"...”",text:"“".concat(e.description,"”")})}),(0,a.BX)(P.xv.B4,{weight:"semibold",className:c()("blurb-text",W.Z.blurbText),children:[e.author_name||e.recommendingPublication.email_from_name||e.recommendingPublication.copyright,", ",(0,a.tZ)("a",{href:(0,R.SVA)(e.recommendingPublication),children:e.recommendingPublication.name})]})]}))})]})})},Q=(e,t)=>{let n,r,i,l,a,o;let{getConfigFor:s}=(0,N.xR)();if(s("section_specific_welcome_pages")&&e.section){var d;n=e.section.name,r=e.section.description,i=null!==(d=e.section.logo_url)&&void 0!==d?d:e.logo_url,a=!!((l=e.section.cover_photo_url)&&e.section.hide_intro_title),o=!!(l&&e.section.hide_intro_subtitle)}else n=e.name,r=e.hero_text,i=e.logo_url,a=!!((l=e.cover_photo_url)&&e.hide_intro_title),o=!!(l&&e.hide_intro_subtitle);return t&&(r=t),{title:n,subtitle:r,logoUrl:i,coverPhotoUrl:l,hideTitle:a,hideSubtitle:o}},$=e=>{let{pub:t,overrideSubtitle:n}=e,{getSettingFor:i}=(0,x.So)(),{language:l}=(0,y.M1)(),{title:o,subtitle:s,logoUrl:d,coverPhotoUrl:u,hideTitle:p,hideSubtitle:m}=Q(t,n),h=i("display_welcome_page_details"),g=u&&(0,R.zJH)(u);return(0,a.BX)(a.HY,{children:[u?(0,a.tZ)(f.e,{className:"publication-cover-photo",src:u,imageProps:{quality:"auto:best"},maxWidth:1360,loading:"eager",style:(0,r._)({},g&&g.width&&{height:"min(35vh, ".concat(680*g.height/g.width,"px)")})}):d&&(0,a.tZ)(B.xu,{paddingBottom:32,children:(0,a.tZ)(I.wk,{logoUrl:d,size:88})}),!p&&(0,a.tZ)("h1",{className:c()("publication-name",{"no-logo":!d,"with-cover":u},W.Z.balancedText),children:o}),!m&&s&&(0,a.tZ)("p",{className:c()("publication-tagline with-cover",{verbose:!0,"with-cover":u},W.Z.balancedText),children:s}),(0,a.tZ)("div",{className:"publication-meta",children:V(t,{includePrice:!1,includeBadge:!0,rankingDetailOverrideText:t.rankingDetailFreeSubscriberCount,includeRankingDetail:!!h,language:l})})]})},ee=e=>{let{onClick:t}=e;return(0,a.tZ)(k.hU,{onClick:t,"aria-label":"Close","data-testid":"close-welcome-modal",priority:"tertiary",className:W.Z.closeWelcomeModal,children:(0,a.tZ)(m.Z,{size:20})})}},72392:function(e,t,n){n.d(t,{o:()=>_});var r=n(16584),i=n(30396),l=n(94184),a=n.n(l),o=n(95441),s=n(98914),d=n(15771),c=n(19081),u=n(84747),p=n(63474),m=n(58175),h=n(81821),g=n(98550);let b=e=>{let[t,n]=(0,i.eJ)(null);return(0,i.d4)(()=>{let t=[];return e.forEach(e=>{let r=(0,s.VA)(e.text.toLowerCase(),!0),i=document.getElementById("\xa7".concat(r));if(i){let e=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&e.intersectionRatio>=.8&&n(r)})},{threshold:.5,rootMargin:"0px 0px -90% 0px"});e.observe(i),t.push(e)}}),()=>t.forEach(e=>e.disconnect())},[e]),t},v=e=>e?/^H[1-5]$/i.test(e.tagName)?e:v(e.parentElement):null,f=e=>{let{toc:t,minLevel:n,activeItem:i}=e;return(0,r.tZ)(c.tu,{gap:12,paddingY:12,paddingX:8,alignItems:"end",children:t.map((e,t)=>{let l=e.level-n,o="indent-".concat(Math.min(l,3)),d=(0,s.VA)(e.text.toLowerCase(),!0);return(0,r.tZ)("div",{className:a()(g.Z.line,g.Z[o],i===d&&g.Z.active)},t)})})},Z=e=>{let{toc:t,minLevel:n,activeItem:i,onItemClick:l}=e,{iString:d}=(0,o.M1)();return(0,r.BX)(c.tu,{gap:4,flex:"grow",children:[(0,r.tZ)(m.xv.Meta,{padding:4,color:"primary",children:d("Contents")}),t.map((e,t)=>{let o=(0,s.VA)(e.text.toLowerCase(),!0),d=e.level-n,u="indent-".concat(Math.min(d,3));return(0,r.tZ)(p.A0,{href:"#\xa7".concat(o),onClick:e=>{e.preventDefault(),l(o)},children:(0,r.tZ)(c.gq,{padding:4,className:a()(g.Z.row),children:(0,r.tZ)(m.xv.B3,{className:a()(g.Z.label,g.Z[u],i===o&&g.Z.active),ellipsis:!0,children:e.text})})},t)})]})},_=e=>{let{toc:t,position:n="fixed"}=e,{iString:l}=(0,o.M1)(),s=Math.min(...t.map(e=>e.level)),[c,p]=(0,i.eJ)(null),m=b(t);return t.length<2||(0,h.tq)()?null:(0,r.tZ)(u.M,{trigger:e=>{let{ref:i,onClick:o}=e;return(0,r.tZ)(d.kG,{ref:i,onClick:o,className:a()(g.Z.trigger,g.Z[n]),"aria-label":l("Table of Contents"),position:n,children:(0,r.tZ)(f,{toc:t,minLevel:s,activeItem:m})})},customShowClass:g.Z.show,customHideClass:g.Z.hide,layerClassName:g.Z.menu,layerOptions:{placement:"right-center",triggerOffset:8},children:(0,r.tZ)(Z,{toc:t,minLevel:s,activeItem:m,onItemClick:e=>{let t=document.getElementById("\xa7".concat(e));if(t){let n=v(t);if(n){if(c){let e=document.getElementById("\xa7".concat(c)),t=e?v(e):null;null==t||t.classList.remove("highlight")}n.classList.add("highlight"),p(e),t.scrollIntoView({behavior:"smooth",block:"start"})}}}})})}},59708:function(e,t,n){let r;n.d(t,{Kd:()=>D,N1:()=>Y});var i,l=n(7409),a=n(99282),o=n(16584),s=n(6400),d=n(70109),c=n(94184),u=n.n(c),p=n(60826),m=n(4373),h=n(45528),g=n(84892),b=n(17117),v=n(36441),f=n(78435),Z=n(80836),_=n(3258),y=n(33665),x=n(95441),N=n(57796),w=n(26989),S=n(98914),C=n(55706),B=n(19081),k=n(32700),E=n(93903),I=n(60308),P=n(26111),L=n(81821),A=n(64314);let F=(e,t)=>{var n,r,i,a;return(0,o.tZ)("div",{className:"subscription-widget-wrap",children:(0,o.BX)("div",{className:"subscription-widget show-subscribe",children:[(0,o.tZ)("div",{className:"preamble",children:(0,o.tZ)("p",{dangerouslySetInnerHTML:{__html:null!==(a=null===(i=e.children[0])||void 0===i?void 0:null===(r=i.children[0])||void 0===r?void 0:null===(n=r.children[0])||void 0===n?void 0:n.innerHTML)&&void 0!==a?a:""}})}),(0,o.tZ)(y.Z,(0,l._)({pub:t.pub,subscribeButtonAttrs:null,source:"subscribe-widget-preamble"},t.props))]})})},T=(e,t)=>{try{let n=JSON.parse((0,E.Z)(e.getAttribute("data-attrs")));if(["".concat(t.pub.base_url,"/subscribe?"),"".concat(t.pub.base_url,"/subscribe?plan=founding"),p.W.CHECKOUT_URL,p.W.FOUNDING_CHECKOUT_URL].includes(n.url)){let n=JSON.parse((0,E.Z)(e.getAttribute("data-attrs")));return(0,o.tZ)(y.Z,(0,l._)({pub:t.pub,subscribeButtonAttrs:n},t.props))}}catch(e){console.error("Failed to parse button:",e)}return null},M=(e,t)=>{let{pub:n,props:{isStatic:r,post:i}}=t;try{let t=e.getAttribute("data-attrs");if(t){let e=JSON.parse((0,E.Z)(t));return r?(0,o.tZ)(g.nO,{label:e.label,pub:n,post:i,duration:e.duration}):(0,o.tZ)(g.cM,{label:e.label,pub:n,post:i,src:"/api/v1/audio/upload/".concat(e.mediaUploadId,"/src"),duration:e.duration,autoPlay:!1,mediaUpload:{id:e.mediaUploadId}})}}catch(e){console.error("Failed to parse audio:",e)}return null},R=(e,t)=>{let{pub:n,props:{isStatic:r,post:i}}=t;try{let t=e.getAttribute("data-attrs");if(t){let e=JSON.parse((0,E.Z)(t));return r?(0,o.tZ)(g.nO,{label:e.label,pub:n,post:i,duration:e.duration}):(0,o.tZ)(g.cM,{label:e.label,pub:n,post:i,src:e.url,duration:e.duration,autoPlay:!1})}}catch(e){console.error("Failed to parse audio:",e)}return null},X=(e,t)=>{let{props:{isStatic:n}}=t;try{let t=e.getAttribute("data-attrs");if(t){let{name:e,avatarUrl:r,url:i}=JSON.parse((0,E.Z)(t));return n?(0,o.tZ)(C.W,{name:e,avatarUrl:r,url:i}):(0,o.tZ)(C.R,{name:e,avatarUrl:r,url:i})}}catch(e){console.error("Failed to parse audio:",e)}return null},H=e=>{try{let t=JSON.parse(e.dataset.attrs).symbol;if(t)return(0,o.tZ)(b.Z,{symbol:t,prependSymbol:JSON.parse(e.dataset.attrs).prependSymbol,isStatic:JSON.parse(e.dataset.attrs).isStatic});return(0,o.tZ)(o.HY,{})}catch(e){return console.error("failed to parse cashtag"),(0,o.tZ)(o.HY,{})}},O=(e,t)=>{let{pub:n,props:{isStatic:r}}=t,{iString:i}=I18N.i({pub:n});try{if(r){let t=e.getAttribute("data-attrs");if(t){let e=JSON.parse((0,E.Z)(t)),n=null==e?void 0:e.persistentExpression;return n?(0,o.tZ)("img",{src:(0,I.iJV)(n),style:{transform:"scale(0.5)"},"data-component-name":"LatexImg"}):(0,o.tZ)("p",{children:i("Failed to render LaTeX expression — no expression found in email")})}return(0,o.tZ)("p",{children:i("Failed to render LaTeX expression — data attributes not found")})}let t=e.getAttribute("data-attrs"),n=JSON.parse((0,E.Z)(t)),l=null==n?void 0:n.persistentExpression;return l?(0,o.tZ)(B.gq,{className:"latex-rendered",justifyContent:"center",flex:"grow",paddingBottom:"4px",paddingTop:"4px","data-component-name":"Latex",children:(0,o.tZ)(B.tu,{justifyContent:"center",children:(0,o.tZ)(d.Z,{inline:!1,children:"\\(".concat(l,"\\)")})})}):(0,o.tZ)("p",{children:i("Failed to render LaTeX expression — no expression found")})}catch(e){return console.error("failed to render mathjax",e),(0,o.tZ)("p",{children:i("Failed to render LaTeX expression — error")})}},q=e=>{try{let{name:t,id:n,type:r,url:i,photo_url:l,uuid:a,isStatic:s}=JSON.parse(e.dataset.attrs);if(t)return(0,o.tZ)(_.ZP,{name:t,id:n,type:r,url:i,photo_url:l,uuid:a,isStatic:s});return(0,o.tZ)(o.HY,{})}catch(e){return(0,o.tZ)(o.HY,{})}},z=(e,t)=>{try{let i=JSON.parse((0,E.Z)(e.getAttribute("data-attrs")));if(null==i?void 0:i.isEmail){var n,r;return(0,o.tZ)("table",{className:"poll-embed poll-email",cellSpacing:"16px",width:"100%",children:(0,o.tZ)("tbody",{children:(0,o.tZ)("tr",{children:(0,o.tZ)("td",{align:"center",children:(0,o.tZ)(f.kq,{id:i.id,embeddedPolls:null!==(r=null===(n=t.props.dataForEmailRender)||void 0===n?void 0:n.embeddedPolls)&&void 0!==r?r:[],pub:t.pub})})})})})}return(0,o.tZ)("div",{className:"poll-embed",dataAttrs:e.getAttribute("data-attrs"),children:(0,o.tZ)(f.n_,{id:i.id,isEditor:!1,post:t.props.post,isVersionView:!!t.props.isVersionView})})}catch(e){return console.error("Failed to parse poll:",e),(0,o.tZ)(o.HY,{})}},W=(e,t,n)=>{var r;let[i,,l]=e.id.split("-"),a=null===(r=n.wrapper.querySelector("#".concat(i,"-").concat(l)))||void 0===r?void 0:r.nextElementSibling;return a?((0,L.tq)()&&(e.href="#_"),(0,o.tZ)(k.z,{content:(0,o.tZ)("div",{className:"markup",children:j(a,t,n)}),className:"footnote-hovercard-target",dontStopPropagation:!0,layerClassName:"typography footnote-hovercard",as:"span",children:j(e,t,n)})):j(e,t,n)},J=(e,t)=>(0,o.tZ)(x._7,{language:t,children:e}),U=function(e,t){var n,r,i;let{shallow:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("A"!==e.nodeName||e.getAttribute("rel")||e.setAttribute("rel","pub"in t&&(null===(i=t.pub)||void 0===i?void 0:i.no_follow)?"nofollow ugc noopener":""),(0,S.pv)(e,"image2")&&(null===(n=t.props)||void 0===n?void 0:n.canRestackImage)&&e.classList.add("can-restack"),"pub"in t&&t.pub&&"P"===e.nodeName&&(0,S.pv)(e,"button-wrapper")){let n=T(e,t);if(n)return n;let r=(0,v.TW)(e,t);if(r)return r}let d="pub"in t&&(null===(r=t.pub)||void 0===r?void 0:r.language)||"en";return(0,S.pv)(e,"subscription-widget-wrap-editor")||(0,S.pv)(e,"subscription-widget-wrap")?J(F(e,t),d):(0,S.pv)(e,"cashtag-wrap")?J(H(e),d):(0,S.pv)(e,"mention-wrap")?J(q(e),d):"pub"in t&&t.pub&&(0,S.pv)(e,"native-audio-url-embed")?J(R(e,t),d):"pub"in t&&t.pub&&(0,S.pv)(e,"native-audio-embed")?J(M(e,t),d):"pub"in t&&t.pub&&(0,S.pv)(e,"native-video-embed")?J((0,v.tj)(e,t),d):"pub"in t&&t.pub&&(0,S.pv)(e,"meeting-embed")?J(X(e,t),d):(0,S.pv)(e,"poll-embed")?J(z(e,t),d):(0,S.pv)(e,"recipe-embed")?J((0,v.G3)(e,t),d):(0,S.pv)(e,"pinterest-embed")?J((0,v.EK)(e),d):(0,S.pv)(e,"sponsorship-campaign-embed")?J((0,v.b3)(e,t),d):(0,S.pv)(e,"fp-recirc-block")?J((0,v.Em)(e,t),d):(0,S.pv)(e,"image-gallery-embed")?J((0,v.W5)(e,t),d):(0,S.pv)(e,"image3")?J((0,v.L0)(e,t),d):(0,S.pv)(e,"directMessage")?J((0,v.Gz)(e,t),d):(0,S.pv)(e,"latex-rendered")?J(O(e,t),d):(0,S.pv)(e,"community-chat")?J(function(e,t){let{props:{isStatic:n}}=t;try{let t=e.getAttribute("data-attrs"),r=JSON.parse((0,E.Z)(t));if(!r.pub||!r.subdomain)return console.error("could not deepPrepare communityChat, subdomain or pub missing from node"),(0,o.tZ)(s.Fragment,{});return(0,o.tZ)("div",{className:"community-chat",dataAttrs:t,children:n?(0,o.tZ)(m.C,(0,l._)({},r)):(0,o.tZ)(m.a,{pub:r.pub,subdomain:r.subdomain})})}catch(e){return console.error("Failed to parse chat embed:",e),(0,o.tZ)(s.Fragment,{})}}(e,t),d):(0,S.pv)(e,"community-post")?J(function(e,t){let{props:{isStatic:n,is_freemail:r}}=t;try{let t=e.getAttribute("data-attrs"),i=JSON.parse((0,E.Z)(t));return n?(0,o.tZ)(h.s,(0,l._)({is_freemail:r},i)):(0,o.tZ)(h.V,(0,l._)({},i))}catch(e){return console.error("Failed to parse chat post embed:",e),(0,o.tZ)(s.Fragment,{})}}(e,t),d):(0,S.pv)(e,"digest-post-embed")?J((0,v.Do)(e,t),d):(0,S.pv)(e,"comment")&&!(0,S.pv)(e,"template-comment")?J(function(e,t){let{props:{isStatic:n}}=t;try{let t=e.getAttribute("data-attrs"),r=JSON.parse((0,E.Z)(t));return n?(0,o.tZ)(w.Eo,(0,l._)({},r)):(0,o.tZ)(N.d,(0,l._)({},r))}catch(e){return console.error("Failed to parse chat post embed:",e),(0,o.tZ)(s.Fragment,{})}}(e,t),d):(0,S.pv)(e,"referrals-tier-card")?J((0,v.mx)(e,t),d):("undefined"!=typeof window&&(0,S.pv)(e,"file-embed-button")&&"href"in e&&e.href&&!(0,P.x)(e.href,"token")&&(e.href=(0,I.n1t)(e.href,{token:(0,P.x)(window._preloads.original_url,"token")})),"props"in t&&t.props&&"post"in t.props&&t.props.post&&"object"==typeof t.props.post&&"id"in t.props.post&&t.props.post.id&&(0,S.pv)(e,"footnote")&&(e.id&&(e.id+="-".concat(t.props.post.id)),"href"in e&&e.href&&(e.href+="-".concat(t.props.post.id))),(0,S.pv)(e,"footnote-anchor"))?J(W(e,U,t),d):a?null:j(e,U,t)},V=function(e){let t={};for(let{name:n,value:r}of Array.prototype.slice.call(e))t[n]=r;return t},j=(i=(e,t,n,r)=>{var i;if(!e)throw Error("Empty node, cannot preactify!");let d=3===e.nodeType?"span":8===e.nodeType?"x_preact_compatible_html_comment_x":e.tagName.toLowerCase(),c=1!==e.nodeType?{}:V(e.attributes),p=e.children&&e.children.length>0?null:e.textContent;if(r||"script"===d&&e.innerHTML===A.N)return(0,s.h)(d,(0,a._)((0,l._)({},c),{dangerouslySetInnerHTML:{__html:e.innerHTML}}));let m=!!(null===(i=e.parentElement)||void 0===i?void 0:i.getAttribute("data-prose-mirror-wrapper"));if(n&&"pub"in n&&m&&["h1","h2","h3","h4"].includes(d)&&!e.className)return function(e,t,n,r){var i,d,c,p;let m=u()("header-anchor-post",t.className),h=n.children.length?Array.prototype.map.call(n.childNodes,e=>U(e,r)):[n.textContent];return(0,s.h)(e,(0,a._)((0,l._)({},t),{className:m}),...h,(0,o.tZ)(Z.Z,{text:null!==(c=n.textContent)&&void 0!==c?c:"",pub:null==r?void 0:r.pub,post:null==r?void 0:null===(i=r.props)||void 0===i?void 0:i.post,offsetTop:!0,isAboutPage:null!==(p=null==r?void 0:null===(d=r.props)||void 0===d?void 0:d.isAboutPage)&&void 0!==p&&p}))}(d,c,e,n);if(p)return(0,s.h)(d,c,p);let h=t(e,n,{shallow:!0});return h||(0,s.h)(d,c,...Array.prototype.map.call(e.childNodes,e=>t(e,n)))},r=0,function(){let e=[].slice.call(arguments,0),t=++r>2500;if(t){var n,l,a;console.error("Too many post nodes to recurse",{postId:null===(a=e[2])||void 0===a?void 0:null===(l=a.props)||void 0===l?void 0:null===(n=l.post)||void 0===n?void 0:n.id,depth:r})}let o=i.apply(null,[...e,...t?[!0]:[]]);return r--,o});function D(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=document.createElement("div");return r.setAttribute("data-prose-mirror-wrapper","1"),r.innerHTML=e,Array.prototype.map.call(r.childNodes,e=>j(e,U,{wrapper:r,pub:t,props:n}))}function Y(e,t){if("undefined"==typeof window)return[];let n=document.createElement("div");n.innerHTML=e;let r=[];for(let e of n.querySelectorAll(null!=t?t:"h1, h2, h3, h4")){var i,l;let t=e.tagName[1],n=t?parseInt(t):NaN;r.push({level:null!=n?n:0,text:null!==(i=e.textContent)&&void 0!==i?i:"",id:null!==(l=e.id)&&void 0!==l?l:""})}return r}},15186:function(e,t,n){if(n.d(t,{Z:()=>h,j:()=>f}),2787!=n.j)var r=n(7409);if(2787!=n.j)var i=n(99282);var l=n(16584);if(2787!=n.j)var a=n(49550);var o=n(98661),s=n(95441),d=n(15771),c=n(80026),u=n(17172),p=n(45783),m=n(20346);function h(e){let{tabs:t,value:n,onChange:d,ariaLabel:h}=e,{iString:f}=(0,s.M1)(),Z=(0,o.useRef)(null),_=(0,o.useRef)(null),{props:y,hasOverflow:x}=(0,u.aZ)(Z),{state:N}=(0,p.eK)(Z),w=e=>{let t=_.current,n=Z.current;if(!n||!t||e<0)return;let r=n.getElementsByClassName(m.Z.segment)[e];if(!r)return;let i=r.getBoundingClientRect(),l=n.getBoundingClientRect(),a=parseInt(window.getComputedStyle(n).paddingLeft),o=i.left-l.left-a+n.scrollLeft;requestAnimationFrame(()=>{t.style.setProperty("--highlight-width","".concat(i.width,"px")),t.style.setProperty("--highlight-x","".concat(o,"px"))})},S=t.findIndex(e=>e.value===n);return(0,o.useLayoutEffect)(()=>{w(S)},[t,n,S]),(0,o.useEffect)(()=>{w(S)},[t,n,S]),(0,l.BX)(b,{children:[(0,l.tZ)(a.O.Group,{manual:!0,selectedIndex:-1===S?0:S,onChange:e=>{var n;let r=null===(n=t[e])||void 0===n?void 0:n.value;void 0!==r&&d(r)},children:(0,l.tZ)(a.O.List,(0,i._)((0,r._)({as:c.X2},y),{ref:Z,className:m.Z.container,position:"relative",cursor:x()?"grab":"default",gap:4,padding:4,radius:"sm",overflow:"auto",scrollBar:"hidden",outline:"detail","aria-label":null!=h?h:"".concat(f("Tabs")),children:()=>(0,l.BX)(l.HY,{children:[t.map((e,t)=>(0,l.tZ)(g,{tab:e,index:t,children:e.label},e.value)),(0,l.tZ)(v,{ref:_})]})}))}),(0,l.tZ)(p.R3,{direction:"left",isVisible:N.showLeft}),(0,l.tZ)(p.R3,{direction:"right",isVisible:N.showRight})]})}function g(e){let{tab:t,index:n,children:r}=e;return(0,l.tZ)(a.O,{as:o.Fragment,children:e=>{let{selected:i}=e;return(0,l.tZ)(d.zx,{className:m.Z.segment,leading:t.leadingIcon,trailing:t.trailingIcon,priority:i?"tertiary":"quaternary",size:"sm",children:r},n)}})}let b=(0,c.zo)({display:"flex",direction:"column",position:"relative",bg:"primary",radius:"sm",minWidth:0,overflow:"hidden"}),v=(0,c.zo)({position:"absolute",height:32,radius:"xs",bg:"secondary",sizing:"border-box",className:m.Z.highlight}),f=(0,c.zo)({display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24})},37117:function(e,t,n){n.d(t,{a:()=>l});var r=n(16584),i=n(93283);function l(){return(0,r.tZ)(i.Z,{size:12,color:"var(--color-fg-secondary)"})}},68380:function(e,t,n){n.d(t,{$Z:()=>C,FZ:()=>I,Yl:()=>k,Yr:()=>B,dR:()=>S});var r=n(7409),i=n(99282),l=n(16584),a=n(30396),o=n(94184),s=n.n(o),d=n(67358),c=n(85200),u=n(5281),p=n(68833);n(80878);var m=n(7882),h=n(63018),g=n(80026),b=n(86075),v=n(36500),f=n(67899),Z=n(45031),_=n(97842),y=n(54584),x=n(31541),N=n(60308),w=n(44854);function S(e){var t;let{onClick:n}=e,r=(0,_.RN)();return r.inbox.pendingInviteCount?(0,l.tZ)(g.sg,{className:s()(w.Z.invitesRow),children:(0,l.BX)(Z.c_,{onClick:n,children:[(null!==(t=r.inbox.pendingInviteUnreadCount)&&void 0!==t?t:0)>0&&(0,l.tZ)(x.in,{className:w.Z.unreadDot}),(0,l.tZ)(g.X2,{width:56,justifyContent:"center",alignItems:"center",children:(0,l.tZ)(d.Z,{size:20})}),(0,l.tZ)(Z.Ty,{children:(0,l.BX)(g.X2,{justifyContent:"space-between",alignItems:"center",children:[(0,l.tZ)(g.xv.B3,{weight:"semibold",translated:!0,children:"Requests"}),(0,l.tZ)(g.xv.B4,{color:"secondary",flex:"auto"})]})})]})}):null}function C(){return(0,l.tZ)(v.v2,{trigger:(0,l.tZ)(g.hU,{"aria-label":"View more",priority:"tertiary",children:(0,l.tZ)(c.Z,{size:20})}),children:(0,l.tZ)(v.sN,{href:(0,N.v3t)({section:"privacy"}),target:"_blank",leading:(0,l.tZ)(u.Z,{}),children:(0,l.tZ)(g.xv.B3,{weight:"semibold",children:"Messaging settings"})})})}function B(e){let t=[],n=[...(null==e?void 0:e.threads)||[],...(null==e?void 0:e.spamThreads)||[]];for(let e of null!=n?n:[])if("direct-message"===e.type){var l,a;t.push((0,i._)((0,r._)({},e),{members:e.messageThread.members.map(e=>{let{user:t}=e;return t}),messageThreadId:e.messageThread.id,recentMessageId:null!==(a=null===(l=e.recentMessage)||void 0===l?void 0:l.id)&&void 0!==a?a:null,recentMessage:e.recentMessage?{comment:e.recentMessage,userId:e.recentMessage.user_id}:null}))}return t}function k(e){let{error:t,items:n,isLoading:r,selectedConversationId:i,onSelect:o}=e,s=(0,y.y)(),{refetch:d}=(0,m.ib)({pathname:"/api/v1/messages/inbox/invites/seen",method:"POST",auto:!1});return(0,a.d4)(()=>{r||(d(),(0,p.j)(p.FP.DIRECT_MESSAGE_REQUESTS_VIEWED,{pending_conversation_requests:n.length,surface:s}))},[r]),(0,l.tZ)(l.HY,{children:t?(0,l.tZ)(l.HY,{children:"'Error'"}):r?(0,l.tZ)(Z.No,{}):(0,l.tZ)(g.sg,{paddingY:12,gap:8,flex:"grow",children:n.length?n.map(e=>(0,l.tZ)(f.w,{item:e,onSelect:(t,n)=>o(e.messageThread.id,n),isUnread:!e.lastViewedAt,isSelected:i===e.messageThread.id,tab:"requests"},e.id)):(0,l.tZ)(E,{})})})}function E(e){let{spam:t}=e;return(0,l.tZ)(g.sg,{flex:"grow",justifyContent:"center",alignItems:"center",sizing:"border-box",children:(0,l.tZ)(b.u,{title:t?"No spam requests yet":"No requests yet",description:t?"Message requests that may be low-quality or unwanted will appear here.":"Control whose messages arrive as requests in your Settings.",button:t?void 0:(0,l.tZ)(g.zx,{priority:"primary-mono",href:(0,N.v3t)({section:"privacy"}),newTab:!0,size:"sm",children:"Go to Settings"})})})}function I(){return(0,h._I)("/api/v1/messages/dm/invites")}},4953:function(e,t,n){function*r(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;for(let r=e;r<t;r+=n)yield r}function*i(e){let t=Array.from(e);for(let e=t.length-1;e>=0;e--)yield t[e]}n.d(t,{GY:()=>i,w6:()=>r})}}]);