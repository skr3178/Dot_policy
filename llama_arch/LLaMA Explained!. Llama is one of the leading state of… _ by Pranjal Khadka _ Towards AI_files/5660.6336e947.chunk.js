"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[5660],{49470:(e,n,i)=>{i.d(n,{A:()=>o});var t,a=i(96540);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var t in i)({}).hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e},l.apply(null,arguments)}const o=function(e){return a.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),t||(t=a.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18M8.25 12h7.5"})))}},94971:(e,n,i)=>{i.d(n,{C:()=>d});var t=i(96540),a=i(52290),l=i(86527),o=i(46879);function d(e){var n=e.entityName,i=void 0===n?"story":n;return t.createElement(a.a,{textAlign:"center",testId:"deleteStoryModalText"},"Deletion is not reversible, and the story will be completely deleted. If you do not want to delete, you can"," ",t.createElement(l.N,{target:"_blank",href:o.Xj4,inline:!0,linkStyle:"OBVIOUS"},"unlist the ",i),".")}},43849:(e,n,i)=>{i.d(n,{$:()=>k,J:()=>u});var t=i(5544),a=i(96540),l=i(44402),o=i(42976),d=i(60603),r=i(8963),s=i(34507),m=function(e){return{overflow:"hidden",transition:"opacity 300ms ease".concat(e?"":" 300ms",", max-height 300ms ease").concat(e?" 300ms":""),maxHeight:e?"0":"450px",opacity:e?0:1}},c=(0,a.createContext)({});function u(e){var n=e.children,i=e.post,u=(0,l.l)(),k=(0,a.useRef)(!1),v=(0,s.K)(i.id,"cache-only").explicitSignal,p=(0,a.useState)(v===o.WN.SHOW_LESS),N=(0,t.A)(p,2),S=N[0],g=N[1],f=(0,d.e)(!1),b=(0,t.A)(f,3),y=b[0],h=b[1],E=b[2],F=(0,a.useCallback)((function(e){S&&k.current&&"max-height"===e.propertyName&&(h(),k.current=!1)}),[S]),C=(0,a.useCallback)((function(){k.current=!0,g(!0)}),[]),w=(0,a.useCallback)((function(){g(!1)}),[]),P=(0,a.useMemo)((function(){return{animateShowLess:C,animateUndo:w}}),[C,w]);return a.createElement(c.Provider,{value:P},a.createElement("div",{className:u(m(S)),onTransitionEnd:F},n),a.createElement(r.b,{post:i,isVisible:y,hide:E}))}var k=function(){return(0,a.useContext)(c)}},8963:(e,n,i)=>{i.d(n,{b:()=>F});var t,a=i(5544),l=i(96540),o=i(17045),d=i(53843),r=i(2550),s=i(21335),m=i(71984),c=i(52290),u=i(94170),k=i(49287),v=i(42976),p=i(60603),N=i(55981),S=i(36557),g=i(44402);function f(){return f=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var t in i)({}).hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e},f.apply(null,arguments)}const b=function(e){return l.createElement("svg",f({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),t||(t=l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.292 9.5v5H2v-5zm1-.124v5.248l.105.08L13 20.484V3.516l-7.603 5.78zm7.905-7.266L4.792 8.5H1.5A.5.5 0 0 0 1 9v6a.5.5 0 0 0 .5.5h3.292l8.405 6.39a.5.5 0 0 0 .803-.398V2.508a.5.5 0 0 0-.803-.398m5.657 7.035a.5.5 0 0 0-.708.707L20.293 12l-2.147 2.148a.5.5 0 1 0 .708.707L21 12.707l2.146 2.148a.5.5 0 1 0 .708-.707L21.707 12l2.147-2.148a.5.5 0 1 0-.708-.707L21 11.293z",clipRule:"evenodd"})))};var y=function(e){return function(n){return{padding:"16px 24px",border:"none",cursor:"pointer",display:"flex","&:first-of-type":{paddingTop:"20px"},"&:last-of-type":{paddingBottom:"20px"},"&:not(:last-of-type)":{borderBottom:"1px solid ".concat(n.colorTokens.border.neutral.primary.base)},"& svg path":{fill:e?n.colorTokens.foreground.error.primary.base:n.colorTokens.foreground.neutral.secondary.base},":hover svg path":{fill:e?n.colorTokens.foreground.error.primary.hover:n.colorTokens.foreground.neutral.primary.base}}}};function h(e){var n=e.onClick,i=e.isReport,t=e.text,a=e.detail,o=(0,g.l)();return l.createElement("button",{className:o(y(i)),onClick:n},i?l.createElement(N.n,null):l.createElement(b,null),l.createElement(c.a,{marginLeft:"24px",display:"flex",flexDirection:"column",gap:"4px",textAlign:"left"},l.createElement(S.kZ,{scale:"M",color:i?"ERROR":"DARKER",clamp:1},t),a&&l.createElement(S.kZ,{scale:"S",clamp:1},a)))}var E=i(34507);function F(e){var n,i,t=e.hide,d=e.isVisible,c=e.post,u=null!==(n=null===(i=c.creator)||void 0===i?void 0:i.id)&&void 0!==n?n:"",v=(0,s.cd)(u).viewerEdge,N=(0,r.A)().viewerId,S=(0,p.e)(!1),g=(0,a.A)(S,3),f=g[0],b=g[1],y=g[2],h=(0,o.M)({viewerId:N,targetAuthorId:u,targetPostId:c.id,onOptimisticComplete:y}),E=(0,l.useCallback)((function(){b(),t()}),[t]);return l.createElement(l.Fragment,null,d&&l.createElement(k.Ne,{source:{dimension:"negative_signal_modal"},extendSource:!0},l.createElement(C,{post:c,report:E,hide:t})),l.createElement(m.e,{isVisible:f,hide:y,type:"story",alreadyBlocking:!(null==v||!v.isBlocking),onSubmit:h}))}function C(e){var n=e.post,i=e.report,t=e.hide,o=(0,l.useState)(!1),d=(0,a.A)(o,2),r=d[0],s=d[1],m=(0,E.K)(n.id),k=m.undo,p=m.showUndoToast,N=(0,l.useCallback)((function(){r&&(p(v.WN.SHOW_LESS),s(!1)),t()}),[r,t]),S=(0,l.useCallback)((function(){k(),s(!0)}),[k]);return l.createElement(u.a,{hide:N,title:"Got it, we'll recommend fewer like this",subtitleTextAlign:"center",subtitle:"You can additionally take any of the actions below.",padding:"40px 32px 32px",subtitleMargin:"16px",confirmButtonStyle:"BRAND",confirmText:"Done",cancelText:"Undo",cancelButtonStyle:"SUBTLE",onCancel:S},l.createElement(c.a,{display:"flex",justifyContent:"center",marginBottom:"32px"},l.createElement(c.a,{width:"100%",maxWidth:"320px",display:"flex",flexDirection:"column",borderRadius:"8px",border:"neutral.primary"},n.creator&&!n.creator.viewerEdge.isMuting&&l.createElement(w,{publisher:n.creator,hide:t}),n.collection&&!n.collection.viewerEdge.isMuting&&l.createElement(w,{publisher:n.collection,hide:t}),l.createElement(h,{onClick:i,isReport:!0,text:"Report story..."}))))}function w(e){var n=e.publisher,i=e.hide,t="User"===n.__typename,a=(0,d.d)({authorId:t?n.id:void 0,collectionId:t?void 0:n.id}),o=a.muteAuthor,r=a.mutePub,s=(0,l.useCallback)((function(){t?o():r(),i()}),[o,r,t]);return l.createElement(h,{onClick:s,text:"Mute ".concat(t?"author":"publication"),detail:n.name})}},34507:(e,n,i)=>{i.d(n,{K:()=>f});var t=i(64467),a=i(5544),l=i(95420),o=i(95964),d=i(96540),r=i(2550),s=i(34317),m=i(49287),c=i(42976),u=i(91830),k=i(97249),v=i(43849),p={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ExplicitSignalPostQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NegativeSignalModal_post"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"explicitSignalState"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"NegativeSignalModal_publisher"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Publisher"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"NegativeSignalModal_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NegativeSignalModal_publisher"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isMuting"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NegativeSignalModal_publisher"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isMuting"}}]}}]}}]}}]},N={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ExplicitSignalMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"signal"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ExplicitUserSignal"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sendExplicitSignal"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"ObjectField",name:{kind:"Name",value:"signal"},value:{kind:"Variable",name:{kind:"Name",value:"signal"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}}]};function S(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function g(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?S(Object(i),!0).forEach((function(n){(0,t.A)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):S(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}function f(e,n){var i,t,S=(0,s.$L)(),f=(0,m.Fo)()||{},b=(0,r.A)().viewerId,y=(0,u.zF)(),h=(0,v.$)().animateUndo,E=(0,l.n)(N),F=(0,a.A)(E,1)[0],C=(0,o.IT)(p,{variables:{id:e},fetchPolicy:n}),w=C.data,P=C.loading,A=null==w||null===(i=w.post)||void 0===i||null===(t=i.viewerEdge)||void 0===t?void 0:t.explicitSignalState,I=(0,d.useCallback)((function(n){F({variables:{postId:e,signal:n},update:function(i){b&&i.modify({id:"PostViewerEdge:".concat((0,k.N)(e,b)),fields:{explicitSignalState:function(){return n===c.WN.CLEAR_SIGNAL?null:n}}})}})}),[F,e,b]),D=(0,d.useCallback)((function(n){var i=n.name,t=n.data,a=n.dimension;return S.event(i,g({postId:e,source:a?(0,m.wv)(g(g({},f),{},{dimension:a})):(0,m.wv)(f)},t))}),[e,f]),T=(0,d.useCallback)((function(e){var n=A===c.WN.SHOW_MORE;I(c.WN.CLEAR_SIGNAL),D({name:"post.see_".concat(n?"more":"less",".undo"),dimension:e}),n?x(c.WN.SHOW_MORE):null==h||h()}),[e,A,h]),_=(0,d.useCallback)((function(){I(c.WN.SHOW_LESS),D({name:"post.see_less",data:{mutationSent:!0}})}),[D,I]),x=(0,d.useCallback)((function(e){y({message:"Undone. We won’t recommend ".concat(e===c.WN.SHOW_LESS?"fewer":"more"," stories like this."),extraParams:{hideCloseButton:!0}})}),[]);return{loading:P,undo:T,showLess:_,explicitSignal:A,showUndoToast:x}}},70521:(e,n,i)=>{i.d(n,{Z:()=>s});var t=i(58168),a=i(80045),l=i(96540),o=i(20036),d=i(24809),r=["isResponsive"],s=function(e){var n=e.isResponsive,i=(0,a.A)(e,r);return l.createElement(o.u,(0,t.A)({text:n?"More":void 0,icon:l.createElement(d.A,null)},i))}},19033:(e,n,i)=>{i.d(n,{G:()=>an});var t=i(58168),a=i(80045),l=i(96540),o=i(5544),d=i(64467),r=i(14792),s=i.n(r),m=i(95964),c=i(94971),u=i(45522),k=i(14782),v=i(86527),p=i(52290),N=i(85050);function S(e){var n=e.onClick,i=e.hidePopover,t=e.showAt,a=e.bookmarkIcon,o=(0,l.useCallback)((function(){i(),n()}),[n,i]);return l.createElement(N.V,{xs:t.xs,sm:t.sm,md:t.md,lg:t.lg,xl:t.xl},l.createElement(k.q3,null,l.createElement(v.N,{"aria-controls":"aria-id","aria-expanded":"false",onClick:o},l.createElement(p.a,{display:"flex",flexDirection:"row",alignItems:"center",ariaHidden:"true",gap:"12px"},a,"Save"))),l.createElement(k.eS,null))}var g=i(69415),f=i(36557),b=i(61333),y={width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"};function h(e){var n=e.hidePopover,i=(0,g.y)(),t=i.areHighlightsHidden,a=i.toggleHideHighlights,d=(0,l.useState)(),r=(0,o.A)(d,2),s=r[0],m=r[1],c=(0,l.useCallback)((function(){a(),n()}),[n,a]);return(0,l.useEffect)((function(){m(navigator.userAgent)}),[]),l.createElement(k.q3,{paddingTopBottom:"6px"},l.createElement(v.N,{onClick:c,rules:y},l.createElement("span",null,t?"Show":"Hide"," highlights"),!(0,b.Gz)(s)&&l.createElement(p.a,{padding:"2px 6px",borderRadius:"4px",border:"neutral.tertiary"},l.createElement(f.kZ,{scale:"XS"},(0,b.cX)(s)?"⌘":"Ctrl"," /"))))}var E=i(70521),F=i(17745),C=i(27721),w=i(1722),P=i(56743),A=i(75599),I=i(39160),D=i(51771),T=function(e){var n=e.post,i=e.hidePopover,t=e.showHideHighlights,a=(0,C.R)().value,o=null==a?void 0:a.id,d=(0,w.h)(n).viewerEdge,r=(0,A.w)(),s=(0,I.Dy)((function(e){return e.multiVote.clapsPerPost})),m=(0,D.F)(s,n,d),c=m.clapCount,u=m.viewerClapCount,p=(0,F.f)(),N=o&&c&&u&&u>0;return N||t?l.createElement(l.Fragment,null,!!N&&l.createElement(k.q3,null,l.createElement(v.N,{onClick:function(){p(n,(null==a?void 0:a.id)||"",-u,d),r((0,P.dy)({postId:n.id})),i()}},"Undo claps")),l.createElement(k.eS,null)):null},_=i(23496),x=i(44929),O=i(49534),V=i(58285),R=i(9942),M=i(4369),L=i(5249),B=i(71468),j=i(91830),U={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PostAllowResponsesMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"allowResponses"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setPostAllowResponses"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}}},{kind:"Argument",name:{kind:"Name",value:"allowResponses"},value:{kind:"Variable",name:{kind:"Name",value:"allowResponses"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"allowResponses"}}]}}]}}]},H=(0,B.Ng)()((function(e){var n=e.children,i=e.dispatch,t=e.onCompleted,a=e.targetPostId;return l.createElement(L.s,{mutation:U,onCompleted:function(){i((0,j.MZ)({message:"Responses are now hidden for this post."})),t&&t()},variables:{targetPostId:a,allowResponses:!1},optimisticResponse:{__typename:"Mutation",setPostAllowResponses:{__typename:"Post",id:a,allowResponses:!1}}},(function(e){return l.createElement(l.Fragment,null,n({mutate:e}))}))})),z=(0,B.Ng)()((function(e){var n=e.children,i=e.dispatch,t=e.onCompleted,a=e.targetPostId;return l.createElement(L.s,{mutation:U,onCompleted:function(){i((0,j.MZ)({message:"Responses are now shown for this post."})),t&&t()},variables:{targetPostId:a,allowResponses:!0},optimisticResponse:{__typename:"Mutation",setPostAllowResponses:{__typename:"Post",id:a,allowResponses:!0}}},(function(e){return l.createElement(l.Fragment,null,n({mutate:e}))}))})),W=i(22036),Z=i(60603),q=function(e){var n=e.hidePopover,i=e.postId,t=e.allowResponses,a=(0,Z.e)(!1),d=(0,o.A)(a,3),r=d[0],s=d[1],m=d[2],c=function(){m(),n()};return l.createElement(l.Fragment,null,l.createElement(H,{targetPostId:i},(function(e){var n=e.mutate;return l.createElement(W.n,{onConfirm:n,isVisible:r,hide:c,entityTypename:"Post"})})),l.createElement(z,{targetPostId:i},(function(e){var n=e.mutate;return l.createElement(k.q3,null,l.createElement(v.N,{onClick:function(){t?s():n()}},t?"Hide responses":"Show responses"))})))},G=i(28899),K={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CollectionSubmissionPopoverQuery"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewer"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"writerCollections"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionSubmissionOption_collection"}}]}},{kind:"Field",name:{kind:"Name",value:"adminCollections"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionSubmissionOption_collection"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"collectionUrl_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CollectionAvatar_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"collectionUrl_collection"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CollectionSubmissionOption_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionAvatar_collection"}}]}}]},$=i(95420),Y=i(42976),J={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ManageCollectionPostStatusMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"status"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CollectionPostStatus"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"manageCollectionPostStatus"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"Argument",name:{kind:"Name",value:"collectionSlug"},value:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}}},{kind:"Argument",name:{kind:"Name",value:"status"},value:{kind:"Variable",name:{kind:"Name",value:"status"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"statusForCollection"}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ManageCollectionPostStatus_collection"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ManageCollectionPostStatus_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}}]},Q={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"RejectPostFromPubMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"status"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CollectionPostStatus"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"manageCollectionPostStatus"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"Argument",name:{kind:"Name",value:"collectionSlug"},value:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}}},{kind:"Argument",name:{kind:"Name",value:"status"},value:{kind:"Variable",name:{kind:"Name",value:"status"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"statusForCollection"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ManageCollectionPostStatus_collection"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ManageCollectionPostStatus_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}}]},X=function(e){var n=(0,$.n)(J),i=(0,o.A)(n,1)[0];return(0,l.useCallback)((function(n){return i({variables:{collectionSlug:(null==n?void 0:n.slug)||"",postId:e.id,status:Y.d6.APPROVED}})}),[e])},ee=function(e){var n=(0,$.n)(Q),i=(0,o.A)(n,1)[0];return(0,l.useCallback)((function(n){return i({variables:{collectionSlug:(null==n?void 0:n.slug)||"",postId:e.id,status:Y.d6.REMOVED},optimisticResponse:{manageCollectionPostStatus:{__typename:"Post",id:e.id,statusForCollection:null,collection:null,pendingCollection:null}}}).then((function(e){if(e.errors&&e.errors[0])throw e.errors[0];return e}))}),[e])},ne=i(75636),ie=i(3005),te=i(99731),ae=i(24960),le=i(53908),oe=i(56942),de=i(27622),re=i(66305),se=i(51260),me="collectionSubmissionPopover",ce=[{name:"",value:"No publication",content:l.createElement(p.a,{height:"32px",display:"flex",alignItems:"center",marginLeft:"5px"},l.createElement(f.kZ,{scale:"M",color:"DARKER"},"No publication"))}];function ue(e){var n=e.collection;return n.name?l.createElement(p.a,{display:"flex",justifyContent:"space-between",width:"200px",alignItems:"center",marginLeft:"5px"},l.createElement(f.kZ,{scale:"M",color:"DARKER"},n.name),l.createElement(G.u,{collection:n,size:32})):null}function ke(e){var n=e.show,i=e.post,t=i.statusForCollection,a=i.isPublished,d=l.useState(!1),r=(0,o.A)(d,2),s=r[0],m=r[1],c=(0,ne.z)({name:"enable_submissions_v2",placeholder:!1}),u=(0,se.Nw)("ShowPostSubmission",{postId:i.id});return s||re.R5.on("load",(function(){return m(!0)})),!t&&a&&s?l.createElement(pe,{post:i,noQueryReturn:null},(function(e){var t=e.loading,a=e.error,o=e.data;if(t||a)return null;var d=(void 0===o?{viewer:void 0}:o).viewer,r=i.creator;if(!d||!r||d.id!==r.id)return null;var s=d.adminCollections,m=d.writerCollections;return 0===s.length&&0===m.length?null:l.createElement(k.q3,null,c?l.createElement(v.N,{href:"".concat(u,"?redirectUrl=").concat(window.location.href)},"Submit to publication"):l.createElement(v.N,{"aria-controls":me,"aria-expanded":"false",onClick:n},"Add to publication"))})):null}function ve(e){var n=e.isVisible,i=e.hide;return l.createElement(ie.l,{isVisible:n,hide:i,withCloseButton:!0},l.createElement(p.a,{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",maxWidth:"480px"},l.createElement(oe.DZ,{scale:"M",tag:"h3"},"Story submitted"),l.createElement(p.a,{paddingTop:"8px",paddingBottom:"24px"},l.createElement(de.Pd,{scale:"M"},"We’ll email you when the publication editor has reviewed your submission.")),l.createElement(te.$n,{buttonStyle:"OBVIOUS",onClick:i},"OK")))}var pe=function(e){var n=e.children,i=e.post,t=e.noQueryReturn,a=i.creator,o=(0,C.R)().value,d=!o||o.id!==(null==a?void 0:a.id)||!a,r=(0,m.IT)(K,{ssr:!1,skip:d}),s=r.data,c=r.loading,u=r.error;return d?t:l.createElement(l.Fragment,null,n({loading:c,error:u,data:s}))},Ne=function(e){var n=e.post,i=e.hide,t=e.isVisible,a=e.children,d=l.useState(!1),r=(0,o.A)(d,2),s=r[0],m=r[1],c=l.useState(""),u=(0,o.A)(c,2),k=u[0],N=u[1],S=(0,Z.e)(!1),g=(0,o.A)(S,3),b=g[0],y=g[1],h=g[2],E=X(n),F=function(e){var n=(0,$.n)(J),i=(0,o.A)(n,1)[0];return(0,l.useCallback)((function(n){return i({variables:{collectionSlug:(null==n?void 0:n.slug)||"",postId:e.id,status:Y.d6.PENDING},optimisticResponse:{manageCollectionPostStatus:{__typename:"Post",id:e.id,statusForCollection:Y.d6.PENDING,pendingCollection:n}}})}),[e])}(n);return s||re.R5.on("load",(function(){return m(!0)})),n.isPublished&&s?l.createElement(l.Fragment,null,l.createElement(ve,{hide:h,isVisible:b}),l.createElement(pe,{post:n,noQueryReturn:a},(function(e){var o=e.loading,d=e.error,r=e.data,s=void 0===r?{viewer:void 0}:r;if(o||d)return l.createElement(l.Fragment,null,a);var m=s.viewer,c=n.creator;if(!m||!c||m.id!==c.id)return l.createElement(l.Fragment,null,a);var u=m.adminCollections,S=m.writerCollections;if(0===u.length&&0===S.length)return l.createElement(l.Fragment,null,a);var g=u.concat(S).filter((function(e){return!!e&&!!e.slug&&!!e.name})).map((function(e){return{name:e.slug||"",value:e.name||"",content:l.createElement(ue,{collection:e})}})),b=ce.concat(g),h=u.reduce((function(e,n){return e[n.slug||""]=n,e}),{}),C=S.reduce((function(e,n){return e[n.slug||""]=n,e}),{}),w="";if(k){var P=b.find((function(e){return e.name===k}));P&&(w=P.value)}var A="addStoryToPublicationTitle";return l.createElement(ae.A,{ariaId:me,hide:i,isVisible:t,popoverRenderFn:function(){return l.createElement(p.a,{padding:"20px",width:"280px",display:"flex",flexDirection:"column"},l.createElement(f.kZ,{scale:"M",color:"DARKER",labelledById:A},"Add your story to a publication:"),l.createElement(p.a,{marginTop:"10px",position:"relative"},l.createElement(p.a,{position:"absolute",height:"16px",width:"100%",bottom:"0",zIndex:"100",backgroundImage:"linear-gradient(transparent, #ffffff)"}),l.createElement(p.a,{maxHeight:"160px",overflow:"auto"},l.createElement(le.z,{value:w,onChange:N,options:b,radioButtonsName:"addStory","aria-labelledby":A}))),l.createElement(p.a,{display:"flex",marginTop:"20px"},k in h?l.createElement(te.$n,{onClick:function(){var e=h[k];i(),E(e).then((function(){window.location.reload()}))},buttonStyle:"OBVIOUS"},"Add story"):l.createElement(te.$n,{onClick:function(){var e=C[k];F(e),i(),y()},disabled:!k},"Submit"),l.createElement(p.a,{marginLeft:"10px"},l.createElement(f.kZ,{scale:"M",color:"LIGHTER"},l.createElement(v.N,{onClick:i},l.createElement(p.a,{padding:"10px"},"Cancel"))))),l.createElement(p.a,{marginTop:"10px"},l.createElement(f.kZ,{scale:"M"},"This story will be automatically submitted to the publication. When you submit your story, the publication's editors will be notified and will be able to edit your story.")))}},a)}))):l.createElement(l.Fragment,null,a)},Se=function(e){var n=e.children,i=e.isVisible,t=e.post,a=e.hide,o=X(t),d=ee(t),r=(0,A.w)(),s=t.pendingCollection;return s?l.createElement(ae.A,{ariaId:"manageSubmissionPopover",isVisible:i,hide:a,popoverRenderFn:function(){return l.createElement(p.a,{padding:"16px",maxWidth:"280px"},l.createElement(p.a,{display:"flex",flexDirection:"row",alignItems:"center"},l.createElement(p.a,{paddingRight:"8px"},l.createElement(G.u,{collection:s,size:40})),l.createElement(f.kZ,{scale:"S"},"This draft is submitted to ",s.name,".")),l.createElement(p.a,{flexDirection:"row",display:"flex",paddingTop:"16px"},l.createElement(p.a,{paddingRight:"8px"},l.createElement(te.$n,{buttonStyle:"OBVIOUS",onClick:function(){a(),o(t.pendingCollection).then((function(){window.location.reload()}))}},"Accept")),l.createElement(te.$n,{buttonStyle:"SUBTLE",onClick:function(){d(t.pendingCollection).then((function(){r((0,j.MZ)({message:"Story removed from ".concat(s.name||"publication")}))})),a()}},"Don't accept")))}},n):l.createElement(l.Fragment,null,n)},ge=function(e,n){return n&&e.creator&&n.id===e.creator.id},fe=i(86329),be="removeFromPublicationPopover",ye=function(e){var n,i,t=e.viewer,a=e.show,o=e.post,d=(0,fe.J)((null===(n=o.pendingCollection)||void 0===n?void 0:n.id)||(null===(i=o.collection)||void 0===i?void 0:i.id)).viewerEdge,r=null==d?void 0:d.isEditor;return t&&("APPROVED"===o.statusForCollection&&(r||function(e,n){var i=e.pendingCollection||e.collection;return i&&i.creator&&n.id===i.creator.id}(o,t)||ge(o,t))||"PENDING"===o.statusForCollection&&ge(o,t))?l.createElement(k.q3,null,l.createElement(v.N,{"aria-controls":be,"aria-expanded":"false",onClick:a},"Remove story from publication")):null},he=function(e){var n=e.children,i=e.isVisible,t=e.hide,a=e.post,o=e.viewer,d=(0,A.w)(),r=ee(a),s=a.collection||a.pendingCollection;return s?l.createElement(ae.A,{ariaId:be,isVisible:i,hide:t,popoverRenderFn:function(){return l.createElement(p.a,{padding:"16px",maxWidth:"280px"},l.createElement(p.a,{display:"flex",flexDirection:"row",alignItems:"center"},l.createElement(p.a,{paddingRight:"8px"},l.createElement(G.u,{collection:s,size:40})),"APPROVED"===a.statusForCollection?l.createElement(f.kZ,{scale:"S"},ge(a,o)?"Your":"This"," story is published in"," ",s.name,"."):"PENDING"===a.statusForCollection?l.createElement(f.kZ,{scale:"S"},"Your story is being reviewed by ",s.name," editors."):l.createElement(f.kZ,{scale:"S"},"This draft is submitted to ",s.name)),l.createElement(p.a,{flexDirection:"row",display:"flex",paddingTop:"16px"},l.createElement(p.a,{paddingRight:"8px"},l.createElement(te.$n,{buttonStyle:"SUBTLE",onClick:function(){r(s).then((function(){d((0,j.MZ)({message:"Story removed from ".concat(s.name||"publication")}))}),(function(){d((0,j.MZ)({message:"There was a problem removing the story from ".concat(s.name||"publication"),toastStyle:"ERROR"}))})),t()}},"PENDING"===a.statusForCollection?"Cancel submission":"Remove from ".concat(s.name||"")))))}},n):l.createElement(l.Fragment,null,n)},Ee=i(38714),Fe=i(89142),Ce=i(32038),we=i(19723),Pe=i(43634),Ae=i(59348),Ie=i(88308),De=i(21335),Te=i(71984),_e=i(17045),xe=function(e){var n=e.hidePopover,i=e.targetUserId,t=e.postId,a=e.viewerId,d=(0,De.cd)(i).viewerEdge,r=!(null==d||!d.isBlocking),s=(0,Z.e)(!1),m=(0,o.A)(s,3),c=m[0],u=m[1],p=m[2],N=(0,l.useCallback)((function(){p(),n()}),[n,p]),S=(0,_e.M)({viewerId:a,targetAuthorId:i,targetPostId:t,onOptimisticComplete:N});return l.createElement(l.Fragment,null,l.createElement(Te.e,{onSubmit:S,isVisible:c,hide:N,type:"story",alreadyBlocking:r}),l.createElement(k.q3,null,l.createElement(v.N,{onClick:u,color:"RED"},"Report story...")))},Oe=i(46445),Ve=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return function(){for(var e=0,i=n;e<i.length;e++)(0,i[e])()}},Re=i(46879),Me={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CreatorActionOverflowPopoverQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CreatorActionOverflowPopover_post"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MutePopoverOptions_creator"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"auroraHooks_publisher"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Publisher"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isAuroraEligible"}},{kind:"Field",name:{kind:"Name",value:"isAuroraVisible"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isEditor"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isAuroraVisible"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MutePopoverOptions_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"useIsPinnedInContext_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pinnedAt"}},{kind:"Field",name:{kind:"Name",value:"pinnedByCreatorAt"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"NewsletterV3EmailToSubscribersMenuItem_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"subscribersCount"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"isNewsletter"}},{kind:"Field",name:{kind:"Name",value:"isAuthorNewsletter"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MultiVoteCount_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ClapMutation_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MultiVoteCount_post"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"OverflowMenuItemUndoClaps_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ClapMutation_post"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SusiModal_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SusiClickable_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"mediumUrl"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SusiModal_post"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"AddToCatalogBase_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isPublished"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SusiClickable_post"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"useFeatureStoryInPub_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"publicationsFeaturingPost"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"isUserVerifiedBookAuthor_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"verifications"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isBookAuthor"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"collectionUrl_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CollectionAvatar_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"collectionUrl_collection"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"PostPreview_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"FragmentSpread",name:{kind:"Name",value:"isUserVerifiedBookAuthor_user"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionAvatar_collection"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"FeatureStoryModal_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"useFeatureStoryInPub_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostPreview_post"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"FeatureStoryMenuItem_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"useFeatureStoryInPub_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"FeatureStoryModal_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostPreview_post"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CreatorActionOverflowPopover_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"allowResponses"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"statusForCollection"}},{kind:"Field",name:{kind:"Name",value:"isLocked"}},{kind:"Field",name:{kind:"Name",value:"isPublished"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"Field",name:{kind:"Name",value:"pinnedAt"}},{kind:"Field",name:{kind:"Name",value:"pinnedByCreatorAt"}},{kind:"Field",name:{kind:"Name",value:"curationEligibleAt"}},{kind:"Field",name:{kind:"Name",value:"responseDistribution"}},{kind:"Field",name:{kind:"Name",value:"inResponseToPostResult"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"inResponseToCatalogResult"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MutePopoverOptions_creator"}},{kind:"FragmentSpread",name:{kind:"Name",value:"auroraHooks_publisher"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MutePopoverOptions_collection"}},{kind:"FragmentSpread",name:{kind:"Name",value:"auroraHooks_publisher"}}]}},{kind:"Field",name:{kind:"Name",value:"publicationsFeaturingPost"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"useIsPinnedInContext_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"NewsletterV3EmailToSubscribersMenuItem_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"OverflowMenuItemUndoClaps_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AddToCatalogBase_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"FeatureStoryMenuItem_post"}}]}}]};function Le(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function Be(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Le(Object(i),!0).forEach((function(n){(0,d.A)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Le(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var je,Ue=function(e){var n=(0,m.IT)(Me,{variables:{postId:e.post.id}}).data;if(null==n||!n.post)return null;var i=Be(Be({},e),{},{post:n.post});return l.createElement(He,i)},He=function(e){var n,i,a,d=e.post,r=e.hideUndoApplause,m=void 0!==r&&r,N=e.isResponsive,g=e.popoverPositioningStrategy,f=e.hideOnScroll,b=e.testId,y=e.prependMenuItems,F=e.rules,w=e.showAddToList,P=e.showHideHighlights,A=e.onButtonClick,D=d.creator,L=d.collection,B=(0,l.useState)(!1),U=(0,o.A)(B,2),H=U[0],z=U[1],W=(0,l.useState)(!1),G=(0,o.A)(W,2),K=G[0],$=G[1],J=(0,l.useState)(!1),Q=(0,o.A)(J,2),X=Q[0],ee=Q[1],ne=d.allowResponses,ie=(0,fe.J)(null==L?void 0:L.id).viewerEdge,te=(0,j.zF)(),le=(0,C.R)().value,oe=null==le?void 0:le.id,de=d.responseDistribution===Y.IZ.DISTRIBUTED,re=!!d.inResponseToPostResult||!!d.inResponseToCatalogResult,me=re?"response":"story",ce=(0,Fe.L)(d),ue=(0,o.A)(ce,2),ve=ue[0],pe=ue[1],ge=(0,Ee.M)(d.collection),be=(0,Ee.M)(d.creator),De=(0,l.useCallback)((function(e){var n,i,t;te({extraParams:{collectionName:(null===(n=d.collection)||void 0===n?void 0:n.name)||"",becamePinned:!(null===(i=e.data)||void 0===i||null===(t=i.setPinnedAt)||void 0===t||!t.pinnedAt)},toastStyle:"POST_PINNED_TO_COLLECTION_HOMEPAGE"})}),[null===(n=d.collection)||void 0===n?void 0:n.name]),Te=(0,l.useCallback)((function(e,n){var i;"MutationSuccess"===(null===(i=e.data)||void 0===i?void 0:i.setPostPinnedOnCreatorProfile.__typename)&&te({message:"This ".concat(me,n?" has been unpinned from your profile's homepage":" has been pinned to your profile's homepage")})}),[]),_e=(0,l.useCallback)((function(){pe().then(De)}),[pe,De,null==d||null===(i=d.collection)||void 0===i?void 0:i.name]),Me=(0,Fe.m)(d),Le=(0,o.A)(Me,2),Be=Le[0],je=Le[1],Ue=(0,l.useCallback)((function(){je().then((function(e){return Te(e,Be)}))}),[je,Te]),He=(0,I.d4)((function(e){return e.config.authDomain})),ze=(0,l.useState)(!1),We=(0,o.A)(ze,2),Ze=We[0],qe=We[1],Ge=(0,Z.e)(!1),Ke=(0,o.A)(Ge,3),$e=Ke[0],Ye=Ke[1],Je=Ke[2],Qe=(0,Z.e)(!1),Xe=(0,o.A)(Qe,4),en=Xe[0],nn=Xe[2],tn=Xe[3],an=(0,O.Q)(d.id),ln=(0,o.A)(an,1)[0],on=(0,Z.e)(!1),dn=(0,o.A)(on,3),rn=dn[0],sn=dn[1],mn=dn[2],cn=(0,l.useCallback)((function(){H?z(!1):K?$(!1):tn(),null==A||A()}),[H,K,tn,A]),un=(0,se.Nw)("ShowHome",{}),kn=(0,l.useCallback)((function(){ln().then((function(){window.location.href=un}))}),[ln,un]),vn="Delete story";de?vn="Delete story and response":re&&(vn="Delete response");var pn=de?Ce.e:l.createElement(c.C,{entityName:me}),Nn=(0,we._P)("can_edit_members_only_posts");if(!D||!le)return null;var Sn=oe===D.id,gn=null==ie?void 0:ie.isEditor,fn=Sn||gn,bn=Nn&&d&&d.isLocked,yn=fn||bn,hn="creatorActionOverflowMenu",En=gn&&!Sn,Fn=!re||de,Cn=L&&gn&&d.isPublished,wn=null==d?void 0:d.publicationsFeaturingPost.map((function(e){return e.id})),Pn=null!==(a=L&&wn.includes(L.id))&&void 0!==a&&a,An=function(){return{maxWidth:"280px"}},In=function(){de&&(nn(),Ye())};if(Ze)return l.createElement(R.r,{to:(0,Re.ycK)(He,d.id)});var Dn={kind:Y.Bd.POST,target:d};return l.createElement(l.Fragment,null,l.createElement(Oe.T,{buttonStyle:"STRONG",cancelText:"Cancel",isVisible:$e,onConfirm:function(){qe(!0)},hide:Je,titleText:"Edit story and response",confirmText:"Continue",isDestructiveAction:!1},Ce.T),l.createElement(Oe.T,{buttonStyle:"ERROR",cancelText:"Cancel",isVisible:rn,onConfirm:kn,hide:mn,titleText:vn,confirmText:"Delete",isDestructiveAction:!0,testId:"deleteStoryModal"},pn),l.createElement(_.f,(0,t.A)({},Dn,{viewer:le}),(function(e){var n=e.onClick,i=e.bookmarkIcon;return l.createElement(ae.A,{popoverRules:An,targetDistance:10,ariaId:hn,isVisible:en,hide:nn,positioningStrategy:g,hideOnScroll:f,popoverRenderFn:function(){return l.createElement(k.Ni,null,y&&l.createElement(l.Fragment,null,y(nn)),w&&l.createElement(S,{showAt:w,onClick:n,hidePopover:nn,bookmarkIcon:i}),l.createElement(l.Fragment,null,l.createElement(x.D,{type:"popover",handleClick:In,href:(0,Re.ycK)(He,d.id),isVisible:!!yn},"Edit ",me),Cn&&l.createElement(u.k,{post:d,hidePopover:nn,isFeaturedInCurrentPublication:Pn,showCollectionName:!0,showNewLabelOrTokenCount:!0}),L&&gn&&ge&&Fn&&l.createElement(k.q3,null,l.createElement(v.N,{onClick:_e,rules:{textAlign:"left"}},ve?"Unpin this ".concat(me," from "):"Pin this ".concat(me," to "),L.name)),Sn&&be&&Fn&&l.createElement(k.q3,null,l.createElement(v.N,{onClick:Ue},Be?"Unpin this ".concat(me," from your profile"):"Pin this ".concat(me," to your profile"))),l.createElement(M.z,{post:d,onClick:nn,menuStyle:"TEXT"}),l.createElement(k.eS,null),l.createElement(k.q3,null,l.createElement(v.N,{href:(0,Re.vEY)(He,d.id)},s()(me)," settings")),l.createElement(k.q3,null,l.createElement(v.N,{href:(0,Re.doj)(He,d.id)},s()(me)," stats")),l.createElement(k.eS,null),P&&l.createElement(h,{hidePopover:nn}),l.createElement(q,{hidePopover:nn,postId:d.id,allowResponses:ne}),l.createElement(ke,{post:d,show:function(){$(!0),nn()}}),l.createElement(ye,{viewer:le,post:d,show:function(){ee(!0),nn()}}),Sn&&l.createElement(k.q3,null,l.createElement(v.N,{onClick:Ve(nn,sn),color:"RED"},"Delete ",me)),En?l.createElement(l.Fragment,null,l.createElement(k.eS,null),!m&&l.createElement(T,{post:d,hidePopover:nn}),l.createElement(l.Fragment,null,oe?l.createElement(xe,{targetUserId:D.id,postId:d.id,hidePopover:nn,viewerId:oe}):l.createElement(k.q3,null,l.createElement(Pe.r,{operation:"register",post:d,susiEntry:"report_footer"},"Report this ",me))),l.createElement(V.J,{hidePopover:nn,creator:D,collection:L,postId:d.id}),l.createElement(Ae.U,{hidePopover:nn,creator:D,viewer:le}),l.createElement(Ie.U,{hidePopover:nn,creator:D,viewer:le})):null))}},l.createElement(Ne,{post:d,isVisible:K,hide:function(){$(!1)}},l.createElement(he,{viewer:le,post:d,isVisible:X,hide:function(){ee(!1)}},l.createElement(Se,{post:d,isVisible:H,hide:function(){z(!1)}},l.createElement(p.a,{flexGrow:"0",marginRight:"-4px"},l.createElement(E.Z,{ariaControls:hn,ariaExpanded:en?"true":"false",ariaLabel:"More options",onClick:function(){return cn()},isResponsive:N,tooltipText:"More",testId:b,rules:F}))))))})))},ze=i(49470);function We(){return We=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var t in i)({}).hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e},We.apply(null,arguments)}const Ze=function(e){return l.createElement("svg",We({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),je||(je=l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10m-13.75-.5a.5.5 0 0 0 0 1h7.5a.5.5 0 0 0 0-1z",clipRule:"evenodd"})))};var qe=i(43849),Ge=i(8963),Ke=i(34507),$e={pointerEvents:"none"};function Ye(e){var n=e.hidePopover,i=e.post,t=(0,Z.e)(!1),a=(0,o.A)(t,3),d=a[0],r=a[1],s=a[2],m=(0,Ke.K)(i.id),c=m.loading,u=m.showLess,N=m.explicitSignal,S=m.undo,g=m.showUndoToast,f=(0,qe.$)(),b=f.animateShowLess,y=f.animateUndo,h=N===Y.WN.SHOW_LESS,E=(0,l.useCallback)((function(){h?(S(),g(Y.WN.SHOW_LESS),n(),null==y||y()):(u(),b?(n(),b()):r())}),[u,n,h,S,g,b,y]),F=(0,l.useCallback)((function(){n(),s()}),[n,s]);return l.createElement(l.Fragment,null,l.createElement(k.q3,{loading:c},l.createElement(v.N,{onClick:E,disabled:c,rules:c?$e:void 0},l.createElement(p.a,{display:"flex"},l.createElement(p.a,{marginRight:"12px",flexShrink:"0"},h?l.createElement(Ze,null):l.createElement(ze.A,null)),l.createElement(p.a,{display:"flex",flexDirection:"column",marginTop:"2px",gap:"4px",textAlign:"left"},h?"Undo show":"Show"," less like this")))),l.createElement(k.eS,null),l.createElement(Ge.b,{isVisible:d,hide:F,post:i}))}var Je=i(20822),Qe=i(49287),Xe=i(52705);function en(e){var n=e.author,i=e.collection,t=e.hidePopover,a=(0,fe.J)(null==i?void 0:i.id).viewerEdge,o=(null==n?void 0:n.id)||"",d=(null==i?void 0:i.id)||"",r=null==a?void 0:a.isFollowing,s=(0,Je.H)({collectionId:d,collectionName:null==i?void 0:i.name}),m=s.followCollection,c=s.unfollowCollection,u=(0,Qe.jI)(),p=(0,C.R)().value,N=p&&o===p.id,S=(0,l.useCallback)((function(){r?c():m(),null==t||t()}),[d,r,m,t,u,c]);return p?l.createElement(l.Fragment,null,!!n&&!N&&l.createElement(k.q3,null,l.createElement(Xe.N,{scale:"S",susiEntry:"follow_post_preview_menu",user:n,isInline:!0,preventParentClick:!0,showSubscribeDialog:!0})),!!i&&!(null!=a&&a.isEditor)&&l.createElement(k.q3,null,l.createElement(v.N,{onClick:S},r?"Unfollow":"Follow"," publication"))):null}function nn(e){var n=e.post,i=e.isResponsive,a=e.popoverPositioningStrategy,d=e.viewer,r=e.hideOnScroll,s=e.testId,m=e.prependMenuItems,c=e.rules,u=e.showAddToList,v=e.showHideHighlights,p=e.onButtonClick,N=n.id,g=n.creator,f=n.collection,b=(0,Z.e)(!1),y=(0,o.A)(b,4),F=y[0],C=y[2],w=y[3],P=(0,l.useCallback)((function(){null==p||p(),w()}),[w,p]),A={kind:Y.Bd.POST,target:n},I=(0,l.useCallback)((function(e,i){return l.createElement(k.Ni,{width:"248px"},m&&l.createElement(l.Fragment,null,m(C)),u&&l.createElement(S,{showAt:u,onClick:e,hidePopover:C,bookmarkIcon:i}),l.createElement(Ye,{hidePopover:C,post:n}),v&&l.createElement(h,{hidePopover:C}),l.createElement(T,{post:n,hidePopover:C,showHideHighlights:v}),l.createElement(en,{author:g,collection:f,hidePopover:C}),l.createElement(k.eS,null),l.createElement(V.J,{creator:g,collection:f,hidePopover:C,postId:N}),l.createElement(xe,{postId:N,viewerId:null==d?void 0:d.id,targetUserId:(null==g?void 0:g.id)||"",hidePopover:C}))}),[m,u]);return null!=g&&g.id?l.createElement(_.f,(0,t.A)({},A,{viewer:d}),(function(e){var n=e.onClick,t=e.bookmarkIcon;return l.createElement(ae.A,{isVisible:F,positioningStrategy:a,targetDistance:10,hide:C,popoverRenderFn:function(){return I(n,t)},hideOnScroll:r},l.createElement(E.Z,{onClick:P,ariaLabel:"More options",isResponsive:i,tooltipText:"More",testId:s,rules:c}))})):null}var tn=["showAddToList"];function an(e){var n=e.showAddToList,i=(0,a.A)(e,tn),o=i.post,d=o.creator,r=o.collection,s=o.visibility,m=(0,C.R)(),c=m.loading,u=m.value,k=(0,fe.J)(null==r?void 0:r.id).viewerEdge,v=!c&&!!u,p=!(null==k||!k.isEditor),N=(null==u?void 0:u.id)===(null==d?void 0:d.id),S=s===Y.dL.UNLISTED?void 0:n;return d&&v?p||N?l.createElement(Ue,(0,t.A)({showAddToList:S},i)):l.createElement(nn,(0,t.A)({viewer:u,showAddToList:S},i)):null}},44929:(e,n,i)=>{i.d(n,{D:()=>v});var t=i(58168),a=i(80045),l=i(96540),o=i(14782),d=i(86527),r=i(99731),s=i(51260),m=i(65550),c=["size","href","children","handleClick","buttonStyle","type","isVisible"],u=["href","children","handleClick"],k=["handleClick","isVisible","children","href"],v=function(e){var n=e.size,i=e.href,o=e.children,d=e.handleClick,r=e.buttonStyle,u=e.type,k=e.isVisible,v=void 0===k||k,g=(0,a.A)(e,c),f=!(0,m.L)(),b=(0,s.IF)(),y=(0,s.au)(),h=(0,l.useCallback)((function(e){null==d||d(e)}),[d]);if(!v)return null;var E=b(new URL(i).pathname),F=null==E?void 0:E.params.postId,C=i;switch(f||(C=F?y("ShowMobileWebEditorRedirectEditStory",{postId:F}):y("ShowMobileWebEditorRedirectNewStory",{})),u){case"link":return l.createElement(p,(0,t.A)({href:C,handleClick:h},g),o);case"button":return l.createElement(S,{buttonStyle:r,size:n,href:C,handleClick:h},o);case"popover":return l.createElement(N,(0,t.A)({isVisible:v,href:C,handleClick:h},g),o)}},p=function(e){var n=e.href,i=e.children,o=e.handleClick,r=(0,a.A)(e,u);return l.createElement(d.N,(0,t.A)({href:n,onClick:o},r),i)},N=function(e){var n=e.handleClick,i=e.isVisible,d=void 0===i||i,r=e.children,s=e.href,m=(0,a.A)(e,k);return d?l.createElement(o.q3,null,l.createElement(p,(0,t.A)({href:s,handleClick:n},m),r)):null},S=function(e){var n=e.href,i=e.size,t=e.buttonStyle,a=e.children,o=e.handleClick;return l.createElement(r.$n,{buttonStyle:t,size:i,href:n,onClick:o},a)}},66356:(e,n,i)=>{i.d(n,{c:()=>m});var t=i(54499),a=i(43253),l=i(53303),o=i(55127),d=i.n(o),r=i(96540),s=i(91271);function m(e){var n=e.hasPrefix,i=void 0!==n&&n,o=e.timestamp,m=e.testId,c=e.isShorthand,u=e.isSameYearShorthand,k=e.includeMinutesAgo,v=Date.now(),p=(0,t.A)(v,o),N=(0,a.A)(v,o);if(0===N){var S=(0,l.A)(v,o);if(k&&S>0){var g="".concat(S," ").concat(d()("min",S)," ago");return r.createElement(r.Fragment,null,g)}var f=i?"just now":"Just now";return r.createElement(r.Fragment,null,f)}if(N>=1&&N<24){var b=c?"".concat(N,"h ago"):"".concat(N," ").concat(d()("hour",N)," ago");return r.createElement(r.Fragment,null,b)}if(p>=1&&p<7){var y=c?"".concat(p,"d ago"):"".concat(p," ").concat(d()("day",p)," ago");return r.createElement(r.Fragment,null,y)}return(0,s.n9)({timestamp:o,testId:m,isShorthand:c,isSameYearShorthand:u})}},83573:(e,n,i)=>{i.d(n,{s:()=>t});var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UserReportStoryMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetAuthorId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"alsoBlockAuthor"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"reason"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reportStoryAndMaybeBlockAuthor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}}},{kind:"Argument",name:{kind:"Name",value:"targetAuthorId"},value:{kind:"Variable",name:{kind:"Name",value:"targetAuthorId"}}},{kind:"Argument",name:{kind:"Name",value:"alsoBlockAuthor"},value:{kind:"Variable",name:{kind:"Name",value:"alsoBlockAuthor"}}},{kind:"Argument",name:{kind:"Name",value:"reason"},value:{kind:"Variable",name:{kind:"Name",value:"reason"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isBlocking"}}]}}]}}]}}]}},17045:(e,n,i)=>{i.d(n,{M:()=>s});var t=i(5544),a=i(95420),l=i(96540),o=i(34317),d=i(91830),r=i(83573);function s(e){var n=e.viewerId,i=e.targetAuthorId,s=e.targetPostId,m=e.onOptimisticComplete,c=(0,d.zF)(),u=(0,o.$L)(),k=(0,a.n)(r.s),v=(0,t.A)(k,1)[0];return(0,l.useCallback)((function(e,t){v({variables:{targetAuthorId:i,targetPostId:s,alsoBlockAuthor:e,reason:t},onCompleted:function(){c({message:"Successfully reported post."}),u.event("post.flagged",{postId:s,reason:t})},onError:function(){c({message:"Unable to report this story. Please try again later."})},optimisticResponse:{__typename:"Mutation",reportStoryAndMaybeBlockAuthor:{__typename:"User",id:i,viewerEdge:{__typename:"UserViewerEdge",id:"userId:".concat(i,"-viewerId:").concat(n),isBlocking:e}}}}),null==m||m()}),[v,n,i,s,m])}},4369:(e,n,i)=>{i.d(n,{z:()=>F});var t,a=i(64467),l=i(5544),o=i(95420),d=i(96540),r=i(52764),s=i(14782),m=i(52290),c=i(86527),u=i(46445),k=i(20036),v=i(36557),p=i(91830);function N(){return N=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var t in i)({}).hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e},N.apply(null,arguments)}const S=function(e){return d.createElement("svg",N({xmlns:"http://www.w3.org/2000/svg",width:20,height:16,viewBox:"0 0 20 16"},e),t||(t=d.createElement("path",{d:"M0 .353v15.294h20V.353zm6.948 9.374L10 12.226l3.052-2.499 4.877 4.73H2.071zm-5.75 3.913V5.02l4.82 3.946zm12.784-4.675 4.82-3.946v8.621zm4.82-7.421v1.933L10 10.682 1.198 3.477V1.544z"})))};var g=i(60603),f={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"NewsletterV3EmailToSubscribersMenuItem_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"subscribersCount"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"isNewsletter"}},{kind:"Field",name:{kind:"Name",value:"isAuthorNewsletter"}}]}}]},b={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SendPostAsEmailsMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sendPostAsEmails"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}]}]}}]};function y(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function h(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?y(Object(i),!0).forEach((function(n){(0,a.A)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):y(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}function E(e){var n=e.post,i=e.onClick,t=e.menuStyle,a=(0,g.e)(!1),r=(0,l.A)(a,3),s=r[0],N=r[1],y=r[2],E=(0,p.zF)(),F=function(){y(),i()},C=(0,o.n)(b,{variables:{postId:(null==n?void 0:n.id)||""},onCompleted:function(e){var n=e.sendPostAsEmails;E(n?{message:"Your story has been emailed to subscribers.",toastStyle:"MESSAGE",duration:2e3}:{message:"We couldn't process your request. Try again, or contact our support team.",toastStyle:"ERROR",duration:2e3})},update:function(e,i){var t={id:"Post:".concat(null==n?void 0:n.id),fragment:f,fragmentName:"NewsletterV3EmailToSubscribersMenuItem_post"},a=e.readFragment(t);i.data&&a&&e.writeFragment(h(h({},t),{},{data:h(h({},a),{},{isAuthorNewsletter:i.data.sendPostAsEmails})}))}}),w=(0,l.A)(C,1)[0];return d.createElement(d.Fragment,null,d.createElement(m.a,{display:"inline-block"},"TEXT"===t?d.createElement(v.kZ,{scale:"M"},d.createElement(c.N,{"data-testid":"emailToSubscribersMenuItem",onClick:function(){null!=n&&n.isAuthorNewsletter?(E({message:"You’ve already sent this story to subscribers.",toastStyle:"ERROR",duration:2e3}),i()):N()}},"Email to subscribers")):d.createElement(c.N,{"data-testid":"emailToSubscribersMenuItem",onClick:function(){null!=n&&n.isAuthorNewsletter?(E({message:"You’ve already sent this story to subscribers.",toastStyle:"ERROR",duration:2e3}),i()):N()}},d.createElement(k.u,{icon:d.createElement(S,{"aria-label":"Email to subscribers"}),tooltipText:"Email to subscribers"}))),d.createElement(u.T,{onConfirm:function(){w(),F()},isVisible:s,hide:F,titleText:"Email to subscribers",confirmText:"Send",buttonStyle:"STRONG",buttonSize:"LARGE",showCancelButton:!0,withCloseButton:!0,isDestructiveAction:!1},"A link to this story will be emailed to all your subscribers."))}function F(e){var n=e.post,i=e.onClick,t=e.menuStyle,a=e.paddingLeftRight,l=void 0===a?"20px":a;return d.createElement(r.c,null,(function(e){var a,o,r;return e&&e.id===(null==n||null===(a=n.creator)||void 0===a?void 0:a.id)&&(null==n||!n.isNewsletter)&&((null==n||null===(o=n.creator)||void 0===o||null===(r=o.newsletterV3)||void 0===r?void 0:r.subscribersCount)||0)>0?d.createElement(s.q3,{paddingTopBottom:"8px",paddingLeftRight:l},d.createElement(E,{post:n,onClick:i,menuStyle:t})):null}))}},69415:(e,n,i)=>{i.d(n,{g:()=>k,y:()=>v});var t=i(5544),a=i(57746),l=i(96540),o=i(34317),d=i(49287),r=i(91830),s=i(66973),m=(0,l.createContext)({areHighlightsHidden:!1,toggleHideHighlights:function(){return null}}),c=new s.A("post-view-settings"),u="hide-highlights";function k(e){var n=e.postId,i=e.children,s=(0,l.useState)(!!c.get(u)),k=(0,t.A)(s,2),v=k[0],p=k[1],N=(0,r.zF)(),S=(0,o.$L)(),g=(0,d.jI)(),f=(0,l.useCallback)((function(e){c.set(u,e),p(e),S.event("displaySettings.highlights_from_others",{showHighlights:!e,postId:n,source:g})}),[n,g]),b=(0,l.useCallback)((function(){f(!v),N({message:"Highlights from others are ".concat(v?"visible":"hidden"," for you"),toastStyle:"MESSAGE",extraParams:{onClickUndo:function(){return f(v)},hideCloseButton:!0}})}),[v]),y=(0,l.useMemo)((function(){return{areHighlightsHidden:v,toggleHideHighlights:b}}),[v,b]);return(0,l.useEffect)((function(){var e=function(e){(0,a.Ay)("mod+/",e)&&b()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[b]),l.createElement(m.Provider,{value:y},i)}var v=function(){return(0,l.useContext)(m)}},38714:(e,n,i)=>{i.d(n,{M:()=>t});var t=function(e){return!!e&&(e.isAuroraVisible||"Collection"===e.__typename&&e.isAuroraEligible&&e.viewerEdge.isEditor)}},89142:(e,n,i)=>{i.d(n,{L:()=>r,m:()=>s});var t=i(5544),a=i(95420),l=i(96540),o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SetPinnedAtMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pinnedAt"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"setPinnedAt"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"Argument",name:{kind:"Name",value:"targetCollectionId"},value:{kind:"Variable",name:{kind:"Name",value:"collectionId"}}},{kind:"Argument",name:{kind:"Name",value:"pinnedAt"},value:{kind:"Variable",name:{kind:"Name",value:"pinnedAt"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pinnedAt"}}]}}]}}]}}]},d={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PostSetPinnedByCreatorAtMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"isPinned"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setPostPinnedOnCreatorProfile"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"ObjectField",name:{kind:"Name",value:"isPinned"},value:{kind:"Variable",name:{kind:"Name",value:"isPinned"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}}]},r=function(e){var n=e.id,i=e.collection,d=e.pendingCollection,r=e.pinnedAt,s=(i||d||{id:""}).id,m=(0,a.n)(o,{optimisticResponse:{__typename:"Mutation",setPinnedAt:{__typename:"Post",id:n,collection:i,pendingCollection:d,pinnedAt:r?0:Date.now()}}}),c=(0,t.A)(m,1)[0],u=l.useCallback((function(){return c({variables:{postId:n,collectionId:s,pinnedAt:!r}})}),[n,s,r,c]);return[r,u]},s=function(e){var n=e.id,i=e.pinnedByCreatorAt,o=(0,a.n)(d,{optimisticResponse:{setPostPinnedOnCreatorProfile:{__typename:"MutationSuccess"}},update:function(e,t){var a;"MutationSuccess"===(null===(a=t.data)||void 0===a?void 0:a.setPostPinnedOnCreatorProfile.__typename)&&e.modify({id:"Post:".concat(n),fields:{pinnedByCreatorAt:function(){return i?0:Date.now()}}})}}),r=(0,t.A)(o,1)[0],s=l.useCallback((function(){return r({variables:{postId:n,isPinned:!i}})}),[n,r,i]);return[i,s]}},32038:(e,n,i)=>{i.d(n,{T:()=>a,e:()=>t});var t="This story is also a response to another story. Are you sure you want to delete this story?",a="This story is also a response to another story. Any edits are applied to both."},55981:(e,n,i)=>{i.d(n,{n:()=>d});var t=i(96540),a=i(44402),l=i(1417),o=function(e){return{"& path":{fill:e.colorTokens.foreground.error.primary.base}}},d=function(){var e=(0,a.l)();return t.createElement(l.A,{className:e(o)})}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/5660.6336e947.chunk.js.map