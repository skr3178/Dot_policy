/**
 * crisp-client
 * @version v2.17.0 71d3864
 * @author Crisp IM SAS
 * @date 8/11/2025
 */
(function(){try{var g={},t=new function(){var t,i,n,e,r,s,o;try{this.ns="CrispLibrary";var c={},a=g;function ai(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var e,r,s,o,c=[],a=!0,h=!1;try{if(s=(n=n.call(t)).next,0===i){if(Object(n)!==n)return;a=!1}else for(;!(a=(e=s.call(n)).done)&&(c.push(e.value),c.length!==i);a=!0);}catch(t){h=!0,r=t}finally{try{if(!a&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(h)throw r}}return c}}(t,i)||h(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hi(t,i){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=h(t))||i&&t&&"number"==typeof t.length){function e(){}n&&(t=n);var r=0;return{s:e,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw s}}}}function h(t,i){if(t){if("string"==typeof t)return u(t,i);var n={}.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,i):void 0}}function u(t,i){(null==i||i>t.length)&&(i=t.length);for(var n=0,e=Array(i);n<i;n++)e[n]=t[n];return e}function ui(t,i,n){return m(t,"symbol"!=typeof i?i+"":i,n),n}c.Console=((o={}).i="production",o.o="development"==o.i,o.c=void 0!==window.console,o.a=o.o&&o.c,o.h=function(t,i,n){},o.warn=function(t,i){o.a&&console.warn(t,i),o.h("warn",t,i)},o.error=function(t,i){o.a&&console.error(t,i),o.h("error",t,i)},o.info=function(t,i){o.a&&console.info(t,i),o.h("info",t,i)},o.log=function(t,i){o.a&&console.log(t,i),o.h("log",t,i)},o.debug=function(t,i){o.a&&(void 0!==console.debug?console.debug(t,i):console.log(t,i)),o.h("debug",t,i)},o.set_log_sink=function(t){if("function"!=typeof t)throw new Error("Invalid function");o.h=t},o),r=function(){return function e(r,s,o){function c(i,t){if(!s[i]){if(!r[i]){var n="function"==typeof require&&require;if(!t&&n)return n(i,!0);if(a)return a(i,!0);n=new Error("Cannot find module '"+i+"'");throw n.code="MODULE_NOT_FOUND",n}n=s[i]={exports:{}};r[i][0].call(n.exports,function(t){return c(r[i][1][t]||t)},n,n.exports,e,r,s,o)}return s[i].exports}for(var a="function"==typeof require&&require,t=0;t<o.length;t++)c(o[t]);return c}({1:[function(c,t,a){"use strict";function h(t){return null!=t&&""!==t}function u(i){return(Array.isArray(i)?i.map(u):i&&"object"==typeof i?Object.keys(i).filter(function(t){return i[t]}):[i]).filter(h).join(" ")}a.merge=function t(i,n){if(1===arguments.length){for(var e=i[0],r=1;r<i.length;r++)e=t(e,i[r]);return e}var s,o=i.class,c=n.class;for(s in(o||c)&&(o=o||[],c=c||[],Array.isArray(o)||(o=[o]),Array.isArray(c)||(c=[c]),i.class=o.concat(c).filter(h)),n)"class"!=s&&(i[s]=n[s]);return i},a.joinClasses=u,a.cls=function(t,i){for(var n=[],e=0;e<t.length;e++)i&&i[e]?n.push(a.escape(u([t[e]]))):n.push(u(t[e]));var r=u(n);return r.length?' class="'+r+'"':""},a.style=function(i){return i&&"object"==typeof i?Object.keys(i).map(function(t){return t+":"+i[t]}).join(";"):i},a.attr=function(t,i,n,e){return"boolean"==typeof(i="style"===t?a.style(i):i)||null==i?i?" "+(e?t:t+'="'+t+'"'):"":0==t.indexOf("data")&&"string"!=typeof i?" "+t+"='"+JSON.stringify(i).replace(/'/g,"&apos;")+"'":n?" "+t+'="'+a.escape(i)+'"':" "+t+'="'+i+'"'},a.attrs=function(t,i){var n=[],e=Object.keys(t);if(e.length)for(var r=0;r<e.length;++r){var s=e[r],o=t[s];"class"==s?(o=u(o))&&n.push(" "+s+'="'+o+'"'):n.push(a.attr(s,o,!1,i))}return n.join("")},a.escape=function(t){var i=String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");return i===""+t?t:i},a.rethrow=function i(n,t,e,r){if(!(n instanceof Error))throw n;if(!("undefined"==typeof window&&t||r))throw n.message+=" on line "+e,n;try{r=r||c("fs").readFileSync(t,"utf8")}catch(t){i(n,null,e)}var s=r.split("\n"),o=Math.max(e-3,0),r=Math.min(s.length,e+3),r=s.slice(o,r).map(function(t,i){i=i+o+1;return(i==e?"  > ":"    ")+i+"| "+t}).join("\n");throw n.path=t,n.message=(t||"Jade")+":"+e+"\n"+r+"\n\n"+n.message,n}},{fs:2}],2:[function(t,i,n){},{}]},{},[1])(1)},"object"==typeof __crisp_void_exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof __crisp_void_define&&define.amd?define([],r):(void 0!==c?s=c:"undefined"!=typeof global?s=global:"undefined"!=typeof self&&(s=self),s.jade=r());var l=Object.defineProperty,f=Object.defineProperties,v=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=function(t,i,n){return i in t?l(t,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[i]=n},li=function(t,i){for(var n in i=i||{})y.call(i,n)&&m(t,n,i[n]);if(d){var e,r=hi(d(i));try{for(r.s();!(e=r.n()).done;)n=e.value,p.call(i,n)&&m(t,n,i[n])}catch(t){r.e(t)}finally{r.f()}}return t},fi=function(t,i){return f(t,v(i))};c.PetiteVue=function(t){function c(t){if(k(t)){for(var i={},n=0;n<t.length;n++){var e=t[n],r=(d(e)?function(t){var i={};return t.split(o).forEach(function(t){!t||1<(t=t.split(a)).length&&(i[t[0].trim()]=t[1].trim())}),i}:c)(e);if(r)for(var s in r)i[s]=r[s]}return i}return d(t)||x(t)?t:void 0}var o=/;(?![^(]*\))/g,a=/:(.+)/;function y(t,i){if(t===i)return!0;var n=l(t),e=l(i);if(n||e)return!(!n||!e)&&t.getTime()===i.getTime();if(n=k(t),e=k(i),n||e)return!(!n||!e)&&function(t,i){if(t.length!==i.length)return!1;for(var n=!0,e=0;n&&e<t.length;e++)n=y(t[e],i[e]);return n}(t,i);if(n=x(t),e=x(i),n||e){if(!n||!e)return!1;if(Object.keys(t).length!==Object.keys(i).length)return!1;for(var r in t){var s=t.hasOwnProperty(r),o=i.hasOwnProperty(r);if(s&&!o||!s&&o||!y(t[r],i[r]))return!1}}return String(t)===String(i)}function p(t,i){return t.findIndex(function(t){return y(t,i)})}function h(t,i){return n.call(t,i)}function f(t){return"[object Map]"===w(t)}function u(t){return"symbol"==typeof t}function v(t){return d(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t}function i(i){var n=Object.create(null);return function(t){return n[t]||(n[t]=i(t))}}function m(t){var i=parseFloat(t);return isNaN(i)?t:i}var e=Object.assign,n=Object.prototype.hasOwnProperty,k=Array.isArray,l=function(t){return t instanceof Date},d=function(t){return"string"==typeof t},x=function(t){return null!==t&&"object"==typeof t},r=Object.prototype.toString,w=function(t){return r.call(t)},s=/-(\w)/g,g=i(function(t){return t.replace(s,function(t,i){return i?i.toUpperCase():""})}),b=/\B([A-Z])/g,_=i(function(t){return t.replace(b,"-$1").toLowerCase()});function F(t,i){i&&i.active&&i.effects.push(t)}var E,C=function(t){t=new Set(t);return t.w=0,t.n=0,t},j=function(t){return 0<(t.w&z)},A=function(t){return 0<(t.n&z)},$=new WeakMap,I=0,z=1,O=Symbol(""),S=Symbol(""),D=function(){function t(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length?arguments[2]:void 0;this.fn=t,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,F(this,n)}var i=t.prototype;return i.run=function(){if(!this.active)return this.fn();for(var t=E,i=q;t;){if(t===this)return;t=t.parent}try{return this.parent=E,q=!0,z=1<<++I,(I<=30?function(t){var i=t.deps;if(i.length)for(var n=0;n<i.length;n++)i[n].w|=z}:R)(E=this),this.fn()}finally{I<=30&&function(t){var i=t.deps;if(i.length){for(var n=0,e=0;e<i.length;e++){var r=i[e];j(r)&&!A(r)?r.delete(t):i[n++]=r,r.w&=~z,r.n&=~z}i.length=n}}(this),z=1<<--I,E=this.parent,q=i,this.parent=void 0}},i.stop=function(){this.active&&(R(this),this.onStop&&this.onStop(),this.active=!1)},t}();function R(t){var i=t.deps;if(i.length){for(var n=0;n<i.length;n++)i[n].delete(t);i.length=0}}function N(t){t.effect.stop()}var q=!0,B=[];function M(t,i,n){var e;q&&E&&((e=$.get(t))||$.set(t,e=new Map),(t=e.get(n))||e.set(n,t=C()),n=t,t=!1,I<=30?A(n)||(n.n|=z,t=!j(n)):t=!n.has(E),t&&(n.add(E),E.deps.push(n)))}function T(t,i,n,e,r,s){var o=$.get(t);if(o){var c=[];if("clear"===i)c=[...o.values()];else if("length"===n&&k(t))o.forEach(function(t,i){("length"===i||e<=i)&&c.push(t)});else switch(void 0!==n&&c.push(o.get(n)),i){case"add":k(t)?v(n)&&c.push(o.get("length")):(c.push(o.get(O)),f(t)&&c.push(o.get(S)));break;case"delete":k(t)||(c.push(o.get(O)),f(t)&&c.push(o.get(S)));break;case"set":f(t)&&c.push(o.get(O))}if(1===c.length)c[0]&&U(c[0]);else{var a,h=[],u=hi(c);try{for(u.s();!(a=u.n()).done;){var l=a.value;l&&h.push(...l)}}catch(t){u.e(t)}finally{u.f()}U(C(h))}}}function U(t,i){var n,e=hi(k(t)?t:[...t]);try{for(e.s();!(n=e.n()).done;){var r=n.value;r===E&&!r.allowRecurse||(r.scheduler?r.scheduler():r.run())}}catch(t){e.e(t)}finally{e.f()}}var P,L=function(t,i){for(var n=Object.create(null),e="__proto__,__v_isRef,__isVue".split(","),r=0;r<e.length;r++)n[e[r]]=!0;return function(t){return!!n[t]}}(),J=new Set(Object.getOwnPropertyNames(Symbol).map(function(t){return Symbol[t]}).filter(u)),W=G(),V=G(!0),H=(P={},["includes","indexOf","lastIndexOf"].forEach(function(c){P[c]=function(){for(var t=rt(this),i=0,n=this.length;i<n;i++)M(t,0,i+"");for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];var o=t[c](...r);return-1===o||!1===o?t[c](...r.map(rt)):o}}),["push","pop","shift","unshift","splice"].forEach(function(s){P[s]=function(){B.push(q),q=!1;for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];var e=rt(this)[s].apply(this,i),r=B.pop();return q=void 0===r||r,e}}),P);function G(){var r=0<arguments.length&&void 0!==arguments[0]&&arguments[0],s=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return function(t,i,n){if("__v_isReactive"===i)return!r;if("__v_isReadonly"===i)return r;if("__v_isShallow"===i)return s;if("__v_raw"===i&&n===(r?s?tt:Q:s?X:Z).get(t))return t;var e=k(t);if(!r&&e&&h(H,i))return Reflect.get(H,i,n);n=Reflect.get(t,i,n);return(u(i)?J.has(i):L(i))||(r||M(t,0,i),s)?n:st(n)?e&&v(i)?n:n.value:x(n)?r?nt(n,!0,Y,null,Q):it(n):n}}var K={get:W,set:function(){var c=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return function(t,i,n,e){var r=t[i];if(et(r)&&st(r)&&!st(n))return!1;if(!c&&!et(n)&&(n&&n.__v_isShallow||(n=rt(n),r=rt(r)),!k(t)&&st(r)&&!st(n)))return r.value=n,!0;var s=k(t)&&v(i)?Number(i)<t.length:h(t,i),o=Reflect.set(t,i,n,e);return t===rt(e)&&(s?(s=n,r=r,Object.is(s,r)||T(t,"set",i,n)):T(t,"add",i,n)),o}}(),deleteProperty:function(t,i){var n=h(t,i);t[i];var e=Reflect.deleteProperty(t,i);return e&&n&&T(t,"delete",i,void 0),e},has:function(t,i){var n=Reflect.has(t,i);return u(i)&&J.has(i)||M(t,0,i),n},ownKeys:function(t){return M(t,0,k(t)?"length":O),Reflect.ownKeys(t)}},Y={get:V,set:function(t,i){return!0},deleteProperty:function(t,i){return!0}},Z=new WeakMap,X=new WeakMap,Q=new WeakMap,tt=new WeakMap;function it(t){return et(t)?t:nt(t,!1,K,null,Z)}function nt(t,i,n,e,r){if(!x(t)||t.__v_raw&&(!i||!t.__v_isReactive))return t;i=r.get(t);if(i)return i;var s,i=(s=t).u||!Object.isExtensible(s)?0:function(t){switch(w(s).slice(8,-1)){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}();if(0===i)return t;n=new Proxy(t,2===i?e:n);return r.set(t,n),n}function et(t){return t&&t.__v_isReadonly}function rt(t){var i=t&&t.__v_raw;return i?rt(i):t}function st(t){return t&&!0===t.__v_isRef}function ot(t){return bt.then(t)}function ct(){for(var t=0,i=gt;t<i.length;t++)(0,i[t])();gt.length=0,wt=!1}function at(t){var e,r=t.el,s=t.get,i=t.effect,o=t.arg,c=t.modifiers;"class"===o&&(r.l=r.className),i(function(){var t=s();if(o)null!=c&&c.camel&&(o=g(o)),ht(r,o,t,e);else{for(var i in t)ht(r,i,t[i],e&&e[i]);for(var n in e)t&&n in t||ht(r,n,null)}e=t})}function ht(t,i,n,e){if("class"===i)t.setAttribute("class",function t(i){var n="";if(d(i))n=i;else if(k(i))for(var e=0;e<i.length;e++){var r=t(i[e]);r&&(n+=r+" ")}else if(x(i))for(var s in i)i[s]&&(n+=s+" ");return n.trim()}(t.l?[t.l,n]:n)||"");else if("style"===i){n=c(n);var r=t.style;if(n)if(d(n))n!==e&&(r.cssText=n);else{for(var s in n)Ft(r,s,n[s]);if(e&&!d(e))for(var o in e)null==n[o]&&Ft(r,o,"")}else t.removeAttribute("style")}else t instanceof SVGElement||!(i in t)||kt.test(i)?"true-value"===i?t._trueValue=n:"false-value"===i?t._falseValue=n:null!=n?t.setAttribute(i,n):t.removeAttribute(i):(t[i]=n,"value"===i&&(t._value=n))}function ut(t,i,n,e){t.addEventListener(i,n,e)}function lt(t){var i=t.el,n=t.get,e=t.exp,r=t.arg,s=t.ctx,o=t.modifiers;if(r){var c,a=function(t){Ct.test(e)?n("".concat(e))(t):(s.scope.$event=t,n("".concat(e)),delete s.scope.$event)};if("vue:mounted"!==r){if("vue:unmounted"===r)return function(){return a()};o&&("click"===r&&(o.right&&(r="contextmenu"),o.middle&&(r="mouseup")),c=a,a=function(t){if(!("key"in t)||_(t.key)in o){for(var i in o){i=At[i];if(i&&i(t,o))return}return c(t)}}),ut(i,r,a,o)}else ot(a)}}function ft(t){return null==t?"":x(t)?JSON.stringify(t,null,2):String(t)}function vt(t){return"_value"in t?t._value:t.value}function dt(t,i){var n=i?"_trueValue":"_falseValue";return n in t?t[n]:i}function yt(t){t.target.composing=!0}function pt(t){var i=t.target;i.composing&&(i.composing=!1,t=i,(i=document.createEvent("HTMLEvents")).initEvent("input",!0,!0),t.dispatchEvent(i))}function mt(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];throw console.error(i),"ERROR"}Promise.resolve();var wt=!1,gt=[],bt=Promise.resolve(),_t=function(t){gt.includes(t)||gt.push(t),wt||(wt=!0,ot(ct))},kt=/^(spellcheck|draggable|form|list|type)$/,xt=/\s*!important$/,Ft=function(i,n,t){k(t)?t.forEach(function(t){return Ft(i,n,t)}):n.startsWith("--")?i.setProperty(n,t):xt.test(t)?i.setProperty(_(n),t.replace(xt,""),"important"):i[n]=t},Et=function(t,i){var n=t.getAttribute(i);return null!=n&&t.removeAttribute(i),n},Ct=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,jt=["ctrl","shift","alt","meta"],At={stop:function(t){return t.stopPropagation()},prevent:function(t){return t.preventDefault()},self:function(t){return t.target!==t.currentTarget},ctrl:function(t){return!t.ctrlKey},shift:function(t){return!t.shiftKey},alt:function(t){return!t.altKey},meta:function(t){return!t.metaKey},left:function(t){return"button"in t&&0!==t.button},middle:function(t){return"button"in t&&1!==t.button},right:function(t){return"button"in t&&2!==t.button},exact:function(i,n){return jt.some(function(t){return i["".concat(t,"Key")]&&!n[t]})}},$t=function(t){var i=t.el,n=t.get;(0,t.effect)(function(){i.textContent=ft(n())})};({}).constructor.prototype.valueOf;var It={true:!0,false:!1,null:null,undefined:void 0},zt={};function Ot(){}"+ - * / % === !== == != < > <= >= && || ! =".split(" ").forEach(function(t){zt[t]=!0});var St={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'};function Dt(t,i){this.lexer=t,this.options=i}function Rt(t){return t.type===Dt.Identifier||t.type===Dt.MemberExpression}function Nt(){}function qt(t,i){this.ast=new Dt(t,i),this.astCompiler=new Nt}function Bt(t,i,n){try{return Lt(i)(t)}catch(t){console.error(t)}}function Mt(t,i){var n=t.nodeType;if(1===n){var e,r=t;if(!r.hasAttribute("v-pre")){if(Et(r,"v-cloak"),e=Et(r,"v-if"))return function(t,i,e){var r=t.parentElement,s=new Comment("v-if");r.insertBefore(s,t);for(var n,o,c=[{exp:i,el:t}];(n=t.nextElementSibling)&&(o=null,""===Et(n,"v-else")||(o=Et(n,"v-else-if")));)r.removeChild(n),c.push({exp:o,el:n});i=t.nextSibling;function a(){h&&(r.insertBefore(s,h.el),h.remove(),h=void 0)}r.removeChild(t);var h,u=-1;return e.effect(function(){for(var t=0;t<c.length;t++){var i=c[t],n=i.exp,i=i.el;if(!n||Jt(e.scope,n))return void(t!==u&&(a(),(h=new ci(i,e)).insert(r,s),r.removeChild(s),u=t))}u=-1,a()}),i}(r,e,i);if(e=Et(r,"v-for"))return Yt(r,e,i);!(e=Et(r,"v-scope"))&&""!==e||(s=e?Jt(i.scope,e):{},i=si(i,s),s.$template&&ri(r,s.$template));var s=null!=Et(r,"v-once");s&&(ti=!0),(e=Et(r,"ref"))&&ei(r,Zt,'"'.concat(e,'"'),i),ii(r,i);for(var o=[],c=0,a=[...r.attributes];c<a.length;c++){var h=a[c],u=h.name,h=h.value;Xt.test(u)&&"v-cloak"!==u&&("v-model"===u?o.unshift([u,h]):"@"===u[0]||/^v-on\b/.test(u)?o.push([u,h]):ni(r,u,h,i))}for(var l=0,f=o;l<f.length;l++){var v=ai(f[l],2),d=v[0],v=v[1];ni(r,d,v,i)}s&&(ti=!1)}}else if(3===n){var y=t.data;if(y.includes(i.delimiters[0])){for(var p,m=[],w=0;p=i.delimitersRE.exec(y);){var g=y.slice(w,p.index);g&&m.push(JSON.stringify(g)),m.push("$s(".concat(p[1],")")),w=p.index+p[0].length}w<y.length&&m.push(JSON.stringify(y.slice(w))),ei(t,$t,m.join("+"),i)}}else 11===n&&ii(t,i)}function Tt(t){var n=fi(li({delimiters:["{{","}}"],delimitersRE:/\{\{([^]+?)\}\}/g},t),{scope:t?t.scope:it({}),dirs:t?t.dirs:{},effects:[],blocks:[],cleanups:[],effect:function(t){if(ti)return _t(t),t;var i=function(t,i){t.effect&&(t=t.effect.fn);t=new D(t);e(t,i),i.scope&&F(t,i.scope),i.lazy||t.run();i=t.run.bind(t);return i.effect=t,i}(t,{scheduler:function(){return _t(i)}});return n.effects.push(i),i}});return n}function Ut(t){return t.replace(/[-.*+?^${}()|[\]\/\\]/g,"\\$&")}function Pt(t){var i,n,e=Tt();return t&&(e.scope=it(t),oi(e.scope),t.$delimiters)&&(t=(i=ai(e.delimiters=t.$delimiters,2))[0],i=i[1],e.delimitersRE=new RegExp(Ut(t)+"([^]+?)"+Ut(i),"g")),e.scope.$s=ft,e.scope.$nextTick=ot,e.scope.$refs=Object.create(null),{directive:function(t,i){return i?(e.dirs[t]=i,this):e.dirs[t]},mount:function(t){if("string"!=typeof t||(t=document.querySelector(t))){var i=(t=t||document.documentElement).hasAttribute("v-scope")?[t]:[...t.querySelectorAll("[v-scope]")].filter(function(t){return!t.matches("[v-scope] [v-scope]")});return i.length||(i=[t]),n=i.map(function(t){return new ci(t,e,!0)}),this}},unmount:function(){n.forEach(function(t){return t.teardown()})}}}Ot.prototype={constructor:Ot,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var i,n,e,r,s,o=this.text.charAt(this.index);'"'===o||"'"===o?this.readString(o):this.isNumber(o)||"."===o&&this.isNumber(this.peek())?this.readNumber():this.isIdentifierStart(this.peekMultichar())?this.readIdent():this.is(o,"(){}[].,;:?")?(this.tokens.push({index:this.index,text:o}),this.index++):this.isWhitespace(o)?this.index++:(n=(i=o+this.peek())+this.peek(2),e=zt[o],r=zt[i],s=zt[n],e||r||s?(this.tokens.push({index:this.index,text:o=s?n:r?i:o,operator:!0}),this.index+=o.length):this.throwError("Unexpected next character ",this.index,this.index+1))}return this.tokens},is:function(t,i){return-1!==i.indexOf(t)},peek:function(t){t=t||1;return this.index+t<this.text.length&&this.text.charAt(this.index+t)},isNumber:function(t){return"0"<=t&&t<="9"&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"\t"===t||"\n"===t||"\v"===t||" "===t},isIdentifierStart:function(t){return this.isValidIdentifierStart(t)},isValidIdentifierStart:function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"_"===t||"$"===t},isIdentifierContinue:function(t){return this.isValidIdentifierContinue(t)},isValidIdentifierContinue:function(t,i){return this.isValidIdentifierStart(t,i)||this.isNumber(t)},codePointAt:function(t){return 1===t.length?t.charCodeAt(0):(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888},peekMultichar:function(){var t=this.text.charAt(this.index),i=this.peek();if(!i)return t;var n=t.charCodeAt(0),e=i.charCodeAt(0);return 55296<=n&&n<=56319&&56320<=e&&e<=57343?t+i:t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,i,n){throw n=n||this.index,mt("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,void 0!==i?"s "+i+"-"+this.index+" ["+this.text.substring(i,n)+"]":" "+n,this.text)},readNumber:function(){for(var t="",i=this.index;this.index<this.text.length;){var n=this.text.charAt(this.index).toLowerCase();if("."===n||this.isNumber(n))t+=n;else{var e=this.peek();if("e"===n&&this.isExpOperator(e))t+=n;else if(this.isExpOperator(n)&&e&&this.isNumber(e)&&"e"===t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||e&&this.isNumber(e)||"e"!==t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:i,text:t,constant:!0,value:Number(t)})},readIdent:function(){var t=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var i=this.peekMultichar();if(!this.isIdentifierContinue(i))break;this.index+=i.length}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var i=this.index;this.index++;for(var n="",e=t,r=!1;this.index<this.text.length;){var s,o=this.text.charAt(this.index);if(e+=o,r)"u"===o?((s=this.text.substring(this.index+1,this.index+5)).match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+s+"]"),this.index+=4,n+=String.fromCharCode(parseInt(s,16))):n+=St[o]||o,r=!1;else if("\\"===o)r=!0;else{if(o===t)return this.index++,void this.tokens.push({index:i,text:e,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",i)}},Dt.Program="Program",Dt.ExpressionStatement="ExpressionStatement",Dt.AssignmentExpression="AssignmentExpression",Dt.ConditionalExpression="ConditionalExpression",Dt.LogicalExpression="LogicalExpression",Dt.BinaryExpression="BinaryExpression",Dt.UnaryExpression="UnaryExpression",Dt.CallExpression="CallExpression",Dt.MemberExpression="MemberExpression",Dt.Identifier="Identifier",Dt.Literal="Literal",Dt.ArrayExpression="ArrayExpression",Dt.Property="Property",Dt.ObjectExpression="ObjectExpression",Dt.ThisExpression="ThisExpression",Dt.LocalsExpression="LocalsExpression",Dt.NGValueParameter="NGValueParameter",Dt.prototype={ast:function(t){this.text=t,this.tokens=this.lexer.lex(t);t=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t},program:function(){for(var t=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:Dt.Program,body:t}},expressionStatement:function(){return{type:Dt.ExpressionStatement,expression:this.expression()}},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();if(this.expect("=")){if(!Rt(t))throw mt("lval","Trying to assign a value to a non l-value");t={type:Dt.AssignmentExpression,left:t,right:this.assignment(),operator:"="}}return t},ternary:function(){var t,i,n=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?(i=this.expression(),{type:Dt.ConditionalExpression,test:n,alternate:t,consequent:i}):n},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:Dt.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:Dt.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t,i=this.relational();t=this.expect("==","!=","===","!==");)i={type:Dt.BinaryExpression,operator:t.text,left:i,right:this.relational()};return i},relational:function(){for(var t,i=this.additive();t=this.expect("<",">","<=",">=");)i={type:Dt.BinaryExpression,operator:t.text,left:i,right:this.additive()};return i},additive:function(){for(var t,i=this.multiplicative();t=this.expect("+","-");)i={type:Dt.BinaryExpression,operator:t.text,left:i,right:this.multiplicative()};return i},multiplicative:function(){for(var t,i=this.unary();t=this.expect("*","/","%");)i={type:Dt.BinaryExpression,operator:t.text,left:i,right:this.unary()};return i},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:Dt.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t,i;for(this.expect("(")?(t=this.expression(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?t=Object.assign({},this.selfReferential[this.consume().text]):It.hasOwnProperty(this.peek().text)?t={type:Dt.Literal,value:It[this.consume().text]}:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());i=this.expect("(","[",".");)"("===i.text?(t={type:Dt.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):"["===i.text?(t={type:Dt.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):"."===i.text?t={type:Dt.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},parseArguments:function(){var t=[];if(")"!==this.peekToken().text)for(;t.push(this.expression()),this.expect(","););return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:Dt.Identifier,name:t.text}},constant:function(){return{type:Dt.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)for(;!this.peek("]")&&(t.push(this.expression()),this.expect(",")););return this.consume("]"),{type:Dt.ArrayExpression,elements:t}},object:function(){var t,i=[];if("}"!==this.peekToken().text)for(;!this.peek("}")&&(t={type:Dt.Property,kind:"init"},this.peek().constant?(t.key=this.constant(),t.computed=!1,this.consume(":"),t.value=this.expression()):this.peek().identifier?(t.key=this.identifier(),t.computed=!1,this.peek(":")?(this.consume(":"),t.value=this.expression()):t.value=t.key):this.peek("[")?(this.consume("["),t.key=this.expression(),this.consume("]"),t.computed=!0,this.consume(":"),t.value=this.expression()):this.throwError("invalid key",this.peek()),i.push(t),this.expect(",")););return this.consume("}"),{type:Dt.ObjectExpression,properties:i}},throwError:function(t,i){throw mt("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",i.text,t,i.index+1,this.text,this.text.substring(i.index))},consume:function(t){if(0===this.tokens.length)throw mt("ueoe","Unexpected end of expression: {0}",this.text);var i=this.expect(t);return i||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),i},peekToken:function(){if(0===this.tokens.length)throw mt("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,i,n,e){return this.peekAhead(0,t,i,n,e)},peekAhead:function(t,i,n,e,r){if(this.tokens.length>t){var s=this.tokens[t],t=s.text;if(t===i||t===n||t===e||t===r||!i&&!n&&!e&&!r)return s}return!1},expect:function(t,i,n,e){e=this.peek(t,i,n,e);return!!e&&(this.tokens.shift(),e)},selfReferential:{this:{type:Dt.ThisExpression},$locals:{type:Dt.LocalsExpression}}},Nt.prototype={compile:function(i){var e,r=this;(function i(t,n){var e,r,s=t.isPure=function(t,i){switch(t.type){case Dt.MemberExpression:if(t.computed)return!1;break;case Dt.UnaryExpression:return 1;case Dt.BinaryExpression:return"+"!==t.operator&&1;case Dt.CallExpression:return!1}return void 0===i?2:i}(t,n);switch(t.type){case Dt.Program:e=!0,t.body.forEach(function(t){i(t.expression,s),e=e&&t.expression.constant}),t.constant=e;break;case Dt.Literal:t.constant=!0,t.toWatch=[];break;case Dt.UnaryExpression:i(t.argument,s),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case Dt.BinaryExpression:i(t.left,s),i(t.right,s),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case Dt.LogicalExpression:i(t.left,s),i(t.right,s),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case Dt.ConditionalExpression:i(t.test,s),i(t.alternate,s),i(t.consequent,s),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case Dt.Identifier:t.constant=!1,t.toWatch=[t];break;case Dt.MemberExpression:i(t.object,s),t.computed&&i(t.property,s),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=t.constant?[]:[t];break;case Dt.CallExpression:e=!1,r=[],t.arguments.forEach(function(t){i(t,s),e=e&&t.constant,r.push.apply(r,t.toWatch)}),t.constant=e,t.toWatch=[t];break;case Dt.AssignmentExpression:i(t.left,s),i(t.right,s),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case Dt.ArrayExpression:e=!0,r=[],t.elements.forEach(function(t){i(t,s),e=e&&t.constant,r.push.apply(r,t.toWatch)}),t.constant=e,t.toWatch=r;break;case Dt.ObjectExpression:e=!0,r=[],t.properties.forEach(function(t){i(t.value,s),e=e&&t.value.constant,r.push.apply(r,t.value.toWatch),t.computed&&(i(t.key,!1),e=e&&t.key.constant,r.push.apply(r,t.key.toWatch))}),t.constant=e,t.toWatch=r;break;case Dt.ThisExpression:case Dt.LocalsExpression:t.constant=!1,t.toWatch=[]}})(i),(t=function(t){if(1===i.body.length&&Rt(i.body[0].expression))return{type:Dt.AssignmentExpression,left:i.body[0].expression,right:{type:Dt.NGValueParameter},operator:"="}}())&&(e=this.recurse(t));var s,t=function(t){if(1===t.length){var i=t[0].expression,t=i.toWatch;return 1!==t.length||t[0]!==i?t:void 0}}(i.body);t&&(s=[],t.forEach(function(t,i){var n=r.recurse(t);n.isPure=t.isPure,t.input=n,s.push(n),t.watchId=i}));var o=[];i.body.forEach(function(t){o.push(r.recurse(t.expression))});t=0===i.body.length?noop:1===i.body.length?o[0]:function(i,n){var e;return o.forEach(function(t){e=t(i,n)}),e};return e&&(t.assign=function(t,i,n){return e(t,n,i)}),s&&(t.inputs=s),t},recurse:function(t,a,i){var s,h,u,n=this;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case Dt.Literal:return this.value(t.value,a);case Dt.UnaryExpression:return h=this.recurse(t.argument),this["unary"+t.operator](h,a);case Dt.BinaryExpression:case Dt.LogicalExpression:return s=this.recurse(t.left),h=this.recurse(t.right),this["binary"+t.operator](s,h,a);case Dt.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),a);case Dt.Identifier:return n.identifier(t.name,a,i);case Dt.MemberExpression:return s=this.recurse(t.object,!1,!!i),t.computed||(h=t.property.name),t.computed&&(h=this.recurse(t.property)),t.computed?this.computedMember(s,h,a,i):this.nonComputedMember(s,h,a,i);case Dt.CallExpression:return u=[],t.arguments.forEach(function(t){u.push(n.recurse(t))}),h=this.recurse(t.callee,!0),function(t,i,n,e){var r,s=h(t,i,n,e);if(null!=s.value){for(var o=[],c=0;c<u.length;++c)o.push(u[c](t,i,n,e));r=s.value.apply(s.context,o)}return a?{value:r}:r};case Dt.AssignmentExpression:return s=this.recurse(t.left,!0,1),h=this.recurse(t.right),function(t,i,n,e){var r=s(t,i,n,e),e=h(t,i,n,e);return r.context[r.name]=e,a?{value:e}:e};case Dt.ArrayExpression:return u=[],t.elements.forEach(function(t){u.push(n.recurse(t))}),function(t,i,n,e){for(var r=[],s=0;s<u.length;++s)r.push(u[s](t,i,n,e));return a?{value:r}:r};case Dt.ObjectExpression:return u=[],t.properties.forEach(function(t){t.computed?u.push({key:n.recurse(t.key),computed:!0,value:n.recurse(t.value)}):u.push({key:t.key.type===Dt.Identifier?t.key.name:""+t.key.value,computed:!1,value:n.recurse(t.value)})}),function(t,i,n,e){for(var r={},s=0;s<u.length;++s)u[s].computed?r[u[s].key(t,i,n,e)]=u[s].value(t,i,n,e):r[u[s].key]=u[s].value(t,i,n,e);return a?{value:r}:r};case Dt.ThisExpression:return function(t){return a?{value:t}:t};case Dt.LocalsExpression:return function(t,i){return a?{value:i}:i};case Dt.NGValueParameter:return function(t,i,n){return a?{value:n}:n}}},"unary+":function(r,s){return function(t,i,n,e){e=void 0!==(e=r(t,i,n,e))?+e:0;return s?{value:e}:e}},"unary-":function(r,s){return function(t,i,n,e){e=void 0!==(e=r(t,i,n,e))?-e:-0;return s?{value:e}:e}},"unary!":function(r,s){return function(t,i,n,e){e=!r(t,i,n,e);return s?{value:e}:e}},"binary+":function(s,o,c){return function(t,i,n,e){var r,e=(r=s(t,i,n,e),e=o(t,i,n,e),void 0===r?e:void 0===e?r:r+e);return c?{value:e}:e}},"binary-":function(s,o,c){return function(t,i,n,e){var r=s(t,i,n,e),e=o(t,i,n,e),e=(void 0!==r?r:0)-(void 0!==e?e:0);return c?{value:e}:e}},"binary*":function(r,s,o){return function(t,i,n,e){e=r(t,i,n,e)*s(t,i,n,e);return o?{value:e}:e}},"binary/":function(r,s,o){return function(t,i,n,e){e=r(t,i,n,e)/s(t,i,n,e);return o?{value:e}:e}},"binary%":function(r,s,o){return function(t,i,n,e){e=r(t,i,n,e)%s(t,i,n,e);return o?{value:e}:e}},"binary===":function(r,s,o){return function(t,i,n,e){e=r(t,i,n,e)===s(t,i,n,e);return o?{value:e}:e}},"binary!==":function(r,s,o){return function(t,i,n,e){e=r(t,i,n,e)!==s(t,i,n,e);return o?{value:e}:e}},"binary==":function(r,s,o){return function(t,i,n,e){e=r(t,i,n,e)==s(t,i,n,e);return o?{value:e}:e}},"binary!=":function(r,s,o){return function(t,i,n,e){e=r(t,i,n,e)!=s(t,i,n,e);return o?{value:e}:e}},"binary<":function(r,s,o){return function(t,i,n,e){e=r(t,i,n,e)<s(t,i,n,e);return o?{value:e}:e}},"binary>":function(r,s,o){return function(t,i,n,e){e=r(t,i,n,e)>s(t,i,n,e);return o?{value:e}:e}},"binary<=":function(r,s,o){return function(t,i,n,e){e=r(t,i,n,e)<=s(t,i,n,e);return o?{value:e}:e}},"binary>=":function(r,s,o){return function(t,i,n,e){e=r(t,i,n,e)>=s(t,i,n,e);return o?{value:e}:e}},"binary&&":function(r,s,o){return function(t,i,n,e){e=r(t,i,n,e)&&s(t,i,n,e);return o?{value:e}:e}},"binary||":function(r,s,o){return function(t,i,n,e){e=r(t,i,n,e)||s(t,i,n,e);return o?{value:e}:e}},"ternary?:":function(r,s,o,c){return function(t,i,n,e){e=(r(t,i,n,e)?s:o)(t,i,n,e);return c?{value:e}:e}},value:function(t,i){return function(){return i?{context:void 0,name:void 0,value:t}:t}},identifier:function(r,s,o){return function(t,i,n,e){i=i&&r in i?i:t;o&&1!==o&&i&&null==i[r]&&(i[r]={});t=i?i[r]:void 0;return s?{context:i,name:r,value:t}:t}},computedMember:function(c,a,h,u){return function(t,i,n,e){var r,s,o=c(t,i,n,e);return null!=o&&(r=a(t,i,n,e),r+="",u&&1!==u&&o&&!o[r]&&(o[r]={}),s=o[r]),h?{context:o,name:r,value:s}:s}},nonComputedMember:function(r,s,o,c){return function(t,i,n,e){n=r(t,i,n,e);c&&1!==c&&n&&null==n[s]&&(n[s]={});e=null!=n?n[s]:void 0;return o?{context:n,name:s,value:e}:e}},inputs:function(r,s){return function(t,i,n,e){return e?e[s]:r(t,i,n)}}};var Lt=new function(){var e={};return function(t,i){var n;return t=t.trim(),(n=e[t])?n:new qt(new Ot).parse(t)}},Jt=function(t,i,n){return Bt(t,i)},Wt={bind:at,on:lt,show:function(t){var i=t.el,n=t.get,t=t.effect,e=i.style.display;t(function(){i.style.display=n()?e:"none"})},text:$t,html:function(t){var i=t.el,n=t.get;(0,t.effect)(function(){i.innerHTML=n()})},model:function(t){function s(t){t=(t=t.replace(u,"\\\\")).replace(l,'\\"');a("".concat(e,' = "').concat(t,'"'))}var o,i,n,c=t.el,e=t.exp,a=t.get,r=t.effect,h=t.modifiers,u=/\\/g,l=/"/g,f=c.type,t=h||{},v=t.trim,t=t.number,d=void 0===t?"number"===f:t;"SELECT"===c.tagName?(ut(o=c,"change",function(){var t=Array.prototype.filter.call(o.options,function(t){return t.selected}).map(function(t){return d?m(vt(t)):vt(t)});s(o.multiple?t:t[0])}),r(function(){for(var t=a(),i=o.multiple,n=0,e=o.options.length;n<e;n++){var r=o.options[n],s=vt(r);if(i)k(t)?r.selected=-1<p(t,s):r.selected=t.has(s);else if(y(vt(r),t))return void(o.selectedIndex!==n&&(o.selectedIndex=n))}i||-1===o.selectedIndex||(o.selectedIndex=-1)})):"checkbox"===f?(ut(c,"change",function(){var t,i,n,e=a(),r=c.checked;k(e)?(n=-1!==(i=p(e,t=vt(c))),r&&!n?s(e.concat(t)):!r&&n&&((e=[...e]).splice(i,1),s(e))):s(dt(c,r))}),r(function(){var t=a();k(t)?c.checked=-1<p(t,vt(c)):t!==i&&(c.checked=y(t,dt(c,!0))),i=t})):"radio"===f?(ut(c,"change",function(){s(vt(c))}),r(function(){var t=a();void 0!==t&&(c.checked=y(t,vt(c)))})):(n=function(t){return v?t.trim():d?m(t):t},ut(c,"compositionstart",yt),ut(c,"compositionend",pt),ut(c,null!=h&&h.lazy?"change":"input",function(){c.composing||s(n(c.value))}),v&&ut(c,"change",function(){c.value=c.value.trim()}),r(function(){var t,i;c.composing||(t=c.value,i=a(),document.activeElement===c&&n(t)===i||t!==i&&(c.value=i))}))},effect:function(t){t.el;var i=t.ctx,n=t.exp,e=t.effect;ot(function(){return e(function(){return Bt(i.scope,n)})})}},Vt=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,Ht=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Gt=/^\(|\)$/g,Kt=/^[{[]\s*((?:[\w_$]+\s*,?\s*)+)[\]}]$/,Yt=function(e,t,u){var i=t.match(Vt);if(i){var t=e.nextSibling,l=e.parentElement,f=new Text("");l.insertBefore(f,e),l.removeChild(e);var o,c,a,v=i[2].trim(),h=i[1].trim().replace(Gt,"").trim(),d=!1,i="key",y=e.getAttribute(i)||e.getAttribute(i=":key")||e.getAttribute(i="v-bind:key");function p(t,n,i,e){var r={};o?o.forEach(function(t,i){return r[t]=n[d?i:t]}):r[h]=n,e?(c&&(r[c]=e),a&&(r[a]=i)):c&&(r[c]=i);var s=si(u,r),e=y?Jt(s.scope,y):i;return t.set(e,i),s.key=e,s}function m(t,i){var n=new ci(e,t);return n.key=t.key,n.insert(l,i),n}y&&(e.removeAttribute(i),"key"===i&&(y=JSON.stringify(y))),(i=h.match(Ht))&&(h=h.replace(Ht,"").trim(),c=i[1].trim(),i[2]&&(a=i[2].trim())),(i=h.match(Kt))&&(o=i[1].split(",").map(function(t){return t.trim()}),d="["===h[0]);var w,g,b,_=!1;return u.effect(function(){var t=Jt(u.scope,v),i=b,t=ai(function(t){var i=new Map,n=[];if(k(t))for(var e=0;e<t.length;e++)n.push(p(i,t[e],e));else if("number"==typeof t)for(var r=0;r<t;r++)n.push(p(i,r+1,r));else if(x(t)){var s,o=0;for(s in t)n.push(p(i,t[s],o++,s))}return[n,i]}(t),2);if(g=t[0],b=t[1],_){for(var n=0;n<w.length;n++)b.has(w[n].key)||w[n].remove();for(var e,r,s=[],o=g.length;o--;){var c=g[o],a=i.get(c.key),h=void 0;null==a?h=m(c,e?e.el:f):(h=w[a],Object.assign(h.ctx.scope,c.scope),a===o||w[a+1]===e&&r!==e||(r=h).insert(l,e?e.el:f)),s.unshift(e=h)}w=s}else w=g.map(function(t){return m(t,f)}),_=!0}),t}},Zt=function(t){var i,n=t.el,e=t.ctx.scope.$refs,r=t.get;return(0,t.effect)(function(){var t=r();e[t]=n,i&&t!==i&&delete e[i],i=t}),function(){i&&delete e[i]}},Xt=/^(?:v-|:|@)/,Qt=/\.([\w-]+)/g,ti=!(qt.prototype={constructor:qt,parse:function(t){var i=this.getAst(t),n=this.astCompiler.compile(i.ast);return n.literal=0===(t=i.ast).body.length||1===t.body.length&&(t.body[0].expression.type===Dt.Literal||t.body[0].expression.type===Dt.ArrayExpression||t.body[0].expression.type===Dt.ObjectExpression),n.constant=i.ast.constant,n.oneTime=i.oneTime,n},getAst:function(t){var i=!1;return":"===(t=t.trim()).charAt(0)&&":"===t.charAt(1)&&(i=!0,t=t.substring(2)),{ast:this.ast.ast(t),oneTime:i}}}),ii=function(t,i){for(var n=t.firstChild;n;)n=Mt(n,i)||n.nextSibling},ni=function(t,i,n,e){var r,s,o,c=i.replace(Qt,function(t,i){return(r=r||{})[i]=!0,""}),a=":"===c[0]?(o=at,c.slice(1)):"@"===c[0]?(o=lt,c.slice(1)):(s=0<(a=c.indexOf(":"))?c.slice(2,a):c.slice(2),o=Wt[s]||e.dirs[s],0<a?c.slice(a+1):void 0);o&&(ei(t,o=o===at&&"ref"===a?Zt:o,n,e,a,r),t.removeAttribute(i))},ei=function(t,i,n,e,r,s){s=i({el:t,get:function(){return Jt(e.scope,0<arguments.length&&void 0!==arguments[0]?arguments[0]:n)},effect:e.effect,ctx:e,exp:n,arg:r,modifiers:s});s&&e.cleanups.push(s)},ri=function(t,i){"#"!==i[0]?t.innerHTML=i:(i=document.querySelector(i),t.appendChild(i.content.cloneNode(!0)))},si=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=t.scope,n=Object.create(r);Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)),n.$refs=Object.create(r.$refs);var s=it(new Proxy(n,{set:function(t,i,n,e){return e!==s||t.hasOwnProperty(i)?Reflect.set(t,i,n,e):Reflect.set(r,i,n)}}));return oi(s),fi(li({},t),{scope:s})},oi=function(t){for(var i=0,n=Object.keys(t);i<n.length;i++){var e=n[i];"function"==typeof t[e]&&(t[e]=t[e].bind(t))}},ci=function(){function t(t,i){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];ui(this,"template"),ui(this,"ctx"),ui(this,"key"),ui(this,"parentCtx"),ui(this,"isFragment"),ui(this,"start"),ui(this,"end"),this.isFragment=t instanceof HTMLTemplateElement,n?this.template=t:this.isFragment?this.template=t.content.cloneNode(!0):this.template=t.cloneNode(!0),n?this.ctx=i:((this.parentCtx=i).blocks.push(this),this.ctx=Tt(i)),Mt(this.template,this.ctx)}var i=t.prototype;return i.insert=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(this.isFragment)if(this.start)for(var n,e=this.start;e&&(n=e.nextSibling,t.insertBefore(e,i),e!==this.end);)e=n;else this.start=new Text(""),this.end=new Text(""),t.insertBefore(this.end,i),t.insertBefore(this.start,this.end),t.insertBefore(this.template,this.end);else t.insertBefore(this.template,i)},i.remove=function(){if(this.parentCtx&&-1<(r=(e=this.parentCtx.blocks).indexOf(this))&&e.splice(r,1),this.start)for(var t,i=this.start.parentNode,n=this.start;n&&(t=n.nextSibling,i.removeChild(n),n!==this.end);)n=t;else this.template.parentNode.removeChild(this.template);var e,r;this.teardown()},i.teardown=function(){this.ctx.blocks.forEach(function(t){t.teardown()}),this.ctx.effects.forEach(N),this.ctx.cleanups.forEach(function(t){return t()})},function(t,i){for(var n,e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,"symbol"==typeof(n=function(t,i){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);t=n.call(t,"string");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(r.key))?n:n+"",r)}}((i=t).prototype,[{key:"el",get:function(){return this.start||this.template}}]),Object.defineProperty(i,"prototype",{writable:!1}),i}(),V=document.currentScript;return V&&V.hasAttribute("init")&&Pt().mount(),t.createApp=Pt,t.nextTick=ot,t.reactive=it,Object.defineProperty(t,"__esModule",{value:!0}),t[Symbol.toStringTag]="Module",t}({}),n=c,e=function(){function t(){}var i=t.prototype;return i.init=function(t){var i=function(){function t(t){this.parent=t,this.smiley_map={angry:":@",blushing:":$",confused:"x)",cool:"8)",crying:":'(",embarrassed:":/",heart:"<3",laughing:":'D",sad:":(",sick:":S","small-smile":":)","big-smile":":D","thumbs-up":"[+1]",surprised:":o",tongue:":P",winking:";)"},this.d={angry:"((?:=|:)(?:-)?@)",blushing:"((?:=|:)(?:-)?\\$)",cool:"(8(?:-)?\\))",confused:"(x(?:-)?\\))",crying:"((?:=|:)'(?:-)?\\()",embarrassed:"((?:=|:)(?:-)?\\/)",heart:"(&lt;3)",laughing:"((?:=|:)(?:-)?'D)",sad:"((?:=|:)(?:-)?(?:\\(|\\|))",sick:"((?:=|:)(?:-)?S)","small-smile":"((?:=|:)(?:-)?\\))","big-smile":"((?:=|:)(?:-)?D)","thumbs-up":"(\\[\\+1\\])",surprised:"((?:=|:)(?:-)?o)",tongue:"((?:=|:)(?:-)?P)",winking:"(;(?:-)?\\))"},this.p()}var i=t.prototype;return i.code=function(t){return this.parent.template.render("smiley",{name:t,size:1<arguments.length&&void 0!==arguments[1]?arguments[1]:"small"})},i.parse=function(t){var i,n,e,r,s=t;for(i in this.m)if(this.m.hasOwnProperty(i))for(n=this.m[i];null!==(r=s.match(n));)e="small",s===r[2]&&(e="large"),e=this.code(i,e),s=s.replace(n,"$1".concat(e,"$3"));return s},i.count=function(t){var i,n,e=0,r=t;for(i in this.m)if(this.m.hasOwnProperty(i))for(n=this.m[i];!0===n.test(r);)e++,r=r.replace(n,"$1[]$3");return e},i.name=function(t){var i,n,e=null;for(i in this.m)if(this.m.hasOwnProperty(i)&&(n=this.m[i],t.match(n))){e=i;break}return e},i.p=function(){for(var t in this.m={},this.d)this.m[t]=new RegExp("(^|\\s|\\()".concat(this.d[t],"($|\\s|\\))"),"i")},t}(),n=function(){function t(t){this.parent=t,this.g=["com","net","org","info","biz","mobi","chat","email","help","watch","name","pro","aero","asia","cat","coop","edu","gov","int","jobs","mil","museum","post","tel","travel","xxx","xyz","top","site","online","club","shop","work","app","live","store","space","website","tech","life","dev","blog","cloud","page","link","design","group","company","agency","network","media","immo","ac","ad","ae","af","ag","ai","al","am","an","ao","aq","ar","as","at","au","aw","ax","az","ba","bb","bd","be","bf","bg","bh","bi","bj","bl","bm","bn","bo","bq","br","bs","bt","bv","bw","by","bz","ca","cc","cd","cf","cg","ch","ci","ck","cl","cm","cn","co","cr","cu","cv","cw","cx","cy","cz","de","dj","dk","dm","do","dz","ec","ee","eg","eh","er","es","et","eu","fi","fj","fk","fm","fo","fr","ga","gb","gd","ge","gf","gg","gh","gi","gl","gm","gn","gp","gq","gr","gs","gt","gu","gw","gy","hk","hm","hn","hr","ht","hu","id","ie","il","im","in","io","iq","ir","is","it","je","jm","jo","jp","ke","kg","kh","ki","km","kn","kp","kr","kw","ky","kz","la","lb","lc","li","lk","lr","ls","lt","lu","lv","ly","ma","mc","md","me","mf","mg","mh","mk","ml","mm","mn","mo","mp","mq","mr","ms","mt","mu","mv","mw","mx","my","mz","na","nc","ne","nf","ng","ni","nl","no","np","nr","nu","nz","om","pa","pe","pf","pg","ph","pk","pl","pm","pn","pr","ps","pt","pw","py","qa","re","ro","rs","ru","rw","sa","sb","sc","sd","se","sg","sh","si","sj","sk","sl","sm","sn","so","sr","ss","st","su","sv","sx","sy","sz","tc","td","tf","tg","th","tj","tk","tl","tm","tn","to","tp","tr","tt","tv","tw","tz","ua","ug","uk","um","us","uy","uz","va","vc","ve","vg","vi","vn","vu","wf","ws","ye","yt","za","zm","zw"],this.b={"&":/&amp;/g,"<":/&lt;/g,">":/&gt;/g,'"':/&quot;/g},this._={"&amp;":/&/g,"&lt;":/</g,"&gt;":/>/g,"&quot;":/"/g},this.k={"\\\\":/\\/g,"\\t":/\t/g,"\\n":/\n/g,"\\u00A0":/\u00A0/g,"&quot;":/"/g,"&apos;":/'/g,"&lowbar;":/_/g,"&ast;":/\*/g,"&plus;":/\+/g,"&#126;":/~/g},this.F={"<":/&lt;/g,">":/&gt;/g},this.C=/[-\/\\^$*+?.()|[\]{}]/g,this.j=/([\#$\*\_\-+![\]\(\)`~><\.|{}])/g,this.A=/\n(\s+)?\n(\s+)?\n/g,this.$=/\n/g,this.I=/^([a-z]{1,20})\n((?:\n?.*)*)$/,this.z=new RegExp("^(.+?)(?:\\s+=(?:(\\d+|auto)(?:x(\\d+|auto))?)?)?$"),this.O=/(,|\.)(\s|$)/g,this.S=/\u0001/g,this.D=/^(www\.)/i,this.R={links:{prefix:"(\\s|<[^<>]+\\/>|<[^a][^<>]*>|\\(|^)",suffix:"(\\s||<[^<>]+\\/>|</[^a][^<>]*>|\\)|$)"},markdown_simple:{prefix:"(^)",suffix:"($)"},markdown_includes:{prefix:"(\\s|<[^<>]+\\/>|<[^<>]+>|\\(|^)",suffix:"(\\s|.|,|:|<[^<>]+\\/>|\\)|$)"},markdown_formatting:{prefix:"(\\s|<[^<>]+\\/>|\\(|^)",suffix:""},markdown_list:{prefix:"(^\\s*)",suffix:"(.*?)($)"}},this.N=["title","list","code_inline","blockquote","table","emphasis"],this.q=["code_block","code_inline"],this.B=["escape","consecutive_lines","markdown","links_uri","links_domain","emails","phones","smileys","new_lines"],this.M={escape:this.T,consecutive_lines:this.U,new_lines:this.P,emails:this.L,phones:this.J,markdown:this.W,links_domain:this.V,links_uri:this.H,smileys:this.G},this.K={markdown_link_image:this.Y,markdown_image:this.Z,markdown_code_block:this.X,markdown_table:this.Q},this.tt(),this.it()}var i=t.prototype;return i.format=function(t){for(var i,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],r=t,s=0;s<this.B.length;s++)i=this.B[s],-1===e.indexOf(i)&&(r=this.M[i].bind(this)(r,n));return r},i.replace=function(t){for(var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=t,e=0;e<i.length;e++)n=n.replace("%".concat(e+1,"s"),i[e]);return n},i.attribute=function(t){return this.T(t,{},this.k)},i.html=function(t){return this.T(t,{},!0===(1<arguments.length&&void 0!==arguments[1]&&arguments[1])?this.b:this._)},i.escape_regex=function(t){return t.replace(this.C,"\\$&")},i.T=function(t){var i,n,e=t,r=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)||this._;for(n in r)r.hasOwnProperty(n)&&(i=r[n],e=e.replace(i,n));return e},i.U=function(t){return t.replace(this.A,"\n\n")},i.P=function(t){var i=this.parent.template.render("new_line",{},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{});return t.trim().replace(this.$,i)},i.L=function(t){var r=this,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.nt(t,this.et.email,function(t,i,n,e){n=r.parent.template.render("link_email",{email:n,no_external_link:r.parent.config.runtime.no_external_link||!1},s);return"".concat(i).concat(n).concat(e)})},i.J=function(t){var r=this,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.nt(t,this.et.phone,function(t,i,n,e){n=r.parent.template.render("link_phone",{phone:n,no_external_link:r.parent.config.runtime.no_external_link||!1},s);return"".concat(i).concat(n).concat(e)})},i.W=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};t="\n".concat(t,"\n");for(var n=0;n<this.rt.length;n++)t=t.replace(this.rt[n][1],this.st(this.rt[n],i));return t=t.trim()},i.V=function(t){var r=this,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.nt(t,this.et.domain,function(t,i,n,e){n=r.parent.template.render("link_domain",{domain_value:n,domain_name:n,no_external_link:r.parent.config.runtime.no_external_link||!1},s);return"".concat(i).concat(n).concat(e)})},i.H=function(t){var s=this,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.nt(t,this.et.uri,function(t,i,n,e){var r=!0===s.D.test(n)?"http://".concat(n):n,n=s.parent.template.render("link_uri",{uri_value:r,uri_name:n,no_external_link:s.parent.config.runtime.no_external_link||!1},o);return"".concat(i).concat(n).concat(e)})},i.G=function(t){return this.parent.Smileys.parse(t)},i.Y=function(t){return this.ot("type",t)},i.Z=function(t){return this.ot("value",t)},i.X=function(t){var i=(t.value||"").match(this.I);null!=i&&i[1]?(t.type=i[1],t.value=i[2]):t.type="none",t.value=(t.value||"").trim()},i.Q=function(t){var i=t.type.split("|"),r=i.slice(1,i.length-1).map(function(t){return(t||"").trim()}),i=t.value.split("\n").map(function(t){var t=t.split("|"),i=t.slice(1,t.length-1).map(function(t){return(t||"").trim()}),n=r.length-i.length;if(0!=n)if(n<0)i=i.slice(0,r.length);else for(var e=0;e<n;e++)i.push("");return i});t.type=r,t.value=i},i.st=function(c){var a=this,h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(t,i,n,e,r){var s="markdown_".concat(c[0]),o={type:null,value:null,url_crisp_image:a.parent.config.url.crisp_image,no_external_link:a.parent.config.runtime.no_external_link||!1},i=("string"==typeof i?i:null)||"",r=("string"==typeof r?r:null)||"";o.type=n,o.value=e,-1!==a.N.indexOf(c[0])&&"string"==typeof o.value&&(o.value=o.value.trim()),-1!==a.q.indexOf(c[0])&&"string"==typeof o.value&&(o.value=a.ct(o.value));e=a.K[s]||null;null!==e&&e.bind(a)(o);o=a.parent.template.render(s,o,h);return"".concat(i).concat(o).concat(r)}},i.nt=function(t,i,r){var s=this,n=t.match(i);if(n)for(var e=0;e<n.length;e++){var o=n[e].replace(this.O,function(t,i,n){return"".concat(i).concat(n)});t=t.replace(n[e],o)}return t.replace(i,function(t,i,n,e){return r(t,i,n,e.replace(s.S,""))})},i.ct=function(t){return(t=this.T(t,{},this.F)).replace(this.j,function(t){return"&#".concat(t.charCodeAt(0),";")})},i.ot=function(t,i){var n=(i[t]||"").match(this.z);null!=n&&n[1]&&null!=n&&n[2]&&null!=n&&n[3]&&(i[t]=n[1],t=n[2],n=n[3]||t,t&&"auto"!==t&&(i.width=t),n&&"auto"!==n&&(i.height=n))},i.ht=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"gi",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return new RegExp("".concat(n.prefix||"").concat(t).concat(n.suffix||""),i)},i.tt=function(){this.et={email:this.ht("([\\w\\._-]+@[\\w\\.\\/_-]+)","gi",this.R.links),phone:this.ht("(\\+[0-9]{1,3}[ \\(\\)\\-0-9]{7,20})","gi",this.R.links),domain:this.ht(["((?:[^<>\\(\\)\\s,@]+)(?:\\.(?:",this.g.map(this.escape_regex.bind(this)).join("|"),")))"].join(""),"gim",this.R.links),uri:this.ht("((?:(?:(?:https?|ftps?|file):)|(?:www\\.))(?:[^<>\\(\\)\\s]+))","gim",this.R.links)}},i.it=function(){this.rt=[["code_block",this.ht("(`{2,3})((?:\\n+)?(?:(?!\\2).(?:\\n+)?)*)(?:\\2)","gi",{prefix:"(\\s|<[^<>]+\\/>|^)",suffix:"(\\s|\\.|,|:|$)"})],["code_inline",this.ht("(`{1})([^`]*)(?:\\2)","gim",{prefix:"(\\s|<[^<>]+\\/>|\\(|^)",suffix:"(\\s|\\.|,|:|\\)|<\\/[^<>]+>|$)"})],["title",this.ht("(#{1})(?:[\\s]+)([^#].*)","gim",this.R.markdown_simple)],["title",this.ht("(#{2})(?:[\\s]+)([^#].*)","gim",this.R.markdown_simple)],["title",this.ht("(#{3})(?:[\\s]+)([^#].*)","gim",this.R.markdown_simple)],["title",this.ht("(#{4})(?:[\\s]+)([^#].*)","gim",this.R.markdown_simple)],["title",this.ht("(#{5})(?:[\\s]+)([^#].*)","gim",this.R.markdown_simple)],["title",this.ht("(#{6})(?:[\\s]+)([^#].*)","gim",this.R.markdown_simple)],["link_image",this.ht("\\[!\\[(?:[^\\[]*)\\]\\(([^\\)]+)\\)\\]\\(([^\\)]+)\\)","gim",this.R.markdown_includes)],["image",this.ht("!\\[([^\\[]*)\\]\\(([^\\)]+)\\)","gim",this.R.markdown_includes)],["link_text",this.ht("\\[([^\\[]+)\\]\\(([^\\)]+)\\)","gim",{prefix:"(\\s|<[^<>]+\\/>|<[^a][^<>]*>|\\(|^)",suffix:"(\\s|.|,|:|<[^<>]+\\/>|</[^a][^<>]*>|\\)|$)"})],["youtube",this.ht("\\$\\{youtube\\}\\[([^\\[]*)\\]\\(([^\\)]+)\\)","gim",this.R.markdown_includes)],["vimeo",this.ht("\\$\\{vimeo\\}\\[([^\\[]*)\\]\\(([^\\)]+)\\)","gim",this.R.markdown_includes)],["dailymotion",this.ht("\\$\\{dailymotion\\}\\[([^\\[]*)\\]\\(([^\\)]+)\\)","gim",this.R.markdown_includes)],["frame",this.ht("\\$\\{frame\\}\\[([^\\[]*)\\]\\(([^\\)]+)\\)","gim",this.R.markdown_includes)],["bold",this.ht("(\\*\\*)(.*?)(?:\\2)","gim",this.R.markdown_formatting)],["underline",this.ht("(__)(.*?)(?:\\2)","gim",this.R.markdown_formatting)],["italic",this.ht("(\\*|_)(.*?)(?:\\2)","gim",this.R.markdown_formatting)],["delete",this.ht("(\\~\\~)(.*?)(?:\\2)","gim",this.R.markdown_formatting)],["highlight",this.ht("(\\+\\+)(.*?)(?:\\2)","gim",this.R.markdown_formatting)],["list",this.ht("(\\*)(?:[\\s]+)","gim",this.R.markdown_list)],["list",this.ht("(?:([\\d]{1,2})\\.)(?:[\\s]+)","gim",this.R.markdown_list)],["blockquote",this.ht("(&gt;|\\>)(?:[\\s]+)(.*)","gim",this.R.markdown_simple)],["table",this.ht("(?:(\\|(?:[^\\|\\r\\n]{0,999}\\|){1,19})(?: *\\n)(?:\\|(?: *\\-{1,99} *\\|){1,19}))((?: *\\n\\|(?:[^\\|\\r\\n]{0,999}\\|){1,19}){1,49})","gi",{prefix:"(\\s|^)",suffix:"(\\s|$)"})],["emphasis",this.ht("(\\|{1})(?:[\\s]+)([^\\|].*)","gim",this.R.markdown_simple)],["emphasis",this.ht("(\\|{2})(?:[\\s]+)([^\\|].*)","gim",this.R.markdown_simple)],["emphasis",this.ht("(\\|{3})(?:[\\s]+)([^\\|].*)","gim",this.R.markdown_simple)],["interpolate",this.ht('(?:\\{\\{\\s*)([^\\{\\}\\|\\s]+)(?:\\s*\\|\\s*(?:(?:&quot;)|")([^&"]*)(?:(?:&quot;)|"))?(?:\\s*\\}\\})',"gim",{prefix:"(\\s|\\(|^)",suffix:""})],["line",this.ht("(-{3,})","gim",{prefix:"(^)(\\s+)?",suffix:"(\\s|$)"})],["color",this.ht("\\$\\{color\\}\\[(#[0-9A-Fa-f]{6})\\]\\(([^\\)]+)\\)","gim",this.R.markdown_includes)]]},t}(),e=function(){function t(t){this.parent=t,this.ut=/^(\S+)((?:\s+)(.+))?$/}var i=t.prototype;return i.parse_first_name=function(t){return this.lt(t,1)},i.parse_last_name=function(t){return this.lt(t,3)},i.lt=function(t,i){var n=(t||"").trim();return!n||null!=(t=n.match(this.ut))&&t[i]&&(n=t[i].trim()),n},t}(),r=function(){function t(t){this.parent=t,this.ft={type:"none",decision:"index"}}return t.prototype.evaluate_filters=function(t){for(var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",e=0;e<t.length;e++){var r=t[e];switch(r.type){case"any":return r;case"url:exact":case"url:prefix":case"url:contains":var s=(r.value||"").toLowerCase(),o=i.toLowerCase(),c=r.type.split(":")[1];if(!0===("contains"===c?o.includes(s):"prefix"===c?o.startsWith(s):o===s&&!0))return r;break;case"language":if(n===r.value)return r;break;default:throw new Error("Missing filter rule implementation for type: '".concat(r.type,"'"))}}return this.ft},t}();this.vt(t),this.Smileys=new i(this),this.Parse=new n(this),this.Name=new e(this),this.Page=new r(this)},i.vt=function(t){null!=t&&t.template&&(this.template=t.template),null!=t&&t.config&&(this.config=t.config)},t}(),n.CrispLibraryWeb=new e,t=c,i=function(){function t(){}var i=t.prototype;return i.init=function(t){var c={},i=function(){function t(t){this.parent=t,this.dt()}var i=t.prototype;return i.set_ignore_privacy=function(){this.yt=0<arguments.length&&void 0!==arguments[0]&&arguments[0]},i.set_visitor_compose=function(){this.pt=!(0<arguments.length&&void 0!==arguments[0])||arguments[0]},i.reset=function(){this.dt()},i.dt=function(){this.yt=!1,this.pt=!0},t}(),n=function(){function t(t){this.parent=t}var i=t.prototype;return i.get=function(t){var i,n=this.parent.cookie.get(t);if(void 0===n)try{window.localStorage&&"function"==typeof window.localStorage.getItem&&(0<(i=parseInt(window.localStorage.getItem("".concat(t,":e"))||"0",10))&&i<=(new Date).getTime()?(n=void 0,"function"==typeof window.localStorage.removeItem&&(window.localStorage.removeItem(t),window.localStorage.removeItem("".concat(t,":e")))):n=window.localStorage.getItem(t))}catch(t){}return void 0!==n?n:null},i.set=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};this.parent.cookie.set(t,i,n);try{window.localStorage&&"function"==typeof window.localStorage.setItem&&(window.localStorage.setItem("".concat(t,":e"),void 0!==n.expires?(new Date).getTime()+n.expires:0),window.localStorage.setItem(t,i))}catch(t){}},i.expire=function(t){this.parent.cookie.expire(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{});try{window.localStorage&&"function"==typeof window.localStorage.removeItem&&(window.localStorage.removeItem(t),window.localStorage.removeItem("".concat(t,":e")))}catch(t){}},t}(),e=function(){function t(t){this.parent=t,this.dt()}var i=t.prototype;return i.set_timeout=function(t){var i=this,n=setTimeout(function(){delete i.mt[n],t()},1<arguments.length&&void 0!==arguments[1]?arguments[1]:0);return this.mt[n]=n},i.clear_timeout=function(t){t in this.mt&&(clearTimeout(this.mt[t]),delete this.mt[t])},i.set_interval=function(t){var i=setInterval(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0);return this.wt[i]=i},i.clear_interval=function(t){t in this.wt&&(clearInterval(this.wt[t]),delete this.wt[t])},i.reset=function(){for(var t in this.mt)this.clear_timeout(t);for(var i in this.wt)this.clear_interval(i);this.dt()},i.dt=function(){this.mt={},this.wt={}},t}(),r=function(){function t(t){this.parent=t,this.dt()}var i=t.prototype;return i.add_event=function(t,i,n,e){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},s=this.gt(t,i,n);if(s in this.bt)throw new Error("Event listener is already registered for '".concat(n,"' event on ")+"'".concat(i,"' instance, cannot re-register"));window[i].addEventListener(n,e,r),this.bt[s]=[e,r]},i.remove_event=function(t,i,n){var e=this.gt(t,i,n);e in this.bt&&(t=this.bt[e],window[i].removeEventListener(n,t[0],t[1]),delete this.bt[e])},i.apply_patch=function(t,i,n,e,r){t=this.gt(t,i,n);if(t in this._t)throw new Error("Patch is already registered for '".concat(n,"' method on ")+"'".concat(i,"' instance, cannot re-register"));var s=e[n];"function"==typeof s&&(e[n]=function(){var t=s.apply(e,arguments);return r(arguments),t},this._t[t]=[e,s])},i.revoke_patch=function(t,i,n){t=this.gt(t,i,n);t in this._t&&((i=this._t[t])[0][n]=i[1],delete this._t[t])},i.reset=function(){for(var t in this.bt){t=this.kt(t);null!==t&&this.remove_event(t[0],t[1],t[2])}for(var i in this._t){i=this.kt(i);null!==i&&this.revoke_patch(i[0],i[1],i[2])}this.dt()},i.gt=function(t,i,n){return"".concat(t,":").concat(i,":").concat(n)},i.kt=function(t){t=t.split(":");return 3===t.length?t:null},i.dt=function(){this.bt={},this._t={}},t}(),s=function(){function t(t){this.parent=t,this.xt()}var i=t.prototype;return i.get_state=function(){this.Ft(this.parent.socket.connected||!1)},i.xt=function(){var t=this;this.parent.socket.on("connect",function(){t.Ft(!0)}),this.parent.socket.on("disconnect",function(){t.Ft(!1)}),this.parent.socket.io.on("reconnect_failed",function(){t.Ft(!1,!0)})},i.Ft=function(){this.parent.event.publish("socket:state",{connected:!(0<arguments.length&&void 0!==arguments[0])||arguments[0],failed_reconnect:1<arguments.length&&void 0!==arguments[1]&&arguments[1]})},t}(),o=function(){function t(t){this.parent=t,this.dt(),this.xt()}var i=t.prototype;return i.bind_to=function(t,i,n){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;this.Et=t,this.bt=i,this.Ct=n,this.jt=e,this.At=r,!0!==this.$t?this.parent.stream.connect():this.It()},i.unbind_from=function(){this.zt(),this.parent.stream.disconnect()},i.reset=function(){this.dt()},i.dt=function(){this.$t=!1,this.Et=null,this.bt=[],this.Ct={},this.jt=null,this.At=null,this.Ot=null,this.St=null},i.xt=function(){var t=this;this.parent.stream.on("connect",function(){t.$t=!0,t.It()}),this.parent.stream.on("disconnect",function(){t.$t=!1,t.Dt()}),this.parent.stream.on("socket:bound",function(){t.Rt()})},i.It=function(){var t;this.Ot!==this.Et||this.St!==this.bt?(this.Ot=this.Et,this.St=this.bt,t=[],this.Ot&&t.push(this.Ot),this.parent.stream.emit("socket:bind",{ray:"client",events:this.St,rooms:t,context:this.Ct})):this.Rt()},i.Dt=function(){null!==this.At&&this.At(),this.zt(),this.Ot=null,this.St=null},i.Rt=function(){null!==this.jt&&this.jt(),this.zt()},i.zt=function(){this.Et=null,this.bt=[],this.Ct={},this.jt=null,this.At=null},t}(),a=function(){function t(t){this.parent=t,this.Nt=1e5,this.qt="crisp-client",this.dt(),this.xt()}var i=t.prototype;return i.update=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){},e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){},r={ray:this.Bt(t),type:t,data:i};this.Mt.push(r.ray),this.Tt[r.ray]={success:n,error:e},this.parent.socket.emit("storage:sync:update",r),this.parent.event.publish("storage:sync:update",r)},i.get_stamp_local=function(t){var i=this.Ut(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:[]);return"object"==typeof window.localStorage&&window.localStorage.getItem(i)||""},i.set_stamp_local=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",i=this.Ut(t,i);return"object"==typeof window.localStorage&&(window.localStorage.setItem(i,n),!0)},i.is_syncing_storage=function(){return 0<this.Mt.length&&!0},i.reset=function(){this.dt()},i.Ut=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n="".concat(this.qt,"/").concat(t);return 0<i.length&&(n+="/".concat(i.join("/"))),n},i.dt=function(){this.Pt=1,this.Lt=0,this.Tt={},this.Mt=[]},i.xt=function(){this.parent.socket.on("storage:sync:updated",this.Wt.Jt(this))},i.Wt=function(t){var i;"object"==typeof this.Tt[t.ray]&&(t.error?this.Tt[t.ray].error():this.Tt[t.ray].success(),delete this.Tt[t.ray],-1!==(i=this.Mt.indexOf(t.ray))&&this.Mt.splice(i,1)),this.parent.event.publish("storage:sync:updated",t)},i.Bt=function(t){var i=Math.floor(Math.random()*this.Nt),n=this.Lt++;return"".concat(t,"/").concat(i,"/").concat(n)},t}(),h=function(){function t(t){this.parent=t,this.Vt=6e4,this.Ht=6e3,this.Gt=new RegExp(["(^(?:\\S+(?:(?:\\s+|\\?|\\!|\\.|\\(|\\)|:|;)|(?:[\\u4e00-\\u9fff])|(?:[\\u0e00-\\u0e7f])))+).*$"].join(""),"i"),this.dt(),this.xt()}var i=t.prototype;return i.update_message=function(t,i){i={fingerprint:t,content:i};this.parent.socket.emit("message:update",i),this.Kt(i,"local")},i.send_raw_message=function(i){function n(){r.parent.socket.emit("message:send",i)}var t,e,r=this,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;-1===this.Yt.indexOf(i.fingerprint)&&this.Yt.push(i.fingerprint),this.parent.platform_name&&this.parent.platform_signature_key&&(t=[this.parent.Session.Zt,i.fingerprint,i.type],(e=this.parent.sha256.hmac.create(this.parent.platform_signature_key.split("/").map(function(t){return String.fromCharCode(parseInt(t,36))}).join(""))).update("[".concat(t.join("|"),"]")),i.signature="".concat(this.parent.platform_name,":").concat(e.hex())),this.parent.event.publish("message:send",i),this.parent.Schedule.set_timeout(function(){r.parent.ticket_generator?r.parent.ticket_generator(r.parent.Session.Zt,function(t){null!==t&&(i.ticket=t),n()}):n()},s)},i.send_text_message=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;this.send_raw_message({type:"text",origin:"chat",content:t,timestamp:(new Date).getTime(),fingerprint:this.Xt()},i)},i.send_file_message=function(t,i,n){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;this.send_raw_message({type:"file",origin:"chat",content:{name:t,url:i,type:n},timestamp:(new Date).getTime(),fingerprint:this.Xt()},e)},i.send_animation_message=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;this.send_raw_message({type:"animation",origin:"chat",content:{url:t,type:i},timestamp:(new Date).getTime(),fingerprint:this.Xt()},n)},i.send_audio_message=function(t,i,n){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;this.send_raw_message({type:"audio",origin:"chat",content:{url:t,type:i,duration:n},timestamp:(new Date).getTime(),fingerprint:this.Xt()},e)},i.send_picker_message=function(t,i,n){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;this.send_raw_message({type:"picker",origin:"chat",content:{id:t,text:i,choices:n},timestamp:(new Date).getTime(),fingerprint:this.Xt()},e)},i.send_field_message=function(t,i,n){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;this.send_raw_message({type:"field",origin:"chat",content:{id:t,text:i,explain:n},timestamp:(new Date).getTime(),fingerprint:this.Xt()},e)},i.send_carousel_message=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;this.send_raw_message({type:"carousel",origin:"chat",content:{text:t,targets:i},timestamp:(new Date).getTime(),fingerprint:this.Xt()},n)},i.send_message_compose=function(t){var i=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;(!0!==this.parent.Config.yt&&"1"===(navigator||{}).doNotTrack||!1===this.parent.Config.pt)&&(n=null);var n=this.Qt(n),e=t!==this.ti.local.type&&!0;(1==e||n!==(this.ti.local.excerpt||null)||"start"===this.ti.local.type&&this.ii&&(new Date).getTime()-this.ii>=this.Vt)&&(this.ii=(new Date).getTime(),this.ti.local={type:t},n&&(this.ti.local.excerpt=n),1==e&&null!==this.ni&&(this.parent.Schedule.clear_timeout(this.ni),this.ni=null),null===this.ni&&(this.ni=this.parent.Schedule.set_timeout(function(){i.ni=null,i.parent.socket.emit("message:compose:send",i.ti.local),i.parent.event.publish("message:compose:send",i.ti.local)},1==e?0:this.Ht)))},i.send_message_thread=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n={type:t};i&&(n.text=i),this.parent.socket.emit("message:thread",n),this.parent.event.publish("message:thread",n)},i.receive_message_local=function(t,i,n){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,e={from:"operator",type:t,origin:"local",timestamp:(new Date).getTime(),content:i,fingerprint:null!==e?e:this.Xt(),user:n};this.parent.socket.emit("message:received:local",e),this.ei(e)},i.receive_message_mirror=function(t,i,n,e){e={from:"operator",type:t,origin:i,timestamp:(new Date).getTime(),content:n,fingerprint:e};this.parent.socket.emit("message:received:mirror",e)},i.get_message_compose=function(){this.parent.event.publish("message:compose:received",this.ti.remote)},i.get_cached_messages=function(){return this.ri},i.count_message_history=function(){return this.ri.length},i.count_message_history_diff=function(){return this.si.length},i.get_message_history=function(){if(0<this.ri.length){for(var t=0;t<this.ri.length;t++)this.ri[t].origin="history";this.parent.event.publish("history:messages",this.ri)}for(var i=0;i<this.si.length;i++)this.oi(this.si[i],"diff");this.si=[]},i.is_sending_messages=function(){return 0<this.Yt.length&&!0},i.mark_messages_as_read=function(){!0===this.ci(void 0,void 0,!(0<arguments.length&&void 0!==arguments[0])||arguments[0])&&this.ai()},i.set_messages_in_view=function(t){this.hi=t,this.mark_messages_as_read(!1)},i.get_unread_messages=function(){this.ui=-1,this.li()},i.set_unread_messages_callback=function(t){this.fi=t},i.reset=function(){this.dt()},i.vi=function(t){this.di(t)},i.yi=function(t){t&&(this.ti.remote=t)},i.pi=function(t){if(t){this.mi(t);for(var i=0;i<t.length;i++)this.si.push(t[i]);this.li()}},i.di=function(t){this.ri=t=t||[],this.wi=[],this.mi(this.ri);for(var i=0;i<this.ri.length;i++){var n=this.ri[i];this.wi.push(n.fingerprint),t[i].is_me||n.read||this.gi.push(n.fingerprint)}this.li()},i.dt=function(){this.ri=[],this.wi=[],this.si=[],this.gi=[],this.Yt=[],this.bi=[],this.ni=null,this.hi=!1,this.fi=function(){},this.ui=-1,this.ii=0,this.ti={local:{type:"stop"},remote:{type:"stop"}}},i.xt=function(){this.parent.socket.on("message:updated",this.Kt.Jt(this)),this.parent.socket.on("message:sent",this._i.Jt(this)),this.parent.socket.on("message:received",this.ki.Jt(this)),this.parent.socket.on("message:received:local",this.ei.Jt(this)),this.parent.socket.on("message:removed",this.xi.Jt(this)),this.parent.socket.on("message:compose:received",this.Fi.Jt(this)),this.parent.socket.on("message:acknowledge:read:send",this.Ei.Jt(this)),this.parent.socket.on("message:acknowledge:read:received",this.Ci.Jt(this)),this.parent.socket.on("message:acknowledge:pending",this.ji.Jt(this)),this.parent.socket.on("message:error:rejected",this.Ai.Jt(this))},i.Qt=function(t){var i=null;return null===t||(t=t.match(this.Gt))&&(i=(t[1]||"").trim()),i},i.$i=function(t){this.parent.socket.emit("message:acknowledge:pending",{origin:"chat",fingerprints:t}),this.parent.socket.emit("message:acknowledge:delivered",{origin:"chat",fingerprints:t})},i.Ii=function(t){this.parent.socket.emit("message:acknowledge:read:received",{origin:"chat",fingerprints:t})},i.zi=function(t,i){var n=!1;!1===i&&(this.gi=[],this.li());for(var e=0;e<this.ri.length;e++){var r=this.ri[e];!0===r.read||0!==t.length&&-1===t.indexOf(r.fingerprint)||i===(!0===r.is_me)&&(n=r.read=!0,this.Oi(r))}return n},i.ci=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=i||!1;return!1===i&&(!0===(2<arguments.length&&void 0!==arguments[2]&&arguments[2])||!0===this.hi)&&0<this.gi.length&&(this.Ii(this.gi),n=!0),!0===n&&this.zi(t,i)},i.ai=function(t,i){if(0<this.bi.length){for(var n=[],e=0;e<this.ri.length;e++){var r=this.ri[e];-1!==this.bi.indexOf(r.fingerprint)&&(delete r.index,n.push(r))}this.bi=[],this.parent.Storage.update("message",n,t,i)}else"function"==typeof t&&t()},i.Si=function(t,i,n){null===this.Di(t.fingerprint)?(this.wi.push(t.fingerprint),this.ri.push(t),this.ci(),this.Oi(t),this.ai(i,n)):"function"==typeof i&&i()},i.Ri=function(i,n,t){var e=this,r=this.wi.indexOf(i.fingerprint);-1!==r?(this.Oi(i),this.ai(function(){e.wi.splice(r,1),e.ri.splice(r,1);var t=e.gi.indexOf(i.fingerprint);-1!==t&&(e.gi.splice(t,1),e.li()),"function"==typeof n&&n()},t)):"function"==typeof n&&n()},i.Di=function(t){t=this.wi.indexOf(t);return 0<=t&&this.ri[t]||null},i.Oi=function(t){-1===this.bi.indexOf(t.fingerprint)&&this.bi.push(t.fingerprint)},i.mi=function(t){t.sort(function(t,i){return t.timestamp<i.timestamp?-1:t.timestamp>i.timestamp?1:0})},i.Xt=function(){var t=""+(new Date).getTime()+Math.ceil(100*Math.random());return t.length<15&&(t+=new Array(15-t.length+1).join("0")),parseInt(t,10)},i.oi=function(t,i){t.is_me?this._i(t,i):this.ki(t,i)},i.li=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=this.gi.length;i!==this.ui&&(this.ui=i,"function"==typeof this.fi&&this.fi(i,this.gi,[].concat(this.ri,t)))},i.Kt=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"network",n=this.Di(t.fingerprint);null!==n&&(n.content=t.content,n.edited=!0,this.oi(n,"update"),"local"!==i&&(this.Oi(n),this.ai()))},i._i=function(t){var i=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"network",e=this.Yt.indexOf(t.fingerprint);-1!==e&&this.Yt.splice(e,1);var r=t.origin;t.origin=n,t.index={current:1,total:1},this.Si(t,function(){"chat"===r||"network"!==n&&"diff"!==n||i.$i([t.fingerprint]),i.parent.event.publish("message:sent",t)}),1===this.count_message_history()&&this.parent.Session.Ni()},i.ki=function(t){var i=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"network",e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"message:received";t.origin=n,t.index={current:1,total:1},"update"!==n&&(this.gi.push(t.fingerprint),this.li([t])),this.Si(t,function(){"network"!==n&&"diff"!==n||i.$i([t.fingerprint]),i.parent.event.publish(e,t)})},i.ei=function(t){this.ki(t,"local","message:received:local")},i.xi=function(t){var i=this,n=this.Di(t.fingerprint);null!==n&&(n.removed=!0,this.Ri(n,function(){i.parent.event.publish("message:removed",n)}))},i.Fi=function(t){this.ti.remote=t,this.parent.event.publish("message:compose:received",t)},i.Ei=function(t){!0===this.ci(t.fingerprints,!0)&&this.ai(),this.parent.event.publish("message:acknowledge:read:send",t.fingerprints)},i.Ci=function(t){for(var i=0;i<t.fingerprints.length;i++){var n=this.gi.indexOf(t.fingerprints[i]);-1!==n&&this.gi.splice(n,1)}this.li()},i.ji=function(t){this.parent.event.publish("message:acknowledge:pending",t.fingerprints)},i.Ai=function(t){var i=this.Yt.indexOf(t.fingerprint);-1!==i&&this.Yt.splice(i,1),this.parent.event.publish("message:error:rejected",t)},t}(),u=function(){function t(t){this.parent=t,this.qi=new RegExp("^(https?\\:\\/\\/[^/]+)\\/chat\\/resume\\/\\?target_url=(.+)&session_id=(.+)$"),this.Bi=/^\?.*(crisp_sid=([^&=]+)).*$/,this.Mi=/(\?.*)(crisp_sid=[^&=]+&?)(.*)$/,this.Ti=9e4,this.Ui=5e3,this.Pi=3e3,this.Li=240,this.Ji=80,this.Wi="...",this.Vi=24e4,this.Hi=3e5,this.Gi=15768e3,this.Ki=500,this.Yi=["email","phone","nickname","avatar","company"],this.parent.disable_autoload||(this.dt(),this.xt())}var i=t.prototype;return i.save=function(){var t={domain:this.Zi(),expires:this.Xi()},i=this.Qi();t.sameSite=i.policy,!0===i.secure&&(t.secure=!0),this.parent.Register.set(this.tn(),this.Zt,t),this.parent.token_id&&this.parent.Register.set(this.tn(this.parent.token_id),this.Zt,t),this.parent.event.publish("session:saved",this.Zt)},i.storage_session_retrieve=function(t){this.in(t.state),this.parent.Message.vi(t.message)},i.sync_session_diff=function(t){this.parent.Message.yi(t.compose),this.parent.Message.pi(t.messages)},i.sync_user_data=function(t){for(var i=0;i<this.Yi.length;i++){var n=this.Yi[i];this.nn[n]&&this.nn[n]!==t[n]?this["set_".concat(n)](this.nn[n],!0,this.en[n]):this.nn[n]=t[n]||null}this.rn(t.segments||[],this.nn.segments),this.sn(t.data||{},this.nn.data)},i.send_device=function(){var t=this.cn();null!==t&&this.parent.socket.emit("session:device",t)},i.send_event=function(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i={events:[]},n=0;n<t.length;n++){var e=t[n],r={text:e[0]};null!==e[1]&&(r.data=e[1]),null!==e[2]&&(r.color=e[2]),i.events.push(r)}0<i.events.length&&this.parent.socket.emit("session:event",i)},i.send_feedback_rate=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n={rating:{stars:t}};null!==i&&(n.rating.comment=i),this.parent.socket.emit("session:feedback:rate",n),this.parent.event.publish("session:feedback:rate",n)},i.get_request_initiate=function(t){Object.keys&&0===Object.keys(this.an).length&&0<this.parent.Message.count_message_history_diff()&&this.hn({}),"function"==typeof t&&t()},i.get_state=function(t){this.handle_state(this.an,t)},i.handle_state=function(t,i){this.an=t,this.parent.event.publish("session:state",this.an),"function"==typeof i&&i()},i.set_state=function(t,i){for(var n in t)this.an[n]=t[n];this.parent.Storage.update("state",t),this.sync_state(t,i)},i.sync_state=function(t,i){this.parent.socket.emit("session:state",t),"function"==typeof i&&i()},i.create=function(){var t={website_id:this.parent.website_id,website_domain:this.parent.website_domain,useragent:this.parent.device.useragent||"",timezone:this.parent.device.timezone||0,capabilities:this.parent.device.capabilities||[],locales:this.parent.device.locales||[]};this.parent.token_id&&(t.token_id=this.parent.token_id),this.parent.socket.emit("session:create",t)},i.get_email=function(){return this.nn.email},i.set_email=function(t){var i,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1],e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r={};null!==e&&("string"==(i=typeof e)?r.verify=e:"object"==i&&(r=e)),!0===this.un("email",t,n,r)&&this.Ni()},i.get_phone=function(){return this.nn.phone},i.set_phone=function(t){this.un("phone",t,1<arguments.length&&void 0!==arguments[1]&&arguments[1])},i.get_nickname=function(){return this.nn.nickname},i.set_nickname=function(t){this.un("nickname",t,1<arguments.length&&void 0!==arguments[1]&&arguments[1])},i.get_avatar=function(){return this.nn.avatar},i.set_avatar=function(t){this.un("avatar",t,1<arguments.length&&void 0!==arguments[1]&&arguments[1])},i.get_company=function(){return this.nn.company},i.set_company=function(t){this.un("company",t,1<arguments.length&&void 0!==arguments[1]&&arguments[1])},i.get_data=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return null===t?this.nn.data:this.nn.data[t]||null},i.set_data=function(t){var i=this;if(this.ln.data=this.ln.data||{},t)for(var n in t)this.ln.data[n]=t[n];this.vn("data",function(){i.sn(i.nn.data||{},i.ln.data),delete i.ln.data})},i.set_segments=function(t){var i=this,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(!0===n)this.ln.segments=t||[];else if(this.ln.segments=this.ln.segments||[],t)for(var e=0;e<t.length;e++)this.ln.segments.push(t[e]);this.vn("segments",function(){i.rn(i.nn.segments||[],i.ln.segments,n),delete i.ln.segments},n||!1)},i.mark_active=function(){var t=(new Date).getTime();t-Math.min(this.dn||t,this.yn||t)>=this.Ti&&this.pn(!0),this.dn=t},i.acquire_saved=function(){var t=this.mn(),i=null,n=(location.search||"").match(this.Bi),e=(document.referrer||"").match(this.qi);n&&n[2]&&n[2]!==t.current&&(i=n[2]||null);e=(i=e&&e[1]===this.parent.url_go&&e[3]!==t.current?e[3]||null:i)||t.current,i=null;return{session_id:e,merge:i=t.previous&&t.current!==t.previous&&t.current===e?t.previous:i}},i.restore=function(){var t=this.acquire_saved();this.wn(t.session_id,t.merge)},i.join=function(){var t,i={website_id:this.parent.website_id,session_id:this.Zt,expire:this.Hi,storage:!0,sync:0<arguments.length&&void 0!==arguments[0]&&arguments[0],useragent:this.parent.device.useragent||"",timezone:this.parent.device.timezone||0,capabilities:this.parent.device.capabilities||[],locales:this.parent.device.locales||[]};this.gn||null!==(t=this.cn())&&(i.device=t),null!==this.bn&&(i.merge={session_id:this.bn}),this.parent.socket.emit("session:join",i)},i.reset=function(t,i){var n=null;try{for(var e in this.parent){var r=this.parent[e];r!==this&&r&&"object"==typeof r&&"function"==typeof r.reset&&r.reset()}this.kn()}catch(t){n=t}n?"function"==typeof i&&i(n):"function"==typeof t&&t()},i.Ni=function(){var t=this;this.nn.email&&(this.xn&&this.parent.Schedule.clear_timeout(this.xn),this.xn=this.parent.Schedule.set_timeout(function(){t.xn=null,t.pn(!0)},this.Ui))},i.dt=function(){if("object"==typeof this.Fn)for(var t in this.Fn)this.parent.Schedule.clear_timeout(this.Fn[t]);this.Zt=null,this.bn=null,this.gn=!1,this.dn=0,this.yn=(new Date).getTime(),this.En=null,this.xn=null,this.Cn=null,this.jn=null,this.nn={},this.en={},this.an={},this.Fn={},this.ln={}},i.xt=function(){var t=this;this.parent.socket.on("session:created",this.An.Jt(this)),this.parent.socket.on("session:joined",this.$n.Jt(this)),this.parent.socket.on("session:state",this.In.Jt(this)),this.parent.socket.on("session:error",this.zn.Jt(this)),this.parent.socket.on("session:request:initiate",this.hn.Jt(this)),this.parent.socket.on("session:request:purge",this.On.Jt(this)),this.parent.socket.on("session:request:feedback",this.Sn.Jt(this)),this.parent.socket.on("session:feedback:rated",this.Dn.Jt(this)),this.parent.socket.on("connect",function(){t.gn?t.join(!0):t.restore()})},i.An=function(t){var i;t.error?this.parent.event.publish("session:created",{error:t.error}):(i=!!this.parent.token_id,this.Zt=t.session_id,this.save(),this.join(i),this.parent.event.publish("session:created",{session_id:this.Zt}))},i.$n=function(t){t.error?this.parent.event.publish("session:joined",{error:t.error}):(this.gn||(this.gn=!0),this.parent.Website.set_users_available(t.users_available),this.storage_session_retrieve(t.storage||{}),this.sync_session_diff(t.sync||{}),this.sync_user_data(t),this.parent.Browsing.restore_browsing_state(),this.parent.event.publish("session:joined",t),this.Rn(t.last_active))},i.In=function(t){this.handle_state(t)},i.zn=function(t){"email:invalid_format"===t.type&&(delete this.nn.email,delete this.en.email),this.parent.event.publish("session:error",t)},i.hn=function(t){this.parent.event.publish("session:request:initiate",t)},i.On=function(t){this.parent.event.publish("session:request:purge",t)},i.Sn=function(t){this.parent.event.publish("session:request:feedback",t)},i.Dn=function(t){this.parent.event.publish("session:feedback:rated",t)},i.kn=function(){this.dt();var t={domain:this.Zi()};this.parent.Register.expire(this.tn(),t),this.parent.token_id&&this.parent.Register.expire(this.tn(this.parent.token_id),t)},i.mn=function(){var t={previous:null,current:null};return this.parent.token_id?(this.parent.runtime_configuration&&!0===this.parent.runtime_configuration.session_merge&&(t.previous=this.parent.Register.get(this.tn())||null),t.current=this.parent.Register.get(this.tn(this.parent.token_id))||null):t.current=this.parent.Register.get(this.tn())||null,t},i.wn=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;null!==i&&(this.bn=i),t?(this.Zt=t,this.save(),this.join(!0)):this.create()},i.in=function(t){this.an=t||{}},i.pn=function(){var t=this,i=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.En&&(this.parent.Schedule.clear_timeout(this.En),this.En=null),!0===i?(this.Nn(),this.pn()):this.En=this.parent.Schedule.set_timeout(function(){t.En=null,t.Nn(),t.pn()},this.Vi)},i.Rn=function(){this.dn=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:0)||(new Date).getTime(),this.pn()},i.Nn=function(){!0===this.parent.socket.connected&&(this.yn=(new Date).getTime(),this.parent.socket.emit("session:heartbeat",{last_active:this.dn||0,availability:{type:"online",time:{for:this.Hi}}}))},i.cn=function(){var t=document.location.href||"";if(this.Cn!==t){this.Cn=t;var i=(new Date).getTime();if(i-(this.jn||0)>=this.Pi){this.jn=i;var n=document.title||"";if(n.length>this.Ji&&(n=n.substring(0,this.Ji-this.Wi.length),n+=this.Wi),!0===this.Mi.test(t)&&("?"!==(i=(t=t.replace(this.Mi,"$1$3"))[t.length-1])&&"&"!==i||(t=t.substr(0,t.length-1))),(t=t.length>this.Li?t.split("?")[0]||"":t)&&n&&t.length<=this.Li){t={page_url:t,page_title:n},n=(document.referrer||"").split("?")[0]||"";return n&&n.length<=this.Li&&(t.page_referrer=n),t}}}return null},i.tn=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,i=[this.parent.website_id];return t&&i.push(t),this.parent.Storage.Ut("session",i)},i.Xi=function(){return"number"==typeof this.parent.cookie_expire&&0<this.parent.cookie_expire?this.parent.cookie_expire:this.Gi},i.Zi=function(){return"string"==typeof this.parent.cookie_domain&&this.parent.cookie_domain?this.parent.cookie_domain:this.qn()},i.Qi=function(){return!0===this.parent.runtime_configuration.cross_origin_cookies&&"https:"===document.location.protocol?{policy:"none",secure:!0}:{policy:"lax"}},i.qn=function(){var t=document.domain,i=t,n=this.Qi(),e="samesite=".concat(n.policy,";")+(!0===n.secure?"secure;":"");try{for(var r=0,s=i.split("."),o=this.parent.Storage.Ut("domain-detect",["".concat((new Date).getTime())]);r<s.length-1&&-1===document.cookie.indexOf("".concat(o,"=").concat(o));)i=s.slice(-1-++r).join("."),document.cookie="".concat(o,"=").concat(o,";domain=").concat(i,";").concat(e);document.cookie="".concat(o,"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;")+"domain=".concat(i,";").concat(e)}catch(t){}finally{return i||t}},i.un=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},r=!1;if(!0===n?r=!0:i instanceof Object?!1===this.Bn(this.nn[t],i)&&(r=!0):this.nn[t]!==i&&(r=!0),!0!==r||(this.nn[t]=i,this.en[t]=e,!0!==this.gn))return!1;var s,o={};for(s in o[t]=i,e)o[s]=e[s];return this.parent.socket.emit("session:set_".concat(t),o),!0},i.rn=function(t){for(var i,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],e=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=[],s=0;s<n.length;s++){var o=(n[s]||"").trim().toLowerCase();(o=o&&(!0===["'",'"'].includes(o[0])&&o[o.length-1]===o[0]?o.slice(1,o.length-1):o))&&-1===t.indexOf(o)&&r.push(o)}!0===e?0<r.length||t.length!==n.length?(i=[].concat(n),this.nn.segments=i):i=[]:this.nn.segments=t.concat(i=r),0<i.length&&!0===this.gn&&(i={segments:i},!0===e&&(i.overwrite=!0),this.parent.socket.emit("session:set_segments",i))},i.sn=function(t){var i,n,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=!1,s={};for(i in e)t[i]!==e[i]&&(r=!0,s[i]=e[i]);for(n in this.nn.data=t,s)this.nn.data[n]=s[n];!0===r&&!0===this.gn&&this.parent.socket.emit("session:set_data",{data:s})},i.Bn=function(t,i){if(t instanceof Object&&i instanceof Object){var n,e,r={};for(n in t)r[n]=!0;for(e in i)r[e]=!0;var s,o=!0;for(s in r)if(!1===this.Bn(t[s],i[s])){o=!1;break}return o}return t===i&&!0},i.vn=function(t,i){var n=this;!0===(2<arguments.length&&void 0!==arguments[2]&&arguments[2])?(void 0!==this.Fn[t]&&(this.parent.Schedule.clear_timeout(this.Fn[t]),delete this.Fn[t]),i()):void 0===this.Fn[t]&&(this.Fn[t]=this.parent.Schedule.set_timeout(function(){delete n.Fn[t],i()},this.Ki))},t}(),l=function(){function t(t){this.parent=t,this.dt(),this.xt()}var i=t.prototype;return i.get_users_available=function(){this.Mn(!1)},i.set_users_available=function(t){this.Tn=t},i.reset=function(){this.dt()},i.dt=function(){this.Tn=!1},i.xt=function(){this.parent.socket.on("website:users:available",this.Un.Jt(this))},i.Un=function(t){"boolean"==typeof t&&(this.set_users_available(t),this.Mn(!0))},i.Mn=function(){this.parent.event.publish("website:users:available",{available:this.Tn,changed:0<arguments.length&&void 0!==arguments[0]&&arguments[0]})},t}(),f=function(){function t(t){this.parent=t,this.xt()}var i=t.prototype;return i.get_url_upload=function(t,i){i={id:"".concat((new Date).getTime()),from:"visitor",file:{name:t,type:i}};this.parent.socket.emit("bucket:url:upload:generate",i),this.parent.event.publish("bucket:url:upload:generate",i)},i.xt=function(){this.parent.socket.on("bucket:url:upload:generated",this.Pn.Jt(this))},i.Pn=function(t){this.parent.event.publish("bucket:url:upload:generated",t)},t}(),v=function(){function t(t){this.parent=t,this.xt()}var i=t.prototype;return i.get_animation_list=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,i={id:(new Date).getTime(),from:"visitor",list:{page:i}};t&&(i.list.query=t),this.parent.socket.emit("media:animation:list",i),this.parent.event.publish("media:animation:list",i)},i.xt=function(){this.parent.socket.on("media:animation:listed",this.Ln.Jt(this))},i.Ln=function(t){this.parent.event.publish("media:animation:listed",t)},t}(),d=function(){function t(t){this.parent=t,this.Jn=100,this.dt(),this.xt()}var i=t.prototype;return i.get_overlay_answer_search=function(t){var i,n,e,r=this,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;t&&(i=(null===(n=this.Wn[s||"default"])||void 0===n?void 0:n[this.Vn(t)])||null,n="overlay:answer:search",e={id:(new Date).getTime(),from:"visitor",search:{query:t,locale:s}},this.parent.event.publish(n,e),null!==i&&i.processed&&null!==i&&i.sources?this.parent.Schedule.set_timeout(function(){r.Hn({id:e.id,result:i.processed,search:{query:t}}),r.Gn({id:e.id,result:i.sources,search:{query:t}})},this.Jn):this.parent.socket.emit(n,e))},i.get_overlay_category_suggest=function(t){var i,n,e,r=this;t&&(i=this.Kn[this.Vn(t)]||null,n="overlay:category:suggest",e={id:(new Date).getTime(),from:"visitor",suggest:{query:t}},this.parent.event.publish(n,e),null!==i&&i.sources?this.parent.Schedule.set_timeout(function(){r.Yn({id:e.id,result:i.sources,suggest:{query:t}})},this.Jn):this.parent.socket.emit(n,e))},i.reset=function(){this.dt()},i.dt=function(){this.Wn={},this.Kn={}},i.xt=function(){this.parent.socket.on("overlay:answer:search:partial",this.Zn.Jt(this)),this.parent.socket.on("overlay:answer:search:processed",this.Hn.Jt(this)),this.parent.socket.on("overlay:answer:search:sources",this.Gn.Jt(this)),this.parent.socket.on("overlay:category:suggest:sources",this.Yn.Jt(this))},i.Vn=function(t){return t.trim().toLowerCase()},i.Zn=function(t){this.parent.event.publish("overlay:answer:search:partial",t)},i.Hn=function(t){var i;t.result&&(i=null!==t.result.text&&!0,this.Xn("processed","result",t,i))},i.Gn=function(t){t.result&&this.Xn("sources","result",t)},i.Xn=function(t,i,n){var e,r,s;!0===(!(3<arguments.length&&void 0!==arguments[3])||arguments[3])&&(e=this.Wn,n.search&&"string"==typeof n.search.query&&(r=n.search.locale||"default",s=this.Vn(n.search.query),r in e||(e[r]={}),s in e[r]||(e[r][s]={}),e[r][s][t]=n[i])),this.parent.event.publish("overlay:answer:search:".concat(t),n)},i.Yn=function(t){var i,n;t.result&&(i=this.Kn,t.suggest&&"string"==typeof t.suggest.query&&((n=this.Vn(t.suggest.query))in i||(i[n]={}),i[n].sources=t.result),this.parent.event.publish("overlay:category:suggest:sources",t))},t}();function y(t,i,n){var e;return(i="symbol"==typeof(e=function(t,i){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);t=n.call(t,"string");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(i))?e:String(e))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function p(){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function e(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function s(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}function r(){return(r=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var n,e=arguments[i];for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t}).apply(this,arguments)}function o(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&c(t,i)}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,i){return(c=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function l(t,i,n){return(l=u()?Reflect.construct:function(t,i,n){var e=[null];e.push.apply(e,i);e=new(Function.bind.apply(t,e));return n&&c(e,n.prototype),e}).apply(null,arguments)}function n(t){var n="function"==typeof Map?new Map:void 0;return function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,i)}function i(){return l(t,arguments,h(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),c(i,t)}(t)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(n){var e=u();return function(){var t,i=h(n);return function(t,i){if(i&&("object"==typeof i||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return f(t)}(this,e?(t=h(this).constructor,Reflect.construct(i,arguments,t)):i.apply(this,arguments))}}function d(t,i,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,i,n){t=function(t,i){for(;!Object.prototype.hasOwnProperty.call(t,i)&&null!==(t=h(t)););return t}(t,i);if(t){i=Object.getOwnPropertyDescriptor(t,i);return i.get?i.get.call(n):i.value}})(t,i,n||t)}function y(t,i){(null==i||i>t.length)&&(i=t.length);for(var n=0,e=new Array(i);n<i;n++)e[n]=t[n];return e}var p=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,m=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],w=Object.create(null);w.open="0",w.close="1",w.ping="2",w.pong="3",w.message="4",w.upgrade="5",w.noop="6";var g=Object.create(null);Object.keys(w).forEach(function(t){g[w[t]]=t});for(var b={type:"error",data:"parser error"},_="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),k="function"==typeof ArrayBuffer,x=function(t,i){var n=new FileReader;return n.onload=function(){var t=n.result.split(",")[1];i("b"+t)},n.readAsDataURL(t)},t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",F="undefined"==typeof Uint8Array?[]:new Uint8Array(256),i=0;i<t.length;i++)F[t.charCodeAt(i)]=i;function E(t,i){return"blob"===i&&t instanceof ArrayBuffer?new Blob([t]):t}var C="function"==typeof ArrayBuffer,j=A;function A(t){if(t)return function(t){for(var i in A.prototype)t[i]=A.prototype[i];return t}(t)}A.prototype.on=A.prototype.addEventListener=function(t,i){return this.Qn=this.Qn||{},(this.Qn["$"+t]=this.Qn["$"+t]||[]).push(i),this},A.prototype.once=function(t,i){function n(){this.off(t,n),i.apply(this,arguments)}return n.fn=i,this.on(t,n),this},A.prototype.off=A.prototype.removeListener=A.prototype.removeAllListeners=A.prototype.removeEventListener=function(t,i){if(this.Qn=this.Qn||{},0==arguments.length)return this.Qn={},this;var n,e=this.Qn["$"+t];if(!e)return this;if(1==arguments.length)return delete this.Qn["$"+t],this;for(var r=0;r<e.length;r++)if((n=e[r])===i||n.fn===i){e.splice(r,1);break}return 0===e.length&&delete this.Qn["$"+t],this},A.prototype.emitReserved=A.prototype.emit=function(t){this.Qn=this.Qn||{};for(var i=new Array(arguments.length-1),n=this.Qn["$"+t],e=1;e<arguments.length;e++)i[e-1]=arguments[e];if(n)for(var e=0,r=(n=n.slice(0)).length;e<r;++e)n[e].apply(this,i);return this},A.prototype.listeners=function(t){return this.Qn=this.Qn||{},this.Qn["$"+t]||[]},A.prototype.hasListeners=function(t){return!!this.listeners(t).length},"undefined"!=typeof self||"undefined"!=typeof window||Function("return this")();var $=setTimeout,I=clearTimeout;function z(t,i){i.useNativeTimers?(t.setTimeoutFn=$.bind(window),t.clearTimeoutFn=I.bind(window)):(t.setTimeoutFn=setTimeout.bind(window),t.clearTimeoutFn=clearTimeout.bind(window))}var O,S=function(t){o(i,n(Error));var e=v(i);function i(t,i,n){t=e.call(this,t);return t.description=i,t.context=n,t.type="TransportError",t}return i}(),D=function(t){o(e,j);var n=v(e);function e(t){var i=n.call(this);return i.writable=!1,z(f(i),t),i.opts=t,i.query=t.query,i.readyState="",i.socket=t.socket,i}return s(e,[{key:"onError",value:function(t,i,n){return d(h(e.prototype),"emitReserved",this).call(this,"error",new S(t,i,n)),this}},{key:"open",value:function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(t){"open"===this.readyState&&this.write(t)}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,d(h(e.prototype),"emitReserved",this).call(this,"open")}},{key:"onData",value:function(t){t=function(t,i){if("string"!=typeof t)return{type:"message",data:E(t,i)};var n,e=t.charAt(0);return"b"===e?{type:"message",data:(n=t.substring(1),i=i,C?E(function(t){var i,n,e,r,s=.75*t.length,o=t.length,c=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);for(var s=new ArrayBuffer(s),a=new Uint8Array(s),h=0;h<o;h+=4)i=F[t.charCodeAt(h)],n=F[t.charCodeAt(h+1)],e=F[t.charCodeAt(h+2)],r=F[t.charCodeAt(h+3)],a[c++]=i<<2|n>>4,a[c++]=(15&n)<<4|e>>2,a[c++]=(3&e)<<6|63&r;return s}(n),i):{base64:!0,data:n})}:g[e]?1<t.length?{type:g[e],data:t.substring(1)}:{type:g[e]}:b}(t,this.socket.binaryType);this.onPacket(t)}},{key:"onPacket",value:function(t){d(h(e.prototype),"emitReserved",this).call(this,"packet",t)}},{key:"onClose",value:function(t){this.readyState="closed",d(h(e.prototype),"emitReserved",this).call(this,"close",t)}}]),e}(),R="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),N={},q=0,B=0;function M(t){for(var i="";i=R[t%64]+i,0<(t=Math.floor(t/64)););return i}for(;B<64;B++)N[R[B]]=B;var T="function"==typeof Promise&&"function"==typeof Promise.resolve?function(t){return Promise.resolve().then(t)}:function(t,i){return i(t,0)},U=window.WebSocket||window.MozWebSocket,P="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),L={websocket:function(t){o(i,D);var n=v(i);function i(t){var i=n.call(this,t);return i.supportsBinary=!t.forceBase64,i}return s(i,[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var t=this.uri(),i=this.opts.protocols,n=P?{}:function(n){for(var t=arguments.length,i=new Array(1<t?t-1:0),e=1;e<t;e++)i[e-1]=arguments[e];return i.reduce(function(t,i){return n.hasOwnProperty(i)&&(t[i]=n[i]),t},{})}(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=P?new U(t,i,n):i?new U(t,i):new U(t)}catch(t){return this.emitReserved("error",t)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}}},{key:"addEventListeners",value:function(){var i=this;this.ws.onopen=function(){i.opts.autoUnref&&i.ws.te.unref(),i.onOpen()},this.ws.onclose=function(t){return i.onClose({description:"websocket connection closed",context:t})},this.ws.onmessage=function(t){return i.onData(t.data)},this.ws.onerror=function(t){return i.onError("websocket error",t)}}},{key:"write",value:function(o){var c=this;this.writable=!1;for(var t=0;t<o.length;t++)(function(t){function i(t){try{c.ws.send(t)}catch(t){}e&&T(function(){c.writable=!0,c.emitReserved("drain")},c.setTimeoutFn)}var n=o[t],e=t===o.length-1,r=c.supportsBinary,s=n.type,t=n.data;_&&t instanceof Blob?r?i(t):x(t,i):k&&(t instanceof ArrayBuffer||(n=t,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer))?r?i(t):x(new Blob([t]),i):i(w[s]+(t||""))})(t)}},{key:"doClose",value:function(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var t,i=this.query||{},n=this.opts.secure?"wss":"ws",e="";this.opts.port&&("wss"==n&&443!==Number(this.opts.port)||"ws"==n&&80!==Number(this.opts.port))&&(e=":"+this.opts.port),this.opts.timestampRequests&&(i[this.opts.timestampParam]=(t=M(+new Date))!==O?(q=0,O=t):t+"."+M(q++)),this.supportsBinary||(i.b64=1);i=function(t){var i,n="";for(i in t)t.hasOwnProperty(i)&&(n.length&&(n+="&"),n+=encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return n}(i);return n+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+e+this.opts.path+(i.length?"?"+i:"")}},{key:"check",value:function(){return!(!U||"ie"in U&&this.name===i.prototype.name)}}]),i}()},J=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,W=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function V(t){var i=t,n=t.indexOf("["),e=t.indexOf("]");-1!=n&&-1!=e&&(t=t.substring(0,n)+t.substring(n,e).replace(/:/g,";")+t.substring(e,t.length));for(var r,s=J.exec(t||""),o={},c=14;c--;)o[W[c]]=s[c]||"";return-1!=n&&-1!=e&&(o.source=i,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=(i=(e=o.path).replace(/\/{2,9}/g,"/").split("/"),"/"!=e.substr(0,1)&&0!==e.length||i.splice(0,1),"/"==e.substr(e.length-1,1)&&i.splice(i.length-1,1),i),o.queryKey=(i=o.query,r={},i.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(t,i,n){i&&(r[i]=n)}),r),o}var H=function(t){o(l,j);var n=v(l);function l(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=n.call(this);return t&&"object"===a(t)&&(i=t,t=null),t?(t=V(t),i.hostname=t.host,i.secure="https"===t.protocol||"wss"===t.protocol,i.port=t.port,t.query&&(i.query=t.query)):i.host&&(i.hostname=V(i.host).host),z(f(o),i),o.secure=null!=i.secure?i.secure:"undefined"!=typeof location&&"https:"===location.protocol,i.hostname&&!i.port&&(i.port=o.secure?"443":"80"),o.hostname=i.hostname||("undefined"!=typeof location?location.hostname:"localhost"),o.port=i.port||("undefined"!=typeof location&&location.port?location.port:o.secure?"443":"80"),o.transports=i.transports||["websocket"],o.readyState="",o.writeBuffer=[],o.prevBufferLen=0,o.opts=r({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},i),o.opts.path=o.opts.path.replace(/\/$/,"")+"/","string"==typeof o.opts.query&&(o.opts.query=function(t){for(var i={},n=o.opts.query.split("&"),e=0,r=n.length;e<r;e++){var s=n[e].split("=");i[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return i}()),o.id=null,o.upgrades=null,o.pingInterval=null,o.pingTimeout=null,o.pingTimeoutTimer=null,"function"==typeof addEventListener&&(o.opts.closeOnBeforeunload&&addEventListener("beforeunload",function(){o.transport&&(o.transport.removeAllListeners(),o.transport.close())},!1),"localhost"!==o.hostname&&(o.offlineEventListener=function(){o.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",o.offlineEventListener,!1))),o.open(),o}return s(l,[{key:"createTransport",value:function(t){var i=function(t){var i,n={};for(i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}(this.opts.query);i.EIO=4,i.transport=t,this.id&&(i.sid=this.id);i=r({},this.opts.transportOptions[t],this.opts,{query:i,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new L[t](i)}},{key:"open",value:function(){var t,i=this;if(this.opts.rememberUpgrade&&l.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn(function(){i.emitReserved("error","No transports available")},0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}},{key:"setTransport",value:function(t){var i=this;this.transport&&this.transport.removeAllListeners(),(this.transport=t).on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",function(t){return i.onClose("transport close",t)})}},{key:"probe",value:function(t){var i=this,n=this.createTransport(t),e=!1;l.priorWebsocketSuccess=!1;var r=function(){e||(n.send([{type:"ping",data:"probe"}]),n.once("packet",function(t){e||("pong"===t.type&&"probe"===t.data?(i.upgrading=!0,i.emitReserved("upgrading",n),n&&(l.priorWebsocketSuccess="websocket"===n.name,i.transport.pause(function(){e||"closed"!==i.readyState&&(u(),i.setTransport(n),n.send([{type:"upgrade"}]),i.emitReserved("upgrade",n),n=null,i.upgrading=!1,i.flush())}))):((t=new Error("probe error")).transport=n.name,i.emitReserved("upgradeError",t)))}))};function s(){e||(e=!0,u(),n.close(),n=null)}var o=function(t){t=new Error("probe error: "+t);t.transport=n.name,s(),i.emitReserved("upgradeError",t)};function c(){o("transport closed")}function a(){o("socket closed")}function h(t){n&&t.name!==n.name&&s()}var u=function(){n.removeListener("open",r),n.removeListener("error",o),n.removeListener("close",c),i.off("close",a),i.off("upgrading",h)};n.once("open",r),n.once("error",o),n.once("close",c),this.once("close",a),this.once("upgrading",h),n.open()}},{key:"onOpen",value:function(){if(this.readyState="open",l.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause)for(var t=0,i=this.upgrades.length;t<i;t++)this.probe(this.upgrades[t])}},{key:"onPacket",value:function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var i=new Error("server error");i.code=t.data,this.onError(i);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}}},{key:"onHandshake",value:function(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var t=this;this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(function(){t.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),(this.prevBufferLen=0)===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}},{key:"flush",value:function(){var t;"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(t=this.getWritablePackets(),this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush"))}},{key:"getWritablePackets",value:function(){if(!(this.maxPayload&&"polling"===this.transport.name&&1<this.writeBuffer.length))return this.writeBuffer;for(var t=1,i=0;i<this.writeBuffer.length;i++){var n=this.writeBuffer[i].data;if(n&&(t+="string"==typeof(n=n)?function(t){for(var i,n=0,e=0,r=t.length;e<r;e++)(i=t.charCodeAt(e))<128?n+=1:i<2048?n+=2:i<55296||57344<=i?n+=3:(e++,n+=4);return n}(n):Math.ceil(1.33*(n.byteLength||n.size))),0<i&&t>this.maxPayload)return this.writeBuffer.slice(0,i);t+=2}return this.writeBuffer}},{key:"write",value:function(t,i,n){return this.sendPacket("message",t,i,n),this}},{key:"send",value:function(t,i,n){return this.sendPacket("message",t,i,n),this}},{key:"sendPacket",value:function(t,i,n,e){"function"==typeof i&&(e=i,i=void 0),"function"==typeof n&&(e=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState&&((n=n||{}).compress=!1!==n.compress,this.emitReserved("packetCreate",n={type:t,data:i,options:n}),this.writeBuffer.push(n),e&&this.once("flush",e),this.flush())}},{key:"close",value:function(){function t(){n.off("upgrade",t),n.off("upgradeError",t),e()}function i(){n.once("upgrade",t),n.once("upgradeError",t)}var n=this,e=function(){n.onClose("forced close"),n.transport.close()};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",function(){(n.upgrading?i:e)()}):(this.upgrading?i:e)()),this}},{key:"onError",value:function(t){l.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}},{key:"onClose",value:function(t,i){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",t,i),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(t){for(var i=[],n=0,e=t.length;n<e;n++)~this.transports.indexOf(t[n])&&i.push(t[n]);return i}}]),l}();H.protocol=4;var G="function"==typeof ArrayBuffer,K=Object.prototype.toString,Y="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===K.call(Blob),Z="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===K.call(File);function X(t){return G&&(t instanceof ArrayBuffer||(i=t,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(i):i.buffer instanceof ArrayBuffer))||Y&&t instanceof Blob||Z&&t instanceof File;var i}var Q={CONNECT:0,0:"CONNECT",DISCONNECT:1,1:"DISCONNECT",EVENT:2,2:"EVENT",ACK:3,3:"ACK",CONNECT_ERROR:4,4:"CONNECT_ERROR",BINARY_EVENT:5,5:"BINARY_EVENT",BINARY_ACK:6,6:"BINARY_ACK"},tt=function(){function t(){}return s(t,[{key:"encode",value:function(t){return t.type!==Q.EVENT&&t.type!==Q.ACK||!function t(i,n){if(!i||"object"!==a(i))return!1;if(Array.isArray(i)){for(var e=0,r=i.length;e<r;e++)if(t(i[e]))return!0;return!1}if(X(i))return!0;if(i.toJSON&&"function"==typeof i.toJSON&&1===arguments.length)return t(i.toJSON(),!0);for(var s in i)if(Object.prototype.hasOwnProperty.call(i,s)&&t(i[s]))return!0;return!1}(t)?[this.encodeAsString(t)]:(t.type=t.type===Q.EVENT?Q.BINARY_EVENT:Q.BINARY_ACK,this.encodeAsBinary(t))}},{key:"encodeAsString",value:function(t){var i=""+t.type;return t.type!==Q.BINARY_EVENT&&t.type!==Q.BINARY_ACK||(i+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(i+=t.nsp+","),null!=t.id&&(i+=t.id),null!=t.data&&(i+=JSON.stringify(t.data)),i}},{key:"encodeAsBinary",value:function(t){var t=(i=t.data,(t=t).data=function t(i,n){if(!i)return i;if(X(i)){var e={ne:!0,num:n.length};return n.push(i),e}if(Array.isArray(i)){for(var r=new Array(i.length),s=0;s<i.length;s++)r[s]=t(i[s],n);return r}if("object"!==a(i)||i instanceof Date)return i;var o,c={};for(o in i)i.hasOwnProperty(o)&&(c[o]=t(i[o],n));return c}(i,i=[]),t.attachments=i.length,{packet:t,buffers:i}),i=this.encodeAsString(t.packet),t=t.buffers;return t.unshift(i),t}}]),t}(),K=function(t){o(c,j);var i=v(c);function c(){return i.call(this)}return s(c,[{key:"add",value:function(t){var i;if("string"==typeof t)(i=this.decodeString(t)).type===Q.BINARY_EVENT||i.type===Q.BINARY_ACK?(this.reconstructor=new it(i),0===i.attachments&&d(h(c.prototype),"emitReserved",this).call(this,"decoded",i)):d(h(c.prototype),"emitReserved",this).call(this,"decoded",i);else{if(!X(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(i=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,d(h(c.prototype),"emitReserved",this).call(this,"decoded",i))}}},{key:"decodeString",value:function(t){var i=0,n={type:Number(t.charAt(0))};if(void 0===Q[n.type])throw new Error("unknown packet type "+n.type);if(n.type===Q.BINARY_EVENT||n.type===Q.BINARY_ACK){for(var e=i+1;"-"!==t.charAt(++i)&&i!=t.length;);e=t.substring(e,i);if(e!=Number(e)||"-"!==t.charAt(i))throw new Error("Illegal attachments");n.attachments=Number(e)}if("/"===t.charAt(i+1)){for(var r=i+1;++i&&","!==t.charAt(i)&&i!==t.length;);n.nsp=t.substring(r,i)}else n.nsp="/";r=t.charAt(i+1);if(""!==r&&Number(r)==r){for(var s=i+1;++i;){var o=t.charAt(i);if(null==o||Number(o)!=o){--i;break}if(i===t.length)break}n.id=Number(t.substring(s,i+1))}if(t.charAt(++i)){s=function(t){try{return JSON.parse(t)}catch(t){return!1}}(t.substr(i));if(!c.isPayloadValid(n.type,s))throw new Error("invalid payload");n.data=s}return n}},{key:"destroy",value:function(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}],[{key:"isPayloadValid",value:function(t,i){switch(t){case Q.CONNECT:return"object"===a(i);case Q.DISCONNECT:return void 0===i;case Q.CONNECT_ERROR:return"string"==typeof i||"object"===a(i);case Q.EVENT:case Q.BINARY_EVENT:return Array.isArray(i)&&0<i.length;case Q.ACK:case Q.BINARY_ACK:return Array.isArray(i)}}}]),c}(),it=function(){function t(t){this.packet=t,this.buffers=[],this.reconPack=t}return s(t,[{key:"takeBinaryData",value:function(t){if(this.buffers.push(t),this.buffers.length!==this.reconPack.attachments)return null;var i=(i=this.reconPack,t=this.buffers,i.data=function t(i,n){if(!i)return i;if(i&&i.ne)return n[i.num];if(Array.isArray(i))for(var e=0;e<i.length;e++)i[e]=t(i[e],n);else if("object"===a(i))for(var r in i)i.hasOwnProperty(r)&&(i[r]=t(i[r],n));return i}(i.data,t),i.attachments=void 0,i);return this.finishedReconstruction(),i}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),t}(),nt=Object.freeze({__proto__:null,protocol:5,get PacketType(){return Q},Encoder:tt,Decoder:K});function et(t,i,n){return t.on(i,n),function(){t.off(i,n)}}var rt=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),st=function(t){o(e,j);var r=v(e);function e(t,i,n){var e=r.call(this);return e.connected=!1,e.disconnected=!0,e.receiveBuffer=[],e.sendBuffer=[],e.ids=0,e.acks={},e.flags={},e.io=t,e.nsp=i,n&&n.auth&&(e.auth=n.auth),e.io._autoConnect&&e.open(),e}return s(e,[{key:"subEvents",value:function(){var t;this.subs||(t=this.io,this.subs=[et(t,"open",this.onopen.bind(this)),et(t,"packet",this.onpacket.bind(this)),et(t,"error",this.onerror.bind(this)),et(t,"close",this.onclose.bind(this))])}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return i.unshift("message"),this.emit.apply(this,i),this}},{key:"emit",value:function(t){if(rt.hasOwnProperty(t))throw new Error('"'+t+'" is a reserved event name');for(var i=arguments.length,n=new Array(1<i?i-1:0),e=1;e<i;e++)n[e-1]=arguments[e];n.unshift(t);var r={type:Q.EVENT,data:n,options:{}};r.options.compress=!1!==this.flags.compress,"function"==typeof n[n.length-1]&&(s=this.ids++,t=n.pop(),this._registerAckCallback(s,t),r.id=s);var s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return(!this.flags.volatile||s&&this.connected)&&(this.connected?this.packet(r):this.sendBuffer.push(r)),this.flags={},this}},{key:"_registerAckCallback",value:function(i,e){var r,s=this,t=this.flags.timeout;void 0!==t?(r=this.io.setTimeoutFn(function(){delete s.acks[i];for(var t=0;t<s.sendBuffer.length;t++)s.sendBuffer[t].id===i&&s.sendBuffer.splice(t,1);e.call(s,new Error("operation has timed out"))},t),this.acks[i]=function(){s.io.clearTimeoutFn(r);for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];e.apply(s,[null].concat(i))}):this.acks[i]=e}},{key:"packet",value:function(t){t.nsp=this.nsp,this.io._packet(t)}},{key:"onopen",value:function(){var i=this;"function"==typeof this.auth?this.auth(function(t){i.packet({type:Q.CONNECT,data:t})}):this.packet({type:Q.CONNECT,data:this.auth})}},{key:"onerror",value:function(t){this.connected||this.emitReserved("connect_error",t)}},{key:"onclose",value:function(t){this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",t)}},{key:"onpacket",value:function(t){if(t.nsp===this.nsp)switch(t.type){case Q.CONNECT:t.data&&t.data.sid?(i=t.data.sid,this.onconnect(i)):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Q.EVENT:case Q.BINARY_EVENT:this.onevent(t);break;case Q.ACK:case Q.BINARY_ACK:this.onack(t);break;case Q.DISCONNECT:this.ondisconnect();break;case Q.CONNECT_ERROR:this.destroy();var i=new Error(t.data.message);i.data=t.data.data,this.emitReserved("connect_error",i)}}},{key:"onevent",value:function(t){var i=t.data||[];null!=t.id&&i.push(this.ack(t.id)),this.connected?this.emitEvent(i):this.receiveBuffer.push(Object.freeze(i))}},{key:"emitEvent",value:function(t){if(this._anyListeners&&this._anyListeners.length){var i,n=function(t,i){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,i){if(t){if("string"==typeof t)return y(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(t,void 0):void 0}}(t))){n&&(t=n);var e=0,r=function(){};return{s:r,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw s}}}}(this._anyListeners.slice());try{for(n.s();!(i=n.n()).done;)i.value.apply(this,t)}catch(t){n.e(t)}finally{n.f()}}d(h(e.prototype),"emit",this).apply(this,t)}},{key:"ack",value:function(e){var r=this,s=!1;return function(){if(!s){s=!0;for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];r.packet({type:Q.ACK,id:e,data:i})}}}},{key:"onack",value:function(t){var i=this.acks[t.id];"function"==typeof i&&(i.apply(this,t.data),delete this.acks[t.id])}},{key:"onconnect",value:function(t){this.id=t,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}},{key:"emitBuffered",value:function(){var i=this;this.receiveBuffer.forEach(function(t){return i.emitEvent(t)}),this.receiveBuffer=[],this.sendBuffer.forEach(function(t){return i.packet(t)}),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach(function(t){return t()}),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&this.packet({type:Q.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(t){return this.flags.compress=t,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"timeout",value:function(t){return this.flags.timeout=t,this}},{key:"onAny",value:function(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}},{key:"prependAny",value:function(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}},{key:"offAny",value:function(t){if(!this._anyListeners)return this;if(t){for(var i=this._anyListeners,n=0;n<i.length;n++)if(t===i[n])return i.splice(n,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}}]),e}(),ot=ct;function ct(t){this.ms=(t=t||{}).min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=0<t.jitter&&t.jitter<=1?t.jitter:0,this.attempts=0}ct.prototype.duration=function(){var t,i,n=this.ms*Math.pow(this.factor,this.attempts++);return this.jitter&&(t=Math.random(),i=Math.floor(t*this.jitter*n),n=0==(1&Math.floor(10*t))?n-i:n+i),0|Math.min(n,this.max)},ct.prototype.reset=function(){this.attempts=0},ct.prototype.setMin=function(t){this.ms=t},ct.prototype.setMax=function(t){this.max=t},ct.prototype.setJitter=function(t){this.jitter=t};var at=function(t){o(i,j);var r=v(i);function i(t,i){var n,e=r.call(this);e.nsps={},e.subs=[],t&&"object"===a(t)&&(i=t,t=void 0),(i=i||{}).path=i.path||"/socket.io",e.opts=i,z(f(e),i),e.reconnection(!1!==i.reconnection),e.reconnectionAttempts(i.reconnectionAttempts||1/0),e.reconnectionDelay(i.reconnectionDelay||1e3),e.reconnectionDelayMax(i.reconnectionDelayMax||5e3),e.randomizationFactor(null!==(n=i.randomizationFactor)&&void 0!==n?n:.5),e.backoff=new ot({min:e.reconnectionDelay(),max:e.reconnectionDelayMax(),jitter:e.randomizationFactor()}),e.timeout(null==i.timeout?2e4:i.timeout),e._readyState="closed",e.uri=t;t=i.parser||nt;return e.encoder=new t.Encoder,e.decoder=new t.Decoder,e._autoConnect=!1!==i.autoConnect,e._autoConnect&&e.open(),e}return s(i,[{key:"reconnection",value:function(t){return arguments.length?(this.ee=!!t,this):this.ee}},{key:"reconnectionAttempts",value:function(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}},{key:"reconnectionDelay",value:function(t){var i;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null!==(i=this.backoff)&&void 0!==i&&i.setMin(t),this)}},{key:"randomizationFactor",value:function(t){var i;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null!==(i=this.backoff)&&void 0!==i&&i.setJitter(t),this)}},{key:"reconnectionDelayMax",value:function(t){var i;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null!==(i=this.backoff)&&void 0!==i&&i.setMax(t),this)}},{key:"timeout",value:function(t){return arguments.length?(this.re=t,this):this.re}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this.ee&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(i){var n=this;if(~this._readyState.indexOf("open"))return this;this.engine=new H(this.uri,this.opts);var t=this.engine,e=this;this._readyState="opening",this.skipReconnect=!1;var r,s,o=et(t,"open",function(){e.onopen(),i&&i()}),c=et(t,"error",function(t){e.cleanup(),e._readyState="closed",n.emitReserved("error",t),i?i(t):e.maybeReconnectOnOpen()});return!1!==this.re&&(0===(r=this.re)&&o(),s=this.setTimeoutFn(function(){o(),t.close(),t.emit("error",new Error("timeout"))},r),this.opts.autoUnref&&s.unref(),this.subs.push(function(){clearTimeout(s)})),this.subs.push(o),this.subs.push(c),this}},{key:"connect",value:function(t){return this.open(t)}},{key:"onopen",value:function(){this.cleanup(),this._readyState="open",this.emitReserved("open");var t=this.engine;this.subs.push(et(t,"ping",this.onping.bind(this)),et(t,"data",this.ondata.bind(this)),et(t,"error",this.onerror.bind(this)),et(t,"close",this.onclose.bind(this)),et(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(t){this.decoder.add(t)}},{key:"ondecoded",value:function(t){this.emitReserved("packet",t)}},{key:"onerror",value:function(t){this.emitReserved("error",t)}},{key:"socket",value:function(t,i){var n;return(n=this.nsps[t])||(n=new st(this,t,i),this.nsps[t]=n),n}},{key:"_destroy",value:function(t){for(var i=0,n=Object.keys(this.nsps);i<n.length;i++){var e=n[i];if(this.nsps[e].active)return}this._close()}},{key:"_packet",value:function(t){for(var i=this.encoder.encode(t),n=0;n<i.length;n++)this.engine.write(i[n],t.options)}},{key:"cleanup",value:function(){this.subs.forEach(function(t){return t()}),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t),this.ee&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var i=this;if(this._reconnecting||this.skipReconnect)return this;var t,n,e=this;this.backoff.attempts>=this._reconnectionAttempts?(this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1):(t=this.backoff.duration(),this._reconnecting=!0,n=this.setTimeoutFn(function(){e.skipReconnect||(i.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(e._reconnecting=!1,e.reconnect(),i.emitReserved("reconnect_error",t)):e.onreconnect()}))},t),this.opts.autoUnref&&n.unref(),this.subs.push(function(){clearTimeout(n)}))}},{key:"onreconnect",value:function(){var t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}]),i}(),ht={};function ut(t,i){"object"===a(t)&&(i=t,t=void 0);var n=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=t,e=(2<arguments.length?arguments[2]:void 0)||"undefined"!=typeof location&&location;"string"==typeof(t=null==t?e.protocol+"//"+e.host:t)&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?e.protocol+t:e.host+t),n=function(t){var i=t,n=t.indexOf("["),e=t.indexOf("]");-1!=n&&-1!=e&&(t=t.substring(0,n)+t.substring(n,e).replace(/:/g,";")+t.substring(e,t.length));for(var r,s=p.exec(t||""),o={},c=14;c--;)o[m[c]]=s[c]||"";return-1!=n&&-1!=e&&(o.source=i,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=(i=(e=o.path).replace(/\/{2,9}/g,"/").split("/"),"/"!=e.substr(0,1)&&0!==e.length||i.splice(0,1),"/"==e.substr(e.length-1,1)&&i.splice(i.length-1,1),i),o.queryKey=(i=o.query,r={},i.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(t,i,n){i&&(r[i]=n)}),r),o}(t=/^(https?|wss?):\/\//.test(t)?t:e.protocol+"//"+t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";t=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+t+":"+n.port+i,n.href=n.protocol+"://"+t+(e&&e.port===n.port?"":":"+n.port),n}(t,(i=i||{}).path||"/socket.io"),e=n.source,r=n.id,t=n.path,t=ht[r]&&t in ht[r].nsps,r=i.forceNew||i["force new connection"]||!1===i.multiplex||t?new at(e,i):(ht[r]||(ht[r]=new at(e,i)),ht[r]);return n.query&&!i.query&&(i.query=n.queryKey),r.socket(n.path,i)}return r(ut,{Manager:at,Socket:st,io:ut,connect:ut}),ut}var m=function(){function t(t){this.parent=t,this.se=100,this.dt(),this.xt()}var i=t.prototype;return i.get_article_search=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return this.oe("search",this.ce,"query",this.ae.Jt(this),t,i)},i.get_article_suggest=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return this.oe("suggest",this.he,"part",this.ue.Jt(this),t,i)},i.report_article_search=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";(i=(i||"").trim())&&(this.parent.socket.emit("helpdesk:article:report",i={report:{locale:t,query:i}}),this.parent.event.publish("helpdesk:article:report",i))},i.reset=function(){this.dt()},i.dt=function(){this.ce={},this.he={}},i.xt=function(){this.parent.socket.on("helpdesk:article:searched",this.ae.Jt(this)),this.parent.socket.on("helpdesk:article:suggested",this.ue.Jt(this))},i.ae=function(t){return this.le("search",this.ce,"query",t)},i.ue=function(t){return this.le("suggest",this.he,"part",t)},i.oe=function(t,i,n,e,r){var s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null,o=(i[s||"default"]||{})[r],c="helpdesk:article:".concat(t),a=y({id:(new Date).getTime(),from:"visitor"},t,y({locale:s},n,r));this.parent.event.publish(c,a),o?this.parent.Schedule.set_timeout(function(){e(y({id:a.id,results:o},t,y({locale:s},n,r)))},this.se):this.parent.socket.emit(c,a)},i.le=function(t,i,n,e){var r;e[t]&&"string"==typeof e[t][n]&&(i[r=e[t].locale||"default"]=i[r]||{},i[r][e[t][n]]=e.results),this.parent.event.publish("helpdesk:article:".concat(t,"ed"),e)},t}(),w=function(){function t(t){this.parent=t,this.fe=1e4,this.ve=45e3,this.de=45e3,this.ye=1e3,this.pe=1e3,this.Ki=500,this.me=1e3,this.we=10,this.ge=15e4,this.be=["browsing:action:start","browsing:action:stop","browsing:action:heartbeat","browsing:assist:start","browsing:assist:stop","browsing:assist:heartbeat","browsing:assist:mouse","browsing:assist:scroll","browsing:assist:click"],this.dt(),this.xt(),this.ke(),this.xe(),this.Fe(),this.Ee(),this.Ce()}var i=t.prototype;return i.init=function(t,i,n){var e=this;this.parent.Stream.bind_to(null,this.be,{session_id:this.parent.Session.Zt},function(){-1===(e.parent.device.capabilities||[]).indexOf("browsing")||!0!==e.parent.Config.yt&&"1"===(navigator||{}).doNotTrack?(e.parent.stream.emit("client:browsing:request:decline",{}),e.je()):(e.Ae=t.deps.tree_mirror||null,(e.$e=!0)===t.resume?(e.parent.stream.emit("client:browsing:resume",{browsing_id:e.Ie}),e.pn(!0),!0===e.ze&&e.Oe(!0)):(e.pn(!0),e.parent.stream.emit("client:browsing:request:accept",{useragent:navigator.userAgent}))),"function"==typeof i&&i()},function(){"function"==typeof n&&n()})},i.restore_browsing_state=function(){this.Ie&&(!1===this.Se()?this.De({resume:!0}):this.je())},i.toggle_ignore_scroll_event=function(){this.Re=0<arguments.length&&void 0!==arguments[0]&&arguments[0]},i.reset=function(){!0===this.ze&&this.je(),this.dt(),this.Ne()},i.dt=function(){if(this.parent.Schedule.clear_interval(this.qe),this.parent.Schedule.clear_interval(this.Be),this.parent.Schedule.clear_interval(this.Me),this.parent.Schedule.clear_interval(this.Te),"object"==typeof this.Fn)for(var t in this.Fn)this.parent.Schedule.clear_timeout(this.Fn[t]);if("object"==typeof this.Ue)for(var i in this.Ue)this.parent.Schedule.clear_timeout(this.Ue[i].dead_timeout);(this.Pe||{}).defer_event&&this.parent.Schedule.clear_timeout(this.Pe.defer_event),this.$e=!1,this.Ie=null,this.ze=!1,this.yn=null,this.qe=null,this.Be=null,this.Me=null,this.Te=null,this.Re=!1,this.Le=null,this.Ae=null,this.Je=null,this.We=0,this.Fn={},this.Ve=[],this.Ue={assist:{ongoing:!1,last_heartbeat:null,dead_timeout:null}},this.He={x:0,y:0,last_x:0,last_y:0},this.Ge={x:0,y:0,last_x:0,last_y:0},this.Pe={last_call:(new Date).getTime(),defer_event:null}},i.tn=function(){return this.parent.Storage.Ut("browsing",[this.parent.website_id])},i.xt=function(){this.parent.socket.on("browsing:request:initiate",this.De.Jt(this)),this.parent.stream.on("client:browsing:request:initiated",this.Ke.Jt(this)),this.parent.stream.on("client:browsing:action:start",this.Ye.Jt(this)),this.parent.stream.on("client:browsing:action:stop",this.Ze.Jt(this)),this.parent.stream.on("client:browsing:action:heartbeat",this.Xe.Jt(this)),this.parent.stream.on("client:browsing:assist:start",this.Qe.Jt(this)),this.parent.stream.on("client:browsing:assist:stop",this.tr.Jt(this)),this.parent.stream.on("client:browsing:assist:heartbeat",this.ir.Jt(this)),this.parent.stream.on("client:browsing:assist:mouse",this.nr.Jt(this)),this.parent.stream.on("client:browsing:assist:scroll",this.er.Jt(this)),this.parent.stream.on("client:browsing:assist:click",this.rr.Jt(this))},i.ke=function(){var t;"object"!=typeof window.sessionStorage||(t=window.sessionStorage.getItem(this.tn()))&&(t=JSON.parse(t),this.Ie=t.browsing_id||null,this.ze=t.is_playing||!1,this.yn=t.last_heartbeat||null)},i.De=function(t){!0===this.$e&&!0!==t.resume||(!0!==t.resume&&this.je(),this.parent.event.publish("browsing:request:initiate",t||{}))},i.Ke=function(t){!0===this.$e&&(this.Ie=t.browsing_id,this.yn=(new Date).getTime(),this.sr())},i.Ye=function(){!0===this.$e&&this.Ie&&this.Oe()},i.Ze=function(){!0===this.$e&&this.Ie&&this.je()},i.Xe=function(){!0===this.$e&&this.Ie&&(this.yn=(new Date).getTime(),this.sr())},i.Qe=function(){!0===this.$e&&this.Ie&&!0===this.or("assist")&&this.parent.event.publish("browsing:assist:started",{})},i.tr=function(){!0===this.$e&&this.Ie&&!0===this.cr("assist")&&this.parent.event.publish("browsing:assist:stopped",{})},i.ir=function(){!0===this.$e&&this.Ie&&this.ar("assist")},i.nr=function(t){!0===this.$e&&this.Ie&&!0===this.Ue.assist.ongoing&&this.parent.event.publish("browsing:assist:mouse",t)},i.er=function(t){!0===this.$e&&this.Ie&&!0===this.Ue.assist.ongoing&&this.parent.event.publish("browsing:assist:scroll",t)},i.rr=function(t){!0===this.$e&&this.Ie&&!0===this.Ue.assist.ongoing&&this.parent.event.publish("browsing:assist:click",t)},i.sr=function(){"object"==typeof window.sessionStorage&&JSON&&"function"==typeof JSON.stringify&&window.sessionStorage.setItem(this.tn(),JSON.stringify({browsing_id:this.Ie,is_playing:this.ze,last_heartbeat:this.yn}))},i.Ne=function(){"object"==typeof window.sessionStorage&&"object"==typeof window.sessionStorage&&window.sessionStorage.removeItem(this.tn())},i.Oe=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.ze=!0,this.yn=(new Date).getTime(),this.sr(),this.hr(),this.ur(!0),this.lr(!0),this.fr(!0),!0!==t&&this.parent.stream.emit("client:browsing:action:started",{})},i.je=function(){var t=this.ze;this.Je&&this.Je.disconnect(),this.dt(),this.sr(),!0===t&&this.parent.stream.emit("client:browsing:action:stopped",{}),this.parent.Stream.unbind_from()},i.hr=function(){var r=this;this.vr(),this.dr(),this.yr(),this.Je&&this.Je.disconnect(),this.Je=new this.Ae(document,{initialize:function(t,i){r.Le={f:"initialize",args:[t,i]},r.pr(r.Le)},applyChanged:function(t,i,n,e){r.Ve.push({f:"applyChanged",args:[t,i,n,e]})}})},i.pr=function(t){if(t.f&&t.args&&"function"==typeof JSON.stringify){for(var i=this.We,n=[],e=JSON.stringify(t.args),r=0,s=e.length;r<s;r+=this.ge)n.push(e.substring(r,r+this.ge));for(var o=0;o<n.length;o++)this.parent.stream.emit("client:browsing:stream:mirror",{f:t.f,args:n[o],chunk:i,part:o,end:n.length-1});this.We++}},i.dr=function(){this.parent.stream.emit("client:browsing:stream:tab",{title:document.title,url:document.location.href,width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight})},i.vr=function(){this.parent.stream.emit("client:browsing:stream:mouse",{x:this.He.x,y:this.He.y})},i.yr=function(){this.parent.stream.emit("client:browsing:stream:scroll",{x:this.Ge.x,y:this.Ge.y})},i.mr=function(){this.parent.stream.emit("client:browsing:stream:click",{})},i.or=function(t){var i=!0!==this.Ue[t].ongoing&&!0;return this.Ue[t].ongoing=!0,this.ar(t),this.parent.stream.emit("client:browsing:".concat(t,":started"),{}),i},i.cr=function(t){return!0===this.Ue[t].ongoing&&(this.ar(t,!1),this.Ue[t].ongoing=!1,this.parent.stream.emit("client:browsing:".concat(t,":stopped"),{}),!0)},i.ar=function(t){var i=this,n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];!0===this.Ue[t].ongoing&&(null!==this.Ue[t].dead_timeout&&(this.parent.Schedule.clear_timeout(this.Ue[t].dead_timeout),this.Ue[t].dead_timeout=null),!0===n?(this.Ue[t].last_heartbeat=(new Date).getTime(),this.Ue[t].dead_timeout=this.parent.Schedule.set_timeout(function(){i.cr(t)},this.de)):this.Ue[t].last_heartbeat=null)},i.xe=function(){var i=this;this.parent.Listener.add_event("browsing","document","mousemove",function(t){i.He.last_x=t.pageX,i.He.last_y=t.pageY})},i.Fe=function(){var n=this;this.parent.Listener.add_event("browsing","window","resize",function(){null!==n.Pe.defer_event&&n.parent.Schedule.clear_timeout(n.Pe.defer_event),n.Pe.defer_event=n.parent.Schedule.set_timeout(function(){n.Pe.defer_event=null;var t=n.Pe.last_call,i=(new Date).getTime();n.Pe.last_call=i,t&&i>t+n.pe&&!0===n.ze&&n.dr()},n.ye)})},i.Ee=function(){var i=this;this.parent.Listener.add_event("browsing","window","scroll",function(){var t;!0!==i.Re&&(t=document.documentElement,i.Ge.last_x=(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0),i.Ge.last_y=(window.pageYOffset||t.scrollTop)-(t.clientTop||0))})},i.Ce=function(){var i=this;this.parent.Listener.add_event("browsing","window","click",function(t){!0!==i.ze||t.wr||i.gr("click",function(){i.mr(),i.vr()})})},i.Se=function(){return null===this.yn||null!==this.yn&&(new Date).getTime()-this.yn>=this.ve},i.pn=function(){var t=this,i=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];null!==this.qe&&this.parent.Schedule.clear_interval(this.qe),!0===i&&(this.qe=this.parent.Schedule.set_interval(function(){t.parent.stream.emit("client:browsing:heartbeat",{}),!0===t.Se()&&t.je()},this.fe))},i.ur=function(){var t=this,i=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];null!==this.Me&&(this.parent.Schedule.clear_interval(this.Me),this.Me=null),!0===i&&(this.Me=this.parent.Schedule.set_interval(function(){t.He.last_x===t.He.x&&t.He.last_y===t.He.y||!0!==t.ze||(t.He.x=t.He.last_x,t.He.y=t.He.last_y,t.vr())},this.pe))},i.lr=function(){var t=this,i=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];null!==this.Te&&(this.parent.Schedule.clear_interval(this.Te),this.Te=null),!0===i&&(this.Te=this.parent.Schedule.set_interval(function(){t.Ge.last_x===t.Ge.x&&t.Ge.last_y===t.Ge.y||!0!==t.ze||(t.Ge.x=t.Ge.last_x,t.Ge.y=t.Ge.last_y,t.vr(),t.yr())},this.pe))},i.fr=function(){var i=this,t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];null!==this.Be&&this.parent.Schedule.clear_interval(this.Be),!0===t&&(this.Be=this.parent.Schedule.set_interval(function(){for(var t=0;t<i.Ve.length&&!(t>=i.we);t++)i.pr(i.Ve[t]);i.Ve.splice(0,i.we)},this.me))},i.gr=function(t,i){var n=this;void 0===this.Fn[t]&&(this.Fn[t]=this.parent.Schedule.set_timeout(function(){delete n.Fn[t],i()},this.Ki))},t}(),g=function(){function t(t){this.parent=t,this.fe=1e4,this.br=5e3,this._r=200,this.be=["call:request:initiate","call:request:accepted","call:request:declined","call:action:stopped","call:signaling:sdp","call:signaling:candidate"],this.dt(),this.xt()}var i=t.prototype;return i.init=function(t,i,n){var e=this;this.parent.Stream.bind_to(null,this.be,{session_id:this.parent.Session.Zt},function(){e.kr=t.mode||null,e.xr=t.ice||[],!0===t.has_support?(e.parent.stream.emit("client:call:request:initiated",{call_id:t.call_id}),e.pn(!0)):e.parent.stream.emit("client:call:request:decline",{}),"function"==typeof i&&i()},function(){"function"==typeof n&&n()})},i.accept=function(){!0===this.$e&&(this.Fr=!0,this.parent.stream.emit("client:call:request:accept",{}))},i.decline=function(){!0===this.$e&&(this.parent.stream.emit("client:call:request:decline",{}),this.je())},i.stop=function(){!0===this.$e&&(this.parent.stream.emit("client:call:action:stopped",{}),this.je())},i.toggle_audio=function(){return this.Er("audio","getAudioTracks")},i.toggle_video=function(){return this.Er("video","getVideoTracks")},i.toggle_screensharing=function(){return!0===this.$e&&null!==this.Cr.local&&(!1===this.jr?this.Ar():this.$r()),this.jr},i.is_ongoing=function(){return!0===this.$e&&null!==this.Ir&&!0},i.has_support_screensharing=function(){return!(!navigator.mediaDevices||"function"!=typeof navigator.mediaDevices.getDisplayMedia)},i.get_stream=function(t){return this.Cr[t]||null},i.reset=function(){!0===this.$e&&this.je(),this.dt()},i.dt=function(){this.$e=!1,this.jr=!1,this.Fr=!1,this.zr=!1,this.Ir=null,this.qe=null,this.Or=null,this.kr=null,this.xr=[],this.Cr={local:null,remote:null},this.Sr={video:null}},i.xt=function(){this.parent.socket.on("call:request:initiate",this.De.Jt(this)),this.parent.stream.on("client:call:request:accepted",this.Dr.Jt(this)),this.parent.stream.on("client:call:request:declined",this.Rr.Jt(this)),this.parent.stream.on("client:call:action:stopped",this.Nr.Jt(this)),this.parent.stream.on("client:call:signaling:sdp",this.qr.Jt(this)),this.parent.stream.on("client:call:signaling:candidate",this.Br.Jt(this))},i.De=function(t){!0!==this.$e&&(t.has_support=-1!==(this.parent.device.capabilities||[]).indexOf("call"),this.$e=!0,this.parent.event.publish("call:request:initiate",t))},i.Dr=function(){!0===this.$e&&!0!==this.Fr&&this.je()},i.Rr=function(){!0===this.$e&&this.je()},i.Nr=function(){!0===this.$e&&this.je()},i.qr=function(t){var i=this;!0===this.$e&&(this.Mr(),"operator"===t.from&&this.Ir.setRemoteDescription(new RTCSessionDescription(t.sdp)).then(function(){return i.parent.event.publish("call:peer:remote:success",{}),null===i.Cr.local?i.Tr():"offer"===t.sdp.type?i.Ur("answer"):Promise.resolve()}).catch(function(){i.parent.event.publish("call:peer:remote:error",{})}))},i.Br=function(t){!0===this.$e&&(this.Mr(),"operator"===t.from&&"object"==typeof t.candidate&&null!==t.candidate&&this.Ir.addIceCandidate(new RTCIceCandidate({sdpMLineIndex:t.candidate.sdpMLineIndex,candidate:t.candidate.candidate})).catch(function(){}))},i.Mr=function(){var i=this;null===this.Ir&&(this.Ir=new RTCPeerConnection({iceServers:this.xr}),this.Ir.onicecandidate=function(t){t&&t.candidate&&i.parent.stream.emit("client:call:signaling:candidate",{from:"user",candidate:t.candidate})},this.Ir.ontrack=function(t){t=t.streams[0];i.Cr.remote=t,i.parent.event.publish("call:media:remote:success",{}),t.onremovetrack=function(){i.parent.event.publish("call:media:remote:success",{})}},this.Ir.oniceconnectionstatechange=function(){var t=i.Ir;null!==t&&"failed"!==t.iceConnectionState&&"closed"!==t.iceConnectionState||i.Pr(),null!==t&&"disconnected"===t.iceConnectionState&&(i.Or=i.parent.Schedule.set_timeout(function(){(i.Or=null)!==i.Ir&&"connected"===t.iceConnectionState||i.Pr()},i.br)),null!==t&&"connected"===t.iceConnectionState&&!0!==i.zr&&i.parent.Schedule.set_timeout(function(){i.Tr(!0)},i._r)},this.Ir.onnegotiationneeded=function(){i.Ur("offer")},this.Ir.onclose=function(){i.Pr()})},i.Tr=function(){function i(){n.parent.event.publish("call:peer:local:error",{})}var n=this,e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.Lr(function(t){navigator.mediaDevices.getUserMedia({audio:!0,video:"video"===n.kr&&!0===t.video}).then(function(t){return n.Cr.local=t,n.parent.event.publish("call:media:local:success",{retried:e||!1}),!0===e&&(n.zr=!0),n.Jr(t,e)}).catch(i)},i)},i.Jr=function(t){var i=this,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1],e=t.getTracks();!0===n&&this.Ir.getSenders().forEach(function(t){t.track&&t.track.stop(),i.Ir.removeTrack(t)});for(var r=0;r<e.length;r++)this.Ir.addTrack(e[r],t);!0!==n&&this.Ur("answer")},i.Lr=function(n,e){var r={audio:!1,video:!1};navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(function(t){for(var i=0;i<t.length;i++)switch(t[i].kind){case"audioinput":r.audio=!0;break;case"videoinput":r.video=!0}!0!==r.audio?e():n(r)}).catch(e):n(r)},i.Ur=function(){var i,n=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"offer";return Promise.resolve().then(function(){var t={OfferToReceiveAudio:!0,OfferToReceiveVideo:!0};return"answer"===e?n.Ir.createAnswer(t):n.Ir.createOffer(t)}).then(function(t){return i=t,n.Ir.setLocalDescription(i)}).then(function(){return n.parent.stream.emit("client:call:signaling:sdp",{from:"user",sdp:i}),n.parent.event.publish("call:peer:local:success",{}),Promise.resolve()}).catch(function(){return n.parent.event.publish("call:peer:local:error",{}),Promise.resolve()})},i.je=function(){this.Pr()},i.Pr=function(){if(null!==this.Ir){for(var t=this.Ir.getSenders(),i=0;i<t.length;i++)null!==t[i].track&&t[i].track.stop();null!==this.Sr.video&&this.Sr.video.stop(),this.Ir.close(),this.Ir=null}null!==this.Or&&(this.parent.Schedule.clear_timeout(this.Or),this.Or=null),this.parent.Stream.unbind_from(),this.$e=!1,this.jr=!1,this.Fr=!1,this.zr=!1,this.kr=null,this.xr=[],this.Cr.local=null,this.Cr.remote=null,this.Sr.video=null,this.pn(!1),this.parent.event.publish("call:action:stopped",{})},i.Er=function(t,i){var n=!1;if(!0===this.$e&&null!==this.Cr.local){for(var e=!1,r=this.Cr.local[i](),s=0;s<r.length;s++)e=!0,n=!r[s].enabled,r[s].enabled=n;!0===e&&this.parent.event.publish("call:track:local:".concat(!0===n?"started":"ended"),{media:t})}return n},i.Ar=function(){var r=this;!0===this.has_support_screensharing()&&(this.jr=!0,navigator.mediaDevices.getDisplayMedia({video:!0}).then(function(t){for(var t=t.getTracks()[0],i=r.Ir.getSenders(),n=null,e=0;e<i.length;e++)if(i[e].track&&"video"===i[e].track.kind){n=i[e];break}null!==n?(r.Sr.video=n.track,n.replaceTrack(t)):n=r.Ir.addTrack(t,r.Cr.local),t.onended=function(){null!==r.Ir&&(r.Wr(n),r.parent.event.publish("call:track:local:ended",{media:"screensharing"}))},r.parent.event.publish("call:track:local:started",{media:"screensharing"})}).catch(function(){r.jr=!1}))},i.$r=function(){for(var t=this.Ir.getSenders(),i=null,n=0;n<t.length;n++)if(t[n].track&&"video"===t[n].track.kind){i=t[n];break}null!==i&&(i.track.stop(),i.track.dispatchEvent(new Event("ended")))},i.Wr=function(t){null!==this.Sr.video?(t.replaceTrack(this.Sr.video),this.Sr.video=null):this.Ir.removeTrack(t),this.jr=!1},i.pn=function(){var t=this,i=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];null!==this.qe&&this.parent.Schedule.clear_interval(this.qe),!0===i&&(this.qe=this.parent.Schedule.set_interval(function(){t.parent.stream.emit("client:call:heartbeat",{})},this.fe))},t}(),b=function(){function t(t){this.parent=t}return t.prototype.fired=function(t,i){i={identifier:t,name:i};this.parent.socket.emit("trigger:fired",i),this.parent.event.publish("trigger:fired",i)},t}(),_=function(){function t(t){this.parent=t,this.dt()}var i=t.prototype;return i.configure=function(t){this.Vr=t.project,this.Hr=t.revision,this.Gr=t.environment,this.Kr=t.useragent,this.Yr=t.page},i.report=function(t,i,n){if(!(this.Vr&&this.Hr&&this.Gr&&this.Kr&&this.Yr))throw new Error("Missing a configuration parameter. Did you call configure() before?");"object"==typeof n&&n instanceof Error&&(n={fileName:n.fileName,lineNumber:n.lineNumber,columnNumber:n.columnNumber,message:n.message,stack:n.stack});n={project:this.Vr,revision:this.Hr,environment:this.Gr,useragent:this.Kr,page:this.Yr,level:t,namespace:i,traceback:n};this.parent.socket.emit("issue:report",n),this.parent.event.publish("issue:report",n)},i.dt=function(){this.Vr=null,this.Hr=null,this.Gr=null,this.Kr=null,this.Yr=null},t}(),k=c;"object"==typeof __crisp_void_exports&&"undefined"!=typeof module?module.exports=p():"function"==typeof __crisp_void_define&&define.amd?define(p):(k="undefined"!=typeof __crisp_void_global_this?globalThis:k||self).io=p(),function(t,i){"use strict";"function"==typeof __crisp_void_define&&define.amd?define(["exports"],i):"object"==typeof __crisp_void_exports?i(exports):i(t.PubSub={})}("object"==typeof c?c:this,function(n){"use strict";var a={},e=-1;function c(t){for(var i in t)if(t.hasOwnProperty(i))return!0;return!1}function h(t,i,n){try{t(i,n)}catch(t){setTimeout((e=t,function(){throw e}),0)}var e}function u(t,i,n){t(i,n)}function l(t,i,n,e){var r,s=a[i],o=e?u:h;if(a.hasOwnProperty(i))for(r in s)s.hasOwnProperty(r)&&o(s[r],t,n)}function r(t,i,n,e){var r,s,o,e=(s=i,o=e,function(){var t=String(r),i=t.lastIndexOf(".");for(l(r,r,s,o);-1!==i;)i=(t=t.substr(0,i)).lastIndexOf("."),l(r,t,s,o)});return!!function(t){for(var i=String(r),n=Boolean(a.hasOwnProperty(i)&&c(a[i])),e=i.lastIndexOf(".");!n&&-1!==e;)e=(i=i.substr(0,e)).lastIndexOf("."),n=Boolean(a.hasOwnProperty(i)&&c(a[i]));return n}(r=t)&&(!0===n?e():setTimeout(e,0),!0)}n.publish=function(t,i){return r(t,i,!1,n.immediateExceptions)},n.publishSync=function(t,i){return r(t,i,!0,n.immediateExceptions)},n.subscribe=function(t,i){if("function"!=typeof i)return!1;a.hasOwnProperty(t)||(a[t]={});var n="uid_"+String(++e);return a[t][n]=i,n},n.clearAllSubscriptions=function(){a={}},n.clearSubscriptions=function(t){for(var i in a)a.hasOwnProperty(i)&&0===i.indexOf(t)&&delete a[i]},n.unsubscribe=function(t){var i,n,e,r="string"==typeof t&&a.hasOwnProperty(t),s=!r&&"string"==typeof t,o="function"==typeof t,c=!1;if(!r){for(i in a)if(a.hasOwnProperty(i)){if(n=a[i],s&&n[t]){delete n[t],c=t;break}if(o)for(e in n)n.hasOwnProperty(e)&&n[e]===t&&(delete n[e],c=!0)}return c}delete a[t]}}),function(t,o){"use strict";function i(t){function s(t,i,n){return 1===arguments.length?s.get(t):s.set(t,i,n)}return s.Zr=t.document,s._cacheKeyPrefix="cookey.",s._maxExpireDate=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),s.defaults={path:"/",secure:!1,sameSite:o},s.get=function(t){s._cachedDocumentCookie!==s.Zr.cookie&&s._renewCache();t=s.Xr[s._cacheKeyPrefix+t];return t===o?o:decodeURIComponent(t)},s.set=function(t,i,n){return(n=s._getExtendedOptions(n)).expires=s._getExpiresDate(i===o?-1:n.expires),s.Zr.cookie=s._generateCookieString(t,i,n),s},s.expire=function(t,i){return s.set(t,o,i)},s._getExtendedOptions=function(t){return{path:t&&t.path||s.defaults.path,domain:t&&t.domain||s.defaults.domain,expires:t&&t.expires||s.defaults.expires,secure:(t&&t.secure!==o?t:s.defaults).secure,sameSite:t&&t.sameSite||s.defaults.sameSite}},s._isValidDate=function(t){return"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t.getTime())},s._getExpiresDate=function(t,i){if(i=i||new Date,"number"==typeof t?t=t===1/0?s._maxExpireDate:new Date(i.getTime()+1e3*t):"string"==typeof t&&(t=new Date(t)),t&&!s._isValidDate(t))throw new Error("Invalid expires");return t},s._generateSameSiteString=function(t){switch(t&&t.sameSite||s.defaults.sameSite){case o:return"";case"None":case"none":return";sameSite=None";case"Lax":case"lax":return";sameSite=Lax";case"Strict":case"strict":return";sameSite=Strict";default:throw new TypeError("Invalid sameSite")}},s._generateCookieString=function(t,i,n){i=(t=(t=t.replace(/[^#$&+\^`|]/g,encodeURIComponent)).replace(/\(/g,"%28").replace(/\)/g,"%29"))+"="+(i=(i+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent));return i+=(n=n||{}).path?";path="+n.path:"",i+=n.domain?";domain="+n.domain:"",i+=n.expires?";expires="+n.expires.toUTCString():"",(i+=n.secure?";secure":"")+s._generateSameSiteString(n)},s._getCacheFromString=function(t){for(var i={},n=t?t.split("; "):[],e=0;e<n.length;e++){var r=s._getKeyValuePairFromCookieString(n[e]);i[s._cacheKeyPrefix+r.key]===o&&(i[s._cacheKeyPrefix+r.key]=r.value)}return i},s._getKeyValuePairFromCookieString=function(t){var i,n=(n=t.indexOf("="))<0?t.length:n,e=t.substr(0,n);try{i=decodeURIComponent(e)}catch(t){}return{key:i,value:t.substr(n+1)}},s._renewCache=function(){s.Xr=s._getCacheFromString(s.Zr.cookie),s._cachedDocumentCookie=s.Zr.cookie},s}t.Cookies=t&&"object"==typeof t.document?i(t):i}(c),function(){"use strict";var t=c,l="invalid",f="undefined"!=typeof ArrayBuffer,a="0123456789abcdef".split(""),n=[-2147483648,8388608,32768,128],h=[24,16,8,0],p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],i=[];function v(t){t?(i[0]=i[16]=i[1]=i[2]=i[3]=i[4]=i[5]=i[6]=i[7]=i[8]=i[9]=i[10]=i[11]=i[12]=i[13]=i[14]=i[15]=0,this.blocks=i):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}function e(t,i){var n=typeof t;if("string"==n){for(var e,r=[],s=t.length,o=0,c=0;c<s;++c)(e=t.charCodeAt(c))<128?r[o++]=e:(e<2048?r[o++]=192|e>>6:(e<55296||57344<=e?r[o++]=224|e>>12:(e=65536+((1023&e)<<10|1023&t.charCodeAt(++c)),r[o++]=240|e>>18,r[o++]=128|e>>12&63),r[o++]=128|e>>6&63),r[o++]=128|63&e);t=r}else{if("object"!=n)throw new Error(l);if(null===t)throw new Error(l);if(f&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||f&&ArrayBuffer.isView(t)))throw new Error(l)}64<t.length&&(t=new v(!0).update(t).digest());for(var a=[],h=[],c=0;c<64;++c){var u=t[c]||0;a[c]=92^u,h[c]=54^u}v.call(this,i),this.update(h),this.oKeyPad=a,this.inner=!0,this.memory=i}Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),f&&!ArrayBuffer.isView&&(ArrayBuffer.isView=function(t){return"object"==typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer}),v.prototype.update=function(t){if(!this.finalized){var i,n=typeof t;if("string"!=n){if("object"!=n)throw new Error(l);if(null===t)throw new Error(l);if(f&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||f&&ArrayBuffer.isView(t)))throw new Error(l);i=!0}for(var e,r,s=0,o=t.length,c=this.blocks;s<o;){if(this.hashed&&(this.hashed=!1,c[0]=this.block,c[16]=c[1]=c[2]=c[3]=c[4]=c[5]=c[6]=c[7]=c[8]=c[9]=c[10]=c[11]=c[12]=c[13]=c[14]=c[15]=0),i)for(r=this.start;s<o&&r<64;++s)c[r>>2]|=t[s]<<h[3&r++];else for(r=this.start;s<o&&r<64;++s)(e=t.charCodeAt(s))<128?c[r>>2]|=e<<h[3&r++]:(e<2048?c[r>>2]|=(192|e>>6)<<h[3&r++]:(e<55296||57344<=e?c[r>>2]|=(224|e>>12)<<h[3&r++]:(e=65536+((1023&e)<<10|1023&t.charCodeAt(++s)),c[r>>2]|=(240|e>>18)<<h[3&r++],c[r>>2]|=(128|e>>12&63)<<h[3&r++]),c[r>>2]|=(128|e>>6&63)<<h[3&r++]),c[r>>2]|=(128|63&e)<<h[3&r++]);this.lastByteIndex=r,this.bytes+=r-this.start,64<=r?(this.block=c[16],this.start=r-64,this.hash(),this.hashed=!0):this.start=r}return 4294967295<this.bytes&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},v.prototype.finalize=function(){var t,i;this.finalized||(this.finalized=!0,t=this.blocks,i=this.lastByteIndex,t[16]=this.block,t[i>>2]|=n[3&i],this.block=t[16],56<=i&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash())},v.prototype.hash=function(){for(var t,i,n,e,r,s,o=this.h0,c=this.h1,a=this.h2,h=this.h3,u=this.h4,l=this.h5,f=this.h6,v=this.h7,d=this.blocks,y=16;y<64;++y)t=((i=d[y-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,i=d[y-2],d[y]=d[y-16]+t+d[y-7]+((i>>>17|i<<15)^(i>>>19|i<<13)^i>>>10)<<0;for(s=c&a,y=0;y<64;y+=4)this.first?(v=(i=d[0]-210244248)-1521486534<<0,h=i+143694565<<0,this.first=!(n=704751109)):(v=h+(i=v+((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))+(u&l^~u&f)+p[y]+d[y])<<0,h=i+((t=(o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+((n=o&c)^o&a^s))<<0),f=a+(i=f+((v>>>6|v<<26)^(v>>>11|v<<21)^(v>>>25|v<<7))+(v&u^~v&l)+p[y+1]+d[y+1])<<0,a=i+((t=(h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10))+((e=h&o)^h&c^n))<<0,l=c+(i=l+((f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(f&v^~f&u)+p[y+2]+d[y+2])<<0,c=i+((t=(a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+((r=a&h)^a&o^e))<<0,u=o+(i=u+((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))+(l&f^~l&v)+p[y+3]+d[y+3])<<0,o=i+((t=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10))+((s=c&a)^c&h^r))<<0;this.h0=this.h0+o<<0,this.h1=this.h1+c<<0,this.h2=this.h2+a<<0,this.h3=this.h3+h<<0,this.h4=this.h4+u<<0,this.h5=this.h5+l<<0,this.h6=this.h6+f<<0,this.h7=this.h7+v<<0},v.prototype.toString=v.prototype.hex=function(){this.finalize();var t=this.h0,i=this.h1,n=this.h2,e=this.h3,r=this.h4,s=this.h5,o=this.h6,c=this.h7;return a[t>>28&15]+a[t>>24&15]+a[t>>20&15]+a[t>>16&15]+a[t>>12&15]+a[t>>8&15]+a[t>>4&15]+a[15&t]+a[i>>28&15]+a[i>>24&15]+a[i>>20&15]+a[i>>16&15]+a[i>>12&15]+a[i>>8&15]+a[i>>4&15]+a[15&i]+a[n>>28&15]+a[n>>24&15]+a[n>>20&15]+a[n>>16&15]+a[n>>12&15]+a[n>>8&15]+a[n>>4&15]+a[15&n]+a[e>>28&15]+a[e>>24&15]+a[e>>20&15]+a[e>>16&15]+a[e>>12&15]+a[e>>8&15]+a[e>>4&15]+a[15&e]+a[r>>28&15]+a[r>>24&15]+a[r>>20&15]+a[r>>16&15]+a[r>>12&15]+a[r>>8&15]+a[r>>4&15]+a[15&r]+a[s>>28&15]+a[s>>24&15]+a[s>>20&15]+a[s>>16&15]+a[s>>12&15]+a[s>>8&15]+a[s>>4&15]+a[15&s]+a[o>>28&15]+a[o>>24&15]+a[o>>20&15]+a[o>>16&15]+a[o>>12&15]+a[o>>8&15]+a[o>>4&15]+a[15&o]+a[c>>28&15]+a[c>>24&15]+a[c>>20&15]+a[c>>16&15]+a[c>>12&15]+a[c>>8&15]+a[c>>4&15]+a[15&c]},v.prototype.digest=function(){this.finalize();var t=this.h0,i=this.h1,n=this.h2,e=this.h3,r=this.h4,s=this.h5,o=this.h6,c=this.h7;return[t>>24&255,t>>16&255,t>>8&255,255&t,i>>24&255,i>>16&255,i>>8&255,255&i,n>>24&255,n>>16&255,n>>8&255,255&n,e>>24&255,e>>16&255,e>>8&255,255&e,r>>24&255,r>>16&255,r>>8&255,255&r,s>>24&255,s>>16&255,s>>8&255,255&s,o>>24&255,o>>16&255,o>>8&255,255&o,c>>24&255,c>>16&255,c>>8&255,255&c]},(e.prototype=new v).finalize=function(){var t;v.prototype.finalize.call(this),this.inner&&(this.inner=!1,t=this.digest(),v.call(this,this.memory),this.update(this.oKeyPad),this.update(t),v.prototype.finalize.call(this))};var r=(s.create=function(){return new v},s.update=function(t){return s.create().update(t)},s);function s(t){return new v(!0).update(t).hex()}function o(t,i){return new e(t,!0).update(i).hex()}(r.sha256=r).sha256.hmac=(o.create=function(t){return new e(t)},o.update=function(t,i){return o.create(t).update(i)},o),t.sha256=r.sha256}(),this.Qr=/^((?:https?|wss?):\/\/[^\/]+)(\/.*)?$/,this.ts(),this.vt(t),this.es(t,c),this.Config=new i(this),this.Register=new n(this),this.Schedule=new e(this),this.Listener=new r(this),this.Socket=new s(this),this.Stream=new o(this),this.Storage=new a(this),this.Browsing=new w(this),this.Call=new g(this),this.Message=new h(this),this.Session=new u(this),this.Website=new l(this),this.Bucket=new f(this),this.Media=new v(this),this.Overlay=new d(this),this.Helpdesk=new m(this),this.Trigger=new b(this),this.Issue=new _(this),this.bt(),!0===t.connect_socket&&this.socket.connect()},i.ts=function(){this.dt()},i.dt=function(){delete this.environment,delete this.disable_autoload,delete this.url_go,delete this.website_domain,delete this.website_id,delete this.token_id,delete this.cookie_expire,delete this.cookie_domain,delete this.platform_name,delete this.platform_signature_key,delete this.ticket_generator,delete this.runtime_configuration,delete this.device,this.rs=!1,this.ss=!1},i.vt=function(t){t&&t.environment&&(this.environment=t.environment||"development"),t&&t.disable_autoload&&(this.disable_autoload=t.disable_autoload),t&&t.url_go&&(this.url_go=t.url_go),t&&t.website_domain&&(this.website_domain=t.website_domain),t&&t.website_id&&(this.website_id=t.website_id),t&&t.token_id&&(this.token_id=t.token_id),t&&t.cookie_expire&&(this.cookie_expire=t.cookie_expire),t&&t.cookie_domain&&(this.cookie_domain=t.cookie_domain),t&&t.platform_name&&(this.platform_name=t.platform_name),t&&t.platform_signature_key&&(this.platform_signature_key=t.platform_signature_key),t&&t.ticket_generator&&(this.ticket_generator=t.ticket_generator),t&&t.runtime_configuration&&(this.runtime_configuration=t.runtime_configuration),this.device={},t&&t.useragent&&(this.device.useragent=t.useragent),t&&t.timezone&&(this.device.timezone=t.timezone),t&&t.capabilities&&(this.device.capabilities=t.capabilities),t&&t.locales&&(this.device.locales=t.locales)},i.es=function(t,i){var n=["websocket"],e=(t.url_relay_client||"").match(this.Qr)||[],t=(t.url_relay_stream||"").match(this.Qr)||[];this.event=i.PubSub,this.socket=i.io(e[1]||null,{path:e[2]||"/",transports:n,autoConnect:!1,timeout:25e3,reconnectionDelay:15e3,reconnectionDelayMax:6e4,reconnectionAttempts:5,randomizationFactor:.5}),this.stream=i.io(t[1]||null,{path:t[2]||"/",transports:n,reconnection:!1,autoConnect:!1}),this.cookie=i.Cookies(window),this.sha256=i.sha256},i.bt=function(){var t=this;this.Listener.add_event("index","window","pagehide",function(){t.rs=t.socket.connected||!1,t.ss=t.stream.connected||!1,!0===t.socket.connected&&t.socket.disconnect(),!0===t.stream.connected&&t.stream.disconnect()}),this.Listener.add_event("index","window","pageshow",function(){!0===t.rs&&(t.rs=!1,t.socket.connect()),!0===t.ss&&(t.ss=!1,t.stream.connect())}),this.Listener.add_event("index","window","popstate",function(){t.os()}),"object"==typeof window.history&&(this.Listener.apply_patch("index","window.history","pushState",window.history,function(){t.os()}),this.Listener.apply_patch("index","window.history","replaceState",window.history,function(){t.os()}))},i.os=function(){this.Session.send_device(),this.event.publish("window:history",{page_url:document.location.href,page_domain:document.location.hostname})},t}(),t.CrispLibraryClient=new i;var w={client:function(t){var n=[],t=t||{};return function(t,i){n.push('<div aria-live="polite" class="crisp-client"><div class="cc-rukbw"></div><div id="crisp-chatbox" :data-hidden="$store.base.is_hidden" :data-force-show="$store.base.force_show" :data-color-mode="$store.base.color_mode" :data-availability="$store.base.availability" :data-lock-maximized="$store.base.runtime.lock_maximized ? true : false" :data-website-logo="$store.base.configuration.chat.website_logo ? true : false" :data-last-operator-face="($store.base.configuration.chat.last_operator_face &amp;&amp; $store.base.active_operators.length &gt; 0) ? true : false" :data-ongoing-operator-face="($store.base.configuration.chat.ongoing_operator_face &amp;&amp; $store.chat.ongoing_operator.url) ? true : false" :data-availability-tooltip="$store.base.configuration.chat.availability_tooltip" :data-hide-vacation="$store.base.configuration.chat.hide_vacation" :data-blocked="$store.base.is_blocked" :data-mobile-view="$store.base.is_mobile_view" :data-full-view="$store.base.is_full_view" :data-small-view="$store.base.is_small_view" :data-large-view="$store.base.is_large_view" :data-has-local-messages="$store.base.has_local_messages" :data-was-availability-online="$store.base.was_availability_online" :data-is-activity-ongoing="$store.base.is_activity_ongoing" :data-hide-on-away="$store.base.configuration.chat.hide_on_away" :data-hide-on-mobile="$store.base.configuration.chat.hide_on_mobile" :data-position-reverse="$store.base.configuration.chat.position_reverse"'+a.Library.jade.runtime.attr("lang",""+i,!0,!0)+a.Library.jade.runtime.attr("dir",""+t,!0,!0)+' translate="no" tabindex="-1" class="cc-1brb6"></div></div>')}.call(this,"direction"in t?t.direction:"undefined"!=typeof direction?direction:void 0,"lang"in t?t.lang:"undefined"!=typeof lang?lang:void 0),n.join("")},viewport:function(t){var i=[],t=t||{};return function(t){i.push('<meta name="viewport"'+a.Library.jade.runtime.attr("content",""+t,!0,!0)+">")}.call(this,"content"in t?t.content:"undefined"!=typeof content?content:void 0),i.join("")},date_now:function(t){var i,n=[],t=t||{};return function(t){n.push('<span data-type="now" class="cc-jvqxg">'+a.Library.jade.runtime.escape(null==(i=t("date","now"))?"":i)+"</span>")}.call(this,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0),n.join("")},date_seconds:function(t){var i,n=[],t=t||{};return function(t){n.push('<span data-type="seconds" class="cc-jvqxg">'+a.Library.jade.runtime.escape(null==(i=t("date","second"))?"":i)+"</span>")}.call(this,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0),n.join("")},date_minutes:function(t){var n,e=[],t=t||{};return function(t,i){e.push('<span data-type="minutes" class="cc-jvqxg">'),1===i?e.push(a.Library.jade.runtime.escape(null==(n=t("date","minute_singular"))?"":n)):e.push(a.Library.jade.runtime.escape(null==(n=t("date","minute_plural",[i]))?"":n)),e.push("</span>")}.call(this,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0,"minutes"in t?t.minutes:"undefined"!=typeof minutes?minutes:void 0),e.join("")},date_hours:function(t){var n,e=[],t=t||{};return function(t,i){e.push('<span data-type="hours" class="cc-jvqxg">'),1===i?e.push(a.Library.jade.runtime.escape(null==(n=t("date","hour_singular"))?"":n)):e.push(a.Library.jade.runtime.escape(null==(n=t("date","hour_plural",[i]))?"":n)),e.push("</span>")}.call(this,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0,"hours"in t?t.hours:"undefined"!=typeof hours?hours:void 0),e.join("")},date_far_away:function(t){var i,n=[],t=t||{};return function(t){n.push('<span data-type="far_away" class="cc-jvqxg">'+a.Library.jade.runtime.escape(null==(i=t)?"":i)+"</span>")}.call(this,"date_full"in t?t.date_full:"undefined"!=typeof date_full?date_full:void 0),n.join("")},duration_now:function(t){var i,n=[],t=t||{};return function(t){n.push('<span data-type="now" class="cc-1e6xg">'+a.Library.jade.runtime.escape(null==(i=t("duration","now"))?"":i)+"</span>")}.call(this,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0),n.join("")},duration_seconds:function(t){var i,n=[],t=t||{};return function(t){n.push('<span data-type="seconds" class="cc-1e6xg">'+a.Library.jade.runtime.escape(null==(i=t("duration","second"))?"":i)+"</span>")}.call(this,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0),n.join("")},duration_minutes:function(t){var n,e=[],t=t||{};return function(t,i){e.push('<span data-type="minutes" class="cc-1e6xg">'),1===i?e.push(a.Library.jade.runtime.escape(null==(n=t("duration","minute_singular"))?"":n)):e.push(a.Library.jade.runtime.escape(null==(n=t("duration","minute_plural",[i]))?"":n)),e.push("</span>")}.call(this,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0,"minutes"in t?t.minutes:"undefined"!=typeof minutes?minutes:void 0),e.join("")},duration_hours:function(t){var n,e=[],t=t||{};return function(t,i){e.push('<span data-type="hours" class="cc-1e6xg">'),1===i?e.push(a.Library.jade.runtime.escape(null==(n=t("duration","hour_singular"))?"":n)):e.push(a.Library.jade.runtime.escape(null==(n=t("duration","hour_plural",[i]))?"":n)),e.push("</span>")}.call(this,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0,"hours"in t?t.hours:"undefined"!=typeof hours?hours:void 0),e.join("")},duration_days:function(t){var i,n=[],t=t||{};return function(t){n.push('<span data-type="days" class="cc-1e6xg">'+a.Library.jade.runtime.escape(null==(i=t("duration","days"))?"":i)+"</span>")}.call(this,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0),n.join("")},style_color:function(t){var i,n=[],t=t||{};return function(t){n.push('<div class="cc-9yvsj"><style type="text/css">.crisp-client *:focus-visible {\n  outline-color: '+a.Library.jade.runtime.escape(null==(i=t[900].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-1brb6 .cc-co79q {\n  color: "+a.Library.jade.runtime.escape(null==(i=t.reverse.hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-1brb6 .cc-1dvce {\n  color: "+a.Library.jade.runtime.escape(null==(i=t[500].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-1brb6 .cc-5t1tm {\n  background-color: "+a.Library.jade.runtime.escape(null==(i=t.reverse.hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-1brb6 .cc-1q2sq {\n  background-color: "+a.Library.jade.runtime.escape(null==(i=t[900].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-1brb6 .cc-62iw4 {\n  background-color: "+a.Library.jade.runtime.escape(null==(i=t[600].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-1brb6 .cc-1kgzy {\n  background-color: "+a.Library.jade.runtime.escape(null==(i=t[500].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-1brb6 .cc-1kgzy *:focus-visible {\n  outline-color: "+a.Library.jade.runtime.escape(null==(i=t[10].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-1brb6 .cc-m59gn {\n  background-color: "+a.Library.jade.runtime.escape(null==(i=t[20].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-1brb6 .cc-jtuj4 {\n  background-color: "+a.Library.jade.runtime.escape(null==(i=t[10].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-1brb6 .cc-1ikmr {\n  border-color: "+a.Library.jade.runtime.escape(null==(i=t.reverse.hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-1brb6 .cc-1i61z,\n.crisp-client .cc-1brb6 .cc-134r8:hover {\n  border-color: "+a.Library.jade.runtime.escape(null==(i=t[500].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-1brb6 .cc-un6tk {\n  border-color: "+a.Library.jade.runtime.escape(null==(i=t[500].rgba(.2))?"":i)+" !important;\n}\n\n.crisp-client .cc-1brb6 .cc-weiiy {\n  border-bottom-color: "+a.Library.jade.runtime.escape(null==(i=t[500].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-1brb6 .cc-18tkz::placeholder {\n  color: "+a.Library.jade.runtime.escape(null==(i=t[200].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-1brb6 .cc-10xgc::placeholder {\n  color: "+a.Library.jade.runtime.escape(null==(i=t[200].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-1brb6 .cc-y2afy,\n.crisp-client .cc-1brb6 .cc-y2afy:active,\n.crisp-client .cc-1brb6 .cc-1swm7:hover .cc-17cww,\n.crisp-client .cc-1brb6 .cc-1swm7 .cc-17cww:active {\n  background: "+a.Library.jade.runtime.escape(null==(i=t[900].hex)?"":i)+' !important;\n}\n\n.crisp-client .cc-1brb6 .cc-coh7k,\n.crisp-client .cc-1brb6 .cc-1cx9a:hover,\n.crisp-client .cc-1brb6 .cc-1xhex[data-active="true"] .cc-ydjl9 {\n  background: '+a.Library.jade.runtime.escape(null==(i=t[700].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-1brb6 .cc-y2afy:hover,\n.crisp-client .cc-1brb6 .cc-coh7k:hover,\n.crisp-client .cc-1brb6 .cc-1cx9a:active {\n  background: "+a.Library.jade.runtime.escape(null==(i=t[800].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-1brb6 .cc-coh7k:active {\n  background: "+a.Library.jade.runtime.escape(null==(i=t[900].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-1brb6 .cc-aoc5z:hover .cc-fajgc {\n  background: "+a.Library.jade.runtime.escape(null==(i=t[700].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-1brb6 .cc-aoc5z .cc-fajgc:active {\n  background: "+a.Library.jade.runtime.escape(null==(i=t[800].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-1brb6 .cc-f5i1a,\n.crisp-client .cc-1brb6 .cc-70ynx:hover .cc-iuh54,\n.crisp-client .cc-1brb6 .cc-70ynx .cc-iuh54:active {\n  background: "+a.Library.jade.runtime.escape(null==(i=t[500].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-1brb6 .cc-f5i1a:hover {\n  background: "+a.Library.jade.runtime.escape(null==(i=t[600].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-1brb6 .cc-f5i1a:active {\n  background: "+a.Library.jade.runtime.escape(null==(i=t[700].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-1brb6 .cc-vibqn::selection,\n.crisp-client .cc-1brb6 .cc-vibqn *::selection {\n  color: #1c293b !important;\n  background-color: "+a.Library.jade.runtime.escape(null==(i=t[100].hex)?"":i)+" !important;\n}</style></div>")}.call(this,"colors"in t?t.colors:"undefined"!=typeof colors?colors:void 0),n.join("")},style_other:function(t){var i,n=[],t=t||{};return function(t){n.push('<div class="cc-k4lmp"><style type="text/css">.crisp-client .cc-1brb6 {\n  z-index: '+a.Library.jade.runtime.escape(null==(i=t)?"":i)+";\n}</style></div>")}.call(this,"container_index"in t?t.container_index:"undefined"!=typeof container_index?container_index:void 0),n.join("")},style_position:function(t){var i,n=[],t=t||{};return function(t){n.push('<div class="cc-l6mwy">'),t.default_button_horizontal&&n.push('<style type="text/css">.crisp-client .cc-1brb6[data-full-view="false"][data-position-reverse="false"] .cc-1yy0g .cc-1m2mf,\n.crisp-client .cc-1brb6[data-full-view="false"][data-position-reverse="false"] .cc-1yy0g .cc-1no03 {\n  margin-right: '+a.Library.jade.runtime.escape(null==(i=t.default_button_horizontal)?"":i)+'px !important;\n}\n\n.crisp-client .cc-1brb6[data-full-view="false"][data-position-reverse="false"] .cc-1yy0g .cc-1m2mf .cc-6lwfw .cc-1pzwe {\n  margin-right: '+a.Library.jade.runtime.escape(null==(i=t.default_button_horizontal)?"":i)+'px !important;\n}\n\n.crisp-client .cc-1brb6[data-full-view="false"][data-position-reverse="true"] .cc-1yy0g .cc-1m2mf,\n.crisp-client .cc-1brb6[data-full-view="false"][data-position-reverse="true"] .cc-1yy0g .cc-1no03 {\n  margin-left: '+a.Library.jade.runtime.escape(null==(i=t.default_button_horizontal)?"":i)+'px !important;\n}\n\n.crisp-client .cc-1brb6[data-full-view="false"][data-position-reverse="true"] .cc-1yy0g .cc-1m2mf .cc-6lwfw .cc-1pzwe {\n  margin-left: '+a.Library.jade.runtime.escape(null==(i=t.default_button_horizontal)?"":i)+"px !important;\n}\n</style>"),t.default_button_vertical&&n.push('<style type="text/css">.crisp-client .cc-1brb6[data-full-view="false"] .cc-1yy0g .cc-1m2mf,\n.crisp-client .cc-1brb6[data-full-view="false"] .cc-1yy0g .cc-1no03 {\n  margin-bottom: '+a.Library.jade.runtime.escape(null==(i=t.default_button_vertical)?"":i)+'px !important;\n}\n\n.crisp-client .cc-1brb6[data-full-view="false"] .cc-1yy0g .cc-1m2mf .cc-6lwfw .cc-1pzwe {\n  margin-bottom: '+a.Library.jade.runtime.escape(null==(i=t.default_button_vertical)?"":i)+"px !important;\n}\n</style>"),t.mobile_button_horizontal&&n.push('<style type="text/css">.crisp-client .cc-1brb6[data-full-view="true"][data-position-reverse="false"] .cc-1yy0g .cc-1m2mf {\n  margin-right: '+a.Library.jade.runtime.escape(null==(i=t.mobile_button_horizontal)?"":i)+'px !important;\n}\n\n.crisp-client .cc-1brb6[data-full-view="true"][data-position-reverse="false"] .cc-1yy0g .cc-1m2mf .cc-6lwfw .cc-1pzwe {\n  margin-right: '+a.Library.jade.runtime.escape(null==(i=t.mobile_button_horizontal)?"":i)+'px !important;\n}\n\n.crisp-client .cc-1brb6[data-full-view="true"][data-position-reverse="true"] .cc-1yy0g .cc-1m2mf {\n  margin-left: '+a.Library.jade.runtime.escape(null==(i=t.mobile_button_horizontal)?"":i)+'px !important;\n}\n\n.crisp-client .cc-1brb6[data-full-view="true"][data-position-reverse="true"] .cc-1yy0g .cc-1m2mf .cc-6lwfw .cc-1pzwe {\n  margin-left: '+a.Library.jade.runtime.escape(null==(i=t.mobile_button_horizontal)?"":i)+"px !important;\n}\n</style>"),t.mobile_button_vertical&&n.push('<style type="text/css">.crisp-client .cc-1brb6[data-full-view="true"] .cc-1yy0g .cc-1m2mf {\n  margin-bottom: '+a.Library.jade.runtime.escape(null==(i=t.mobile_button_vertical)?"":i)+'px !important;\n}\n\n.crisp-client .cc-1brb6[data-full-view="true"] .cc-1yy0g .cc-1m2mf .cc-6lwfw .cc-1pzwe {\n  margin-bottom: '+a.Library.jade.runtime.escape(null==(i=t.mobile_button_vertical)?"":i)+"px !important;\n}</style>"),n.push("</div>")}.call(this,"position"in t?t.position:"undefined"!=typeof position?position:void 0),n.join("")},minimized_authorized:function(t){var e,r=[],t=t||{};return function(t){r.push(""),r.push('<div class="cc-1yy0g cc-1wive cc-vibqn">');var i="($store.base.configuration.chat.overlay_search && $store.base.configuration.chat.overlay_mode)";r.push("<a v-crisp-accessibility=\"{ role: 'button' }\" @click.prevent.stop=\"$events.minimized.pane_click\" :aria-label=\"$store.chat.is_opened ? $render._e('minimized', 'tooltip_button_close_hint') : $render._e('minimized', 'tooltip_button_open_hint')\" :data-pane-animate-entrance=\"$store.minimized.pane.animate_entrance\""+a.Library.jade.runtime.attr(":data-pop",i+" ? 'overlay:open' : ($store.minimized.pane.helpdesk.only ? 'helpdesk:search' : 'minimized:open')",!0,!0)+' data-maximized="false"'+a.Library.jade.runtime.attr("data-is-failure","false",!0,!0)+' class="cc-1m2mf"><span class="cc-6lwfw">'),r.push('<span v-if="$store.minimized.pane.general_entice.visible" :class="{ \'cc-9c0pe\': $store.minimized.pane.general_entice.animate_full, \'cc-179sg\': $store.minimized.pane.general_entice.animate_short }" :data-with-helpdesk="$store.minimized.pane.helpdesk.url !== null" :data-is-concealed="$store.minimized.pane.general_entice.is_concealed" data-id="general_entice" class="cc-1pzwe"><span class="cc-1ixpz"><span class="cc-1amne cc-olo99"><span class="cc-14i7w"><span class="cc-7udqo"><span v-crisp-accessibility="{ role: \'button\' }" class="cc-1x4xm cc-sdm9t"></span><span class="cc-1hjy4"><span v-if="($store.base.configuration.chat.overlay_search &amp;&amp; $store.base.configuration.chat.overlay_mode) || $store.minimized.pane.helpdesk.only" class="cc-y90t5 cc-361jl">'+a.Library.jade.runtime.escape(null==(e=t("minimized","tooltip_entice_title_search"))?"":e)+'</span><span v-else class="cc-y90t5 cc-361jl">{{ $render._e("theme_text", "default_chat", [$store.base.configuration.chat.theme_text + "_chat"]) }}</span><span class="cc-1ets0"><span v-if="$store.base.availability === \'online\'" data-id="online" class="cc-ok0uk cc-361jl cc-1dvce">'+a.Library.jade.runtime.escape(null==(e=t("minimized","tooltip_entice_status_online"))?"":e)+'</span><span v-else data-id="away" class="cc-ok0uk cc-olo99">'+a.Library.jade.runtime.escape(null==(e=t("minimized","tooltip_entice_status_away"))?"":e)+'</span><span class="cc-k2uiy"><span v-for="active_avatar in $store.base.active_operators" class="cc-x2po4"><span class="cc-164u5 cc-8mq05"><span :style="{ backgroundImage: (\'url(\' + $render._a(60, active_avatar.type, active_avatar.identifier, active_avatar.avatar) + \') !important\') }" class="cc-1798f cc-o92tn"></span></span></span></span></span></span></span></span><span class="cc-1xr1o">');var n="($store.base.configuration.chat.overlay_search && (!$store.minimized.pane.helpdesk.only || $store.base.configuration.chat.overlay_mode))";r.push('<span v-if="!($store.base.configuration.chat.overlay_search &amp;&amp; $store.base.configuration.chat.overlay_mode) &amp;&amp; !$store.minimized.pane.helpdesk.only" v-crisp-accessibility="{ role: \'button\' }" :data-partial-pending="$store.partial.bundle.pending.chat" data-type="chat" class="cc-1djrv cc-hshc7 cc-f5i1a"><span class="cc-uxkrl cc-5t1tm"></span><span class="cc-ggi1r cc-361jl cc-co79q">{{ $render._e("minimized", "tooltip_entice_action_chat", [$store.base.configuration.website.name]) }}</span></span><span v-if="$store.base.configuration.chat.overlay_search || ($store.minimized.pane.helpdesk.url &amp;&amp; !$store.minimized.pane.is_offline)" v-crisp-accessibility="{ role: \'button\' }"'+a.Library.jade.runtime.attr(":data-pop",n+" ? 'overlay:open' : 'helpdesk:search'",!0,!0)+a.Library.jade.runtime.attr(":data-partial-pending",n+" ? $store.partial.bundle.pending.overlay : $store.partial.bundle.pending.chat",!0,!0)+' data-type="search" class="cc-1djrv cc-hshc7"><span class="cc-uxkrl"></span><span class="cc-ggi1r cc-361jl">'+a.Library.jade.runtime.escape(null==(e=t("minimized","tooltip_entice_action_search"))?"":e)+"</span></span></span></span></span></span>"),r.push("</span>"),r.push('<span class="cc-157aw cc-1kgzy"><span'+a.Library.jade.runtime.attr(":data-prefer-search",i,!0,!0)+' data-id="chat_closed" data-is-ongoing="false" class="cc-d73fc"><span v-if="$store.minimized.pane.is_waiting" class="cc-5vksq"><span class="cc-plaj2 cc-gjeb6"></span></span><span v-else'+a.Library.jade.runtime.attr(":data-partial-pending",i+" ? $store.partial.bundle.pending.overlay : $store.partial.bundle.pending.chat",!0,!0)+' class="cc-1bvfm cc-hshc7"><span v-if="$store.base.configuration.chat.website_logo" class="cc-1d4mk cc-8mq05"><span :style="{ backgroundImage: (\'url(\' + $render._a(120, \'website\', $store.base.website.id) + \') !important\') }" class="cc-1kqps cc-o92tn"></span></span><span v-else-if="$store.base.configuration.chat.last_operator_face &amp;&amp; $store.base.active_operators.length &gt; 0" class="cc-1d4mk cc-8mq05"><span :style="{ backgroundImage: (\'url(\' + $render._a(120, $store.base.active_operators[0].type, $store.base.active_operators[0].identifier, $store.base.active_operators[0].avatar) + \') !important\') }" class="cc-1kqps cc-o92tn"></span></span></span></span></span>'),r.push("</a></div>")}.call(this,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0),r.join("")},minimized_unauthorized:function(t){var i,n=[],t=t||{};return function(t){n.push(""),n.push('<div class="cc-1yy0g cc-1wive cc-vibqn">'),n.push("<a v-crisp-accessibility=\"{ role: 'button' }\" @click.prevent.stop=\"$events.minimized.pane_click\" :aria-label=\"$store.chat.is_opened ? $render._e('minimized', 'tooltip_button_close_hint') : $render._e('minimized', 'tooltip_button_open_hint')\" :data-pane-animate-entrance=\"$store.minimized.pane.animate_entrance\""+a.Library.jade.runtime.attr(":data-pop","($store.base.configuration.chat.overlay_search && $store.base.configuration.chat.overlay_mode) ? 'overlay:open' : ($store.minimized.pane.helpdesk.only ? 'helpdesk:search' : 'minimized:open')",!0,!0)+' data-maximized="false"'+a.Library.jade.runtime.attr("data-is-failure","true",!0,!0)+' class="cc-1m2mf"><span class="cc-6lwfw">'),n.push('<span data-id="failure_notice" class="cc-1pzwe"><span class="cc-1ixpz"><span class="cc-1amne"><span class="cc-1uoaj cc-361jl">'+a.Library.jade.runtime.escape(null==(i=t("minimized","unauthorized_pane"))?"":i)+"</span></span></span></span>"),n.push("</span>"),n.push('<span class="cc-157aw cc-l22u7"><span data-id="in_failure" data-is-ongoing="false" data-prefer-search="false" class="cc-d73fc"><span class="cc-1bvfm"></span></span></span>'),n.push("</a></div>")}.call(this,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0),n.join("")}};this.logger=c.Console,this.vue=c.PetiteVue,this.crisp={web:c.CrispLibraryWeb,client:c.CrispLibraryClient},this.jade={runtime:c.jade,client:w}}catch(t){}};g.Library=t;var i=new(function(){function t(){try{this.ns="CrispCompatibility",this.cs=2e4,this.as="UTF-8",this.hs='You can disable this warning by adding: $crisp.push(["safe", true]) to your page JavaScript.',this.us=/\{\s*\[native code\]\s*\}$/,this.dt(),this.ls()}catch(t){}}var i=t.prototype;return i.reset=function(){try{this.dt()}catch(t){}},i.schedule_warn_incompatible=function(){var t=this,i=0<arguments.length&&void 0!==arguments[0]&&arguments[0];try{null!==this.vs&&clearTimeout(this.vs),this.vs=setTimeout(function(){!(t.vs=null)!==g.Pipeline.ds&&(t.ys(),t.ps())},!0===i?0:this.cs)}catch(t){}},i.ls=function(){try{this.gs()}catch(t){}},i.gs=function(){try{Function.prototype.Jt=function(t){var i,n,e,r;if("function"!=typeof this)throw new TypeError("Function.prototype.__crisp_bind - not callable");return i=Array.prototype.slice.call(arguments,1),e=function(){},r=function(){return n.apply(this instanceof e?this:t,i.concat(Array.prototype.slice.call(arguments)))},(n=this).prototype&&(e.prototype=this.prototype),r.prototype=new e,r}}catch(t){}},i.ys=function(){try{var t=(document.characterSet||document.charset||"").toUpperCase();t!==this.as&&window.console&&"function"==typeof window.console.warn&&console.warn("[WARNING] Crisp found an incompatible charset on your page. "+"You are currently using the ".concat(t," charset. ")+"We recommend using the ".concat(this.as," charset ")+"instead to avoid rendering issues.\n\n"+this.hs)}catch(t){}},i.ps=function(){try{var t=window;if(null!=t&&t.console&&"function"==typeof t.console.warn&&"function"==typeof Function.prototype.toString){for(var i,n,e,r=[[null,t,["eval","escape","unescape","decodeURI","encodeURI","decodeURIComponent","encodeURIComponent","setTimeout","clearTimeout","setInterval","clearInterval","parseInt","parseFloat","RTCPeerConnection","MutationObserver","XMLHttpRequest","AudioContext","WebSocket","Proxy","Text","Comment"]],[null,t,["Array","Object","String","Number","Date","Function","RegExp","Symbol","Set","Map","WeakMap","Event","Error"]],["Array",t.Array,["from","isArray"]],["Array.prototype",t.Array.prototype,["push","pop","indexOf","includes","sort","splice","slice","shift","unshift","map","filter","find","findIndex","forEach"]],["Object",t.Object,["assign","create","keys","values","is","isExtensible","defineProperty","defineProperties","getOwnPropertyNames","getOwnPropertyDescriptors"]],["Object.prototype",t.Object.prototype,["hasOwnProperty","propertyIsEnumerable","toString"]],["String",t.String,["fromCharCode"]],["String.prototype",t.String.prototype,["indexOf","charAt","charCodeAt","trim","toLowerCase","toUpperCase","slice","replace","match"]],["Math",t.Math,["random","round","floor","ceil","abs"]],["Date",t.Date,["now"]],["Date.prototype",t.Date.prototype,["getTime","toISOString"]],["Function.prototype",t.Function.prototype,["bind","apply","call"]],["RegExp.prototype",t.RegExp.prototype,["test","exec"]],["Event.prototype",t.Event.prototype,["preventDefault","stopPropagation"]],["Reflect",t.Reflect,["get","set","has","ownKeys","deleteProperty"]],["document",t.document,["querySelector","querySelectorAll","createElement","createEvent","addEventListener","removeEventListener"]],["JSON",t.JSON,["stringify","parse"]],["localStorage",t.localStorage,["setItem","getItem","removeItem"]],["sessionStorage",t.sessionStorage,["setItem","getItem","removeItem"]]],s=[],o=0;o<r.length;o++)if(void 0===(n=(i=r[o])[1]))s.push(i[0]||"[root]");else for(var c=i[2]||[],a=0;a<c.length;a++)void 0===(e=n[c[a]])||this.us.test(""+e)||(null!==i[0]?s.push("".concat(i[0],".").concat(c[a])):s.push(c[a]));0<s.length&&console.warn("[WARNING] Crisp found shims of native JavaScript methods. This can alter the chatbox behavior and break things. Make sure not to override listed functions to ensure your chatbox works as expected. You may be looking for other JavaScript libraries in use on this page.\n\n"+"".concat(this.hs,"\n\n")+"Methods to check:",s)}}catch(t){}},i.dt=function(){try{this.vs=null}catch(t){}},t}());g.Compatibility=i;var n=new(function(){function t(){try{this.ns="CrispPartial",this.bs={}}catch(t){}}var i=t.prototype;return i.load_bundle=function(t,i){var n=this,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;try{g.Store.$store.partial.bundle.pending[t]=null===r||r;for(var s=[function(){g.Template.load(t,a,h)},function(){n.load_style(t,a,h)}],o=!1,c=0,a=function(){!0!==o&&++c>=s.length&&(o=!0,delete g.Store.$store.partial.bundle.pending[t],i())},h=function(){!0!==o&&(o=!0,delete g.Store.$store.partial.bundle.pending[t],"function"==typeof e&&e())},u=0;u<s.length;u++)s[u]()}catch(t){}},i.load_style=function(t,i){var n=this,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;try{var r,s,o,c=this.bs[t]||void 0;void 0===c?(this.bs[t]=[i],c=this.bs[t],r=g.Base._s||"default",(s=document.createElement("link")).href=["".concat(g.Base.ks,"/"),"".concat(g.Base.xs,"/"),"".concat(t,"_").concat(r,".css?").concat(g.Base.Fs)].join(""),s.type="text/css",s.rel="stylesheet",s.addEventListener("load",function(){for(;0<c.length;)c.shift()()}),s.addEventListener("error",function(){delete n.bs[t],s.parentNode.removeChild(s),"function"==typeof e&&e()}),null!=(o=document.getElementsByTagName("head"))&&o[0]&&o[0].appendChild(s)):0===c.length?i():c.push(i)}catch(t){}},i.load_dependency=function(t,i,n,e){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null,s=5<arguments.length&&void 0!==arguments[5]&&arguments[5],o=6<arguments.length&&void 0!==arguments[6]?arguments[6]:null,c=7<arguments.length&&void 0!==arguments[7]?arguments[7]:{};try{var a="".concat(t,"_").concat(i,"_handler"),h=document.createElement("script");if(h.type="text/javascript",(h.async=!0)===s){var u,l="window.$__CRISP_INSTANCE.__spool.".concat(a),f="".concat(n,"?callback=").concat(encodeURIComponent(l));for(u in o&&(f+="&".concat(encodeURIComponent(o))),c)null!==c[u]&&(f+="&".concat(u,"=").concat(encodeURIComponent(c[u])));h.src=f}else h.src=["".concat(g.Base.ks,"/static/javascripts/").concat(n),"?".concat(g.Base.Fs)].join("");function v(){h.parentNode.removeChild(h),delete g.Base.Es.__spool[a]}g.Base.Es.__spool[a]=function(t){v(),"function"==typeof e&&e(t)},"function"==typeof h.addEventListener&&(h.addEventListener("load",function(){}),h.addEventListener("error",function(){v(),"function"==typeof r&&r()}));var d=document.getElementsByTagName("head");null!=d&&d[0]&&d[0].appendChild(h)}catch(t){}},i.spawn_worker=function(t,e,r,s){var i,o,c=4<arguments.length&&void 0!==arguments[4]&&arguments[4];try{window.Worker&&window.URL?(i=["".concat(g.Base.ks,"/static/javascripts/workers/").concat(t,".js"),"?".concat(g.Base.Fs)].join(""),(o=new window.XMLHttpRequest).open("GET",i,!0),o.responseType="blob",o.onload=function(){try{var i=window.URL.createObjectURL(o.response),n=new window.Worker(i);n.addEventListener("message",function(t){try{r(t.data),!0===c&&(n.terminate(),window.URL.revokeObjectURL(i))}catch(t){}}),n.addEventListener("error",function(t){try{var i=t.message||"Cannot spawn";s(i)}catch(i){}}),e(n,i)}catch(t){s(t)}},o.onerror=function(){s(new Error("Could not load worker runtime"))},o.send()):s(new Error("Workers are not supported"))}catch(t){s(t)}},t}());g.Partial=n;var e=new(function(){function t(){try{this.ns="CrispUtility",this.Cs="[match:single]",this.js="[match:double]",this.As="[match:negate]",this.Is=/([\*]{1})/g,this.zs=/([\*]{2})/g,this.Os=/^([\!]{1})/,this.Ss=/(\[match:single\])/g,this.Ds=/(\[match:double\])/g,this.Rs=/(\[match:negate\])/g,this.Ns=new RegExp(["^(\\!)?","(?:https?:[\\/]*)?","(?:www\\.)?([^\\/]+)([^#?]*)?","(?:[\\/]+)?","(?:[#?].*)?"].join(""),"i"),this.qs=/^(?:\s*)(?:(?:javascript|vbscript):)/i,this.dt()}catch(t){}}var i=t.prototype;return i.reset=function(){try{this.dt()}catch(t){}},i.get_or_fallback=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,e=t;try{e=null!==n?typeof t!==n?i:t:t||i}catch(t){}finally{return e}},i.lower_string_first=function(t){var i=t;try{t&&(i="".concat(t.charAt(0).toLowerCase()).concat(t.slice(1)))}catch(t){}finally{return i}},i.pad_number=function(t){var i,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"00",e=n;try{0<=t&&(i=n.length-Math.ceil((t+1)/10),e=t?n.substr(0,i)+t:n)}catch(t){}finally{return e}},i.insert_link_query_values=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t;try{if(0<(null==n?void 0:n.length)){var e,r,s="";for(e in i)s&&(s+="&"),s+="".concat(e,"=").concat(encodeURIComponent(i[e]));0<(null==s?void 0:s.length)&&("?"!==(r=n[n.length-1])&&"&"!==r&&(n+=!0===n.includes("?")?"&":"?"),n+=s)}}catch(t){}finally{return n}},i.filter_link_safe=function(t){var i="#";try{t&&!1===this.qs.test(t)&&(i=t)}catch(t){}finally{return i}},i.filter_image_url_resize=function(t,i,n){var e="";try{e=this.Bs(t,"".concat(g.Base.Ms,"/process/resize/")+"?url=".concat(encodeURIComponent(t))+"&width=".concat(i,"&height=").concat(n))}catch(t){}finally{return e}},i.filter_image_url_original=function(t){var i="";try{i=this.Bs(t,"".concat(g.Base.Ms,"/process/original/")+"?url=".concat(encodeURIComponent(t)))}catch(t){}finally{return i}},i.to_hashcode=function(t){var i=0;try{if(0<t.length)for(var n=0;n<t.length;n++)i=(i<<5)-i+t.charCodeAt(n),i&=i}catch(t){}finally{return i}},i.is_empty=function(t){var i=!0;try{0<this.keys(t).length&&(i=!1)}catch(t){}finally{return i}},i.is_equal=function(t,i){var n=!0;try{var e,r,s=-1;if(typeof t!=typeof i)n=!1;else if(t&&"object"==typeof t&&i&&"object"==typeof i)for(t instanceof Array||i instanceof Array?(r=this.union(t,i),t.length===r.length&&i.length===r.length||(n=!1)):r=this.union(this.keys(t),this.keys(i));++s<r.length&&!0===n;)e=r[s],n=this.is_equal(t[e],i[e]);else n=t===i&&!0}catch(t){}finally{return n}},i.keys=function(t){var i=[];try{"object"==typeof t&&t&&(i=Object.keys(t))}catch(t){}finally{return i}},i.clone=function(t){try{var i,n,e=Array.isArray(t)?[]:{};for(i in t)n=t[i],e[i]="object"==typeof n?this.clone(n):n}catch(t){}finally{return e}},i.merge=function(t,i){try{"object"==typeof t&&t&&Object.assign(t,i)}catch(t){}finally{return t}},i.intersect=function(t,i){var n=[];try{for(var e=0;e<t.length;e++)-1!==i.indexOf(t[e])&&n.push(t[e])}catch(t){}finally{return n}},i.union=function(t,i){var n=[];try{for(var e=0;e<t.length;e++)-1===n.indexOf(t[e])&&n.push(t[e]);for(var r=0;r<i.length;r++)-1===n.indexOf(i[r])&&n.push(i[r])}catch(t){}finally{return n}},i.extract=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,r=i||n||"";try{var s=(i||"").trim().match(t),r=null!=s&&s[e]?s[e]:n||""}catch(t){}finally{return r}},i.compare_rule=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:".",e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:".",r=!1;try{r=-1!==(i=!0===this.Os.test(i)?(i=i.replace(this.Os,this.As)).replace(this.Rs,""):i).indexOf("*")?(i=(i=(i=(i=i.replace(this.zs,this.js)).replace(this.Is,this.Cs)).replace(this.Ds,e+"*")).replace(this.Ss,n+"*"),new RegExp("^".concat(i,"$")).test(t)&&!0):t===i&&!0}catch(t){}finally{return r}},i.compare_rules=function(t,i,n){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:".",r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:".",s=!1,o=!1,c=!1;try{if(0<i.length){for(var a=0;a<i.length&&!0!==o;)o=this.compare_rule(t,i[a],e,r),a++;!1===o&&(s=!0)}if(!1===o&&0<n.length){for(var h=0;h<n.length&&!0!==c;)c=this.compare_rule(t,n[h],e,r),h++;s=c}}catch(t){}finally{return s}},i.normalize_url_path=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",e="";try{i?1<i.length&&"/"!==i[i.length-1]&&"*"!==i[i.length-1]&&(i+="/"):i="/",e="".concat(n).concat(t).concat(i)}catch(t){}finally{return e}},i.compare_page_rules=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,e=!1;try{if(0<i.length){var r,s=[],o=[],c=[];null===n&&(n=g.Base.Ts);for(var a=0;a<i.length;a++){var h=(i[a]||"").trim();h&&((r=(h=!1===this.Ns.test(h)?this.normalize_url_path(n,h):h).match(this.Ns))?s.push(this.normalize_url_path(r[2],r[3],r[1])):s.push("".concat(n).concat(h)))}for(var u=t.match(this.Ns),l=u?this.normalize_url_path(u[2],u[3],u[1]):null,f=0;f<s.length;f++)(!0===this.Os.test(s[f])?o:c).push(s[f]);!0===this.compare_rules(l,o,c,"[^/]",".")&&(e=!0)}}catch(t){}finally{return e}},i.unwind_wheel=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"scrollTop";try{var e,r,s=t.target;s&&"number"==typeof t.wheelDelta&&((r=null)!==(r=!0===s.classList.contains(i)?s:s.closest(".".concat(i))||null)&&(e=r[n]-t.wheelDelta,r[n]=0<=e?e:0),t.stopPropagation(),t.preventDefault(),t.returnValue=!1)}catch(t){}},i.play_media=function(t){try{var i=t.play();void 0!==i&&"function"==typeof i.catch&&i.catch(function(t){})}catch(t){}},i.open_link=function(t){try{var i=window.open();i.opener=null,i.location=t}catch(t){}},i.acquire_channel_url_regex=function(t,i){var n,e,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",s=null;try{g.Base.Us.channels[t]&&((s=null===(n=this.Ps[t])||void 0===n?void 0:n[i])||(e=g.Chat.Interface.generate_channel_link("helpdesk"),s=new RegExp("^".concat(g.Library.crisp.web.Parse.escape_regex(e))+"".concat(r,"$")),this.Ps[t]=this.Ps[t]||{},this.Ps[t][i]=s))}catch(t){}finally{return s}},i.next_render=function(t){try{g.Library.vue.nextTick(t)}catch(t){}},i.set_timeout=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=null;try{if(!g.Library.crisp.client.Schedule)throw new Error("Could not set timeout after ".concat(i,"ms, as the schedule wrapper ")+"is not yet available");n=g.Library.crisp.client.Schedule.set_timeout(t,i)}catch(t){}finally{return n}},i.clear_timeout=function(t){try{if(!g.Library.crisp.client.Schedule)throw new Error("Could not clear timeout #".concat(t,", as the schedule wrapper ")+"is not yet available");g.Library.crisp.client.Schedule.clear_timeout(t)}catch(t){}},i.set_interval=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=null;try{if(!g.Library.crisp.client.Schedule)throw new Error("Could not set interval every ".concat(i,"ms, as the schedule wrapper ")+"is not yet available");n=g.Library.crisp.client.Schedule.set_interval(t,i)}catch(t){}finally{return n}},i.clear_interval=function(t){try{if(!g.Library.crisp.client.Schedule)throw new Error("Could not clear interval #".concat(t,", as the schedule wrapper ")+"is not yet available");g.Library.crisp.client.Schedule.clear_interval(t)}catch(t){}},i.add_event_listener=function(t,i,n,e){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};try{if(!g.Library.crisp.client.Listener)throw new Error("Could not add event listener '".concat(n,"' to ")+"'".concat(i,"' instance, as the listener wrapper is not ")+"yet available");g.Library.crisp.client.Listener.add_event(t,i,n,e,r)}catch(t){}},i.remove_event_listener=function(t,i,n){try{if(!g.Library.crisp.client.Listener)throw new Error("Could not remove event listener '".concat(n,"' from ")+"'".concat(i,"' instance, as the listener wrapper is not ")+"yet available");g.Library.crisp.client.Listener.remove_event(t,i,n)}catch(t){}},i.reset_instance_children=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;try{var n,e=null!==i?i:t,r=[];for(n in t){var s=t[n];s!==e&&s&&"object"==typeof s&&"function"==typeof s.reset&&s.reset(r)}for(;0<r.length;)r.shift()()}catch(t){}},i.Bs=function(t,i){var n="";try{n=t.substring(0,g.Base.Ms.length)===g.Base.Ms?t:i}catch(t){}finally{return n}},i.dt=function(){try{this.Ps={}}catch(t){}},t}());g.Utility=e;var r=new(function(){function t(){try{this.ns="CrispFeature",this.Ls=/^[a-z]/,this.Js=/no/,this.Ws={macos:/^Mac/,windows:/^Win/,linux:/^Linux/,ios:/^(?:iPhone|iPod|iPad)$/,android:/^Android$/},this.dt()}catch(t){}}var i=t.prototype;return i.reset=function(){try{this.dt()}catch(t){}},i.operating_system=function(){var t=null;try{t=this.Vs}catch(t){}finally{return t}},i.has_screen_touch=function(){var t=!1;try{t=this.Hs}catch(t){}finally{return t}},i.has_css_animations=function(){var t=!1;try{t=this.Gs}catch(t){}finally{return t}},i.has_audio_recording=function(){var t=!1;try{t=this.Ks}catch(t){}finally{return t}},i.has_html_audio=function(){var t=!1;try{t=null!==this.Ys&&!0}catch(t){}finally{return t}},i.html_audio_format=function(){var t="mp3";try{t=this.Ys}catch(t){}finally{return t}},i.Zs=function(t){var i=!1;try{i=!!(t in window)}catch(t){}finally{return i}},i.Xs=function(t){var i=!1;try{var n=document.documentElement.style,e=["Khtml","Ms","O","Moz","Webkit"],r=e.length;if(t in n)i=!0;else for(t=t.replace(this.Ls,function(t){return t.toUpperCase()});r--;)if(e[r]+t in n){i=!0;break}}catch(t){}finally{return i}},i.Qs=function(){var n=this;try{this.Ks=!1,window.MediaRecorder&&window.File&&navigator.mediaDevices&&"function"==typeof window.MediaRecorder.isTypeSupported&&"function"==typeof navigator.mediaDevices.enumerateDevices&&navigator.mediaDevices.enumerateDevices().then(function(t){for(var i=0;i<((null==t?void 0:t.length)||0);i++)if("audioinput"===t[i].kind){n.Ks=!0;break}g.Store.$store.base.features.audio_recording=n.Ks}).catch(function(t){})}catch(t){}},i.no=function(){var t=this;try{this.Hs=!!(this.Zs("ontouchstart")||0<navigator.maxTouchPoints);var i=function(){t.Hs=!0,window.removeEventListener("touchstart",i)};window.addEventListener("touchstart",i,!1)}catch(t){}},i.eo=function(){var t=null;try{var i=document.createElement("audio"),n=!(!i.canPlayType||!i.canPlayType('audio/ogg; codecs="vorbis"').replace(this.Js,"")),e=!(!i.canPlayType||!i.canPlayType('audio/mp4; codecs="mp4a.40.2"').replace(this.Js,"")),r=!(!i.canPlayType||!i.canPlayType("audio/mpeg;").replace(this.Js,""));1==n?t="oga":1==e?t="m4a":1==r&&(t="mp3")}catch(t){}finally{return t}},i.ro=function(){var t=null;try{var i=window.navigator.platform||null;if(null!==i)for(var n in this.Ws)if(!0===this.Ws[n].test(i)){t=n;break}}catch(t){}finally{return t}},i.dt=function(){try{this.Gs=this.Xs("animation"),this.Ys=this.eo(),this.Vs=this.ro(),this.Qs(),this.no()}catch(t){}},t}());g.Feature=r;var s=new(function(){function t(){try{this.ns="CrispStore",this.dt()}catch(t){}}var i=t.prototype;return i.reset=function(){try{this.dt()}catch(t){}},i.bind_events=function(t,i,n){try{if(void 0===g.Store.$events[t]){g.Store.$events[t]={};for(var e=0;e<i.length;e++){var r=i[e],s=n[r];if("function"!=typeof s)throw new Error("Event to bind not found in realm: ".concat(t," for name: ")+"".concat(r));g.Store.$events[t][r]=s.Jt(n)}}}catch(t){}},i.xt=function(){try{this.$events={}}catch(t){}},i.so=function(){try{this.$store={},this.oo(),this.co(),this.ao(),this.ho(),this.uo(),this.lo(),this.fo(),this.vo()}catch(t){}},i.oo=function(){try{this.$store.base=g.Library.vue.reactive({availability:"none",color_mode:"light",is_hidden:!1,is_blocked:!1,is_mobile_view:!1,is_full_view:!1,is_small_view:!1,is_large_view:!1,is_activity_ongoing:!1,has_local_messages:!1,was_availability_online:!1,force_show:!1,active_operators:[],other_operators_count:0,website:{id:"",domain:"",name:""},environment:{smileys:{},url:{crisp_web:null,crisp_image:null,crisp_game:null},types:{file_preview:{}}},features:{audio_recording:!1},configuration:{},runtime:{}})}catch(t){}},i.co=function(){try{this.$store.partial=g.Library.vue.reactive({bundle:{pending:{}}})}catch(t){}},i.ao=function(){try{this.$store.chat=g.Library.vue.reactive({mode:"chat",status_marker:"none",is_opened:!1,is_visible:!1,is_locked_identify:!1,is_locked_prompt:!1,is_hidden_prompt:!1,has_offline:!1,has_drop_zone:!1,has_channels:!1,show_operator_count:!0,animate_minimize:!1,animate_maximize:!1,reconnect_failed:!1,reconnect_inactive:!1,blocked:!1,ongoing_operator:{user_id:"",type:"",name:"",url:""},current_alerts:null,channels:[],branding_link:null,activity:{metrics:null,last:null},speech:{state:"none",duration:0,progress:0},file:{state:"none"},game:{loaded:!1},frame:{target:"",title:"",loaded:!1},helpdesk:{search:!1,only:!1},status:{url:""},field:{has_value:!1},picker:{type:"smiley",is_visible:!1,has_animation:!1,gif:{results:[],input:""}},feedback:{is_visible:!1,is_available:!1,stars:{hovered:0,selected:0},comment:""},helpdesk_search:{input:"",url:"",articles:[],current_index:0,has_search:!1,initialized:!1,loading:!1},helpdesk_viewer:{url:"",category:"",title:"",loaded:!1}})}catch(t){}},i.ho=function(){try{this.$store.overlay=g.Library.vue.reactive({is_opened:!1,has_contact:!1,branding_link:null,sidebar:{expanded:!0,scrolled:!1},main:{scrolled:!1},browse:{recent:[],frequent:[],tags:[]},prompt:{query:"",shortcut:"",locale:null,asked:!1,thinking:!1},results:{query:"",answer:[],sources:[],expanded:0,category:!1,empty:!1,error:!1}})}catch(t){}},i.uo=function(){try{this.$store.magnify=g.Library.vue.reactive({state:null,type:null,source:null,name:null,messages:null})}catch(t){}},i.lo=function(){try{this.$store.call=g.Library.vue.reactive({mode:null,size:"maximized",state:null,duration:0,user:{user_id:"",nickname:"",type:""},muted:{audio:!1,video:!1},actions:[]})}catch(t){}},i.fo=function(){try{this.$store.minimized=g.Library.vue.reactive({pane:{is_ongoing:!1,is_waiting:!1,is_offline:!1,animate_entrance:!1,general_entice:{visible:!1,is_concealed:!1,animate_full:!1,animate_short:!1},unread:{visible:!1,count:0},helpdesk:{url:null,only:!1}},tooltips:{new_messages:{visible:!1,animate:!0}}})}catch(t){}},i.vo=function(){try{this.$store.messages=g.Library.vue.reactive({list:[],preview:[],fingerprints:{},compose:{is_active:!1,is_automated:!1},states:{expanded_sources:{}},prompt_fingerprints:[],latest_fingerprint:null})}catch(t){}},i.dt=function(){try{this.xt(),this.so()}catch(t){}},t}());g.Store=s;var o=new(function(){function t(){try{this.ns="CrispAction",this.yo=["session:loaded","chat:initiated","chat:opened","chat:closed","message:sent","message:received","message:compose:sent","message:compose:received","user:email:changed","user:phone:changed","user:nickname:changed","user:avatar:changed","website:availability:changed","helpdesk:queried"],this.po={on:this.mo,off:this.wo},this.go=500,this.bo=/^(light|dark)$/,this._o=/^([a-f0-9]{64})$/,this.ko={}}catch(t){}}var i=t.prototype;return i.reset=function(){try{void 0===g.Base.Es.__spool.pending_actions&&(g.Base.Es.__spool.pending_actions=[])}catch(t){}},i.do_chat_open=function(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;!0===g.Chat.xo?(g.Chat.Interface.maximize(),"function"==typeof i&&i()):g.Minimized.Interface.Fo(function(t){g.Chat.init(t,i)})},i.do_chat_close=function(){!0===g.Chat.xo&&g.Chat.Interface.minimize()},i.do_chat_toggle=function(){!0===this.is_chat_closed()?this.do_chat_open():this.do_chat_close()},i.do_chat_show=function(){!0===this.is_chat_hidden()&&(g.Store.$store.base.is_hidden=!1,(g.Store.$store.base.force_show=!0)===g.Chat.xo&&(g.Chat.Interface.request_dynamic_sizing_properties(),g.Chat.Interface.apply_chat_focus()))},i.do_chat_hide=function(){!0===this.is_chat_visible()&&(g.Store.$store.base.is_hidden=!0,!(g.Store.$store.base.force_show=!1)===g.Chat.xo&&g.Chat.Interface.apply_chat_focus())},i.do_helpdesk_search=function(){if(!0!==g.Chat.Helpdesk.show_search())throw new Error("Helpdesk search is unavailable");this.do_chat_show(),this.do_chat_open()},i.do_helpdesk_article_open=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;if("string"!=typeof t||!t)throw new Error("Invalid article locale");if("string"!=typeof i||!i)throw new Error("Invalid article slug");if(!0!==g.Chat.Helpdesk.show_article(t,i,n,e))throw new Error("Helpdesk article is unavailable");this.do_chat_show(),this.do_chat_open()},i.do_helpdesk_query=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";g.Base.ensure_socket(function(){g.Library.crisp.client.Helpdesk.get_article_search(t,g.Locale.code())})},i.do_overlay_open=function(){if(!0!==g.Overlay.open(0<arguments.length&&void 0!==arguments[0]?arguments[0]:null))throw new Error("Overlay is unavailable (was it disabled?)")},i.do_overlay_close=function(){g.Overlay.close()},i.do_message_send=function(t,n){var e=this;g.Base.ensure_socket(function(){var i=e.Eo(t,n);null!==i.type&&null!==i.content&&g.Chat.start_maximized(function(){var t=!0===g.Chat.Message.trigger_will_send_hooks()?e.go:0;switch(i.type){case"text":g.Library.crisp.client.Message.send_text_message(i.content,t);break;case"file":g.Library.crisp.client.Message.send_file_message(i.content.name,i.content.url,i.content.type,t);break;case"animation":g.Library.crisp.client.Message.send_animation_message(i.content.url,i.content.type,t);break;case"audio":g.Library.crisp.client.Message.send_audio_message(i.content.url,i.content.type,i.content.duration,t);break;case"picker":g.Library.crisp.client.Message.send_picker_message(i.content.id,i.content.text,i.content.choices,t);break;case"field":g.Library.crisp.client.Message.send_field_message(i.content.id,i.content.text,i.content.explain,t);break;case"carousel":g.Library.crisp.client.Message.send_carousel_message(i.content.text,i.content.targets,t)}})})},i.do_message_show=function(i,n){var e=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,s=3<arguments.length&&void 0!==arguments[3]&&arguments[3];g.Base.ensure_socket(function(){var t=e.Eo(i,n);null!==t.type&&null!==t.content&&g.Chat.Message.dispatch_local(t.type,t.content,r,s)})},i.do_message_read=function(){!0===g.Chat.xo&&g.Library.crisp.client.Message.mark_messages_as_read()},i.do_message_thread_start=function(t){if("string"!=typeof t||!t)throw new Error("Invalid message thread start text");if(!0!==g.Chat.xo)throw new Error("Chat must be active for message thread to start");g.Base.ensure_socket(function(){g.Library.crisp.client.Message.send_message_thread("start",t)})},i.do_message_thread_end=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(t&&("string"!=typeof t||!t))throw new Error("Invalid message thread end text");if(!0!==g.Chat.xo)throw new Error("Chat must be active for message thread to end");g.Base.ensure_socket(function(){g.Library.crisp.client.Message.send_message_thread("end",t||"")})},i.do_session_reset=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];g.Base.update_socket_cookie_key(!1,!0),g.Library.crisp.client.Session.reset(),!1===t?(g.Base.uninsert_client(),g.Base.reset(),g.Base.re_trigger_loader()):document.location.reload()},i.do_trigger_run=function(t){if(!0!==g.Trigger.run(t))throw new Error("Trigger does not exist")},i.is_chat_opened=function(){return!(!0!==g.Store.$store.chat.is_opened||!0!==g.Chat.xo)},i.is_chat_closed=function(){return!1===this.is_chat_opened()&&!0},i.is_chat_visible=function(){return!1===this.is_chat_hidden()&&!0},i.is_chat_hidden=function(){return(null===g.Base.Co||!0===g.Store.$store.base.is_hidden||null===g.Base.Co.offsetParent)&&!0},i.is_chat_small=function(){return!1===g.Base.is_full_view()&&!0},i.is_chat_large=function(){return!1===this.is_chat_small()&&!0},i.is_session_ongoing=function(){return(!0===g.Chat.Message.jo||!0===g.Chat.Message.Ao)&&!0},i.is_website_available=function(){return g.Availability.$o&&!0},i.is_overlay_opened=function(){return!0===g.Store.$store.overlay.is_opened&&!0},i.is_overlay_closed=function(){return!1===this.is_overlay_opened()&&!0},i.get_chat_unread_count=function(){return g.Chat.Notification.Io||0},i.get_message_text=function(){return!0===g.Chat.xo&&g.Chat.Selector.get("form_textarea_message").value||""},i.get_session_identifier=function(){return g.Broker.Zt||null},i.get_session_data=function(){return g.Library.crisp.client.Session.get_data(0<arguments.length&&void 0!==arguments[0]?arguments[0]:null)||null},i.get_user_email=function(){return g.Library.crisp.client.Session.get_email()||null},i.get_user_phone=function(){return g.Library.crisp.client.Session.get_phone()||null},i.get_user_nickname=function(){return g.Library.crisp.client.Session.get_nickname()||null},i.get_user_avatar=function(){return g.Library.crisp.client.Session.get_avatar()||null},i.get_user_company=function(){var t,i,n=g.Library.crisp.client.Session.get_company()||null;return null!=n&&null!==(t=n.employment)&&void 0!==t&&t.title&&(n.employment=[n.employment.title,n.employment.role]),null!=n&&null!==(i=n.geolocation)&&void 0!==i&&i.country&&(n.geolocation=[n.geolocation.country,n.geolocation.city||null]),n},i.set_message_text=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;if("string"!=typeof t)throw new Error("Invalid message text");var i=g.Chat.Selector.get("form_textarea_message");i&&!0!==i.disabled&&(i.value=t,i.dispatchEvent(new window.KeyboardEvent("keydown")))},i.set_session_data=function(s,o){g.Base.ensure_socket(function(){for(var t,i=s instanceof Array&&s[0]instanceof Array?s:[[s,o]],n={},e=0;e<i.length;e++){var r=i[e][1];r&&"string"==typeof r&&("false"===r?r=!1:"true"===r?r=!0:!1===isNaN(Number(r))&&(r=Number(r))),n[i[e][0]]=r}if(!0!==g.Validate.is_data(n))throw new Error("Invalid data");for(t in g.Library.crisp.client.Session.set_data(n),n)g.Trigger.do_event("user_data",{key:t,value:n[t]})},!0)},i.set_session_segments=function(t){var i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];g.Base.ensure_socket(function(){if(!t||!0!==g.Validate.are_segments(t))throw new Error("Invalid segments value");g.Library.crisp.client.Session.set_segments(t,i)},!0)},i.set_session_event=function(n){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;g.Base.ensure_socket(function(){var t=n instanceof Array&&n[0]instanceof Array?n:[[n,e,r]];if(!0!==g.Validate.are_events(t))throw new Error("Invalid event text or data");g.Library.crisp.client.Session.send_event(t);for(var i=0;i<t.length;i++)g.Trigger.do_event("user_event",{text:t[i][0]})},!0)},i.set_user_email=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(!t||!0!==g.Validate.is_email(t))throw new Error("Invalid email");if(null!==i&&!0!==this._o.test(i))throw new Error("Invalid verify signature (should be lowercase HMAC-SHA256)");g.Library.crisp.client.Session.set_email(t,!1,i),this.zo(),this.event("user:email:changed",t)},i.set_user_phone=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;if(!(t="number"==typeof t?"".concat(t):t)||!0!==g.Validate.is_phone(t))throw new Error("Invalid phone");g.Library.crisp.client.Session.set_phone(t),this.zo(),this.event("user:phone:changed",t)},i.set_user_nickname=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;if("string"!=typeof t||!t)throw new Error("Invalid nickname");g.Library.crisp.client.Session.set_nickname(t),this.event("user:nickname:changed",t)},i.set_user_avatar=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;if(!t||!0!==g.Validate.is_avatar(t))throw new Error("Invalid avatar");g.Library.crisp.client.Session.set_avatar(t),this.event("user:avatar:changed",t)},i.set_user_company=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!t)throw new Error("Invalid company name");var n,e={name:t};if(i.url){if("string"!=typeof i.url)throw new Error("Invalid URL");e.url=i.url}if(i.description){if("string"!=typeof i.description)throw new Error("Invalid description");e.description=i.description}if(null!==(n=i.employment)&&void 0!==n&&n[0]){if("string"!=typeof i.employment[0]||"string"!=typeof i.employment[1])throw new Error("Invalid employment");e.employment={title:i.employment[0],role:i.employment[1]}}if(null!==(n=i.geolocation)&&void 0!==n&&n[0]){if("string"!=typeof i.geolocation[0]||i.geolocation[1]&&"string"!=typeof i.geolocation[1])throw new Error("Invalid geolocation");e.geolocation={country:i.geolocation[0],city:i.geolocation[1]||null}}g.Library.crisp.client.Session.set_company(e)},i.config_availability_tooltip=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];g.Base.update_configuration("availability_tooltip",t),!0===t&&!0!==g.Base.is_full_view()&&g.Minimized.Interface.display_general_entice()},i.config_hide_vacation=function(){g.Base.update_configuration("hide_vacation",0<arguments.length&&void 0!==arguments[0]&&arguments[0])},i.config_hide_on_away=function(){g.Base.update_configuration("hide_on_away",0<arguments.length&&void 0!==arguments[0]&&arguments[0])},i.config_hide_on_mobile=function(){g.Base.update_configuration("hide_on_mobile",0<arguments.length&&void 0!==arguments[0]&&arguments[0])},i.config_position_reverse=function(){g.Base.update_configuration("position_reverse",0<arguments.length&&void 0!==arguments[0]&&arguments[0])},i.config_sound_mute=function(){g.Sound.mute(0<arguments.length&&void 0!==arguments[0]&&arguments[0])},i.config_color_theme=function(){g.Base.insert_style({color:{theme:0<arguments.length&&void 0!==arguments[0]?arguments[0]:null}})},i.config_color_mode=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;if(!t||!0!==this.bo.test(t))throw new Error("Invalid color mode");g.Store.$store.base.color_mode=t},i.config_container_index=function(){g.Base.insert_style({other:{container_index:0<arguments.length&&void 0!==arguments[0]?arguments[0]:null}})},i.config_show_operator_count=function(){g.Store.$store.chat.show_operator_count=!(0<arguments.length&&void 0!==arguments[0])||arguments[0]},i.event=function(t){var i=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];if(-1===this.yo.indexOf(t))throw new Error("Event namespace not recognized: ".concat(t));"function"==typeof this.ko[t]&&g.Utility.next_render(function(){try{i.ko[t].apply(window,n instanceof Array?n:void 0!==n?[n]:[])}catch{}})},i.unstack_pending=function(){try{var t=g.Base.Es.__spool.pending_actions;if(delete g.Base.Es.__spool.pending_actions,0<(null==t?void 0:t.length))for(var i=0;i<t.length;i++)try{g.Pipeline.push(t[i])}catch{}}catch(t){}},i.mo=function(t,i){if("function"!=typeof i)throw new Error("Handler must be a function");this.ko[t]=i},i.wo=function(t){void 0!==this.ko[t]&&delete this.ko[t]},i.zo=function(){!0===g.Chat.xo&&(!0===g.Chat.Message.jo&&g.Chat.Alert.update("wait_reply","show"),g.Chat.Alert.update("warn_reply","hide"),g.Chat.Alert.update("email_invalid","hide"),g.Chat.Intent.update("identity",!1))},i.Eo=function(t,i){var n={type:null,content:null};switch(t){case"text":if("string"!=typeof i||!i)throw new Error("Invalid text message");n.type="text",n.content=i;break;case"file":if("object"!=typeof i||!i.name||!i.url||!i.type)throw new Error("Invalid file message");n.type="file",n.content={name:i.name,url:i.url,type:i.type};break;case"animation":if("object"!=typeof i||!i.url||!i.type)throw new Error("Invalid animation message");n.type="animation",n.content={url:i.url,type:i.type};break;case"audio":if("object"!=typeof i||!i.url||!i.type||!i.duration)throw new Error("Invalid audio message");n.type="audio",n.content={url:i.url,type:i.type,duration:i.duration};break;case"picker":if("object"!=typeof i||!i.id||!i.text||0===(i.choices||[]).length)throw new Error("Invalid picker message");n.type="picker",n.content={id:i.id,text:i.text,choices:i.choices};break;case"field":if("object"!=typeof i||!i.id||!i.text||!i.explain)throw new Error("Invalid field message");n.type="field",n.content={id:i.id,text:i.text,explain:i.explain};break;case"carousel":if("object"!=typeof i||!i.text||0===(i.targets||[]).length)throw new Error("Invalid carousel message");n.type="carousel",n.content={text:i.text,targets:i.targets}}return n},t}());g.Action=o;var c=new(function(){function t(){try{this.ns="CrispAccessibility",this.Oo=["button","alert"],this.So=13,this.Do=32,this.Ro=9,this.dt()}catch(t){}}var i=t.prototype;return i.directive=function(n){var e=this;try{function i(t){switch(t.keyCode){case e.So:case e.Do:var i;null!==(i=t.target)&&void 0!==i&&i.role&&-1!==e.Oo.indexOf(t.target.role)&&(t.stopImmediatePropagation(),t.preventDefault(),t.target.click());break;case e.Ro:null!==e.No&&null!==e.qo&&e.No===n.el&&"hidden"!==window.getComputedStyle(e.qo).visibility&&(t.stopImmediatePropagation(),t.preventDefault(),e.qo.focus())}}var t=function(){n.el.removeEventListener("keydown",i);var t=e.Bo.indexOf(n.el);-1<t&&e.Bo.splice(t,1)};n.el.setAttribute("tabindex",0),n.get()&&(n.get().role&&n.el.setAttribute("role",n.get().role),!0===n.get().is_first&&null===this.qo&&(this.qo=n.el),!0===n.get().is_last&&null===this.No&&(this.No=n.el)),n.el.addEventListener("keydown",i),this.Bo.push(n.el)}catch(t){}finally{return t||function(){}}},i.dt=function(){try{this.qo=null,this.No=null,this.Bo=[]}catch(t){}},t}());g.Accessibility=c;var a=new(function(){function t(){try{this.ns="CrispPipeline",this.Mo=["get","set","is","do","on","off","config","safe","help"],this.To=["on","off"],this.Uo=/:/g,this.dt()}catch(t){}}var i=t.prototype;return i.reset=function(){try{this.dt()}catch(t){}},i.push=function(t){var i=(null===(i=window.$__CRISP_INSTANCE)||void 0===i?void 0:i.__spool)||{};void 0!==i.pending_actions?i.pending_actions.push(t):t[0]&&void 0!==t[1]&&-1!==this.Mo.indexOf(t[0])&&"function"==typeof this[t[0]]&&this[t[0]](t[1],t[2]||[])},i.get=function(t){return this.Po("get",t,this.Lo(1<arguments.length&&void 0!==arguments[1]?arguments[1]:[]))},i.set=function(t){return this.Po("set",t,this.Lo(1<arguments.length&&void 0!==arguments[1]?arguments[1]:[]))},i.is=function(t){return this.Po("is",t)},i.do=function(t){return this.Po("do",t,this.Lo(1<arguments.length&&void 0!==arguments[1]?arguments[1]:[]))},i.on=function(t,i){return this.Jo("on",t,[t,i])},i.off=function(t){return this.Jo("off",t,[t])},i.config=function(t){return this.Po("config",t,this.Lo(1<arguments.length&&void 0!==arguments[1]?arguments[1]:[]))},i.safe=function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];if("boolean"!=typeof t)throw new Error("Safe mode value must be 'true' or 'false'.");this.ds=t},i.help=function(){var t,i=[];for(t in g.Action){var n=t.split("_");1<n.length&&-1!==this.Mo.indexOf(n[0])&&"function"==typeof g.Action[t]&&i.push("$crisp.".concat(n[0],"('").concat(n.slice(1).join(":"),"')"))}for(var e=0;e<this.To.length;e++)for(var r=0;r<g.Action.yo.length;r++)i.push("$crisp.".concat(this.To[e],"('").concat(g.Action.yo[r],"')"));return i},i.Lo=function(t){return t?t instanceof Array?t:[t]:[]},i.Po=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],e=null,r=null;try{var s="".concat(t,"_").concat((i||"").replace(this.Uo,"_"));"function"==typeof g.Action[s]?e=g.Action[s].apply(g.Action,n):this.Wo(i)}catch(t){!0!==this.ds&&(r=t)}finally{if(null!==r)throw r;return e}},i.Jo=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],e=null,r=null;try{var s=g.Action.po[t];if("function"!=typeof s)throw new Error("No such event method for action: ".concat(t));-1!==g.Action.yo.indexOf(i)?e=s.apply(g.Action,n):this.Wo(i)}catch(t){!0!==this.ds&&(r=t)}finally{if(null!==r)throw r;return e}},i.Wo=function(t){throw new Error("No such namespace: ".concat(t," - Call $crisp.help() for a list ")+"of available actions.")},i.dt=function(){try{this.ds=!1}catch(t){}},t}());g.Pipeline=a;var h=new(function(){function t(){try{this.ns="CrispValidate",this.Vo=80,this.Ho=/^(([^\s@]+)@([^\s@]+)\.([^\s@]+))$/,this.Go=new RegExp(["^(?:(?:\\(?(?:00|\\+)([1-4]\\d\\d|[1-9]\\d?)\\)?)?","[\\-\\.\\ \\\\\\/]?)?((?:\\(?\\d{1,}\\)?[\\-\\.\\ \\\\\\/]?){0,})","(?:[\\-\\.\\ \\\\\\/]?(?:#|ext\\.?|extension|x)[\\-\\.\\ \\\\/]?","(\\d+))?$"].join(""),"i"),this.Ko=/^https?:\/\/(.+)$/,this.Yo=/^([A-Za-z0-9_\\-]{1,50})$/}catch(t){}}var i=t.prototype;return i.is_email=function(t){var i=!1;try{t.match(this.Ho)&&(i=!0)}catch(t){}finally{return i}},i.is_phone=function(t){var i=!1;try{t.match(this.Go)&&(i=!0)}catch(t){}finally{return i}},i.is_avatar=function(t){var i=!1;try{t.match(this.Ko)&&(i=!0)}catch(t){}finally{return i}},i.is_data=function(t){var i=!1;try{if(t instanceof Object)for(var n in i=0<g.Utility.keys(t).length&&!0,t){var e=t[n];if("string"!=typeof n||!0!==this.Yo.test(n)||"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e){i=!1;break}}}catch(t){i=!1}finally{return i}},i.are_events=function(t){var i=!1;try{if(t instanceof Array)for(var i=0<t.length&&!0,n=0;n<t.length;n++)if("string"!=typeof t[n][0]||!t[n][0]||!1===g.Utility.is_empty(t[n][1])&&!1===this.is_data(t[n][1])){i=!1;break}}catch(t){i=!1}finally{return i}},i.are_segments=function(t){var i=!1;try{if(t instanceof Array)for(var i=!0,n=[],e=0;e<t.length;e++){var r=t[e]||"",s="";if(!(s="string"==typeof r?r.trim():s)||s.length>this.Vo||-1!==n.indexOf(s)){i=!1;break}n.push(s)}}catch(t){i=!1}finally{return i}},t}());g.Validate=h;var u=new(function(){function t(){try{this.ns="CrispDate",this.Zo=20,this.Xo=1e3,this.Qo=60,this.tc=24,this.ic=60,this.nc=this.Qo*this.ic,this.ec=this.tc*this.nc,this.rc=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],this.sc=["january","february","march","april","may","june","july","august","september","october","november","december"]}catch(t){}}var i=t.prototype;return i.directive=function(i){var t,n=this;try{var e=i.get()||{},r=e.date,s=e.format||"",o=e.type||"date",c=null,a=function(){g.Utility.clear_timeout(c),c=null},h=function(){a(),c=g.Utility.set_timeout(function(){u()},n.Zo*n.Xo)},u=function(){var t="";switch(o){case"date":t=n.format_date(n.timestamp_to_iso(r));break;case"duration":t=n.format_duration(r)}s&&(t=g.Library.crisp.web.Parse.replace(s,[g.Utility.lower_string_first(t)])),i.el.innerText=t,h()};i.effect(function(){var t=i.get()||{};r=t.date,s=t.format||"",u()}),t=function(){a()}}catch(t){}finally{return t||function(){}}},i.timestamp_to_iso=function(t){var i="";try{i=new Date(t).toISOString()}catch(t){}finally{return i}},i.iso_to_timestamp=function(t){var i=0;try{i=new Date(t).getTime()}catch(t){}finally{return i}},i.timestamp_to_properties=function(t){var i,n,e,r={day:"none",month:"none",year:"none",title:null};try{0<t&&(i=new Date(t),n=g.Locale.text("days",this.rc[i.getDay()]),e=g.Locale.text("months",this.sc[i.getMonth()]),r.day="".concat(i.getDate()),r.month="".concat(i.getMonth()+1),r.year="".concat(i.getFullYear()),r.title="".concat(n,", ").concat(i.getDate()," ").concat(e),(new Date).getFullYear()!==i.getFullYear()&&(r.title+=" (".concat(r.year,")")))}catch(t){}finally{return r}},i.seconds_in_timestamp=function(t){var i=0;try{if(isNaN(Number(t)))throw new Error("Timestamp is not a number");i=Math.floor(parseInt(t,10)/this.Xo)}catch(t){}finally{return i}},i.timestamp=function(){var t=0;try{t=(new Date).getTime()}catch(t){}finally{return t}},i.difference=function(t,i){var n=-1;try{n=this.iso_to_timestamp(t)-this.iso_to_timestamp(i)}catch(t){}finally{return n}},i.equal=function(t,i){var n=!1;try{n=0===this.difference(t,i)&&!0}catch(t){}finally{return n}},i.format_time=function(t){var i,n,e,r=1<arguments.length&&void 0!==arguments[1]&&arguments[1],s="0:00";try{0<=t&&(t=Math.round(t),i=Math.floor(t/this.nc),n=Math.floor(t%this.nc/this.ic),e=t%this.ic%this.nc,s=0<i||!0===r?"".concat(i,":").concat(g.Utility.pad_number(n,"00"),":")+"".concat(g.Utility.pad_number(e,"00")):"".concat(n,":").concat(g.Utility.pad_number(e,"00")))}catch(t){}finally{return s}},i.format_date=function(t){var i=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=null;try{var e=new Date,r=new Date(t),s=e.getTime()-r.getTime(),o=this.oc(s);if(o.type||(o.type="far_away",o.data={date_full:r.toLocaleDateString()}),!(n=g.Template.dom(g.Template.render("date_".concat(o.type),o.data)).innerText))throw new Error("Empty parsed date for ISO string: ".concat(t));!0===i&&(n=g.Utility.lower_string_first(n))}catch(t){}finally{return n}},i.format_duration=function(t){var i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=null;try{var e=this.oc(t,i);if(e.type||(e.type="days"),!(n=g.Template.dom(g.Template.render("duration_".concat(e.type),e.data)).innerText))throw new Error("Empty parsed duration for duration: ".concat(t))}catch(t){}finally{return n}},i.oc=function(t){var i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n={};try{var e=Math.round(t/this.Xo);e<10&&!0===i?n.type="now":e<this.ic?n.type="seconds":e<this.nc?(n.type="minutes",n.data={minutes:Math.floor(e/this.ic)}):e<this.ec&&(n.type="hours",n.data={hours:Math.floor(e/this.nc)})}catch(t){}finally{return n}},t}());g.Date=u;var l=new(function(){function t(){try{this.ns="CrispTheme",this.cc=16,this.ac="default",this.hc={default:{10:"#F0F2F5",20:"#EFF5FE",100:"#E2EEFF",200:"#66788A",500:"#1972F5",600:"#055EE1",700:"#0057D7",800:"#0051C8",900:"#004AB5",reverse:"#FFFFFF"},red:{10:"#F0F2F5",20:"#F9F3F3",100:"#FFE5E4",200:"#66788A",500:"#E51E0F",600:"#CC1B0E",700:"#C5170A",800:"#B81206",900:"#A71004",reverse:"#FFFFFF"},pink:{10:"#F0F2F5",20:"#F7F2F2",100:"#FFE0EB",200:"#66788A",500:"#F11D64",600:"#DB165A",700:"#CE1454",800:"#C20F4D",900:"#B40A45",reverse:"#FFFFFF"},purple:{10:"#F0F2F5",20:"#F8F3FA",100:"#FADDFF",200:"#66788A",500:"#B520CF",600:"#9B19B2",700:"#9614AE",800:"#8A0DA1",900:"#800896",reverse:"#FFFFFF"},deep_purple:{10:"#F0F2F5",20:"#F6F5FA",100:"#EDE2FF",200:"#66788A",500:"#682AD5",600:"#581FBB",700:"#5019B0",800:"#441599",900:"#3B0F89",reverse:"#FFFFFF"},indigo:{10:"#F0F2F5",20:"#F5F5FB",100:"#DDE2FF",200:"#66788A",500:"#2943D1",600:"#1732C4",700:"#112BB9",800:"#0F249A",900:"#091C87",reverse:"#FFFFFF"},blue:{10:"#F0F2F5",20:"#EFF5FE",100:"#E2EEFF",200:"#66788A",500:"#1972F5",600:"#055EE1",700:"#0057D7",800:"#0051C8",900:"#004AB5",reverse:"#FFFFFF"},light_blue:{10:"#F0F2F5",20:"#EFF5F7",100:"#DCF0F9",200:"#66788A",500:"#009FDF",600:"#008CCB",700:"#0088C5",800:"#007EB7",900:"#0076AB",reverse:"#FFFFFF"},cyan:{10:"#F0F2F5",20:"#F1F7F7",100:"#DBF7F9",200:"#66788A",500:"#01A2B4",600:"#009CAE",700:"#008A9A",800:"#008493",900:"#007B89",reverse:"#FFFFFF"},teal:{10:"#F0F2F5",20:"#E7F4F4",100:"#D6EEE9",200:"#66788A",500:"#00947C",600:"#00816C",700:"#007B66",800:"#00705D",900:"#006655",reverse:"#FFFFFF"},green:{10:"#F0F2F5",20:"#EDF5ED",100:"#D6F3D7",200:"#66788A",500:"#28A52D",600:"#1A941F",700:"#148919",800:"#0F7B13",900:"#0A6C0E",reverse:"#FFFFFF"},light_green:{10:"#F0F2F5",20:"#F0F7F0",100:"#DFF6C6",200:"#66788A",500:"#6EB700",600:"#64A500",700:"#5E9C00",800:"#528800",900:"#487800",reverse:"#FFFFFF"},amber:{10:"#F0F2F5",20:"#F6F4ED",100:"#FFF0C1",200:"#66788A",500:"#E1AE01",600:"#CD9E00",700:"#C49700",800:"#B88E00",900:"#A37E00",reverse:"#FFFFFF"},orange:{10:"#F0F2F5",20:"#F5F5EF",100:"#FFECCF",200:"#66788A",500:"#EC6800",600:"#E16300",700:"#CE5B00",800:"#BE5400",900:"#B54F00",reverse:"#FFFFFF"},deep_orange:{10:"#F0F2F5",20:"#FDF5F5",100:"#FFE8E0",200:"#66788A",500:"#E45300",600:"#CD4A00",700:"#C24702",800:"#B84200",900:"#AC3E00",reverse:"#FFFFFF"},brown:{10:"#F0F2F5",20:"#F7F1EF",100:"#F2EAE7",200:"#66788A",500:"#924B32",600:"#8C462D",700:"#7F3D25",800:"#75361F",900:"#692E19",reverse:"#FFFFFF"},grey:{10:"#F0F2F5",20:"#F4F4F4",100:"#E5E5E5",200:"#66788A",500:"#7A7A7A",600:"#6B6B6B",700:"#646464",800:"#5B5B5B",900:"#505050",reverse:"#FFFFFF"},blue_grey:{10:"#F0F2F5",20:"#F2F7F8",100:"#DCEDF6",200:"#66788A",500:"#447991",600:"#3C7189",700:"#32657C",800:"#2A5A70",900:"#27556A",reverse:"#FFFFFF"},black:{10:"#F0F2F5",20:"#F2F2F2",100:"#E9E9E9",200:"#66788A",500:"#2A2A2A",600:"#313131",700:"#454545",800:"#525252",900:"#5B5B5B",reverse:"#FFFFFF"}},this.uc=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i}catch(t){}}var i=t.prototype;return i.colors=function(t){var i=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n={};try{var e,r=!0!==i?g.Plugin.get_customization("color","chatbox"):{},s=this.hc[t]||this.hc[this.ac];for(e in this.lc(r,s),r)n[e]={hex:r[e],rgba:this.fc.Jt(this,r[e])}}catch(t){}finally{return n}},i.lc=function(t,i){try{for(var n in i)t[n]||(t[n]=i[n])}catch(t){}},i.fc=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n="rgba(0, 0, 0, 1)";try{var e=[0,0,0],r=t.match(this.uc);r&&(e[0]=parseInt(r[1],this.cc),e[1]=parseInt(r[2],this.cc),e[2]=parseInt(r[3],this.cc)),n="rgba("+"".concat(e[0],", ")+"".concat(e[1],", ")+"".concat(e[2],", ")+"".concat(i)+")"}catch(t){}finally{return n}},t}());g.Theme=l;var f=new(function(){function t(){try{this.ns="CrispPlugin"}catch(t){}}var i=t.prototype;return i.get_triggers=function(){var t={};try{var i,t=(null===(i=g.Base.Us.plugins["urn:crisp.im:triggers:0"])||void 0===i||null===(i=i.settings)||void 0===i?void 0:i.triggers)||{}}catch(t){}finally{return t}},i.get_customization=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,e=null;try{var r,e=(null===(r=g.Base.Us.plugins["urn:crisp.im:customization:0"])||void 0===r||null===(r=r.settings)||void 0===r||null===(r=r[t])||void 0===r?void 0:r[i])||{};n&&(e=e[n]||null)}catch(t){}finally{return e}},t}());g.Plugin=f;var v=new(function(){function t(){try{this.ns="CrispSound",this.vc={events:["chat-message-receive","chat-message-action"],call:["call-established","call-hangup","call-ring"]},this.dt()}catch(t){}}var i=t.prototype;return i.reset=function(){try{this.stop(),this.dt()}catch(t){}},i.allow=function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];try{this.dc=t}catch(t){}},i.mute=function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];try{this.yc=t}catch(t){}},i.initialize=function(t){try{if(!1===this.dc)return;this.pc[t]=this.pc[t]||{};for(var i=this.vc[t],n=0;n<i.length;n++)void 0===this.pc[t][i[n]]&&this.mc(t,i[n])}catch(t){}},i.start=function(n,e){var r=this,s=2<arguments.length&&void 0!==arguments[2]&&arguments[2],o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:50;try{if(!1===this.dc)return;if(!0===g.Feature.has_html_audio()&&!0===this.wc(n)){var t=this.vc[n];if(void 0===t)throw new Error("Subset does not exist: ".concat(n));if(-1===t.indexOf(e))throw new Error("Sound does not exist: ".concat(e," in subset ").concat(n));this.stop(),this.mc(n,e,function(t){var i;null!==r.gc&&("suspended"===r.gc.state&&r.gc.resume(),(i=r.gc.createGain()).gain.setValueAtTime(o/100,0),i.connect(r.gc.destination),r.bc=r.gc.createBufferSource(),r.bc.buffer=t,r.bc.loop=s,r.bc.connect(i),r.bc.start(),r._c=n,r.kc=e)},function(t){})}}catch(t){}},i.stop=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;try{null===this.bc||null!==t&&t!==this._c||null!==i&&i!==this.kc||(this.bc.stop(),this.bc=null,this._c=null,this.kc=null)}catch(t){}},i.mc=function(i,n){var t,e,r=this,s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){},o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){};try{this.pc[i]=this.pc[i]||{},this.xc[i]=this.xc[i]||{},void 0===this.xc[i][n]?(this.xc[i][n]={success:[s],error:[o]},void 0!==this.pc[i][n]?this.Fc("success",i,n,this.pc[i][n]):(t=this.Ec(i,n))&&((e=new window.XMLHttpRequest).open("GET",t,!0),e.responseType="arraybuffer",e.onload=function(){null===r.gc&&(r.gc=r.Cc()),null!==r.gc?r.gc.decodeAudioData(e.response,function(t){r.pc[i][n]=t,r.Fc("success",i,n,t)},function(t){r.Fc("error",i,n,t)}):r.Fc("error",i,n)},e.onerror=function(t){r.Fc("error",i,n,t)},e.send())):(this.xc[i][n].success.push(s),this.xc[i][n].error.push(o))}catch(t){}},i.Fc=function(t,i,n){var e,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,s=null===(e=this.xc[i])||void 0===e?void 0:e[n];if(void 0!==s){for(var o=0;o<s[t].length;o++)s[t][o](r);delete this.xc[i][n]}},i.Ec=function(t,i){var n=null;try{var e=g.Feature.html_audio_format();null!==e&&(n="".concat(g.Base.ks,"/static/sounds/").concat(t,"/")+"".concat(i,".").concat(e,"?").concat(g.Base.Fs))}catch(t){}finally{return n}},i.Cc=function(){var t=null;try{try{!0===g.Event.jc&&"function"==typeof window.AudioContext&&(t=new window.AudioContext)}catch{}}catch(t){}finally{return t}},i.wc=function(t){var i=!0;try{var n=!this.yc&&!0,e="call"===t||!0!==g.Library.crisp.client.Call.is_ongoing(),i=n&&e&&!0}catch(t){}finally{return i}},i.dt=function(){try{this.dc=!0,this.yc=!1,this.gc=null,this.bc=null,this._c=null,this.kc=null,this.pc={},this.xc={}}catch(t){}},t}());g.Sound=v;var d=new(function(){function t(){try{this.ns="CrispLocale",this.Ac="en",this.$c="ltr",this.Ic=["af","ar-ae","ar-sa","ar-ye","ar","az","bg","bn","ca","ckb","cs","da","de","el","en","eo","es","et","eu","fa","fi","fo","fr","gu","he","hi","hr","hu","hy","id","is","it","ja","ka","ko","lt","lv","ml","mn","ms","nl-be","nl","no","pl","ps","pt-br","pt","ro","ru","sk","sl","sr-cyrl-cs","sr","sv","ta","th","tr","uk","vi","zh-hk","zh-tw","zh"],this.zc="en",this.Oc=["en","fr","es","pt","de","nl","fi","pl","tr"],this.Sc=this.Ic,this.Dc=["ltr","rtl"],this.dt()}catch(t){}}var i=t.prototype;return i.reset=function(){try{this.dt()}catch(t){}},i.detect=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=this.Ac;try{var n,e,r=[];for(t.length&&(this.Sc=g.Utility.intersect(t,this.Ic),0<this.Sc.length&&-1===this.Sc.indexOf(i)&&(i=this.Ac=this.Sc[0])),n=0;n<g.Base.Rc.length;n++)(e=g.Base.Rc[n])&&(r.push(e.toLowerCase()),-1!==e.indexOf("-")&&(e=e.split("-")[0])&&r.push(e.toLowerCase()));for(n=0;n<r.length;n++)if(-1!==this.Sc.indexOf(r[n])){i=r[n];break}}catch(t){}finally{return i}},i.load=function(t,i){var n=this;try{var e=t;-1===this.Sc.indexOf(t)&&(e=this.Ac),null!==this.Nc&&this.Nc._meta.locale_code!==t&&(this.Nc=null),null===this.Nc?g.Partial.load_dependency("locale",e,"locales/".concat(e,".js"),function(t){try{n.qc(e,t,i)}catch(t){}}):"function"==typeof i&&i()}catch(t){}},i.name=function(){var t=null;try{if(null===this.Nc)throw new Error("Cannot get locale name, locale data not loaded");t=this.Nc._meta.locale_name}catch(t){}finally{return t}},i.code=function(){var t=null;try{if(null===this.Nc)throw new Error("Cannot get locale code, locale data not loaded");t=this.Nc._meta.locale_code}catch(t){}finally{return t}},i.direction=function(){var t=null;try{if(null===this.Nc)throw new Error("Cannot get locale direction, locale data not loaded");t="legacy"===g.Base._s?this.$c:this.Nc._meta.locale_direction,-1===this.Dc.indexOf(t)&&(t=this.$c)}catch(t){}finally{return t}},i.text=function(t,i){var n,e,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],s=null;try{if("object"==typeof i?(n=i[0],e=i[1]):n=e=i,null===this.Nc)throw new Error("Cannot get locale text, locale data not loaded");if(void 0===this.Nc._strings[t])throw new Error("Locale text group not found: ".concat(t));if(void 0===this.Nc._strings[t][e])throw new Error("Locale text namespace not found in group: "+"".concat(e," in ").concat(t));s=g.Plugin.get_customization("text",t,n)||this.Nc._strings[t][e],s=g.Library.crisp.web.Parse.replace(s,r),s=this.Bc(s)}catch(t){}finally{return s}},i.web=function(){var t=null;try{var t=this.zc,i=this.code();!0===this.Oc.includes(i)&&(t=i)}catch(t){}finally{return t}},i.qc=function(t,i,n){try{if(null!==this.Nc)throw new Error("Locale has already been loaded (double requested handled?)");if("object"!=typeof i)throw new Error("Did not receive a proper locale data file");if(i._meta.locale_code!==t)throw new Error("Received a mismatching locale code, expected: ".concat(t));this.Nc=i,"function"==typeof n&&n()}catch(t){}finally{return null}},i.Bc=function(t){var i=null;try{try{i=decodeURIComponent(escape(t))}catch{i=t}}catch(t){}finally{return i}},i.dt=function(){try{this.Nc=null}catch(t){}},t}());g.Locale=d;var y=new(function(){function t(){try{this.ns="CrispAudio",this.Mc=1,this.Tc=2,this.Uc=.5}catch(t){}}var i=t.prototype;return i.directive=function(i){var n=this;try{var t,e=!1,r=!1,s=!1,o=this.Mc,c=i.el,a=i.el.querySelector(".cc-19cv1"),h=i.el.querySelector(".cc-181gi"),u=i.el.querySelector(".cc-yfdf6"),l=i.el.querySelector(".cc-13ck1"),f=i.el.querySelector(".cc-1s6of");l&&(t=l.querySelector("source"),l.addEventListener("play",function(){l.playbackRate=o,c.setAttribute("data-state",!0===s?"playing":"loading")}),l.addEventListener("pause",function(){c.setAttribute("data-state","paused")}),l.addEventListener("canplay",function(){s=!0,n.Pc(i,l,u,f),c.setAttribute("data-state","playing")}),l.addEventListener("stalled",function(){c.setAttribute("data-state","none")}),t&&t.addEventListener("error",function(){l.paused||l.pause(),(r=!0)===e&&alert(g.Locale.text("chat","chat_message_audio_play_error"))}),f&&u&&l.addEventListener("timeupdate",function(t){t.target&&n.Pc(i,t.target,u,f,!1)}),a&&a.addEventListener("click",function(){try{l&&(e=!0,l.paused?(!0===r&&(l.load(),r=!1),g.Utility.play_media(l)):l.pause())}catch(t){}finally{return!1}}),h&&h.addEventListener("click",function(){try{(o+=n.Uc)>n.Tc&&(o=n.Mc),l.playbackRate=o,h.innerText=o%1==0?"x".concat(Math.floor(o)):"".concat(o)}catch(t){}finally{return!1}}))}catch(t){}finally{return function(){}}},i.Pc=function(t,i,n,e){var r=!(4<arguments.length&&void 0!==arguments[4])||arguments[4];try{var s=i.duration!==1/0?i.duration:(t.get().duration||0)+1,o=Math.ceil(i.currentTime/s*100),c=o<100?o:0,a=0===c&&!0!==r?t.get().duration||0:Math.floor(i.currentTime);n.innerText=g.Date.format_time(a),e.style.setProperty("width","".concat(c,"%"),"important")}catch(t){}},t}());g.Audio=y;var p=new(function(){function t(){try{this.ns="CrispAvatar"}catch(t){}}return t.prototype.url=function(t,i,n){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,r="";try{r=e?e.substring(0,g.Base.Ms.length)===g.Base.Ms?e:"".concat(g.Base.Ms,"/process/thumbnail/")+"?url=".concat(encodeURIComponent(e))+"&width=".concat(t,"&height=").concat(t)+"&".concat(g.Base.Us.website.buster):"".concat(g.Base.Ms,"/avatar/").concat(i,"/")+"".concat(n||"default","/").concat(t,"/")+"?".concat(g.Base.Us.website.buster)}catch(t){}finally{return r}},t}());g.Avatar=p;var m=new(function(){function t(){try{this.ns="CrispTemplate",this.Lc=600,this.Jc=600,this.Wc={}}catch(t){}}var i=t.prototype;return i.load=function(e,r){var s=this,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;try{!0!==this.Wc[e]?g.Partial.load_dependency("templates",e,"templates/".concat(e,".js"),function(t){try{if("function"!=typeof t)throw"function"==typeof o&&o(),new Error("Invalid template builder received");var i,n=t(g);for(i in n)g.Library.jade.client[i]=n[i];s.Wc[e]=!0,"function"==typeof r&&r()}catch(t){}},o):"function"==typeof r&&r()}catch(t){}},i.render=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},e="";try{if("function"!=typeof g.Library.jade.client[t])throw new Error("No such template: ".concat(t," (might not be loaded)"));if("object"!=typeof i)throw new Error("Object argument is not an object");if(i._e=g.Locale.text.Jt(g.Locale),!1===g.Utility.is_empty(n))for(var r in n)void 0===i[r]&&(i[r]=n[r]);e=g.Library.jade.client[t](i).trim()}catch(t){}finally{return e}},i.dom=function(t){var i=null;try{var n=document.createElement("div");n.innerHTML=t,i=n.firstChild}catch(t){}finally{return i}},i.vue=function(t){var e=this;try{var i={_f:function(t,i){return g.Library.crisp.web.Parse.format("string"==typeof t?t:"",i)},_n:function(t){return g.Library.crisp.web.Name.parse_first_name("string"==typeof t?t:"")}};i._e=g.Locale.text.Jt(g.Locale),i._a=g.Avatar.url.Jt(g.Avatar),i.format_context={methods:{filter_link_safe:g.Utility.filter_link_safe.Jt(g.Utility),html_attribute:g.Library.crisp.web.Parse.attribute.Jt(g.Library.crisp.web.Parse)}},i.format_time=g.Date.format_time.Jt(g.Date),i.format_date=g.Date.format_date.Jt(g.Date),i.image_url_resize=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return g.Utility.filter_image_url_resize(t,null!==i?i:e.Lc,null!==n?n:e.Jc)},i.image_url_original=function(t){return g.Utility.filter_image_url_original(t)},i.current_time=function(){return(new Date).getTime()},g.Library.vue.createApp({$store:g.Store.$store,$events:g.Store.$events,$render:i}).directive("crisp-date",g.Date.directive.Jt(g.Date)).directive("crisp-audio",g.Audio.directive.Jt(g.Audio)).directive("crisp-accessibility",g.Accessibility.directive.Jt(g.Accessibility)).mount(t)}catch(t){}},t}());g.Template=m;var w=new(function(){function t(){try{this.ns="CrispTicket",this.Vc=.75,this.Hc="ticket",this.Gc=["token","expire","session"],this.dt()}catch(t){}}var i=t.prototype;return i.reset=function(){try{this.dt()}catch(t){}},i.acquire=function(t,i){var n=this;try{function e(){n.Kc.token?i({token:n.Kc.token}):i(null)}!0!==this.Yc&&(this.Yc=!0,this.Zc());var r=new Date;1==(this.Kc.refresh_after||0)-r.getTime()<=0?this.Xc(t,r,e):e()}catch(t){}},i.Xc=function(t,i,n){var e=this;try{this.Qc.push(n),1===this.Qc.length&&this.ta(t,i,function(){for(;0<e.Qc.length;)e.Qc.shift()()})}catch(t){}},i.ta=function(t,e,r){var s=this;try{var i="".concat(e.getFullYear(),"-").concat(e.getMonth(),"-").concat(e.getDate(),"-")+"".concat(e.getHours(),"-").concat(e.getMinutes(),"-").concat(e.getSeconds()),o="".concat(g.Base.ks,"/settings/session/")+"".concat(encodeURIComponent(t));g.Partial.load_dependency("session","challenge","".concat(o,"/challenge/"),function(n){s.ia(n.mint||{},function(t){var i,t={mint_signature:(null===(i=n.mint)||void 0===i?void 0:i.signature)||null,mint_proof:(null==t?void 0:t.token)||null,mint_cost:(null==t?void 0:t.duration)||null};g.Partial.load_dependency("session","ticket","".concat(o,"/ticket/"),function(t){t.token&&s.na(t,e),r()},function(){r()},!0,null,t)})},function(){r()},!0,i)}catch(t){}},i.ia=function(t,i){try{if(1!==t.version)throw new Error("Mint version unsupported: V".concat(t.version||0));this.ea(t.vector,i)}catch(t){i(null,t)}},i.ea=function(i,n){var e=this;try{g.Partial.spawn_worker("ticket",function(t){t.postMessage({action:"mint",data:i})},function(t){n(t)},function(t){console.warn("[WARNING] Crisp could not execute its security mechanisms in a Web Worker, probably due to a restrictive CSP policy. Falling back to executing them in the Web page, which may block your UI during computation. Those security mechanisms help keep Crisp inboxes free of bots and spam. Please adjust your website CSP policy to fix this."),setTimeout(function(){e.ra(i,n)},0)},!0)}catch(t){}},i.ra=function(t,i){try{i((new class{mint(i,n){if("SHA-256"!==i.algorithm)throw new Error("Unsupported mint algorithm: "+i.algorithm);var t=(new Date).getTime();let e=i.problems?.total||1,r=i.problems?.required||1,s=0,o=Array(e).fill(null),c=Array(e).fill(0);for(var a=["H"+r,i.difficulty,i.expires_at,i.subject,i.nonce,i.algorithm].join(":");s<r;)for(let t=0;t<e;t++)if(null===o[t]){var h=this.sa(c[t]);if(null===h)throw new Error(`Formatted invalid solution string: ${c[t]} `+"on problem: #"+t);var u=a+":"+(t+1)+":"+h,u=n.update(u).digest();!0===this.oa(u,i.difficulty)?(o[t]=h,s++):c[t]+=1}let l="";for(let t=0;t<o.length;t++){var f=o[t];null!==f&&(0<l.length&&(l+=","),l+=t+1+">"+f)}var v=a+":"+l,d=(new Date).getTime();return{token:v,solutions:o,duration:d-t}}sa(t){let i=t.toString(16);i.length%2&&(i="0"+i);let n=[],e=0;for(var r;e<i.length;)r=parseInt(i.slice(e,e+2),16),r=String.fromCharCode(r),n.push(r),e+=2;return btoa(n.join(""))}oa(i,n){for(let t=0;0<n&&t<i.length;t+=1){if(!(8<n))return 0==i[t]>>8-n;if(n-=8,0!==i[t])return!1}return!1}}).mint(t,g.Library.crisp.client.sha256))}catch(t){i(null,t)}},i.Zc=function(){try{for(var t={},i=0;i<this.Gc.length;i++){var n=this.Gc[i];t[n]=g.Library.crisp.client.Storage.get_stamp_local(this.Hc,this.ca(n))}t.token&&t.expire&&t.session&&t.session===g.Broker.Zt&&(this.Kc.token=t.token,this.Kc.refresh_after=parseInt(t.expire,10))}catch(t){}},i.na=function(t,i){try{this.Kc.token=t.token,this.Kc.refresh_after=i.getTime()+Math.floor(t.duration*this.Vc);var n,e={token:this.Kc.token,expire:"".concat(this.Kc.refresh_after),session:g.Broker.Zt};for(n in e)g.Library.crisp.client.Storage.set_stamp_local(this.Hc,this.ca(n),e[n])}catch(t){}},i.ca=function(t){var i=[];try{i=[g.Base.aa,t]}catch(t){}finally{return i}},i.dt=function(){try{this.Kc={},this.Qc=[],this.Yc=!1}catch(t){}},t}());g.Ticket=w;var b=new(function(){function t(){try{this.ns="CrispBroker",this.ha=1,this.ua={chat:{country:null,locale:"en",theme:"default",theme_text:"default",theme_welcome:"default",tile:"default",allowed_pages:[],blocked_pages:[],blocked_locales:[],website_logo:!1,last_operator_face:!1,ongoing_operator_face:!0,activity_metrics:!0,operator_privacy:!1,visitor_privacy:!1,availability_tooltip:!1,hide_vacation:!1,hide_on_away:!1,hide_on_mobile:!1,position_reverse:!1,email_visitors:!0,phone_visitors:!1,force_identify:!1,ignore_privacy:!1,visitor_compose:!0,file_transfer:!0,audio_record:!0,overlay_search:!1,overlay_mode:!1,helpdesk_link:!0,helpdesk_only:!1,status_health_dead:!0,wait_game:!0},website:{name:"",domain:"",mailer:"",buster:1,count_operators:0,active_operators:[],response_metrics:{},last_available:g.Date.timestamp(),status:null,trial:!1},channels:{},plugins:{}},this.dt()}catch(t){}}var i=t.prototype;return i.init=function(t,i,n,e,r,s,o,c,a,h,u,l,f,v){var d=!(14<arguments.length&&void 0!==arguments[14])||arguments[14];try{g.Library.crisp.client.init({ticket_generator:function(t,i){g.Ticket.acquire(t,i)},environment:t,url_relay_client:i,url_relay_stream:n,url_go:e,website_domain:r,website_id:s,token_id:o,cookie_expire:c,cookie_domain:a,useragent:h,timezone:u,capabilities:l,locales:f,runtime_configuration:v,connect_socket:d,platform_name:"crisp-client@v2",platform_signature_key:"1k/2y/2u/2z/38/1e/3d/38/2y/23/1e/1y/29/34/1j/26"}),this.la=g.Library.crisp.client.event,g.Base.configure_console_sink(),this.fa(),this.va(),this.da(),this.ya(),this.pa(),this.ma(),this.wa(),this.ga(),this.ba(),this.ka(),this.xa(),this.Fa(),this.Ea(),this.Ca(),this.ja(),this.Aa(),this.$a(),this.Ia(),this.za(),this.Oa(),this.Sa(),this.Da(),this.Ra(),this.Na(),this.qa(),this.Ba(),this.Ma(),this.Ta(),this.Ua(),this.Pa(),this.La(),this.Ja(),this.Wa(),this.Va(),this.Ha(),this.Ga(),this.Ka(),this.Ya(),this.Za(),this.Xa(),this.Qa(),this.th(),this.ih(),this.nh(),this.eh(),this.rh(),this.sh(),this.oh(),this.ch(),this.ah(),this.hh(),this.uh(),this.lh(),this.fh(),this.vh(),this.dh(),this.yh(),this.ph(),this.mh()}catch(t){}},i.reset=function(){try{this.dt()}catch(t){}},i.fa=function(){var n=this;try{this.la.subscribe("socket:state",function(t,i){i.connected===n.wh&&i.failed_reconnect===n.gh||(n.wh=i.connected||!1,n.gh=i.failed_reconnect||!1,!0===g.Chat.xo?g.Chat.Interface.toggle_socket_state(n.wh,n.gh):g.Store.$store.minimized.pane.is_offline=!0!==n.wh,!0===n.wh&&g.Event.check_activity_autokill())})}catch(t){}},i.va=function(){var n=this;try{this.la.subscribe("session:created",function(t,i){i.error?"invalid_website_id"===i.error&&g.Base.run_error():i.session_id&&(n.bh=!0)})}catch(t){}},i.da=function(){var n=this;try{this.la.subscribe("session:joined",function(t,i){i.error?"invalid_session"===i.error&&++n._h<=n.ha&&g.Library.crisp.client.Session.reset(function(){g.Library.crisp.client.Session.create()},function(){}):(n.Zt=i.session_id||null,n.kh=i.session_hash||null,!1===i.socket&&!0!==i.initiated&&g.Base.update_socket_cookie_key(!0),!0===n.xh?(n.xh=!1,g.Base.acquire_website_settings(i,function(t,i,n){!0!==n&&(g.Base.spawn_client(t),g.Library.crisp.client.Website.get_users_available())})):!0===g.Chat.xo&&g.Chat.Message.synchronize())})}catch(t){}},i.ya=function(){var r=this;try{this.la.subscribe("session:state",function(t,i){if(1===r.Fh&&(r.Fh++,r.Eh=!0),!1===g.Chat.xo){function n(){g.Utility.next_render(function(){g.Base.trigger_session_loaded()})}if(null!==r.Ch.master){r.Ch.master(g.Utility.is_empty(i)?null:i);for(var e=0;e<r.Ch.actions.length;e++)r.Ch.actions[e]();r.Ch.master=null,r.Ch.actions=[],n()}else g.Utility.is_empty(i)?(g.Minimized.init(!0,r.bh),g.Library.crisp.client.Session.get_request_initiate(),n()):g.Chat.init(i,n)}else!0===g.Chat.xo&&g.Chat.State.receive(i);r.jh()})}catch(t){}},i.pa=function(){try{this.la.subscribe("session:error",function(t,i){"email:invalid_format"===i.type&&g.Chat.Alert.update("email_invalid","show")})}catch(t){}},i.ma=function(){try{this.la.subscribe("session:request:initiate",function(t,i){})}catch(t){}},i.wa=function(){try{this.la.subscribe("session:request:purge",function(t,i){g.Action.do_session_reset()})}catch(t){}},i.ga=function(){try{this.la.subscribe("session:request:feedback",function(t,i){g.Chat.Feedback.request()})}catch(t){}},i.ba=function(){try{this.la.subscribe("session:feedback:rate",function(t,i){})}catch(t){}},i.ka=function(){try{this.la.subscribe("session:feedback:rated",function(t,i){})}catch(t){}},i.xa=function(){var n=this;try{this.la.subscribe("website:users:available",function(t,i){g.Availability.receive(i.available,i.changed),0===n.Fh?(n.Fh++,g.Library.crisp.client.Session.get_state()):g.Availability.apply()})}catch(t){}},i.Fa=function(){var n=this;try{this.la.subscribe("message:received",function(t,i){n.ki(i)})}catch(t){}},i.Ea=function(){var n=this;try{this.la.subscribe("message:received:local",function(t,i){n.ki(i)})}catch(t){}},i.Ca=function(){try{this.la.subscribe("message:send",function(t,i){!0===g.Chat.xo&&g.Chat.Message.sent(i)})}catch(t){}},i.ja=function(){try{this.la.subscribe("message:sent",function(t,i){!0===g.Chat.xo&&g.Chat.Message.sent_acknowledgement(i),g.Action.event("message:sent",i)})}catch(t){}},i.Aa=function(){try{this.la.subscribe("message:removed",function(t,i){!0===g.Chat.xo&&g.Chat.Message.removed(i)})}catch(t){}},i.Ia=function(){try{this.la.subscribe("message:compose:send",function(t,i){g.Action.event("message:compose:sent",i)})}catch(t){}},i.za=function(){try{this.la.subscribe("message:acknowledge:pending",function(t,i){})}catch(t){}},i.Oa=function(){try{this.la.subscribe("message:acknowledge:read:send",function(t,i){g.Chat.Message.acknowledge_read_send(i)})}catch(t){}},i.Sa=function(){try{this.la.subscribe("message:acknowledge:read:received",function(t,i){})}catch(t){}},i.Da=function(){try{this.la.subscribe("message:error:rejected",function(t,i){g.Chat.Message.error_rejected(i.fingerprint,i.reason)})}catch(t){}},i.Ra=function(){try{this.la.subscribe("message:thread",function(t,i){})}catch(t){}},i.$a=function(){try{this.la.subscribe("message:compose:received",function(t,i){if(!0===g.Chat.xo&&!0!==g.Base.Us.chat.operator_privacy)switch(i.type){case"start":g.Chat.Message.show_compose(i.timestamp,i.automated);break;case"stop":g.Chat.Message.hide_compose()}g.Action.event("message:compose:received",i)})}catch(t){}},i.Na=function(){try{this.la.subscribe("history:messages",function(t,i){!0===g.Chat.xo&&g.Chat.Message.history(i)})}catch(t){}},i.qa=function(){var n=this;try{this.la.subscribe("overlay:answer:search",function(t,i){n.Ah.overlay_answer_search=i.id})}catch(t){}},i.Ba=function(){var n=this;try{this.la.subscribe("overlay:answer:search:partial",function(t,i){n.Ah.overlay_answer_search===i.id&&g.Overlay.handle_search_chunk(i.partial.chunk)})}catch(t){}},i.Ma=function(){var n=this;try{this.la.subscribe("overlay:answer:search:processed",function(t,i){n.Ah.overlay_answer_search===i.id&&g.Overlay.handle_search_answer(i.result.text,i.search.query)})}catch(t){}},i.Ta=function(){var n=this;try{this.la.subscribe("overlay:answer:search:sources",function(t,i){n.Ah.overlay_answer_search===i.id&&g.Overlay.handle_search_sources(i.result.sources)})}catch(t){}},i.Ua=function(){var n=this;try{this.la.subscribe("overlay:category:suggest",function(t,i){n.Ah.overlay_category_suggest=i.id})}catch(t){}},i.Pa=function(){var n=this;try{this.la.subscribe("overlay:category:suggest:sources",function(t,i){n.Ah.overlay_category_suggest===i.id&&g.Overlay.handle_search_sources(i.result.sources,!0)})}catch(t){}},i.La=function(){try{this.la.subscribe("call:request:initiate",function(t,i){g.Library.crisp.client.Call.init({ice:g.Base.$h,call_id:i.call_id,mode:i.mode,has_support:i.has_support},function(){g.Call.ring(i)},function(){})})}catch(t){}},i.Ja=function(){try{this.la.subscribe("call:action:stopped",function(t,i){g.Call.stop()})}catch(t){}},i.Wa=function(){try{this.la.subscribe("call:peer:local:error",function(t,i){g.Call.error()})}catch(t){}},i.Va=function(){try{this.la.subscribe("call:peer:remote:error",function(t,i){g.Call.error()})}catch(t){}},i.Ha=function(){try{this.la.subscribe("call:media:local:success",function(t,i){g.Call.success("media_local")})}catch(t){}},i.Ga=function(){try{this.la.subscribe("call:media:local:error",function(t,i){g.Call.error()})}catch(t){}},i.Ka=function(){try{this.la.subscribe("call:media:remote:success",function(t,i){g.Call.success("media_remote")})}catch(t){}},i.Ya=function(){try{this.la.subscribe("call:track:local:started",function(t,i){g.Call.toggle_media_status(i.media,!0)})}catch(t){}},i.Za=function(){try{this.la.subscribe("call:track:local:ended",function(t,i){g.Call.toggle_media_status(i.media,!1)})}catch(t){}},i.Xa=function(){var n=this;try{this.la.subscribe("browsing:request:initiate",function(t,i){n.Ih.push(function(){g.Browsing.prepare(i)}),n.jh()})}catch(t){}},i.Qa=function(){try{this.la.subscribe("browsing:assist:started",function(t,i){g.Browsing.Assist.start()})}catch(t){}},i.th=function(){try{this.la.subscribe("browsing:assist:stopped",function(t,i){g.Browsing.Assist.stop()})}catch(t){}},i.ih=function(){try{this.la.subscribe("browsing:assist:mouse",function(t,i){g.Browsing.Assist.pipe_mouse(i)})}catch(t){}},i.nh=function(){try{this.la.subscribe("browsing:assist:scroll",function(t,i){g.Browsing.Assist.pipe_scroll(i)})}catch(t){}},i.eh=function(){try{this.la.subscribe("browsing:assist:click",function(t,i){g.Browsing.Assist.pipe_click(i)})}catch(t){}},i.rh=function(){var n=this;try{this.la.subscribe("bucket:url:upload:generate",function(t,i){n.Ah.bucket_url_upload_generate=i.id})}catch(t){}},i.sh=function(){var r=this;try{this.la.subscribe("bucket:url:upload:generated",function(t,i){var n,e;r.Ah.bucket_url_upload_generate===i.id&&"preparing"===(g.Store.$store.chat.file.state||null)&&(n=(null===(e=i.url)||void 0===e?void 0:e.signed)||"",e=(null===(e=i.url)||void 0===e?void 0:e.resource)||"",i=(null===(i=i.policy)||void 0===i?void 0:i.size_limit)||0,g.Chat.File.upload_generated(n,e,i))})}catch(t){}},i.oh=function(){var n=this;try{this.la.subscribe("media:animation:list",function(t,i){n.Ah.media_animation_list=i.id})}catch(t){}},i.ch=function(){var n=this;try{this.la.subscribe("media:animation:listed",function(t,i){n.Ah.media_animation_list===i.id&&(g.Store.$store.chat.picker.gif.results=i.results)})}catch(t){}},i.ah=function(){var n=this;try{this.la.subscribe("helpdesk:article:search",function(t,i){n.Ah.helpdesk_article_search=i.id})}catch(t){}},i.hh=function(){var c=this;try{this.la.subscribe("helpdesk:article:searched",function(t,i){if(c.Ah.helpdesk_article_search===i.id){var n=!!i.search.query;g.Chat.Helpdesk.handle_articles(i.results,i.search,n);var e=g.Chat.Interface.generate_channel_link("helpdesk");if(e){for(var r,s=[],o=0;o<i.results.length;o++)r=i.results[o],s.push({title:r.title,url:"".concat(e).concat(r.locale,"/article/")+"".concat(r.slug,"/")});g.Action.event("helpdesk:queried",{query:i.search.query,results:s})}}})}catch(t){}},i.uh=function(){var n=this;try{this.la.subscribe("helpdesk:article:suggest",function(t,i){n.Ah.helpdesk_article_suggest=i.id})}catch(t){}},i.lh=function(){var n=this;try{this.la.subscribe("helpdesk:article:suggested",function(t,i){n.Ah.helpdesk_article_suggest===i.id&&g.Chat.Helpdesk.handle_autocomplete(i.results)})}catch(t){}},i.fh=function(){try{this.la.subscribe("helpdesk:article:report",function(t,i){})}catch(t){}},i.vh=function(){try{this.la.subscribe("storage:sync:update",function(t,i){})}catch(t){}},i.dh=function(){try{this.la.subscribe("storage:sync:updated",function(t,i){})}catch(t){}},i.yh=function(){try{this.la.subscribe("trigger:fired",function(t,i){})}catch(t){}},i.ph=function(){try{this.la.subscribe("issue:report",function(t,i){})}catch(t){}},i.mh=function(){try{this.la.subscribe("window:history",function(t,i){g.Base.zh=i.page_url,g.Base.Oh=i.page_domain;i=g.Base.process_blocked_states();null!==g.Base.Co&&(g.Store.$store.base.is_blocked=i,!0===g.Chat.xo&&!1===i&&g.Chat.Interface.request_dynamic_sizing_properties()),g.Trigger.reprocess_events_page()})}catch(t){}},i.ki=function(i){try{g.Chat.start_minimized(function(){var t="network"===i.origin&&!0;g.Chat.Message.received(i,t,t,!0,!1),g.Action.event("message:received",i)})}catch(t){}},i.jh=function(){try{if(!0===this.Eh)for(;0<this.Ih.length;)this.Ih.shift()()}catch(t){}},i.dt=function(){try{this.Zt=null,this.kh=null,this.wh=!0,this.Ah={},this.Ch={master:null,actions:[]},this.la=null,this.bh=!1,this.xh=!0,this.gh=!1,this.Fh=0,this.Eh=!1,this.Ih=[],this._h=0}catch(t){}},t}());g.Broker=b;var _=new(function(){function t(){try{this.ns="CrispAvailability",this.dt()}catch(t){}}var i=t.prototype;return i.init=function(){},i.reset=function(){try{this.dt()}catch(t){}},i.receive=function(){var t,i=0<arguments.length&&void 0!==arguments[0]&&arguments[0],n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];try{this.$o=i,!0===n&&(t=g.Date.timestamp(),g.Base.Us.website.last_available=t),g.Action.event("website:availability:changed",this.$o)}catch(t){}},i.apply=function(){try{var t=!0===this.$o?"online":"away";g.Store.$store.base.availability=t,!1===g.Store.$store.base.was_availability_online&&"online"==t&&(g.Store.$store.base.was_availability_online=!0)}catch(t){}},i.dt=function(){try{this.$o=!1}catch(t){}},t}());g.Availability=_;var k=new(function(){function t(){try{this.ns="CrispEvent",this.Sh=6e5,this.Dh=36e5,this.Rh={capture:!1},this.dt()}catch(t){}}var i=t.prototype;return i.init=function(){try{this.Nh()}catch(t){}},i.reset=function(){try{this.dt()}catch(t){}},i.trigger_interacted=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];try{this.jc=!0,this.qh(),!0===t&&this.Bh()}catch(t){}},i.check_activity_autokill=function(){try{null===this.Mh&&this.Th(),null===this.Uh&&this.Ph()}catch(t){}},i.Nh=function(){try{this.Lh(),this.Jh(),this.Wh()}catch(t){}},i.Lh=function(){try{g.Utility.add_event_listener(this.ns,"window","resize",function(){try{!0===g.Chat.xo?(g.Chat.Interface.refresh_resize_page_scroll(),g.Chat.Interface.request_dynamic_sizing_properties()):g.Base.apply_sizing()}catch(t){}})}catch(t){}},i.Jh=function(){try{this.qh(),g.Utility.add_event_listener(this.ns,"window","click",this.Vh.Jt(this),this.Rh),g.Utility.add_event_listener(this.ns,"window","touchend",this.Vh.Jt(this),this.Rh),g.Utility.add_event_listener(this.ns,"window","touchmove",this.Vh.Jt(this),this.Rh),g.Utility.add_event_listener(this.ns,"window","keydown",this.Vh.Jt(this),this.Rh),g.Utility.add_event_listener(this.ns,"window","mousemove",this.qh.Jt(this),this.Rh),g.Utility.add_event_listener(this.ns,"window","focus",this.qh.Jt(this),this.Rh),g.Utility.add_event_listener(this.ns,"window","blur",this.qh.Jt(this),this.Rh)}catch(t){}},i.Wh=function(){try{this.Bh()}catch(t){}},i.Vh=function(){try{this.trigger_interacted()}catch(t){}},i.qh=function(){var t=this;try{null!==this.Mh&&g.Utility.clear_timeout(this.Mh),this.Mh=g.Utility.set_timeout(function(){t.Mh=null,t.Th()},this.Sh),!0===this.Hh&&!1===this.Gh&&g.Library.crisp.client.socket.connect(),this.Hh=!1,g.Library.crisp.client.Session.mark_active()}catch(t){}},i.Th=function(){try{!0===g.Library.crisp.client.socket.connected&&(this.Hh=!0,g.Library.crisp.client.socket.disconnect())}catch(t){}},i.Bh=function(){var t=this;try{null!==this.Uh&&g.Utility.clear_timeout(this.Uh),this.Uh=g.Utility.set_timeout(function(){t.Uh=null,t.Ph()},this.Dh),!0===this.Gh&&g.Library.crisp.client.socket.connect(),this.Gh=!1}catch(t){}},i.Ph=function(){try{!0!==g.Library.crisp.client.socket.connected&&!0!==this.Hh||(this.Gh=!0)===g.Library.crisp.client.socket.connected&&g.Library.crisp.client.socket.disconnect()}catch(t){}},i.dt=function(){try{this.jc=!1,this.Hh=!1,this.Gh=!1,this.Mh=null,this.Uh=null}catch(t){}},t}());function x(t,i){(null==i||i>t.length)&&(i=t.length);for(var n=0,e=Array(i);n<i;n++)e[n]=t[n];return e}g.Event=k;var F=new(function(){function t(){try{this.ns="CrispTrigger",this.Xo=1e3,this.Kh=18e5,this.Yh="trigger",this.Zh="1",this.Xh=["page","url_parameter"],this.Qh={delay:this.tu,leave:this.iu,link:this.nu,page:this.eu,url_parameter:this.ru,user_data:this.su,user_event:this.ou},this.cu={message:this.au,open:this.hu,sound:this.uu},this.lu={page:this.fu,url_parameter:this.vu},this.dt()}catch(t){}}var i=t.prototype;return i.init=function(t){try{this.du=t,this.yu()}catch(t){}},i.reset=function(){try{this.dt()}catch(t){}},i.run=function(t){var i=!1;try{var n,e=null===(n=this.du)||void 0===n?void 0:n[t];!0===(null==e?void 0:e.enabled)&&(this.Mo(t,e),i=!0)}catch(t){}finally{return i}},i.do_event=function(t,i){try{for(var n=this.pu[t]||[],e=0;e<n.length;e++)n[e](i)}catch(t){}},i.mark_processed=function(t){try{-1===this.mu.indexOf(t)&&this.mu.push(t),g.Library.crisp.client.Storage.set_stamp_local(this.Yh,[g.Base.aa,"status",t],this.Zh)}catch(t){}},i.reprocess_events_page=function(){var t,i,n;try{for(n in this.du)if(!0===(t=this.du[n]).enabled&&(i=t.events))for(var e in i)"page"===e&&!0===i[e].enabled&&this.eu(n,t,i)}catch(t){}},i.yu=function(){try{var t,i,n,e,r,s=!1;for(r in this.du)if(!0===(t=this.du[r]).enabled&&(i=t.events))for(var o in i)!0===(n=i[o]).enabled&&"function"==typeof(e=this.Qh[o])&&(e.Jt(this)(r,t,i,n.settings||{}),s=!0);!0===s&&this.wu()}catch(t){}},i.Mo=function(r,s){var t,o=this;try{!0===this.gu(s)&&!1===this.bu(r)&&((t=g.Utility.clone(this.mu)).push(r),this._u(function(){g.Chat.State.propagate("trigger",t,!1,function(t){var i,n,e;if(!0===t&&!0===o.gu(s)&&s.actions)for(e in s.actions)!0===(i=s.actions[e]).enabled&&"function"==typeof(n=o.cu[e])&&(n.Jt(o)(r,s,i.settings||{}),g.Library.crisp.client.Trigger.fired(r,s.name))})}))}catch(t){}},i._u=function(t){var i=this;try{g.Base.ensure_socket(function(){!0!==i.ku?(i.ku=!0,g.Chat.start_minimized(t)):t()})}catch(t){}},i.gu=function(t){var i=!1;try{if(i=!1===g.Base.is_invisible(),!0===this.xu(t,"if_website_online")&&(i=!0===g.Action.is_website_available()&&i),!0===this.xu(t,"if_first_visit")&&(i="1"===g.Library.crisp.client.Storage.get_stamp_local(this.Yh,this.Fu("count"))&&i),!0===this.xu(t,"if_trigger_sole")&&(i=!0!==g.Chat.Message.Eu&&i),!0===this.xu(t,"if_countries")){var n,e=!1,r=null===(n=t.behaviors.if_countries)||void 0===n?void 0:n.settings;if(r)for(var s in r)s===g.Base.Us.chat.country&&(e=!0);i=!0===e&&i}!1===g.Base.is_mobile_view()&&!1===this.Cu(t,"desktop")&&(i=!1),!0===g.Base.is_mobile_view()&&!1===this.Cu(t,"mobile")&&(i=!1)}catch(t){}finally{return i}},i.ju=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=100;try{!0===t&&i.after&&0<i.after&&(n=i.after*this.Xo)}catch(t){}finally{return n}},i.tu=function(t,i,n,e){try{if(e.after&&0<e.after){var r,s=!1;for(r in n)if("delay"!==r&&!0===n[r].enabled){s=!0;break}!1===s&&this.Au(t,i,{enabled:!0,settings:e})}}catch(t){}},i.iu=function(i,n,e){var r=this;try{for(var t=!0,s=0;s<this.Xh.length;s++){var o,c=this.Xh[s];if(!0===(null===(o=e[c])||void 0===o?void 0:o.enabled)&&!1===(t=this.lu[c].Jt(this)(e)))break}!0===t&&(g.Utility.remove_event_listener(this.ns,"window","mouseout"),g.Utility.add_event_listener(this.ns,"window","mouseout",function(t){try{!0===r.$u&&!t.relatedTarget&&!t.toElement&&t.clientY<=r.Iu&&(r.$u=!1,null===r.zu&&(r.zu=r.Au(i,n,e.delay)))}catch(t){}}),g.Utility.remove_event_listener(this.ns,"window","mouseover"),g.Utility.add_event_listener(this.ns,"window","mouseover",function(){try{!0!==r.$u&&(r.$u=!0,null!==r.zu&&(g.Utility.clear_timeout(r.zu),r.zu=null))}catch(t){}}))}catch(t){}},i.nu=function(o,c,a,h){var t,u=this;try{0<(null===(t=h.ids)||void 0===t?void 0:t.length)&&g.Utility.add_event_listener(this.ns,"document","click",function(t){try{if(null!=t&&t.target&&"a"===(t.target.nodeName||"").toLowerCase())for(var i=0;i<h.ids.length;i++){var n=document.getElementById(h.ids[i]),e="function"==typeof document.querySelectorAll?document.querySelectorAll(h.ids[i]):null,r=!1;if(0<(null==e?void 0:e.length))for(var s=0;s<e.length;s++)if(e[s]===t.target){r=!0;break}if(n===t.target||!0===r){u.Au(o,c,a.delay);break}}}catch(t){}})}catch(t){}},i.eu=function(t,i,n){var e;try{!0!==(null===(e=n.leave)||void 0===e?void 0:e.enabled)&&!0===this.fu(n)&&this.Au(t,i,n.delay)}catch(t){}},i.ru=function(t,i,n){var e;try{!0!==(null===(e=n.leave)||void 0===e?void 0:e.enabled)&&!0===this.vu(n)&&this.Au(t,i,n.delay)}catch(t){}},i.su=function(n,e,r,s){var o=this;try{s.points&&0<g.Utility.keys(s.points).length&&this.Ou("user_data",function(t){var i="".concat(t.value);t.key&&i&&"".concat(s.points[t.key])===i&&o.Au(n,e,r.delay)})}catch(t){}},i.ou=function(i,n,e,r){var t,s=this;try{0<(null===(t=r.texts)||void 0===t?void 0:t.length)&&this.Ou("user_event",function(t){-1!==r.texts.indexOf(t.text)&&s.Au(i,n,e.delay)})}catch(t){}},i.au=function(t,i,n){var e,r,s;try{!n||(e=(n[g.Locale.code()]||n.default||"").trim())&&(r=g.Utility.to_hashcode("trigger/".concat(t)),!(s=!1)===this.xu(i,"show_as_website")&&(s=!0),g.Action.do_message_show("text",e,r,s))}catch(t){}},i.hu=function(t,i){try{g.Action.do_chat_open()}catch(t){}},i.uu=function(t,i){try{g.Sound.start("events","chat-message-receive")}catch(t){}},i.fu=function(t){var i=!1;try{var n,e,r=null===(n=t.page)||void 0===n?void 0:n.settings;0<(null==r||null===(e=r.urls)||void 0===e?void 0:e.length)&&(i=g.Utility.compare_page_rules(g.Base.zh,r.urls))}catch(t){}finally{return i}},i.vu=function(t){var i,n=!1;try{var e,r=(null===(e=t.url_parameter)||void 0===e?void 0:e.settings)||{},s=r.parameters||{};if(0<g.Utility.keys(s).length){for(var o,c=document.location.search||"",a=c.slice(c.indexOf("?")+1).split("&"),h={},u=0;u<a.length;u++){var l=(i=a[u].split("="),function(t){if(Array.isArray(t))return t}(i)||function(t,i){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var e,r,s,o,c=[],a=!0,h=!1;try{for(s=(n=n.call(t)).next,0;!(a=(e=s.call(n)).done)&&(c.push(e.value),2!==c.length);a=!0);}catch(t){h=!0,r=t}finally{try{if(!a&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(h)throw r}}return c}}(i)||function(t,i){if(t){if("string"==typeof t)return x(t,2);var n={}.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(t,2):void 0}}(i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=l[0],v=l[1];f&&(h[f.toLowerCase()]=decodeURIComponent(v||"").toLowerCase())}for(o in r.parameters){var d=o.toLowerCase(),y=r.parameters[d].toLowerCase()+"";if(h[d]===y){n=!0;break}}}}catch(t){}finally{return n}},i.Au=function(t,i){var n=this,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=null;try{r=g.Utility.set_timeout(function(){n.Mo(t,i)},this.ju(null==e?void 0:e.enabled,null==e?void 0:e.settings))}catch(t){}finally{return r}},i.Ou=function(t,i){try{this.pu[t]=this.pu[t]||[],this.pu[t].push(i)}catch(t){}},i.xu=function(t,i){var n,e=!1;try{!0===(null===(n=t.behaviors)||void 0===n||null===(n=n[i])||void 0===n?void 0:n.enabled)&&(e=!0)}catch(t){}finally{return e}},i.bu=function(t){var i=!1;try{1!=(i=-1!==this.mu.indexOf(t)&&!0)&&(i=g.Library.crisp.client.Storage.get_stamp_local(this.Yh,[g.Base.aa,"status",t])===this.Zh&&!0)}catch(t){}finally{return i}},i.Cu=function(t,i){var n,e=!0;try{!1===(null===(n=t.platforms)||void 0===n||null===(n=n[i])||void 0===n?void 0:n.enabled)&&(e=!1)}catch(t){}finally{return e}},i.wu=function(){try{var t=this.Fu("last"),i=this.Fu("count"),n=parseInt(g.Library.crisp.client.Storage.get_stamp_local(this.Yh,t)||"0",10),e=parseInt(g.Library.crisp.client.Storage.get_stamp_local(this.Yh,i)||"0",10),r=g.Date.timestamp();(isNaN(n)||isNaN(e)||e<=0||r-n>=this.Kh)&&(e+=1,n=r,g.Library.crisp.client.Storage.set_stamp_local(this.Yh,i,"".concat(e))),g.Library.crisp.client.Storage.set_stamp_local(this.Yh,t,"".concat(r))}catch(t){}},i.Fu=function(t){var i=[];try{i=[g.Base.aa,"visit",t]}catch(t){}finally{return i}},i.dt=function(){try{this.mu=[],this.du=null,this.ku=!1,this.$u=!1,this.zu=null,this.Iu=10,this.pu={}}catch(t){}},t}());g.Trigger=F;var E=new(function(){function t(){try{this.ns="CrispBase",this.Fs="71d3864",this.Su=600,this.Du=480,this.Ru=720,this.Nu=540,this.qu=840,this.Bu=640,this.Mu=6e5,this.Tu=6e5,this.Uu=1728e5,this.Pu=1e3,this.Lu=1e4,this.Ju=3,this.Wu=/_/g,this.Vu={socket:!0,buster:1},this.Hu={other:{container_index:1e6}},this.Gu={childList:!0,attributes:!1,subtree:!1,characterData:!1},this.Ku=/^(?:https?:[\/]*)?([^\/]+)(?:\/.*)?$/i,this.Yu(),this.dt()}catch(t){}}var i=t.prototype;return i.init=function(){var i=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};try{!1===this.xo&&(this.xo=!0,this.Es=t.dollar_crisp||null,this.Zu=t.project_name||null,this.Xu=t.url_relay_client||null,this.Qu=t.url_relay_stream||null,this.tl=t.url_website||null,this.il=t.url_go||null,this.Ms=t.url_image||null,this.nl=t.url_game||null,this.ks=t.url_assets||null,this.$h=t.rtc_ice||null,this.rl=t.socket_affinity||null,this.sl=t.client_environment||null,this.Ts=t.website_domain||null,this.aa=t.website_id||null,this.ol=t.token_id||null,this.cl=t.cookie_expire||null,this.al=t.cookie_domain||null,this.zh=t.page_url||null,this.Oh=t.page_domain||null,this.hl=t.browser_useragent||null,this.ul=t.browser_timezone||null,this.ll=t.browser_capabilities||null,this.Rc=t.browser_locales||null,this.fl=t.path_javascripts||null,this.xs=t.path_stylesheets||null,this.vl=t.ready_trigger||null,this.dl=t.reset_handler||null,this._s=t.include_mode||null,this.yl=t.runtime_configuration||{},g.Compatibility.schedule_warn_incompatible(!1),this.pl(function(t){i.ml=t.socket,i.wl=t.buster||1,i.gl=t.endpoints||{};t=-1===document.cookie.indexOf(i.bl(!0))&&!1!==i.ml&&!0;!0===(t=!1===t&&!0===i.yl.lock_maximized||t)?i._l():i.kl(),g.Event.init()},function(t){"invalid_website_id"===t&&i.run_error()}))}catch(t){}},i.reset=function(){try{var t=this.dl;g.Utility.reset_instance_children(g,this),this.dt(),this.Yu(),this.dl=t}catch(t){}},i.spawn_client=function(t){var i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];try{this.xl(),this.Us=t,g.Library.crisp.web.init({template:g.Template,config:{url:{crisp_image:this.Ms},runtime:this.yl}}),!0!==i&&(g.Library.crisp.client.Config.set_ignore_privacy(this.Us.chat.ignore_privacy),g.Library.crisp.client.Config.set_visitor_compose(this.Us.chat.visitor_compose)),g.Trigger.init(g.Plugin.get_triggers()),this.so(),this.Fl=g.Template.dom(g.Template.render("client",{lang:g.Locale.code(),direction:g.Locale.direction()})),this.El=this.Fl.querySelector(".cc-rukbw"),this.Co=this.Fl.querySelector(".cc-1brb6"),this.insert_style(),this.Cl()}catch(t){}},i.run_error=function(){var t=this;try{g.Locale.load(g.Broker.ua.chat.locale,function(){t.spawn_client(g.Broker.ua,!0),g.Minimized.init(!0,!1,!0)})}catch(t){}},i.apply_sizing=function(){try{g.Store.$store.base.is_mobile_view=this.is_mobile_view(),g.Store.$store.base.is_full_view=this.is_full_view(),g.Store.$store.base.is_small_view=this.is_small_view(),g.Store.$store.base.is_large_view=this.is_large_view()}catch(t){}},i.is_mobile_view=function(){var t=!1;try{!0===g.Base.is_full_view()&&!0===g.Feature.has_screen_touch()&&(t=!0)}catch(t){}finally{return t}},i.is_full_view=function(){var t=!1;try{!0===this.yl.lock_full_view&&(t=!0),(window.innerHeight<this.Su||window.innerWidth<this.Du)&&(t=!0)}catch(t){}finally{return t}},i.is_small_view=function(){var t=!1;try{(window.innerHeight<this.Ru||window.innerWidth<this.Nu)&&(t=!0)}catch(t){}finally{return t}},i.is_large_view=function(){var t=!1;try{window.innerHeight>=this.qu&&window.innerWidth>=this.Bu&&(t=!0)}catch(t){}finally{return t}},i.is_invisible=function(){var t=!1;try{!0===this.yl.lock_maximized||!0===g.Chat.Message.Eu&&!0!==this.is_activity_outdated()||(!0===this.is_blocked()&&(t=!0),!0===this.Us.chat.hide_vacation&&(t=!0),!0===this.Us.chat.hide_on_away&&!0!==g.Store.$store.base.was_availability_online&&!0!==g.Availability.$o&&(t=!0),!0===this.Us.chat.hide_on_mobile&&!0===this.is_mobile_view()&&(t=!0))}catch(t){}finally{return t}},i.is_blocked=function(){var t=!1;try{t=(!0===this.jl||!0===this.Al)&&!0}catch(t){}finally{return t}},i.is_activity_outdated=function(){var t=!1;try{0<g.Chat.Message.$l&&g.Date.timestamp()-g.Chat.Message.$l>=this.Mu&&(t=!0)}catch(t){}finally{return t}},i.process_blocked_states=function(){var t=!1;try{var i=g.Locale.code();this.jl=!(!(0<this.Us.chat.allowed_pages.length)||g.Utility.compare_page_rules(this.zh,this.Us.chat.allowed_pages))||g.Utility.compare_page_rules(this.zh,this.Us.chat.blocked_pages)&&!0,this.Al=-1!==this.Us.chat.blocked_locales.indexOf(i),t=this.is_blocked()||!1}catch(t){}finally{return t}},i.trigger_session_loaded=function(){try{if("function"==typeof this.vl)try{this.vl(),this.vl=null}catch{}g.Action.unstack_pending(),!0===g.Chat.xo&&g.Chat.Interface.apply_chat_focus(),g.Action.event("session:loaded",g.Broker.Zt),g.Compatibility.schedule_warn_incompatible(!0)}catch(t){}},i.update_socket_cookie_key=function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];try{var n=this.bl(t),e=!0===i?new Date(0):new Date((new Date).getTime()+(!0===t?this.Tu:this.Uu));document.cookie="".concat(n,"; expires=").concat(e.toUTCString(),"; path=/; ")+"samesite=lax;"}catch(t){}},i.update_configuration=function(t){var i,n,e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];try{typeof(null===(i=this.Us.chat)||void 0===i?void 0:i[t])==typeof e&&(this.Us.chat[t]=e,null!==this.Co&&(n=t.replace(this.Wu,"-"),this.Co.setAttribute("data-".concat(n),!0===e?"true":"false")))}catch(t){}},i.insert_style=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};try{var i,n=this.Il;for(i in t)if(t.hasOwnProperty(i)){n[i]=n[i]||{};var e=t[i];if(null!==e)for(var r in e)e.hasOwnProperty(r)&&(n[i][r]=e[r])}this.El.innerHTML="",this.El.appendChild(g.Template.dom(g.Template.render("style_color",{colors:g.Theme.colors(n.color.theme||this.Us.chat.theme,!!n.color.theme)}))),this.El.appendChild(g.Template.dom(g.Template.render("style_other",{container_index:("number"==typeof n.other.container_index?n:this.Hu).other.container_index})));var s=g.Plugin.get_customization("position","chatbox");g.Utility.is_empty(s)||this.El.appendChild(g.Template.dom(g.Template.render("style_position",{position:s})))}catch(t){}},i.acquire_website_settings=function(r,s){var o=this,t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;try{g.Partial.load_dependency("website","settings",["".concat(this.ks,"/settings/website/"),"".concat(encodeURIComponent(this.aa),"/")].join(""),function(t){var i,n=!(t&&!t.error);(t=t||{}).settings=t.settings||{};var e={website:{name:t.website||"",domain:g.Utility.extract(o.Ku,t.domain,o.Ts,1),mailer:t.mailer||"",buster:r.buster||1,count_operators:r.count_operators||0,active_operators:r.active_operators||t.operators||[],response_metrics:r.response_metrics||{},last_available:r.last_available||g.Date.timestamp(),status:r.status||null,trial:t.trial||!1},channels:t.channels||{},overlay:t.overlay||{},plugins:t.plugins||{},chat:{country:g.Utility.get_or_fallback(null===(i=r.context)||void 0===i?void 0:i.country,null),locale:g.Locale.detect(t.settings.locale?[t.settings.locale]:[]),theme:g.Utility.get_or_fallback(t.settings.color_theme,"default"),allowed_pages:g.Utility.get_or_fallback(t.settings.allowed_pages,[]),blocked_pages:g.Utility.get_or_fallback(t.settings.blocked_pages,[]),blocked_locales:g.Utility.get_or_fallback(t.settings.blocked_locales,[]),tile:g.Utility.get_or_fallback(t.settings.tile,"default","string"),website_logo:g.Utility.get_or_fallback(t.settings.website_logo,!1,"boolean"),last_operator_face:g.Utility.get_or_fallback(t.settings.last_operator_face,!1,"boolean"),ongoing_operator_face:g.Utility.get_or_fallback(t.settings.ongoing_operator_face,!0,"boolean"),activity_metrics:g.Utility.get_or_fallback(t.settings.activity_metrics,!0,"boolean"),operator_privacy:g.Utility.get_or_fallback(t.settings.operator_privacy,!1,"boolean"),visitor_privacy:g.Utility.get_or_fallback(t.settings.visitor_privacy,!1,"boolean"),availability_tooltip:g.Utility.get_or_fallback(t.settings.availability_tooltip,!0,"boolean"),hide_vacation:g.Utility.get_or_fallback(t.settings.hide_vacation,!1,"boolean"),hide_on_away:g.Utility.get_or_fallback(t.settings.hide_on_away,!1,"boolean"),hide_on_mobile:g.Utility.get_or_fallback(t.settings.hide_on_mobile,!1,"boolean"),position_reverse:g.Utility.get_or_fallback(t.settings.position_reverse,!1,"boolean"),email_visitors:g.Utility.get_or_fallback(t.settings.email_visitors,!0,"boolean"),phone_visitors:g.Utility.get_or_fallback(t.settings.phone_visitors,!0,"boolean"),force_identify:g.Utility.get_or_fallback(t.settings.force_identify,!1,"boolean"),ignore_privacy:g.Utility.get_or_fallback(t.settings.ignore_privacy,!1,"boolean"),visitor_compose:g.Utility.get_or_fallback(t.settings.visitor_compose,!0,"boolean"),file_transfer:g.Utility.get_or_fallback(t.settings.file_transfer,!0,"boolean"),audio_record:g.Utility.get_or_fallback(t.settings.audio_record,!0,"boolean"),overlay_search:null!==t.overlay?g.Utility.get_or_fallback(t.settings.overlay_search,!1,"boolean"):null,overlay_mode:g.Utility.get_or_fallback(t.settings.overlay_mode,!1,"boolean"),helpdesk_link:g.Utility.get_or_fallback(t.settings.helpdesk_link,!0,"boolean"),helpdesk_only:g.Utility.get_or_fallback(t.settings.helpdesk_only,!1,"boolean"),status_health_dead:g.Utility.get_or_fallback(t.settings.status_health_dead,!0,"boolean"),wait_game:g.Utility.get_or_fallback(t.settings.wait_game,!1,"boolean"),theme_text:g.Utility.get_or_fallback(t.settings.text_theme,"default"),theme_welcome:g.Utility.get_or_fallback(t.settings.welcome_message,"default")}};g.Locale.load(e.chat.locale,function(){s(e,t,n)})},null,!0,t||r.buster)}catch(t){}},i.ensure_socket=function(t){var i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];!0===g.Library.crisp.client.socket.connected?t():!1!==this.ml&&(g.Broker.Ch.actions.push(t),null===g.Broker.Ch.master&&(g.Broker.Ch.master=function(){!0===i&&g.Minimized.init(!0,!1,!1,!1)}),g.Library.crisp.client.socket.connect())},i.configure_console_sink=function(){var r=this;try{"production"===this.sl&&(g.Library.crisp.client.Issue.configure({project:this.Zu,revision:this.Fs,environment:this.sl,useragent:this.hl,page:this.zh}),g.Library.logger.set_log_sink(function(t,i,n){var e;"error"===t&&("object"==typeof(null===(e=r.Es)||void 0===e?void 0:e.__spool)&&(r.Es.__spool.error_last={ns:i,value:n}),(e=g.Date.timestamp())-r.zl>=r.Lu&&(r.zl=e,g.Library.crisp.client.Issue.report(t,i,n)))}))}catch(t){}},i.uninsert_client=function(){try{"MutationObserver"in window&&(this.Ol("html"),this.Ol("body")),g.Library.crisp.client.socket.disconnect(),this.xl()}catch(t){}},i.re_trigger_loader=function(){try{"function"==typeof this.dl&&this.dl()}catch(t){}},i.pl=function(n,e){var r=this;try{var t=new Date,i="".concat(t.getFullYear(),"-").concat(t.getMonth(),"-").concat(t.getDate(),"-")+"".concat(t.getHours(),"-").concat(t.getMinutes());g.Partial.load_dependency("website","prelude",["".concat(this.ks,"/settings/website/"),"".concat(encodeURIComponent(this.aa),"/prelude/")].join(""),function(t){var i=null!=t&&t.error?t.error:null;i?e(i):n(t||r.Vu)},null,!0,i)}catch(t){}},i.Cl=function(){try{this.Sl(),"MutationObserver"in window&&(this.Dl(document.documentElement),this.Rl(document.body))}catch(t){}},i.Sl=function(){try{var t=document.querySelector("body");t&&t.appendChild(this.Fl),g.Template.vue(this.Fl)}catch(t){}},i.xl=function(){try{null!==this.Fl&&(this.Fl.remove(),this.Fl=null)}catch(t){}},i._l=function(){try{this.Nl(!0)}catch(t){}},i.kl=function(){var e=this;try{this.Nl(!1),this.acquire_website_settings({},function(t,i,n){!0!==n&&g.Availability.receive(i.online||!1,!1),e.spawn_client(t),g.Minimized.init(!1,!1,n),g.Utility.next_render(function(){e.trigger_session_loaded()})},this.wl)}catch(t){}},i.Nl=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];try{var i=this.gl.socket||{},n=(!0===this.rl?i.client:null)||this.Xu,e=(!0===this.rl?i.stream:null)||this.Qu;g.Broker.init(this.sl,n,e,this.il,this.Ts,this.aa,this.ol,this.cl,this.al,this.hl,this.ul,this.ll,this.Rc,this.yl,t)}catch(t){}},i.Dl=function(t){var s=this;try{this.Ol("html"),this.ql.html=new window.MutationObserver(function(t){for(var i=0;i<((null==t?void 0:t.length)||0);i++){var n=t[i];if("childList"===n.type&&n.addedNodes)for(var e=0;e<n.addedNodes.length;e++){var r=n.addedNodes[e];if("body"===(r.tagName||"").toLowerCase()){s.Rl(r),s.Bl();break}}}}),this.ql.html.observe(t,this.Gu)}catch(t){}},i.Rl=function(t){var r=this;try{this.Ol("body"),this.ql.body=new window.MutationObserver(function(t){for(var i=0;i<((null==t?void 0:t.length)||0);i++){var n=t[i];if("childList"===n.type&&n.removedNodes)for(var e=0;e<n.removedNodes.length;e++)if(n.removedNodes[e]===r.Fl){r.Bl();break}}}),this.ql.body.observe(t,this.Gu)}catch(t){}},i.Ol=function(t){try{var i=this.ql[t];void 0!==i&&(i.disconnect(),delete this.ql[t])}catch(t){}},i.Bl=function(){var t=this;try{null===this.Ml&&(this.Ml=g.Utility.set_timeout(function(){t.Ml=null,t.Sl()},this.Pu))}catch(t){}},i.bl=function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],i=null;try{i="".concat(encodeURIComponent("crisp-client/socket/"+this.aa),"=")+"".concat(encodeURIComponent(!0===t?"0":"1"))}catch(t){}finally{return i}},i.so=function(){try{var t={configuration:this.Us||{},runtime:this.yl||{},environment:{smileys:{"small-smile":":)","big-smile":":D",blushing:":$",confused:"x)",cool:"8)",crying:":'(",embarrassed:":/",heart:"<3",laughing:":'D",sad:":(",angry:":@",sick:":S","thumbs-up":"[+1]",surprised:":o",tongue:":P",winking:";)"},url:{crisp_web:this.tl,crisp_image:this.Ms,crisp_game:this.nl},types:{file_preview:g.Magnify.Tl}},website:{id:g.Base.aa,domain:g.Base.Us.website.domain,name:g.Base.Us.website.name},is_blocked:this.process_blocked_states(),is_mobile_view:this.is_mobile_view(),is_full_view:this.is_full_view(),is_small_view:this.is_small_view(),is_large_view:this.is_large_view()};g.Utility.merge(g.Store.$store.base,t),this.Ul(),this.Pl()}catch(t){}},i.Yu=function(){try{this.Fl=null,this.El=null,this.Co=null}catch(t){}},i.Ul=function(){try{var t=[],i=g.Store.$store.base.configuration.website.active_operators;if(0<i.length)for(var n=0;n<i.length;n++)n<this.Ju&&t.push({type:"operator",identifier:i[n].user_id,avatar:i[n].avatar,name:g.Library.crisp.web.Name.parse_first_name(i[n].nickname)});t.push({type:"website",identifier:this.aa}),g.Store.$store.base.active_operators=t}catch(t){}},i.Pl=function(){try{var t,i=0,n=g.Store.$store.base.configuration,e=(null===(t=n.website.active_operators)||void 0===t?void 0:t.length)||0;n.website.count_operators>e&&(i=n.website.count_operators-e),g.Store.$store.base.other_operators_count=i}catch(t){}},i.dt=function(){try{this.xo=!1,this.Us={},this.Es=null,this.Zu=null,this.Xu=null,this.Qu=null,this.tl=null,this.il=null,this.Ms=null,this.nl=null,this.ks=null,this.$h=null,this.rl=null,this.sl=null,this.Ts=null,this.aa=null,this.ol=null,this.cl=null,this.al=null,this.zh=null,this.Oh=null,this.hl=null,this.ul=null,this.ll=null,this.Rc=null,this.wl=1,this.ml=!0,this.gl={},this.jl=!1,this.Al=!1,this.fl=null,this.xs=null,this.vl=null,this.dl=null,this._s=null,this.yl={},this.zl=0,this.Ml=null,this.Il={color:{},other:{}},this.ql={}}catch(t){}},t}());g.Base=E;var C=new(function(){function t(){try{this.ns="CrispMinimized",this.Event=void 0,this.Interface=void 0,this.dt()}catch(t){}}var i=t.prototype;return i.init=function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],i=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],e=!(3<arguments.length&&void 0!==arguments[3])||arguments[3];try{this.Ll(n),this.Jl(i,n,t,e),this.xo=!0}catch(t){}},i.reset=function(){try{g.Utility.reset_instance_children(g.Minimized),this.dt()}catch(t){}},i.Ll=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];try{for(var i=[g.Minimized.Interface,g.Minimized.Event],n=0;n<i.length;n++)i[n].init(t)}catch(t){}},i.Jl=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],i=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],e=!(3<arguments.length&&void 0!==arguments[3])||arguments[3];try{!0!==i?g.Minimized.Interface.pane_authorized(t,n,e):g.Minimized.Interface.pane_unauthorized(t,e),!0===g.Base.yl.lock_maximized&&g.Minimized.Interface.Fo(function(t){g.Chat.init(t)})}catch(t){}},i.dt=function(){try{this.xo=!1}catch(t){}},t}());g.Minimized=C;var j=new(function(){function t(){try{this.ns="CrispMinimizedEvent",this.bt=["pane_click"]}catch(t){}}var i=t.prototype;return i.init=function(){},i.pane_click=function(t){try{var i=t.target;if(i){var n,e=i.getAttribute("data-pop");if(e||(n=i.closest("[data-pop]"))&&(e=n.getAttribute("data-pop")||null),!0===(null==i?void 0:i.classList.contains("cc-1x4xm")))g.Minimized.Interface.conceal_general_entice();else switch(e){case"overlay:open":g.Minimized.Interface.Fo(function(){g.Overlay.open()});break;case"helpdesk:search":g.Action.do_helpdesk_search();break;case"minimized:open":g.Minimized.Interface.Fo(function(t){g.Chat.init(t)})}}}catch(t){}},i.bind_all=function(){try{g.Store.bind_events("minimized",this.bt,this)}catch(t){}},t}());g.Minimized.Event=j;var A=new(function(){function t(){try{this.ns="CrispMinimizedInterface",this.Xo=1e3,this.Wl=.25,this.Vl=2,this.Hl=1e3,this.Gl=500,this.Kl=12e3,this.Yl="minimized",this.Zl="1",this.dt()}catch(t){}}var i=t.prototype;return i.init=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];try{this.Jl(t)}catch(t){}},i.reset=function(){try{this.dt()}catch(t){}},i.pane_authorized=function(){var t=this,i=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];try{var r=!1,s=!1;!0===g.Base.Us.chat.availability_tooltip&&(g.Store.$store.minimized.pane.general_entice.is_concealed=g.Library.crisp.client.Storage.get_stamp_local(this.Yl,[g.Base.aa,"general_entice","conceal"])===this.Zl&&!0),!0===g.Base.Us.chat.helpdesk_link&&g.Base.Us.channels.helpdesk&&g.Base.Oh!==g.Base.Us.channels.helpdesk&&!0===g.Library.crisp.client.socket.connected&&(g.Store.$store.minimized.pane.helpdesk.url=g.Chat.Interface.generate_channel_link("helpdesk"),g.Store.$store.minimized.pane.helpdesk.only=g.Base.Us.chat.helpdesk_only&&!0),this.Xl("minimized_authorized",!0,i,n),this.Fo=function(i){var n;!1===r&&(s=!(r=!0)===e&&!0!==s?(t.Ql(!0),g.Event.trigger_interacted(!0),n=g.Utility.set_timeout(function(){g.Broker.Zt||(alert(g.Locale.text("chat","minimized_connect_alert_failure")),g.Library.crisp.client.socket.disconnect(),t.Ql(!1),g.Action.do_chat_hide())},t.Kl),g.Broker.Ch.master=function(t){g.Utility.clear_timeout(n),i(t),r=!1},g.Library.crisp.client.socket.connect(),!0):(i(),!(r=!1)))},g.Availability.apply()}catch(t){}},i.pane_unauthorized=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];try{this.Xl("minimized_unauthorized",!1,t,i),this.Fo=function(){}}catch(t){}},i.display_general_entice=function(){try{g.Store.$store.minimized.pane.general_entice.visible=!0}catch(t){}},i.conceal_general_entice=function(){try{g.Store.$store.minimized.pane.general_entice.is_concealed=!0,g.Library.crisp.client.Storage.set_stamp_local(this.Yl,[g.Base.aa,"general_entice","conceal"],this.Zl)}catch(t){}},i.Xl=function(t){var n=this,i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],e=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=!(3<arguments.length&&void 0!==arguments[3])||arguments[3];try{g.Minimized.Event.bind_all();var s,o,c=g.Template.dom(g.Template.render(t));g.Base.Co.innerHTML="",g.Base.Co.appendChild(c),g.Template.vue(c),!0===i&&(s=g.Base.Us,o=!0!==g.Base.is_full_view()&&!0===s.chat.availability_tooltip,!0===r&&g.Feature.has_css_animations()?(!0===e&&(g.Store.$store.minimized.pane.animate_entrance=!0,g.Utility.set_timeout(function(){g.Store.$store.minimized.pane.animate_entrance=!1},this.Hl)),o&&g.Utility.set_timeout(function(){var t=g.Store.$store.minimized.pane;n.display_general_entice();var i=!0===e?"animate_full":"animate_short";t.general_entice[i]=!0,g.Utility.set_timeout(function(){t.general_entice[i]=!1},n.Gl)},this.Xo*(!0===e?this.Vl:this.Wl))):o&&this.display_general_entice())}catch(t){}},i.Ql=function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];try{g.Store.$store.minimized.pane.is_waiting=t}catch(t){}},i.Jl=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];try{!0!==t&&g.Library.crisp.client.Message.get_message_history()}catch(t){}},i.dt=function(){try{this.Fo=function(){}}catch(t){}},t}());g.Minimized.Interface=A;var $=new(function(){function t(){try{this.ns="CrispChat",this.Alert=void 0,this.Event=void 0,this.Feedback=void 0,this.Field=void 0,this.File=void 0,this.Frame=void 0,this.Game=void 0,this.Helpdesk=void 0,this.Intent=void 0,this.Interface=void 0,this.Message=void 0,this.Misc=void 0,this.Notification=void 0,this.Picker=void 0,this.Scroll=void 0,this.Selector=void 0,this.Speech=void 0,this.State=void 0,this.Viewport=void 0,this.dt()}catch(t){}}var i=t.prototype;return i.init=function(){var t=this,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;try{!0!==this.xo?(null!==n&&this.tf.push(n),!0!==this.if&&(this.if=!0,g.Partial.load_bundle("chat",function(){t.nf(i,!0)},function(){t.nf(i,!1)}))):"function"==typeof n&&n()}catch(t){}},i.reset=function(){try{g.Utility.reset_instance_children(g.Chat),this.dt()}catch(t){}},i.start_minimized=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;try{this.ef(!1,t)}catch(t){}},i.start_maximized=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;try{this.ef(!0,t)}catch(t){}},i.nf=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];try{if(!(this.if=!1)===i)for(this.Ll(),g.Base.update_socket_cookie_key(!1),this.Jl(t),this.xo=!0;0<this.tf.length;)this.tf.shift()();else this.tf=[]}catch(t){}},i.ef=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;try{function n(){"function"==typeof i&&i()}!0!==this.xo?this.init({maximized:t},function(){g.Chat.State.propagate("maximized",t,!0),n()}):n()}catch(t){}},i.Ll=function(){try{for(var t=[g.Chat.Alert,g.Chat.Intent,g.Chat.Field,g.Chat.Interface,g.Chat.Message,g.Chat.Misc,g.Chat.Notification,g.Chat.Scroll,g.Chat.State,g.Chat.Selector,g.Chat.Event,g.Chat.Viewport],i=0;i<t.length;i++)t[i].init()}catch(t){}},i.Jl=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;try{null!==t&&g.Chat.State.restore(t),null===t&&g.Action.event("chat:initiated"),g.Chat.Interface.pane(),g.Chat.Field.focus_on_foreground(),g.Availability.apply(),g.Library.crisp.client.Socket.get_state(),g.Sound.initialize("events"),g.Chat.Message.restore()}catch(t){}},i.dt=function(){try{this.xo=!1,this.if=!1,this.tf=[]}catch(t){}},t}());g.Chat=$;var I=new(function(){function t(){try{this.ns="CrispChatAlert",this.rf={warn_reply:this.sf,email_invalid:this.cf},this.dt()}catch(t){}}var i=t.prototype;return i.init=function(){},i.reset=function(){try{this.dt()}catch(t){}},i.update=function(t,i){var n,e,r,s;try{"object"==typeof t?n=t:(n={})[t]=i;var o=g.Utility.clone(this.af);for(e in n)n.hasOwnProperty(e)&&(r=n[e],s=!1,void 0!==this.af[e]&&this.af[e]===r&&(s=!0),!1===(s="lock"===this.af[e]&&"unlock"!==r||s)&&(o[e]=r));g.Chat.State.propagate("alert",o)}catch(t){}},i.hook=function(t,i){try{var n=this.rf[i];"function"==typeof n&&n.Jt(this)(t)}catch(t){}},i.sf=function(t){try{this.hf(t)}catch(t){}},i.cf=function(t){try{this.hf(t)}catch(t){}},i.hf=function(t){try{"show"===t?g.Chat.Message.check_form_identify_lock():g.Chat.Message.check_form_identify_unlock()}catch(t){}},i.dt=function(){try{this.af={}}catch(t){}},t}());g.Chat.Alert=I;var z=new(function(){function t(){try{this.ns="CrispChatIntent",this.uf=["identity","game","feedback"],this.lf={identity:this.ff,game:this.vf,feedback:this.df},this.dt()}catch(t){}}var i=t.prototype;return i.init=function(){},i.reset=function(){try{this.dt()}catch(t){}},i.update=function(t){var i,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",e=2<arguments.length&&void 0!==arguments[2]&&arguments[2];try{if(-1===this.uf.indexOf(t))throw new Error("Unknown intent: ".concat(t));!0!==e&&!1===this.af[t]||(i=g.Utility.clone(this.af),n||!1===n?i[t]=n:delete i[t],g.Chat.State.propagate("intent",i))}catch(t){}},i.cleanup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;try{for(var i,n=0;n<this.uf.length;n++)i=this.uf[n],(t||this.af)[i]||this.toggle(i,null)}catch(t){}},i.toggle=function(t){var i,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",e=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];try{-1===this.uf.indexOf(t)||"function"==typeof(i=this.lf[t])&&i.Jt(this)(n,e)}catch(t){}},i.ff=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default",i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];try{t?"default"===t?g.Chat.Message.show_identity(i):g.Chat.Message.show_identity_field(t,i):g.Chat.Message.hide_identity()}catch(t){}},i.vf=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default",i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];try{t?g.Chat.Message.show_game(i):g.Chat.Message.hide_game()}catch(t){}},i.df=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default",i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];try{switch(t){case"default":g.Chat.Message.show_feedback(i);break;case"submitted":!0===i&&g.Chat.Message.show_feedback_submitted(i);break;default:g.Chat.Message.hide_feedback()}g.Chat.Feedback.mark_available(!(!t||"submitted"===t))}catch(t){}},i.dt=function(){try{this.af={}}catch(t){}},t}());g.Chat.Intent=z;var O=new(function(){function t(){try{this.ns="CrispChatPicker",this.yf=10,this.dt()}catch(t){}}var i=t.prototype;return i.init=function(){},i.reset=function(){try{this.dt()}catch(t){}},i.toggle=function(){try{this.pf=null,g.Store.$store.chat.picker.is_visible=!0!==g.Store.$store.chat.picker.is_visible,g.Store.$store.chat.picker.has_animation=!0,g.Store.$store.chat.picker.type="smiley",!0!==g.Store.$store.chat.picker.is_visible?g.Chat.Field.focus_on_foreground():g.Chat.Feedback.hide()}catch(t){}},i.hide=function(){try{this.pf=null,g.Store.$store.chat.picker.is_visible=!1,g.Store.$store.chat.picker.has_animation=!1,g.Store.$store.chat.picker.gif.results=[],g.Store.$store.chat.picker.gif.input=""}catch(t){}},i.show=function(t){try{g.Store.$store.chat.picker.type!==t&&(this.hide(),g.Store.$store.chat.picker.is_visible=!0,"gif"===(g.Store.$store.chat.picker.type=t)&&this.load_data_gif())}catch(t){}},i.load_data_gif=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";try{if(null!==g.Chat.Event.mf&&(g.Utility.clear_timeout(g.Chat.Event.mf),g.Chat.Event.mf=null),this.pf!==t){this.pf=t,g.Library.crisp.client.Media.get_animation_list(t),g.Store.$store.chat.picker.gif.results=[];for(var i=0;i<this.yf;i++)g.Store.$store.chat.picker.gif.results.push({loading:!0})}}catch(t){}},i.is_open=function(){var t=!1;try{t=g.Store.$store.chat.picker.is_visible}catch(t){}finally{return t}},i.dt=function(){try{this.wf=null,this.pf=null}catch(t){}},t}());g.Chat.Picker=O;var S=new(function(){function t(){try{this.ns="CrispChatFeedback",this.dt()}catch(t){}}var i=t.prototype;return i.init=function(){},i.reset=function(){try{this.dt()}catch(t){}},i.request=function(){try{g.Chat.Intent.update("feedback")}catch(t){}},i.toggle=function(){try{g.Store.$store.chat.feedback.is_visible=!0!==g.Store.$store.chat.feedback.is_visible,!0!==g.Store.$store.chat.feedback.is_visible?g.Chat.Field.focus_on_foreground():g.Chat.Picker.hide()}catch(t){}},i.hide=function(){try{g.Store.$store.chat.feedback.is_visible=!1}catch(t){}},i.show=function(){try{this.hide(),g.Store.$store.chat.feedback.is_visible=!0}catch(t){}},i.is_open=function(){var t=!1;try{t=g.Store.$store.chat.feedback.is_visible}catch(t){}finally{return t}},i.mark_available=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];try{g.Store.$store.chat.feedback.is_available=t}catch(t){}},i.dt=function(){try{this.wf=null}catch(t){}},t}());g.Chat.Feedback=S;var D=new(function(){function t(){try{this.ns="CrispChatEvent",this.bt=["fuzzy_wheel","fuzzy_click","pane_toggle_click","pane_tooltip_new_messages_click","pane_minimize_click","pane_mode_click","picker_click","picker_toggle_click","picker_show_click","picker_smiley_click","picker_gif_input_keyup","picker_gif_input_reset","picker_gif_item_click","speech_record_click","speech_cancel_click","speech_send_click","feedback_click","feedback_submit_click","feedback_toggle_click","message_common_click","message_link_click","message_link_click_helpdesk","message_text_click","message_send_retry_click","message_previous_click","message_source_click","message_picker_button_click","message_preview_click","message_field_input_keydown","message_field_input_focus","message_field_input_blur","message_field_send","message_file_click","message_carousel_wheel","alert_email_invalid_click","alert_warn_prompt_click","alert_warn_reply_click","alert_new_messages_click","frame_previous_click","game_stop_click","flow_scroll","flow_touch","file_drop_dragover","file_drop_dragleave","file_drop","file_change","textarea_keydown","textarea_keyup","textarea_paste","textarea_send_click","header_channels_button_click","header_channels_dropdown_click","header_channels_dropdown_entry_click","chat_wheel","helpdesk_wheel","helpdesk_search_keydown","helpdesk_search_field_keyup","helpdesk_search_article_click","helpdesk_viewer_previous_click"],this.So=13,this.gf=38,this.bf=40,this.Ro=9,this.kf=70,this.xf=75,this.Ff=500,this.Ef=500,this.dt()}catch(t){}}var i=t.prototype;return i.init=function(){},i.reset=function(){try{this.dt()}catch(t){}},i.message_common_click=function(t,i){var n;try{null!=t&&null!==(n=t.target)&&void 0!==n&&n.href&&this.message_link_click(t,i)}catch(t){}},i.message_link_click=function(t,i){try{this.message_link_click_helpdesk(t,i)}catch(t){}},i.message_link_click_helpdesk=function(t,i){var n,e,r,s;try{g.Base.Us.channels.helpdesk&&g.Base.Oh!==g.Base.Us.channels.helpdesk&&!0!==g.Feature.has_screen_touch()&&(null===(n=g.Utility.acquire_channel_url_regex("helpdesk","article","([^/]+)/article/([^/]+)/.*"))||null!=(e=t.target.href.match(n))&&e[1]&&null!=e&&e[2]&&((s=null)!==(r=i.preview)&&void 0!==r&&null!==(r=r[0])&&void 0!==r&&r.title&&(s=i.preview[0].title),g.Action.do_helpdesk_article_open(e[1],e[2],s),t.preventDefault()))}catch(t){}},i.message_text_click=function(t){try{var i,n=t.target;!n||null!=(i=n.closest(".cc-176b9"))&&i.href&&(t.preventDefault(),g.Magnify.magnify("embed",i.href))}catch(t){}},i.message_file_click=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;try{g.Magnify.magnify(t,i,n,e)}catch(t){}},i.message_carousel_wheel=function(t){try{g.Utility.unwind_wheel(t,"cc-vr93z","scrollLeft")}catch(t){}},i.message_picker_button_click=function(t,i){try{if("user"!==t.from&&!0===g.Chat.Message.check_intent_send()){for(var n=!1,e=i.value,r=null,s=0;s<t.content.choices.length;s++){var o=t.content.choices[s];o.value===e?!0!==o.selected&&(n=o.selected=!0,r=o.handler):o.selected=!1}if(i.action)switch(i.action.type){case"frame":g.Chat.Frame.open(i.action.target,t.content.text,{fingerprint:t.fingerprint||"",picker_id:t.content.id||"",choice_value:i.value||""});break;case"link":g.Utility.open_link(i.action.target)}!0===n&&("function"==typeof r?r(t):g.Library.crisp.client.Message.update_message(t.fingerprint,t.content),g.Sound.start("events","chat-message-action"))}}catch(t){}},i.message_preview_click=function(t,i){try{this.message_link_click_helpdesk(t,i)}catch(t){}},i.message_field_input_keydown=function(t,i){try{if(t.keyCode===this.So)return t.preventDefault(),void this.message_field_send(i)}catch(t){}},i.message_field_input_focus=function(){try{!0===g.Base.is_mobile_view()&&(g.Store.$store.chat.is_hidden_prompt=!0)}catch(t){}},i.message_field_input_blur=function(){try{g.Store.$store.chat.is_hidden_prompt=!1}catch(t){}},i.message_field_send=function(t){var i;try{!0!==g.Chat.Message.check_intent_send()||0<(i=(t.metas.field.value||"").trim()).length&&("function"==typeof t.content.handler?t.content.handler(i):(t.content.value=i,g.Library.crisp.client.Message.update_message(t.fingerprint,t.content)),g.Sound.start("events","chat-message-action"),g.Utility.set_timeout(function(){g.Chat.Field.focus_on_foreground()},this.Ef))}catch(t){}},i.message_send_retry_click=function(t){try{!0===g.Chat.Message.check_intent_send()&&(g.Chat.Message.remove(t.fingerprint),g.Action.do_message_send(t.type,t.content))}catch(t){}},i.message_previous_click=function(t){try{g.Chat.Intent.update(t.content.previous),g.Sound.start("events","chat-message-action")}catch(t){}},i.message_source_click=function(t){var i;try{t.fingerprint&&(!0===(i=g.Store.$store.messages.states.expanded_sources)[t.fingerprint]?delete i[t.fingerprint]:i[t.fingerprint]=!0)}catch(t){}},i.frame_previous_click=function(){try{g.Chat.Frame.close()}catch(t){}},i.game_stop_click=function(){try{g.Chat.Game.stop()}catch(t){}},i.fuzzy_wheel=function(t){try{t.stopPropagation(),t.preventDefault(),t.returnValue=!1}catch(t){}},i.fuzzy_click=function(t){try{var i=t.target;i&&!0!==i.classList.contains("cc-1uul7")&&!i.closest(".cc-1uul7")&&g.Chat.Field.focus_on_foreground(),g.Chat.Interface.toggle_channel_dropdown(!1)}catch(t){}},i.pane_minimize_click=function(){try{g.Action.do_chat_close()}catch(t){}},i.pane_mode_click=function(t){try{var i=!1,n=!1;switch(t){case"chat":g.Store.$store.chat.mode=t,n=i=!0;break;case"helpdesk":g.Action.do_helpdesk_search(),i=!0;break;case"search":g.Action.do_overlay_open()}g.Chat.Interface.apply_chat_focus(),!0===i&&g.Chat.Field.focus_on_foreground(),g.Chat.Interface.toggle_channel_dropdown(!1),!0===n&&g.Chat.Interface.request_dynamic_sizing_properties()}catch(t){}},i.pane_toggle_click=function(t){try{var i=t.target;i&&!0===i.classList.contains("cc-1oxqc")?g.Action.do_message_read():g.Action.do_chat_toggle()}catch(t){}},i.pane_tooltip_new_messages_click=function(){try{g.Chat.Interface.toggle_chat_mode(!0)}catch(t){}},i.flow_scroll=function(t){try{g.Chat.Interface.propagate_scroll(t.target.scrollTop),t.preventDefault(),t.stopPropagation()}catch(t){}},i.flow_touch=function(t){try{t.stopPropagation()}catch(t){}},i.file_drop_dragover=function(t){try{t.preventDefault(),t.stopPropagation(),g.Chat.File.set_drop_zone(!0)}catch(t){}},i.file_drop_dragleave=function(t){try{t.preventDefault(),t.stopPropagation(),g.Chat.File.set_drop_zone(!1)}catch(t){}},i.file_drop=function(t){var i;try{t.preventDefault(),t.stopPropagation(),null!==(i=t.dataTransfer)&&void 0!==i&&i.files&&0<t.dataTransfer.files.length&&g.Chat.File.handle_file_change(t.dataTransfer.files),g.Chat.File.set_drop_zone(!1)}catch(t){}},i.file_change=function(t){var i;try{!0===g.Base.Us.chat.file_transfer&&0<(null===(i=t.target.files)||void 0===i?void 0:i.length)&&(g.Event.trigger_interacted(!0),g.Chat.File.handle_file_change(t.target.files))}catch(t){}},i.header_channels_button_click=function(){try{g.Chat.Interface.toggle_channel_dropdown()}catch(t){}},i.header_channels_dropdown_click=function(t){try{t.stopPropagation()}catch(t){}},i.header_channels_dropdown_entry_click=function(){try{g.Chat.Interface.toggle_channel_dropdown(!1)}catch(t){}},i.picker_click=function(t){try{var i=t.target;!i||!0!==i.classList.contains("cc-1gi56")&&i.closest(".cc-1gi56")||g.Chat.Picker.hide()}catch(t){}},i.picker_show_click=function(t){try{g.Chat.Picker.show(t)}catch(t){}},i.picker_toggle_click=function(){try{g.Chat.Picker.toggle(),!0===g.Store.$store.chat.picker.is_visible&&g.Event.trigger_interacted(!0)}catch(t){}},i.picker_smiley_click=function(t){try{var i,n=g.Chat.Selector.get("form_textarea_message"),e=n.selectionStart,r=g.Action.get_message_text();r&&(0<e&&" "!==r[e-1]&&(t=" ".concat(t)),e<r.length&&" "!==r[e]&&(t="".concat(t," "))),i=r.substr(0,e)+t+r.substr(e),g.Action.set_message_text(i),n.dispatchEvent(new window.KeyboardEvent("keyup")),g.Utility.set_timeout(function(){e+=t.length,n.selectionStart=n.selectionEnd=e},0),g.Chat.Picker.hide(),g.Chat.Field.focus_on_foreground()}catch(t){}},i.picker_gif_input_keyup=function(t){var i=this;try{null!==this.mf&&g.Utility.clear_timeout(this.mf),this.mf=g.Utility.set_timeout(function(){i.mf=null,g.Chat.Picker.load_data_gif((t.target.value||"").trim())},this.Ff)}catch(t){}},i.picker_gif_input_reset=function(){try{g.Store.$store.chat.picker.gif.input&&(g.Store.$store.chat.picker.gif.input="",g.Chat.Picker.load_data_gif(""))}catch(t){}},i.picker_gif_item_click=function(t){try{t.type&&t.url&&g.Action.do_message_send("animation",{type:t.type,url:t.url}),g.Chat.Picker.hide()}catch(t){}},i.speech_record_click=function(){try{g.Event.trigger_interacted(!0),g.Chat.Speech.record()}catch(t){}},i.speech_cancel_click=function(){try{g.Chat.Speech.cancel()}catch(t){}},i.speech_send_click=function(){try{g.Chat.Speech.send()}catch(t){}},i.feedback_click=function(t){try{var i=t.target;!i||!0!==i.classList.contains("cc-1dv3l")&&i.closest(".cc-1dv3l")||g.Chat.Feedback.hide()}catch(t){}},i.feedback_submit_click=function(){try{0<g.Store.$store.chat.feedback.stars.selected&&g.Store.$store.chat.feedback.comment&&(g.Library.crisp.client.Session.send_feedback_rate(g.Store.$store.chat.feedback.stars.selected,g.Store.$store.chat.feedback.comment),g.Chat.Feedback.hide(),g.Chat.Intent.update("feedback","submitted"))}catch(t){}},i.feedback_toggle_click=function(){try{g.Chat.Feedback.toggle(),!0===g.Store.$store.chat.feedback.is_visible&&g.Event.trigger_interacted(!0)}catch(t){}},i.alert_warn_prompt_click=function(){try{g.Chat.Field.focus_on_foreground(!0)}catch(t){}},i.alert_warn_reply_click=function(){try{!0===g.Base.Us.chat.phone_visitors&&!0!==g.Base.Us.chat.email_visitors?g.Chat.Intent.update("identity","phone"):g.Chat.Intent.update("identity","email"),g.Chat.Field.focus_on_foreground(!0)}catch(t){}},i.alert_new_messages_click=function(){try{g.Chat.Scroll.to()}catch(t){}},i.alert_email_invalid_click=function(){try{g.Chat.Intent.update("identity","email",!0)}catch(t){}},i.textarea_keyup=function(t){try{g.Chat.Field.trigger_key_pressed(t)}catch(t){}},i.textarea_keydown=function(t){try{if(t.keyCode===this.So&&!t.shiftKey)return t.preventDefault(),void g.Chat.Field.trigger_submit();var i=t.ctrlKey||t.metaKey,n=t.keyCode===this.kf&&i,e=t.keyCode===this.xf&&i;if(n||e){if(!0===g.Store.$store.base.configuration.chat.overlay_search)return t.preventDefault(),void g.Action.do_overlay_open();if(!0===g.Store.$store.chat.helpdesk.search)return t.preventDefault(),void g.Action.do_helpdesk_search()}g.Event.trigger_interacted(),g.Chat.Field.trigger_key_pressed(t)}catch(t){}},i.textarea_paste=function(t){try{var i=(t.clipboardData||t.originalEvent.clipboardData||{}).items||[];if(0<i.length){for(var n,e=[],r=0;r<i.length;r++)"file"!==i[r].kind||null!=(n=i[r].getAsFile())&&n.type&&-1!==n.type.indexOf("image/")&&e.push(n);0<e.length&&(t.preventDefault(),!0===confirm(g.Locale.text("chat","chat_form_attach_confirm_upload"))&&g.Chat.File.handle_file_change(e))}g.Utility.set_timeout(function(){g.Chat.Field.trigger_key_pressed(null)},0)}catch(t){}},i.textarea_send_click=function(){try{g.Chat.Field.trigger_submit()}catch(t){}},i.chat_wheel=function(t){try{g.Utility.unwind_wheel(t,"cc-13yzx")}catch(t){}},i.helpdesk_wheel=function(t){try{g.Utility.unwind_wheel(t,"cc-fwsqo")}catch(t){}},i.helpdesk_search_keydown=function(t){var i;try{switch(t.keyCode){case this.So:t.preventDefault(),g.Chat.Helpdesk.select_article();break;case this.gf:g.Chat.Helpdesk.move_article(-1);break;case this.bf:g.Chat.Helpdesk.move_article(1);break;case this.Ro:null!==(i=t.target)&&void 0!==i&&i.value&&(t.preventDefault(),g.Chat.Helpdesk.expand_autocomplete());break;default:!0!==t.shiftKey&&!0!==t.metaKey&&!0!==t.ctrlKey&&!0!==t.altKey&&g.Chat.Helpdesk.handle_autocomplete([])}}catch(t){}},i.helpdesk_search_field_keyup=function(){try{g.Chat.Helpdesk.search(g.Store.$store.chat.helpdesk_search.input)}catch(t){}},i.helpdesk_search_article_click=function(t,i,n){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;try{g.Action.do_helpdesk_article_open(t,i,n,e||null)}catch(t){}},i.helpdesk_viewer_previous_click=function(){try{g.Store.$store.chat.helpdesk_viewer.url="",g.Chat.Interface.request_dynamic_sizing_properties()}catch(t){}},i.bind_all=function(){try{g.Store.bind_events("chat",this.bt,this),this.Cf()}catch(t){}},i.Cf=function(){try{g.Utility.add_event_listener(this.ns,"window","beforeunload",function(t){var i,n=null;if(!0===g.Chat.Message.has_unsent_messages()&&(n=g.Locale.text("chat","chat_message_send_abort_warn")),!0===g.Base.Us.chat.file_transfer&&(i=g.Store.$store.chat.file.state,-1!==["preparing","uploading"].indexOf(i)&&(n=g.Locale.text("chat","chat_form_attach_abort_warn"))),!0===g.Base.Us.chat.audio_record&&(i=g.Store.$store.chat.speech.state,-1!==["recording","paused"].indexOf(i)&&(n=g.Locale.text("chat","chat_form_speech_abort_warn"))),n=!0===g.Library.crisp.client.Call.is_ongoing()?g.Locale.text("call","call_abort_warn"):n)return t.returnValue=n})}catch(t){}},i.dt=function(){try{this.mf=null}catch(t){}},t}());g.Chat.Event=D;var R=new(function(){function t(){try{this.ns="CrispChatField",this.So=13,this.jf=1e3,this.Af=150,this.$f=.2,this.If=8.5,this.zf=/\n/g,this.dt()}catch(t){}}var i=t.prototype;return i.init=function(){},i.reset=function(){try{this.dt()}catch(t){}},i.trigger_submit=function(){try{g.Event.trigger_interacted(!0),g.Chat.Message.send()}catch(t){}},i.trigger_key_pressed=function(t){try{var i,n,e,r,s,o,c,a="";null!==t&&t.keyCode===this.So&&!t.shiftKey||(a=g.Action.get_message_text(),i=g.Chat.Selector.get("form_container"),n=g.Chat.Selector.get("form_textarea_message"),0===this.Of&&(this.Of=parseInt(n.getAttribute("rows"),10)),this.Sf(),a?(r=a.length*this.If/g.Chat.Interface.Df,r+=(null===(e=a.match(this.zf))||void 0===e?void 0:e.length)||0,((s=Math.ceil(r))-r<this.$f||s!==this.Rf)&&(r=s,this.Rf=r,o=g.Chat.Interface.Nf-g.Chat.Interface.qf+g.Chat.Interface.qf*r,c=g.Chat.Interface.qf*(r-1),o<g.Chat.Interface.Bf+g.Chat.Interface.Nf-this.Af&&(n.setAttribute("rows",this.Of+(r-1)),g.Chat.Field.Mf(c),i.style.setProperty("height","".concat(o,"px"),"important"))),g.Store.$store.chat.field.has_value=!0):(g.Store.$store.chat.field.has_value=!1,i.style.height=null,n.setAttribute("rows",this.Of),this.Rf=1,this.Mf(0))),g.Library.crisp.client.Message.send_message_compose(a?"start":"stop",a||null)}catch(t){}},i.focus_on_foreground=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];try{!0!==t&&g.Feature.has_screen_touch()||!0!==g.Chat.Interface.chat_is_visible()||null===g.Chat.Selector.Tf||g.Utility.next_render(function(){var t=g.Chat.Selector.get("flow_messages");if(t){var i=null;switch(g.Store.$store.chat.mode){case"chat":var n=t.querySelector(".cc-2rg0f"),i=!0===g.Chat.Picker.is_open()?g.Chat.Selector.get("content").querySelector(".cc-bg75a"):!0===g.Chat.Feedback.is_open()?g.Chat.Selector.get("content").querySelector(".cc-1qglp"):n||g.Chat.Selector.get("form_textarea_message");break;case"helpdesk":i=g.Chat.Selector.get("content").querySelector(".cc-6pm1r")}i&&i.focus()}})}catch(t){}},i.blur_from_foreground=function(){try{for(var t=g.Base.Co.querySelectorAll("input"),i=0;i<t.length;i++)t[i].blur()}catch(t){}},i.Mf=function(t){try{for(var i=g.Chat.Selector.Uf.querySelectorAll([".cc-q205d",".cc-2anda"].join(", ")),n=0;n<i.length;n++)i[n].style.setProperty("margin-bottom","".concat(t,"px"),"important")}catch(t){}},i.Sf=function(){var t=this;try{null!==this.Pf&&g.Utility.clear_timeout(this.Pf),this.Pf=g.Utility.set_timeout(function(){t.Pf=null,g.Chat.State.propagate("textarea",g.Action.get_message_text())},this.jf)}catch(t){}},i.dt=function(){try{this.Lf="",this.Of=0,this.Rf=1,this.Pf=null}catch(t){}},t}());g.Chat.Field=R;var N=new(function(){function t(){try{this.ns="CrispChatFile",this.Jf="File",this.Wf="application/octet-stream",this.Vf=2e3,this.dt()}catch(t){}}var i=t.prototype;return i.reset=function(){try{this.dt()}catch(t){}},i.upload_generated=function(t,i,n){try{if(!this.Hf[0])return void this.Gf();if(!t||!i)return alert(g.Locale.text("chat","chat_form_attach_alert_quota")),void this.Gf();if(this.Hf[0].size>=n)return alert(g.Locale.text("chat","chat_form_attach_alert_size")),void this.Gf();this.Kf=i,this.Yf(t,this.Hf[0])}catch(t){}},i.set_drop_zone=function(t){try{!0===g.Base.Us.chat.file_transfer&&(g.Store.$store.chat.has_drop_zone=t)}catch(t){}},i.handle_file_change=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];try{if(!0===g.Chat.Message.check_intent_send()&&0<t.length&&"none"===g.Store.$store.chat.file.state){this.Hf=[];for(var i=0;i<t.length;i++)g.Chat.File.Hf.push(t[i]);g.Store.$store.chat.file.state="preparing",g.Library.crisp.client.Bucket.get_url_upload(t[0].name||this.Jf,t[0].type||this.Wf)}}catch(t){}},i.Yf=function(t,i){try{this.Zf=new window.XMLHttpRequest,this.Zf.file=i,this.Zf.addEventListener("loadstart",this.Xf.Jt(this),!1),this.Zf.addEventListener("error",this.Qf.Jt(this),!1),this.Zf.addEventListener("abort",this.Qf.Jt(this),!1),this.Zf.addEventListener("load",this.t0.Jt(this),!1),this.Zf.open("PUT",t,!0),this.Zf.setRequestHeader("Content-Disposition","attachment"),this.Zf.send(i)}catch(t){}},i.Xf=function(){try{g.Store.$store.chat.file.state="uploading"}catch(t){}},i.Qf=function(){try{0<this.Hf.length&&alert(g.Locale.text("chat","chat_form_attach_alert_error")),this.Gf()}catch(t){}},i.t0=function(){var t,i=this;try{0<this.Hf.length&&this.Kf&&(t=this.Hf[0],g.Utility.set_timeout(function(){t.type&&-1!==t.type.indexOf("audio/")&&"number"==typeof t.duration?g.Action.do_message_send("audio",{url:i.Kf,type:t.type,duration:t.duration}):g.Action.do_message_send("file",{url:i.Kf,name:t.name||i.Jf,type:t.type||i.Wf}),i.Gf()},this.Vf))}catch(t){}},i.Gf=function(){try{this.Zf&&(this.Zf.removeEventListener("loadstart",this.Xf,!1),this.Zf.removeEventListener("error",this.Qf,!1),this.Zf.removeEventListener("abort",this.Qf,!1),this.Zf.removeEventListener("load",this.t0,!1)),g.Chat.Selector.get("form_input_attach").value=null,g.Store.$store.chat.file.state="none",this.Hf.shift(),0<this.Hf.length&&this.handle_file_change(this.Hf)}catch(t){}},i.dt=function(){try{this.Hf=[],this.Kf=null}catch(t){}},t}());g.Chat.File=N;var q=new(function(){function t(){try{this.ns="CrispChatFrame",this.dt()}catch(t){}}var i=t.prototype;return i.reset=function(){try{this.dt()}catch(t){}},i.open=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};try{var e=g.Utility.insert_link_query_values(t,g.Utility.merge({website_id:g.Base.aa,session_id:g.Broker.Zt},n));null!==this.i0&&g.Store.$store.chat.frame.target!==e&&this.close(),null===this.i0&&(g.Store.$store.chat.frame.loaded=!1,g.Store.$store.chat.frame.target=e,g.Store.$store.chat.frame.title=i||"",this.i0=g.Template.dom(g.Template.render("chat_frame")),g.Template.vue(this.i0),g.Chat.Selector.Uf.appendChild(this.i0))}catch(t){}},i.close=function(){try{null!==this.i0&&(this.i0.remove(),this.i0=null,g.Store.$store.chat.frame.target="",g.Store.$store.chat.frame.title="",g.Store.$store.chat.frame.loaded=!1)}catch(t){}},i.dt=function(){try{this.i0=null}catch(t){}},t}());g.Chat.Frame=q;var B=new(function(){function t(){try{this.ns="CrispChatGame",this.dt()}catch(t){}}var i=t.prototype;return i.reset=function(){try{this.dt()}catch(t){}},i.start=function(){try{null===this.n0&&(g.Store.$store.chat.game.loaded=!1,this.n0=g.Template.dom(g.Template.render("chat_game")),g.Template.vue(this.n0),g.Chat.Selector.Uf.appendChild(this.n0))}catch(t){}},i.stop=function(){try{null!==this.n0&&(this.n0.remove(),this.n0=null)}catch(t){}},i.dt=function(){try{this.n0=null}catch(t){}},t}());g.Chat.Game=B;var M=new(function(){function t(){try{this.ns="CrispChatHelpdesk",this.e0=1e3,this.r0=100,this.s0=2,this.dt()}catch(t){}}var i=t.prototype;return i.init=function(){},i.reset=function(){try{this.dt()}catch(t){}},i.show_search=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],i=!1;try{var n=g.Chat.Interface.generate_channel_link("helpdesk");n&&(i=!0,"helpdesk"!==g.Store.$store.chat.mode?(g.Utility.merge(g.Store.$store.chat.helpdesk_search,{input:"",url:n,articles:[],current_index:0,has_search:!1,initialized:!1,loading:!1}),g.Store.$store.chat.mode="helpdesk",g.Action.do_helpdesk_query("")):g.Store.$store.chat.helpdesk_viewer.url="",!1===t&&g.Chat.Interface.request_dynamic_sizing_properties())}catch(t){}finally{return i}},i.show_article=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,r=!1;try{var s=g.Chat.Interface.generate_channel_link("helpdesk");s&&(r=this.show_search(!0),g.Store.$store.chat.helpdesk_viewer.loaded=!1,g.Store.$store.chat.helpdesk_viewer.title=n||"",g.Store.$store.chat.helpdesk_viewer.category=e||"",g.Store.$store.chat.helpdesk_viewer.url="".concat(s).concat(t,"/article/").concat(i,"/"),g.Chat.Interface.request_dynamic_sizing_properties())}catch(t){}finally{return r}},i.search=function(){var i=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";try{n!==this.o0&&(this.c0(),g.Store.$store.chat.helpdesk_search.loading=!0,this.a0=g.Utility.set_timeout(function(){var t;i.a0=null,i.o0=n,g.Action.do_helpdesk_query(n),!n||(t=n.substring(n.lastIndexOf(" ")+1).trim())&&t.length>=i.s0&&g.Library.crisp.client.Helpdesk.get_article_suggest(t,g.Locale.code())},this.r0))}catch(t){}},i.handle_articles=function(){var n=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=2<arguments.length&&void 0!==arguments[2]&&arguments[2];try{"helpdesk"===g.Store.$store.chat.mode&&(g.Store.$store.chat.helpdesk_search.articles=[],g.Store.$store.chat.helpdesk_search.current_index=0,g.Store.$store.chat.helpdesk_search.has_search=t,g.Store.$store.chat.helpdesk_search.articles=e,null!==this.u0&&g.Utility.clear_timeout(this.u0),r.query&&(this.u0=g.Utility.set_timeout(function(){n.u0=null;var t=(r.query||"").trim(),i=r.locale||null;(i=e[0]&&e[0].locale?e[0].locale:i)&&t&&g.Library.crisp.client.Helpdesk.report_article_search(i,t)},this.e0)),g.Store.$store.chat.helpdesk_search.initialized=!0,g.Store.$store.chat.helpdesk_search.loading=!1)}catch(t){}},i.select_article=function(){try{var t=g.Chat.Selector.get("content").querySelector("".concat(".cc-2q49u",'[data-active="true"]'));t&&t.click()}catch(t){}},i.handle_autocomplete=function(){var t,i,n,e,r,s,o,c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];try{"helpdesk"===g.Store.$store.chat.mode&&(t=(c[0]||"").toLowerCase(),n=i=null,!t||(e=(n=g.Store.$store.chat.helpdesk_search.input).substring(n.lastIndexOf(" ")+1).trim().toLowerCase())&&e.length<t.length&&t.substring(0,e.length)===e&&(i=t.substring(e.length)),r=g.Chat.Selector.get("content").querySelector(".cc-vzdec"),s=g.Chat.Selector.get("content").querySelector(".cc-ton9d"),i&&n&&r?(r.innerText=n,s.innerText=i,o="rtl"===g.Locale.direction()?"right":"left",s.style.setProperty(o,"".concat(r.offsetWidth,"px"),"important"),s.style.setProperty("display","block","important")):(s.style.setProperty("display","none","important"),s.innerText=""))}catch(t){}},i.expand_autocomplete=function(){try{var t=(g.Chat.Selector.get("content").querySelector(".cc-ton9d").innerText||"").trim();t&&(g.Store.$store.chat.helpdesk_search.input="".concat(g.Store.$store.chat.helpdesk_search.input)+"".concat(t),this.handle_autocomplete([]))}catch(t){}},i.move_article=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;try{var i=g.Store.$store.chat.helpdesk_search.current_index+t;(i=i>=g.Store.$store.chat.helpdesk_search.articles.length?0:i)<0&&(i=g.Store.$store.chat.helpdesk_search.articles.length-1),g.Store.$store.chat.helpdesk_search.current_index=i,g.Utility.next_render(function(){var t=g.Chat.Selector.get("content").querySelector("".concat(".cc-2q49u",'[data-active="true"]'));t&&t.scrollIntoView({behavior:"smooth",block:"nearest"})})}catch(t){}},i.c0=function(){try{null!==this.a0&&(g.Utility.clear_timeout(this.a0),this.a0=null),null!==this.u0&&(g.Utility.clear_timeout(this.u0),this.u0=null)}catch(t){}},i.dt=function(){try{this.u0=null,this.o0=""}catch(t){}},t}());g.Chat.Helpdesk=M;var T=new(function(){function t(){try{this.ns="CrispChatInterface",this.l0=320,this.f0=340,this.v0=360,this.d0=460,this.y0=400,this.p0=580,this.m0=440,this.w0=500,this.g0=600,this.b0=22,this._0=8,this.k0=350,this.x0=1e3,this.F0=1e3,this.E0=216e5,this.C0=1e3,this.j0=10,this.A0=!1,this.$0=[["email","Email"],["phone","Phone"],["messenger","Messenger"],["telegram","Telegram"],["twitter","X (Twitter)"],["whatsapp","WhatsApp"],["instagram","Instagram"]],this.I0=/^(?:https?:)?(?:\/\/)?([^\/\?]+)/,this.dt()}catch(t){}}var i=t.prototype;return i.init=function(){try{this.z0()}catch(t){}},i.reset=function(){try{this.dt()}catch(t){}},i.toggle_chat_mode=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];try{"chat"===g.Store.$store.chat.mode||!0!==t&&!0===g.Store.$store.chat.helpdesk.only||(g.Store.$store.chat.mode="chat",g.Chat.Interface.request_dynamic_sizing_properties())}catch(t){}},i.toggle_visibility=function(){var t,i,n,e=this,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"pane",s=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];try{function o(t,i){1==(t!==i)&&(g.Store.$store.chat.is_opened=t,g.Utility.next_render(function(){e.O0(t)}))}t="pane"!==r,n=g.Store.$store.chat.is_opened,e.S0=t,!0===s?(i=1!=t?"animate_minimize":"animate_maximize",1==t?g.Store.$store.chat.is_opened=!0:e.O0(!1),null!==e.D0&&(g.Utility.clear_timeout(e.D0),g.Store.$store.chat.animate_minimize=!1,g.Store.$store.chat.animate_maximize=!1),g.Store.$store.chat[i]=!0,e.D0=g.Utility.set_timeout(function(){e.D0=null,g.Store.$store.chat[i]=!1,o(t,n)},e.k0)):o(t,n),!0===s&&this.apply_chat_focus()}catch(t){}},i.toggle_socket_state=function(){var n=this,e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],r=1<arguments.length&&void 0!==arguments[1]&&arguments[1];try{null!==this.R0&&g.Utility.clear_timeout(this.R0),this.R0=g.Utility.set_timeout(function(){n.R0=null,g.Store.$store.chat.has_offline=!0!==e;var t,i={failed:r,inactive:g.Event.Hh||g.Event.Gh||!1};for(t in i)g.Store.$store.chat["reconnect_".concat(t)]=i[t]},!0===e?0:this.x0)}catch(t){}},i.minimize=function(){try{!0!==g.Base.yl.lock_maximized&&g.Chat.State.propagate("maximized",!1)}catch(t){}},i.maximize=function(){try{g.Chat.State.propagate("maximized",!0,!1,function(){g.Utility.next_render(function(){g.Chat.Scroll.to()})})}catch(t){}},i.chat_is_visible=function(){var t=!0;try{t=!(!this.S0||!0===g.Store.$store.base.is_hidden)}catch(t){}finally{return t}},i.apply_chat_focus=function(){try{var t=this.has_chat_focus();g.Library.crisp.client.Message.set_messages_in_view(t)}catch(t){}},i.pane=function(){try{var t=g.Base.Us||{};this.so(),g.Chat.Selector.Tf=g.Template.dom(g.Template.render("chat",{configuration:t,environment:{smileys:[],url:{crisp_web:g.Base.tl}},methods:{generate_channel_link:this.generate_channel_link.Jt(this)},website:{id:g.Base.aa,domain:g.Base.Us.website.domain,name:g.Base.Us.website.name}})),g.Base.Co.innerHTML="",g.Base.Co.appendChild(g.Chat.Selector.Tf),g.Template.vue(g.Chat.Selector.Tf),g.Chat.Selector.bind_all(),g.Chat.Event.bind_all(),this.N0(),g.Chat.State.trigger_default_all(["intent"])}catch(t){}},i.toggle_channel_dropdown=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;try{(t=null===t?!1===g.Store.$store.chat.has_channels:t)!==g.Store.$store.chat.has_channels&&(g.Store.$store.chat.has_channels=t)}catch(t){}},i.generate_channel_link=function(t){var i="";try{var n,e=g.Base.Us.channels[t]||null;switch(t){case"email":var r,s,o=g.Broker.kh;o?(r=g.Base.Us.website.name,s="s.".concat(o,".i@")+"".concat(g.Base.Us.website.mailer),i="mailto:",r&&(i+='"'.concat(encodeURI(r),'"')),i+="<".concat(encodeURI(s),">")):e&&(i="mailto:".concat(e));break;case"phone":e&&(i="tel:".concat(e));break;case"messenger":e&&(i="https://m.me/".concat(encodeURI(e)));break;case"telegram":e&&(i="https://telegram.me/".concat(encodeURI(e)));break;case"twitter":e&&(i="https://x.com/".concat(encodeURI(e)));break;case"whatsapp":e&&(i="https://wa.me/".concat(encodeURI(e)));break;case"instagram":e&&(i="https://www.instagram.com/".concat(encodeURI(e),"/"));break;case"helpdesk":case"status":e&&(n="production"===g.Base.sl?"https":"http",i="".concat(n,"://").concat(e,"/"))}}catch(t){}finally{return i}},i.request_dynamic_sizing_properties=function(){var t=this,i=0<arguments.length&&void 0!==arguments[0]&&arguments[0];try{!0!==this.A0&&(this.A0=!0,g.Utility.next_render(function(){"function"==typeof window.requestAnimationFrame?window.requestAnimationFrame(function(){t.q0(i),t.A0=!1}):(t.q0(i),t.A0=!1)}))}catch(t){}},i.refresh_resize_page_scroll=function(){var t,i=0<arguments.length&&void 0!==arguments[0]&&arguments[0];try{window.scroll&&!0===g.Store.$store.chat.is_opened&&-1<this.B0&&(!0!==i&&!0===g.Base.is_mobile_view()?window.scrollTo(0,-1):((t=document.querySelector("html"))&&t.classList.remove("cc-c4fvg"),g.Utility.remove_event_listener(this.ns,"document","touchstart"),g.Utility.remove_event_listener(this.ns,"document","touchmove"),window.scroll(window.scrollX,this.B0),this.B0=-1))}catch(t){}},i.has_chat_focus=function(){var t=!1;try{t=this.M0&&this.chat_is_visible()&&"chat"===g.Store.$store.chat.mode&&!0}catch(t){}finally{return t}},i.propagate_scroll=function(t){try{(Math.abs(t-(g.Chat.Scroll.T0||0))>=this.j0||null!==this.U0)&&(g.Chat.Scroll.T0=t,this.P0(g.Chat.Scroll.T0))}catch(t){}},i.so=function(){var i=this;try{var t,n=(g.Base.Us||{}).website||{},e=g.Base.Us.chat.helpdesk_link&&g.Base.Us.channels.helpdesk&&g.Base.Oh!==g.Base.Us.channels.helpdesk&&!0,r={blocked:g.Base.is_blocked(),helpdesk:{search:e,only:e&&g.Base.Us.chat.helpdesk_only&&!0},status:{url:this.generate_channel_link("status")},activity:{metrics:null!==(t=n.response_metrics)&&void 0!==t&&t.mean&&n.response_metrics.mean>=this.F0&&n.response_metrics.mean<this.E0?n.response_metrics.mean:null,last:n.last_available&&0<n.last_available?n.last_available:null},channels:this.L0(),branding_link:"".concat(g.Store.$store.base.environment.url.crisp_web)+"/".concat(g.Locale.web(),"/livechat/")+"?ref=chatbox"+"&domain=".concat(g.Store.$store.base.website.domain)+"&name=".concat(encodeURIComponent(g.Store.$store.base.website.name))};g.Store.$store.chat.content_source=function(t){return t.match(i.I0)[1]},g.Store.$store.chat.timestamp_to_properties=function(t){return g.Date.timestamp_to_properties(t)},g.Store.$store.chat.is_different_date=function(t,i){t=g.Store.$store.messages.list[t],i=g.Store.$store.messages.list[i];if(0===(null==t?void 0:t.timestamp))return!1;if(!t||!i)return!0;i=g.Date.timestamp_to_properties(i.timestamp),t=g.Date.timestamp_to_properties(t.timestamp);return i.day!==t.day||i.month!==t.month||i.year!==t.year||!1},g.Store.$store.chat.is_first_of_group=function(t,i){if(0===i)return!0;var n=g.Store.$store.messages.list[i-1];return g.Store.$store.chat.is_last_of_group(n,i-1)},g.Store.$store.chat.is_last_of_group=function(t,i){var n=g.Store.$store.messages.list[i+1],e=(null==n?void 0:n.user)||{},r=t.user||{};return g.Store.$store.chat.is_different_date(i+1,i)||!n&&!0||(t.sending||t.error)&&!(n.sending||n.error)||n&&e.user_id!==r.user_id||(e.type||r.type)&&r.nickname!=r.nickname||!1},g.Store.$store.chat.is_last_of_thread=function(t,i){return g.Store.$store.chat.is_different_date(i+1,i)||!g.Store.$store.messages.list[i+1]&&!0||!1},g.Store.$store.chat.has_picker_selected=function(t){if("picker"===t.type)for(var i=0;i<t.content.choices.length;i++)if(!0===t.content.choices[i].selected)return!0;return!1},g.Store.$store.chat.to_error_reason=function(t){return g.Locale.text("chat","chat_message_error_reason_".concat(t))||t},g.Utility.merge(g.Store.$store.chat,r)}catch(t){}},i.L0=function(){var t=[];try{for(var i=0;i<this.$0.length;i++){var n=this.$0[i][0],e=this.$0[i][1],r=this.generate_channel_link(n);r&&("email"!==n&&"phone"!==n||(e=g.Locale.text.Jt(g.Locale)("chat","chat_header_ongoing_channel_continue_".concat(n))),t.push({name:n,format:e,link:r}))}}catch(t){}finally{return t}},i.q0=function(){var t,i,n,e,r,s,o,c,a=0<arguments.length&&void 0!==arguments[0]&&arguments[0];try{!0===g.Action.is_chat_visible()&&(c=!0===g.Base.is_large_view()?(this.J0=this.p0,this.W0=this.y0,this.g0):!0===g.Base.is_small_view()?(this.J0=this.f0,this.W0=this.l0,this.m0):(this.J0=this.d0,this.W0=this.v0,this.w0),"helpdesk"===g.Store.$store.chat.mode&&g.Store.$store.chat.helpdesk_viewer.url&&(t=parseInt(window.getComputedStyle(g.Chat.Selector.Uf).bottom.replace("px",""),10),this.W0=c,this.J0=window.innerHeight-t-g.Chat.Selector.get("header").offsetHeight-this.b0),g.Base.apply_sizing(),!0===g.Base.is_full_view()&&(this.J0=window.innerHeight,this.W0=window.innerWidth,window.visualViewport&&(this.J0=window.visualViewport.height+window.visualViewport.offsetTop),this.J0-=g.Chat.Selector.get("header").offsetHeight),!0!==g.Chat.xo&&!0!==a||(i="rtl"===g.Locale.direction()?"right":"left",n="rtl"===g.Locale.direction()?"left":"right",e=parseInt(window.getComputedStyle(g.Chat.Selector.get("form_textarea_message"))[i].replace("px",""),10),r=parseInt(window.getComputedStyle(g.Chat.Selector.get("form_act"))[n].replace("px",""),10),s=this.W0-this._0-e-r-g.Chat.Selector.get("form_act").offsetWidth,g.Chat.Selector.Uf.style.setProperty("width","".concat(this.W0,"px"),"important"),g.Chat.Selector.get("content").style.setProperty("height","".concat(this.J0,"px"),"important"),g.Chat.Selector.get("form_textarea_message").style.setProperty("width","".concat(s,"px"),"important"),this.Bf=g.Chat.Selector.get("flow").offsetHeight,this.Df=g.Chat.Selector.get("form_textarea_message").offsetWidth,0===this.Nf&&(this.Nf=g.Chat.Selector.get("form_container").offsetHeight),0===this.qf&&(o=window.getComputedStyle(g.Chat.Selector.get("form_textarea_message")).lineHeight||"",this.qf=parseInt(o.replace("px",""),10)),g.Chat.Scroll.V0=this.Bf,g.Base.is_full_view()&&!0===this.chat_is_visible()?g.Chat.Viewport.adapt():g.Chat.Viewport.unadapt(),g.Chat.Selector.get("form_textarea_message").dispatchEvent(new window.KeyboardEvent("keyup"))),g.Sound.allow(!g.Base.is_mobile_view()))}catch(t){}},i.P0=function(t){var i=this;try{null!==this.U0&&g.Utility.clear_timeout(this.U0),this.U0=g.Utility.set_timeout(function(){i.U0=null,g.Chat.State.propagate("scroll",t)},this.C0)}catch(t){}},i.O0=function(){var t,n,e=this,i=0<arguments.length&&void 0!==arguments[0]&&arguments[0];try{!0===g.Base.is_mobile_view()&&window.scroll&&!0===i?-1===this.B0&&(this.B0=window.scrollY,(t=document.querySelector("html"))&&t.classList.add("cc-c4fvg"),window.scroll(window.scrollX,0),n=0,g.Utility.add_event_listener(this.ns,"document","touchstart",function(t){var i;null!==(i=t.changedTouches)&&void 0!==i&&i[0]&&(n=t.changedTouches[0].pageY)}),g.Utility.add_event_listener(this.ns,"document","touchmove",function(t){var i;document.activeElement&&null!==(i=t.changedTouches)&&void 0!==i&&i[0]&&("input"!==document.activeElement.tagName&&"textarea"!==document.activeElement.tagName||t.preventDefault(),t=t.changedTouches[0].pageY||0,Math.abs(t-n)>e.j0&&document.activeElement.blur())},{passive:!1,capture:!0})):this.refresh_resize_page_scroll(!0)}catch(t){}},i.z0=function(){var t=this;try{this.M0=(!window.hasFocus||window.hasFocus())&&!0,g.Utility.add_event_listener(this.ns,"window","focus",function(){t.M0=!0,t.apply_chat_focus()},{capture:!1}),g.Utility.add_event_listener(this.ns,"window","blur",function(){t.M0=!1,t.apply_chat_focus()},{capture:!1})}catch(t){}},i.N0=function(){try{this.S0=!1,g.Store.$store.chat.is_opened=!1}catch(t){}},i.dt=function(){try{this.S0=!0,this.Bf=0,this.Nf=0,this.Df=0,this.qf=0,this.H0=40,this.R0=null,this.D0=null,this.W0=0,this.J0=0,this.B0=-1,this.U0=null,this.M0=!0}catch(t){}},t}());g.Chat.Interface=T;var U=new(function(){function t(){try{this.ns="CrispChatMessage",this.G0=1500,this.K0=3e4,this.Y0=6e4,this.Z0=3e4,this.X0=400,this.Q0=5e3,this.tv=12e4,this.iv="urn:crisp.im:triggers:0",this.nv=["welcome","identity","game","feedback"],this.ev=["email","phone"],this.rv=["📨","☎️"],this.sv=["field","picker"],this.dt()}catch(t){}}var i=t.prototype;return i.init=function(){try{this.ov()}catch(t){}},i.reset=function(){try{this.dt()}catch(t){}},i.send=function(){var t;try{!0!==this.check_intent_send()||(t=(t=g.Action.get_message_text()).trim())&&(g.Action.do_message_send("text",t),g.Action.set_message_text(""),g.Chat.Selector.get("form_textarea_message").dispatchEvent(new window.KeyboardEvent("keyup")))}catch(t){}},i.received=function(t){var i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],e=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],r=4<arguments.length&&void 0!==arguments[4]&&arguments[4];try{var s=this.cv(t);!0===i&&!1===g.Chat.Interface.has_chat_focus()&&g.Sound.start("events","chat-message-receive"),!0===n&&!0===s&&this.av(t.fingerprint),t.user&&-1===this.nv.indexOf(t.user.source)&&g.Chat.Misc.update_operator_details(t.user),!1===r&&g.Chat.Game.stop(),this.hv&&0<t.timestamp&&this.hv<t.timestamp&&this.hide_compose(),!0===e&&g.Utility.next_render(function(){g.Chat.Scroll.to_last_message("from")})}catch(t){}},i.sent=function(t){var i,n,e,r,s=this;try{t.from="user",!0===this.cv(t)&&this.av(t.fingerprint),this.uv(t.fingerprint),g.Chat.Intent.af.identity||!1===g.Chat.Intent.af.identity||(i=g.Action.get_user_email(),n=g.Action.get_user_phone(),e=g.Base.Us.chat.email_visitors,r=g.Base.Us.chat.phone_visitors,(i||!0!==e)&&(n||!0!==r)||i||n?g.Chat.Alert.update("wait_reply","show"):(null!==this.lv&&g.Utility.clear_timeout(this.lv),this.lv=g.Utility.set_timeout(function(){s.lv=null;var t="default";!1===(e&&r)&&(!0===e?t="email":!0===r&&(t="phone")),g.Chat.Intent.update("identity",t),g.Chat.Alert.update("warn_reply","show")},this.G0))),g.Utility.next_render(function(){g.Chat.Scroll.to_last_message("to")})}catch(t){}},i.sent_acknowledgement=function(t){try{this.fv(t.fingerprint),this.cv(t),this.vv(),g.Utility.next_render(function(){g.Chat.Scroll.to_last_message("to")})}catch(t){}},i.history=function(t){try{for(var i=0;i<t.length;i++){var n=t[i];this.cv(n),"user"===n.from&&!0===n.read&&this.dv.push(n.fingerprint)}this.yv()}catch(t){}},i.removed=function(t){try{this.pv(t.fingerprint)}catch(t){}},i.show_identity=function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];try{for(var i="**".concat(g.Locale.text("chat","chat_message_text_identity_main"),"**")+"\n"+"_".concat(g.Locale.text("chat","chat_message_text_identity_ask"),"_"),n=[],e=0;e<this.ev.length;e++){var r=this.ev[e],s=this.rv[e];!0===g.Base.Us.chat["".concat(r,"_visitors")]&&n.push({value:r,icon:s,selected:!1,label:g.Locale.text("chat","chat_message_text_identity_pick_".concat(r)),handler:function(t){return function(){g.Chat.Intent.update("identity",t)}}(r)})}0<n.length&&this.mv("identity","default","picker",{id:"ask-identity",text:i,choices:n},t,t)}catch(t){}},i.hide_identity=function(){try{this.wv("identity")}catch(t){}},i.show_identity_field=function(i){var t,n,e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];try{-1!==this.ev.indexOf(i)&&(t="chat_message_text_identity_ask_".concat(i),n="chat_message_text_identity_ask_field_".concat(i),this.mv("identity",i,"field",{id:"identity-".concat(i),text:"_".concat(g.Locale.text("chat",t),"_"),explain:g.Locale.text("chat",n),previous:"identity",handler:function(t){try{g.Action["set_user_".concat(i)](t)}catch{}}},e,e))}catch(t){}},i.show_game=function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];try{var i="**".concat(g.Locale.text("chat","chat_message_text_game_main"),"**\n")+"_".concat(g.Locale.text("chat","chat_message_text_game_ask"),"_");this.mv("game","default","picker",{id:"ask-game",text:i,choices:[{value:"play",icon:"🕹️",selected:!1,label:g.Locale.text("chat","chat_message_text_game_pick_yes"),handler:function(){g.Chat.Game.start(),g.Chat.Intent.update("game",!1)}},{value:"ignore",selected:!1,label:g.Locale.text("chat","chat_message_text_game_pick_no"),handler:function(){g.Chat.Intent.update("game",!1)}}]},t,t)}catch(t){}},i.hide_game=function(){try{this.wv("game")}catch(t){}},i.show_feedback=function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];try{var i="**".concat(g.Locale.text("chat","chat_message_text_feedback_main"),"**")+"\n_".concat(g.Locale.text("chat","chat_message_text_feedback_ask"),"_");this.mv("feedback","default","picker",{id:"ask-feedback",text:i,choices:[{value:"rate",icon:"⭐️",selected:!1,label:g.Locale.text("chat","chat_message_text_feedback_pick_rate"),handler:function(){g.Chat.Feedback.show(),g.Chat.Intent.update("feedback","rate")}},{value:"ignore",selected:!1,label:g.Locale.text("chat","chat_message_text_feedback_pick_ignore"),handler:function(){g.Chat.Intent.update("feedback",!1)}}]},t,t)}catch(t){}},i.show_feedback_submitted=function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];try{var i=g.Locale.text("chat","chat_message_text_feedback_submitted");this.mv("feedback","submitted","text",i,t,t)}catch(t){}},i.hide_feedback=function(){try{this.wv("feedback")}catch(t){}},i.show_compose=function(t){var i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];try{var n=g.Store.$store.messages.compose.is_active||!1;this.hv=t,g.Store.$store.messages.compose.is_active=!0,g.Store.$store.messages.compose.is_automated=i,!0!==n&&(this.gv(),g.Utility.next_render(function(){g.Chat.Scroll.to_last_message(null)}))}catch(t){}},i.hide_compose=function(){try{g.Store.$store.messages.compose.is_active=!1,g.Store.$store.messages.compose.is_automated=!1,this.hv=null}catch(t){}},i.acknowledge_read_send=function(t){try{if(!0!==g.Base.Us.chat.operator_privacy){var i=null;if(0<t.length)for(var n=0;n<g.Store.$store.messages.list.length;n++){var e=g.Store.$store.messages.list[n].fingerprint;-1!==t.indexOf(e)&&(g.Store.$store.messages.list[n].read=!0,i=e)}null!==i&&(g.Store.$store.messages.latest_fingerprint=i)}}catch(t){}},i.error_rejected=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;try{this.fv(t,i||"other")}catch(t){}},i.trigger_will_send_hooks=function(){var t=!1;try{for(var i,n=[],e=g.Library.crisp.client.Message.get_cached_messages(),r=e.length-1;0<=r&&"local"===(null===(i=e[r].user)||void 0===i?void 0:i.source);r--)n.push(e[r]);for(var s=0;s<n.length;s++){var o=n[s];-1===this.bv.indexOf(o.fingerprint)&&(this.bv.push(o.fingerprint),g.Library.crisp.client.Message.receive_message_mirror(o.type,this.iv,o.content,o.fingerprint),t=!0)}}catch(t){}finally{return t}},i.dispatch_local=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,e=3<arguments.length&&void 0!==arguments[3]&&arguments[3];try{var r=g.Base.Us.website.active_operators||[],s={source:"local"};r[0]&&!0!==e?(s.user_id=r[0].user_id,s.nickname=r[0].nickname,r[0].avatar&&(s.avatar=r[0].avatar)):(s.type="website",s.user_id=g.Base.aa,s.nickname=g.Base.Us.website.name),g.Library.crisp.client.Message.receive_message_local(t,i,s,n)}catch(t){}},i.remove=function(t){try{for(var i=0;i<g.Store.$store.messages.list.length;i++)if(g.Store.$store.messages.list[i].fingerprint===t){g.Store.$store.messages.list.splice(i,1),delete g.Store.$store.messages.fingerprints[t];break}}catch(t){}},i.restore=function(){try{this._v(),this.synchronize()}catch(t){}},i.synchronize=function(){try{g.Library.crisp.client.Message.get_message_compose(),g.Library.crisp.client.Message.get_unread_messages(),g.Library.crisp.client.Message.get_message_history(),0===g.Library.crisp.client.Message.count_message_history()&&this.yv()}catch(t){}},i.get_message_from_store=function(t){var i=null;try{for(var n=0;n<g.Store.$store.messages.list.length;n++)if(g.Store.$store.messages.list[n].fingerprint===t){i=g.Store.$store.messages.list[n];break}}catch(t){}finally{return i}},i.check_intent_send=function(){var t=!0;try{!0!==g.Broker.wh&&(t=!1,g.Library.crisp.client.socket.connect())}catch(t){}finally{return t}},i.check_form_identify_lock=function(){try{!0===g.Base.Us.chat.force_identify&&(g.Store.$store.chat.is_locked_identify=!0)}catch(t){}},i.check_form_identify_unlock=function(){try{"true"!==g.Chat.Selector.get("form_container").getAttribute("data-retain-lock")&&(g.Store.$store.chat.is_locked_identify=!1)}catch(t){}},i.has_unsent_messages=function(){var t=!1;try{var t=!0===g.Library.crisp.client.Message.is_sending_messages(),i=g.Store.$store.messages.list;if(!1===t&&0<i.length)for(var n=i.length-1;0<=n;n--){var e,r,s=i[n];if("user"===s.from&&(!0===(null===(e=s.metas)||void 0===e?void 0:e.is_pending)||null!==(r=s.metas)&&void 0!==r&&r.error)){t=!0;break}}}catch(t){}finally{return t}},i._v=function(){try{var t=g.Locale.text("theme_welcome",["default_chat","".concat(g.Base.Us.chat.theme_welcome,"_chat")],[g.Base.Us.website.name]);this.mv("welcome","default","text",t,!1,!1)}catch(t){}},i.kv=function(t,i,n){try{if(!0===this.sv.includes(t)&&!0===i.required){var e=!1;switch(t){case"field":i.value&&(e=!0);break;case"picker":for(var r=0;r<i.choices.length;r++)if(!0===i.choices[r].selected){e=!0;break}}var s=g.Store.$store.messages.prompt_fingerprints.indexOf(n);!1===e?-1===s&&g.Store.$store.messages.prompt_fingerprints.push(n):-1<s&&g.Store.$store.messages.prompt_fingerprints.splice(s,1),g.Store.$store.chat.is_locked_prompt=0<g.Store.$store.messages.prompt_fingerprints.length,g.Chat.Alert.update("warn_prompt",!0===g.Store.$store.chat.is_locked_prompt?"show":"hide")}}catch(t){}},i.xv=function(t,i,n){var e;try{!0!==this.sv.includes(t)||!0!==i.required||-1<(e=g.Store.$store.messages.prompt_fingerprints.indexOf(n))&&(g.Store.$store.messages.prompt_fingerprints.splice(e,1),0===g.Store.$store.messages.prompt_fingerprints.length&&(g.Store.$store.chat.is_locked_prompt=!1,g.Chat.Alert.update("warn_prompt","hide")))}catch(t){}},i.gv=function(){var t=this;try{this.hv&&(g.Date.timestamp()-this.hv>=this.tv?this.hide_compose():g.Utility.set_timeout(function(){t.gv()},this.Q0))}catch(t){}},i.fv=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=!1;try{var e=this.get_message_from_store(t);e&&(e.metas.is_pending=!1,e.metas.error=i),t in this.Fv&&(g.Utility.clear_timeout(this.Fv[t]),delete this.Fv[t],n=!0)}catch(t){}finally{return n}},i.cv=function(t){var i=!0;try{var n=g.Utility.clone(t);if(1==(i=!g.Store.$store.messages.fingerprints[n.fingerprint]))void 0===n.read&&(n.read=!1),void 0===n.metas&&(n.metas={is_new:!1,is_pending:!1,error:null},"field"!==n.type&&"picker"!==n.type||(n.metas.field={value:""})),g.Store.$store.messages.fingerprints[n.fingerprint]=!0,g.Store.$store.messages.list.push(n);else for(var e=0;e<g.Store.$store.messages.list.length;e++)if(g.Store.$store.messages.list[e].fingerprint===n.fingerprint){g.Utility.merge(g.Store.$store.messages.list[e],n);break}this.Ev(n.type,n.content,n.fingerprint,n.from,n.user||{},n.timestamp)}catch(t){}finally{return i}},i.pv=function(t){var i=!1;try{if(!0===g.Store.$store.messages.fingerprints[t]){delete g.Store.$store.messages.fingerprints[t];var n,e={messages:g.Store.$store.messages.list,preview:g.Store.$store.messages.preview};for(n in e){var r=e[n];if(0<r.length)for(var s=0;s<r.length;s++){var o=r[s];if(o.fingerprint===t){r.splice(s,1),this.Cv(o.type,o.content,o.fingerprint,o.from,o.timestamp);break}}}i=!0}}catch(t){}finally{return i}},i.Ev=function(t,i,n,e,r,s){try{var o="local"!==r.source&&-1===this.nv.indexOf(r.source)&&!0;"operator"===e&&(this.hv&&0<s&&s>this.hv&&this.hide_compose(),0<s&&1==o&&(g.Chat.Alert.update("wait_reply","lock"),g.Chat.Intent.update("game",!1),this.kv(t,i,n))),0<s&&(this.Eu=!0,this.$l=s,1==o&&("operator"===e?this.Ao=!0:this.jo=!0),this.jv()),!1===g.Store.$store.base.has_local_messages&&"local"===r.source&&(g.Store.$store.base.has_local_messages=!0)}catch(t){}},i.Cv=function(t,i,n,e,r){try{"operator"===e&&0<r&&this.xv(t,i,n)}catch(t){}},i.jv=function(){try{var t,i,n=!0===this.Eu&&!0!==g.Base.is_activity_outdated();g.Store.$store.base.is_activity_ongoing!==n&&(g.Store.$store.base.is_activity_ongoing=n,"input"!==(i=((null===(t=document.activeElement)||void 0===t?void 0:t.tagName)||"").toLowerCase())&&"textarea"!==i&&g.Chat.Interface.request_dynamic_sizing_properties())}catch(t){}},i.av=function(t){try{var i=this.get_message_from_store(t);i&&(i.metas.is_new=!0,g.Utility.set_timeout(function(){i.metas.is_new=!1},this.X0))}catch(t){}},i.yv=function(){try{this.Av=!0,0<this.dv.length&&(this.acknowledge_read_send(this.dv,!0),this.dv=[]),g.Chat.State.retrigger("intent"),g.Chat.State.retrigger("scroll"),g.Chat.Field.focus_on_foreground(),this.vv(!0)}catch(t){}},i.ov=function(){try{g.Library.crisp.client.Message.set_unread_messages_callback(function(t,i,n){g.Utility.set_timeout(function(){g.Chat.Notification.update_unread(t,i,n)},0)})}catch(t){}},i.uv=function(t){var i=this;try{var n=this.get_message_from_store(t);n&&(n.metas.is_pending=!0,this.Fv[t]=g.Utility.set_timeout(function(){i.error_rejected(t,"timeout")},this.K0))}catch(t){}},i.vv=function(){var t=this,i=0<arguments.length&&void 0!==arguments[0]&&arguments[0];try{g.Chat.Intent.af.game||!1===g.Chat.Intent.af.game||!0!==this.jo||!0===this.Ao||null===this.$v&&(this.$v=g.Utility.set_timeout(function(){try{!(t.$v=null)!==t.Ao&&!0===g.Base.Us.chat.wait_game&&g.Chat.Intent.update("game")}catch(t){}},!0===i?this.Z0:this.Y0))}catch(t){}},i.mv=function(t,i,n,e){var r,s=4<arguments.length&&void 0!==arguments[4]&&arguments[4],o=!(5<arguments.length&&void 0!==arguments[5])||arguments[5];try{if(-1===this.nv.indexOf(t))throw new Error("Source ".concat(t," not allowed"));this.Iv[t]!==i&&(this.Iv[t]=i,r=(new Date).getTime(),"welcome"===t&&(r=0),this.received({type:n,timestamp:r,content:e,fingerprint:"$".concat(t),from:"operator",user:{source:t,type:"website",user_id:g.Base.aa,nickname:g.Base.Us.website.name}},!1,s,o,!0))}catch(t){}},i.wv=function(t){try{if(-1===this.nv.indexOf(t))throw new Error("Source ".concat(t," not allowed"));this.Iv[t]&&(delete this.Iv[t],this.remove("$".concat(t)))}catch(t){}},i.dt=function(){try{this.Eu=!1,this.Ao=!1,this.jo=!1,this.Av=!1,this.$l=0,this.Fv={},this.dv=[],this.bv=[],this.lv=null,this.$v=null,this.hv=null,this.Iv={}}catch(t){}},t}());g.Chat.Message=U;var P=new(function(){function t(){try{this.ns="CrispChatMisc",this.dt()}catch(t){}}var i=t.prototype;return i.init=function(){},i.reset=function(){try{this.dt()}catch(t){}},i.update_operator_details=function(t){try{g.Utility.is_equal(t,this.zv)||g.Chat.State.propagate("operator",t)}catch(t){}},i.dt=function(){try{this.zv={}}catch(t){}},t}());g.Chat.Misc=P;var L=new(function(){function t(){try{this.ns="CrispChatNotification",this.Ov=5,this.Sv=["text","file","animation","audio","picker","field","carousel"],this.dt()}catch(t){}}var i=t.prototype;return i.init=function(){},i.reset=function(){try{this.dt()}catch(t){}},i.update_unread=function(){var t=this,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];try{var r,s=g.Store.$store.minimized.tooltips;0<(this.Io=i)?(g.Store.$store.minimized.pane.unread.count=i,r=!1===g.Store.$store.minimized.tooltips.new_messages.visible,this.Dv(i,n,e,r),null===this.Rv&&(this.Rv=document.title),this.Rv&&!0!==g.Base.is_invisible()&&(document.title="💬".concat(i," - ").concat(this.Rv)),1==r&&(null!==this.Nv&&g.Utility.clear_timeout(this.Nv),this.Nv=g.Utility.set_timeout(function(){t.Nv=null,s.new_messages.visible=!0,s.new_messages.animate=!0,g.Utility.set_timeout(function(){s.new_messages.animate=!1},t.qv)},this.Bv*this.Xo),g.Store.$store.minimized.pane.unread.visible=!0)):(null!==this.Nv&&g.Utility.clear_timeout(this.Nv),s.new_messages.visible=!1,s.new_messages.animate=!1,g.Store.$store.minimized.pane.unread.visible=!1,this.Rv&&(document.title=this.Rv))}catch(t){}},i.check_clearance=function(){try{var t=g.Chat.Selector.get("flow").scrollTop,i=g.Chat.Selector.get("flow").scrollHeight;g.Chat.Selector.get("flow").clientHeight+t>=i-g.Chat.Interface.H0&&g.Chat.Alert.update("new_messages","hide")}catch(t){}},i.Dv=function(t,i,n,e){var r=[];try{for(var s=null,o=[],c=n.length-1;0<=c&&!(-1!==i.indexOf(n[c].fingerprint)&&(r.unshift(n[c]),r.length>=this.Ov));c--);g.Store.$store.messages.preview=[];for(var a=0;a<r.length;a++){var h=r[a],u=g.Utility.clone(h);-1!==this.Sv.indexOf(h.type)&&g.Store.$store.messages.preview.push(u),null===(s=a===r.length-1&&null===s?u.fingerprint:s)&&null!==this.Mv||o.push(u)}null!==s&&(this.Mv=s);for(var l=0;l<o.length;l++)o[l].animate=!0;g.Utility.set_timeout(function(){for(var t=0;t<o.length;t++)o[t].animate=!1},(!0===e?this.Bv*this.Xo:0)+this.Tv)}catch(t){}finally{return r}},i.dt=function(){try{this.Io=0,this.Xo=1e3,this.Bv=.1,this.Nv=null,this.Mv=null,this.Rv=null,this.qv=500,this.Tv=1e3}catch(t){}},t}());g.Chat.Notification=L;var J=new(function(){function t(){try{this.ns="CrispChatScroll",this.dt()}catch(t){}}var i=t.prototype;return i.init=function(){},i.reset=function(){try{this.dt()}catch(t){}},i.to=function(){var t,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;try{null===i&&(i=(t=g.Chat.Selector.get("flow")).scrollHeight-t.clientHeight),g.Chat.State.propagate("scroll",i),g.Chat.Notification.check_clearance()}catch(t){}},i.to_last_message=function(){var t,i,n,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"to",r=!1;try{!0===g.Chat.Interface.chat_is_visible()&&!0===g.Chat.Message.Av&&(t=g.Chat.Selector.get("flow").scrollTop,i=g.Chat.Selector.get("flow").scrollHeight,n=g.Chat.Selector.get("flow").clientHeight,(!t||n+t>=i-this.V0)&&(r=!0,this.to()),!1===r&&"from"===e&&g.Chat.Alert.update("new_messages","show"))}catch(t){}finally{return r}},i.dt=function(){try{this.V0=0,this.T0=0}catch(t){}},t}());g.Chat.Scroll=J;var W=new(function(){function t(){try{this.ns="CrispChatSelector",this.Uv={header:"cc-1gpay",content:"cc-rfbfu",flow:"cc-13yzx",flow_messages:"cc-1hvof",form_container:"cc-1o220",form_act:"cc-haqb6",form_textarea_message:"cc-1icw9",form_input_attach:"cc-12c2o"},this.Yu(),this.dt()}catch(t){}}var i=t.prototype;return i.init=function(){},i.reset=function(){try{this.dt(),this.Yu()}catch(t){}},i.get=function(t){var i=null;try{if(void 0!==this.Pv[t])i=this.Pv[t];else{if(void 0===this.Uv[t])throw new Error("Selector with namespace ".concat(t," not found"));if(this.Tf){if(null===(i=this.Tf.querySelector(".".concat(this.Uv[t]))))throw new Error("Could not select the element with namespace: ".concat(t));this.Pv[t]=i}}}catch(t){}finally{return i}},i.bind_all=function(){try{this.Lv(),this.Jv()}catch(t){}},i.Lv=function(){try{this.Wv=document.querySelector('head meta[name="viewport"]')}catch(t){}},i.Jv=function(){try{this.Uf=this.Tf.querySelector(".cc-1no03")}catch(t){}},i.Yu=function(){try{this.Wv=null,this.Tf=null,this.Uf=null}catch(t){}},i.dt=function(){try{this.Pv={}}catch(t){}},t}());g.Chat.Selector=W;var V=new(function(){function t(){try{this.ns="CrispChatSpeech",this.Xo=1e3,this.Vv=9e4,this.Hv=64e3,this.Gv=[["weba","audio/webm; codecs=opus"],["weba","audio/webm; codecs=vorbis"],["oga","audio/ogg; codecs=vorbis"],["m4a","audio/mp4; codecs=mp4a.40.5"]],this.dt()}catch(t){}}var i=t.prototype;return i.reset=function(){try{this.dt()}catch(t){}},i.record=function(){var e=this;try{!0===g.Feature.has_audio_recording()&&!0===g.Base.Us.chat.audio_record&&null===this.Kv&&navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(t){for(var i=0;i<e.Gv.length;i++){var n=e.Gv[i];if(!0===window.MediaRecorder.isTypeSupported(n[1])){e.Yv=n[0],e.Zv=n[1];break}}if(null===e.Yv||null===e.Zv)throw new Error("No acceptable audio codec supported");e.Kv=new window.MediaRecorder(t,{mimeType:e.Zv,audioBitsPerSecond:e.Hv}),e.Kv.addEventListener("start",e.Xv.Jt(e)),e.Kv.addEventListener("stop",e.Qv.Jt(e)),e.Kv.addEventListener("resume",e.td.Jt(e)),e.Kv.addEventListener("pause",e.nd.Jt(e)),e.Kv.addEventListener("dataavailable",e.ed.Jt(e)),e.Kv.addEventListener("error",e.rd.Jt(e)),e.Kv.start()}).catch(function(t){alert(g.Locale.text("chat","chat_form_speech_capture_error"))})}catch(t){}},i.cancel=function(){try{null!==this.Kv&&!0!==this.sd&&(this.sd=!0,this.od=!0,this.Kv.stop())}catch(t){}},i.send=function(){try{null!==this.Kv&&!0!==this.sd&&(this.sd=!0,this.Kv.stop())}catch(t){}},i.Xv=function(){try{this.cd=0,this.ad=0,g.Store.$store.chat.speech.duration=this.cd,g.Store.$store.chat.speech.progress=this.ad,this.td()}catch(t){}},i.Qv=function(){var t,i;try{g.Store.$store.chat.speech.state="none",this.hd(),!0!==this.od&&(t=g.Date.timestamp(),(i=new window.File(this.ud,"audio_".concat(t,".").concat(this.Yv),{type:this.Zv.split(";")[0].trim(),lastModified:t})).duration=this.cd,g.Chat.File.handle_file_change([i]));for(var n=this.Kv.stream.getTracks(),e=0;e<n.length;e++)n[e].stop();this.dt()}catch(t){}},i.nd=function(){try{this.hd(),g.Store.$store.chat.speech.state="paused"}catch(t){}},i.td=function(){try{g.Store.$store.chat.speech.state="recording",this.ld()}catch(t){}},i.ed=function(t){try{0<t.data.size&&this.ud.push(t.data)}catch(t){}},i.rd=function(t){try{alert(g.Locale.text("chat","chat_form_speech_capture_error"))}catch(t){}},i.ld=function(){var t,i=this;try{null===this.fd&&(t=this.Vv/this.Xo,this.fd=g.Utility.set_interval(function(){i.cd>=t?i.Kv.pause():(i.cd++,i.ad=Math.floor(100*Math.min(i.cd/t,1)),g.Store.$store.chat.speech.duration=i.cd,g.Store.$store.chat.speech.progress=i.ad)},this.Xo))}catch(t){}},i.hd=function(){try{null!==this.fd&&(g.Utility.clear_interval(this.fd),this.fd=null)}catch(t){}},i.dt=function(){try{this.Kv=null,this.ud=[],this.cd=0,this.ad=0,this.Yv=null,this.Zv=null,this.sd=!1,this.od=!1,this.fd=null}catch(t){}},t}());g.Chat.Speech=V;var H=new(function(){function t(){try{this.ns="CrispChatState",this.vd=250,this.dd=240,this.yd=[["show","unlock"],["unlock","show"],["hide","lock"],["lock","hide"],["lock","show"]],this.pd={trigger:this.md,alert:this.wd,intent:this.gd,operator:this.bd,scroll:this._d,maximized:this.kd,textarea:this.xd},this.Fd(),this.dt()}catch(t){}}var i=t.prototype;return i.init=function(){},i.reset=function(t){var i=this;try{this.dt(),t.push(function(){i.Fd()})}catch(t){}},i.receive=function(t){var i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];try{var n,e,r=[];for(n in t)t.hasOwnProperty(n)&&(g.Utility.is_equal(t[n],this.Ed[n])||(r.push(n),this.Ed[n]=t[n],!1===i&&void 0!==this.Cd[n]&&delete this.Cd[n]));for(e=0;e<r.length;e++)n=r[e],this.pd[n].Jt(this)(this.Ed[n])}catch(t){}},i.propagate=function(t,i){var n,e=this,r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){},o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:function(){};try{!0!==r&&g.Utility.is_equal(this.Ed[t],i)?"function"==typeof s&&s(!1):(this.Cd[t]=i,null!==this.jd&&(g.Utility.clear_timeout(this.jd),this.jd=null),(n=g.Utility.clone(this.Ed))[t]=i,this.receive(n,!0),this.jd=g.Utility.set_timeout(function(){var t;g.Utility.is_empty(e.Cd)?"function"==typeof s&&s(!1):(t=g.Utility.clone(e.Cd),e.Cd={},e.jd=null,g.Library.crisp.client.Session.set_state(t,function(t){t?"function"==typeof o&&o():"function"==typeof s&&s(!0)}))},this.vd))}catch(t){}},i.restore=function(t){try{for(var i in!0===g.Base.is_full_view()&&!0!==g.Base.yl.lock_maximized&&(t.maximized=!1),this.Ad)void 0===t[i]&&(t[i]=this.Ad[i]);this.$d=!0,this.Ed=t,this.Id=g.Utility.keys(this.Ed)}catch(t){}},i.retrigger=function(t){try{this.zd(t,this.Ad[t])}catch(t){}},i.trigger_default_all=function(){var t,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];try{for(t in this.Ad)this.Ad.hasOwnProperty(t)&&this.zd(t,this.Ad[t],-1!==i.indexOf(t))}catch(t){}},i.zd=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];try{if("function"!=typeof this.pd[t])throw new Error("No such state handler: ".concat(t));void 0===this.Ed[t]&&(this.Ed[t]=i),this.pd[t].Jt(this)(this.Ed[t],n)}catch(t){}},i.Od=function(t){var i=!1;try{var n=this.Id.indexOf(t);-1!==n&&(this.Id.splice(n,1),i=!0)}catch(t){}finally{return i}},i.md=function(t){var i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];try{if(!1===i&&(this.Od("trigger"),0<(null==t?void 0:t.length)))for(var n=0;n<t.length;n++)g.Trigger.mark_processed(t[n])}catch(t){}},i.wd=function(t){var i,n,e,r,s,o,c,a,h=1<arguments.length&&void 0!==arguments[1]&&arguments[1];try{if(!1===h){this.Od("alert");var u=!1,l={};for(i in t)if(t.hasOwnProperty(i)){if(n=t[i],e=g.Chat.Alert.af[i],r=!1,e===n)r=!0;else if("unlock"!==n&&"lock"===e)r=!0;else for(a=0;a<this.yd.length;a++)e===(s=this.yd[a])[0]&&n===s[1]&&(r=!0);if(c="hide"===n||"lock"===n,1==(o="show"===n||"unlock"===n)&&(u=l[i]=!0),!1===r){if(1==o)g.Chat.Alert.hook("show",i);else{if(1!=c)throw new Error("Unknown action: ".concat(n));g.Chat.Alert.hook("hide",i)}g.Chat.Alert.af[i]=n,g.Chat.Field.focus_on_foreground()}else g.Chat.Alert.af[i]=n}g.Store.$store.chat.current_alerts=!0===u?l:null}}catch(t){}},i.gd=function(t){var i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];try{if(g.Chat.Intent.af=t,!1===i){var n,e=this.Od("intent");for(n in t)g.Chat.Intent.toggle(n,t[n],!e);g.Chat.Intent.cleanup(t)}}catch(t){}},i.bd=function(t){var i,n,e,r,s,o,c=1<arguments.length&&void 0!==arguments[1]&&arguments[1];try{!1===c&&(this.Od("operator"),g.Chat.Misc.zv=t||{},g.Utility.is_empty(g.Chat.Misc.zv)?(i="initial",e="website",r=g.Base.aa):(i="ongoing",e=t.type||"operator",r=t.user_id,s=t.avatar,n="website"===t.type?t.nickname:g.Library.crisp.web.Name.parse_first_name(t.nickname)),(o=s||r?g.Avatar.url(this.dd,e,r,s):o)&&("ongoing"===i&&(g.Store.$store.chat.ongoing_operator={type:e,name:n,user_id:r,url:o},!0===g.Base.Us.chat.ongoing_operator_face&&(g.Store.$store.minimized.pane.is_ongoing=!0)),g.Store.$store.chat.status_marker=i),g.Chat.Interface.request_dynamic_sizing_properties(!0))}catch(t){}},i._d=function(t){var i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];try{!1===i&&!1===this.Od("scroll")&&(g.Chat.Scroll.T0=t,g.Utility.next_render(function(){g.Chat.Selector.get("flow").scrollTop=g.Chat.Scroll.T0}))}catch(t){}},i.kd=function(t){var i,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];try{!1===n&&(i=!0!==this.Od("maximized")&&!0,!1===(t=!0===g.Base.yl.lock_maximized||t)?(g.Chat.Interface.toggle_visibility("pane",i),g.Chat.Field.blur_from_foreground(),g.Chat.Viewport.unadapt(),g.Chat.Picker.hide(),g.Chat.Feedback.hide(),g.Chat.Interface.toggle_channel_dropdown(!1),g.Chat.Frame.close(),g.Chat.Game.stop(),g.Action.event("chat:closed")):(!0===g.Store.$store.chat.helpdesk.only&&"helpdesk"!==g.Store.$store.chat.mode&&g.Chat.Helpdesk.show_search(),g.Chat.Interface.toggle_visibility("chat",i),g.Chat.Field.focus_on_foreground(),g.Chat.Viewport.adapt(),g.Chat.Notification.check_clearance(),g.Action.event("chat:opened")))}catch(t){}},i.xd=function(t){var i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];try{!1===i&&(this.Od("textarea"),g.Action.set_message_text(t))}catch(t){}},i.Fd=function(){try{this.Ad={trigger:g.Trigger.mu,alert:g.Chat.Alert.af,intent:g.Chat.Intent.af,operator:g.Chat.Misc.zv,scroll:g.Chat.Scroll.T0,maximized:g.Chat.Interface.S0,textarea:g.Chat.Field.Lf}}catch(t){}},i.dt=function(){try{this.$d=!1,this.Ed={},this.Cd={},this.Id=[],this.jd=null}catch(t){}},t}());g.Chat.State=H;var G=new(function(){function t(){try{this.ns="CrispChatViewport",this.Sd=/;/g,this.dt()}catch(t){}}var i=t.prototype;return i.init=function(){},i.reset=function(){try{this.dt()}catch(t){}},i.adapt=function(){var t,i;try{!0===g.Base.is_full_view()?(!1===this.Dd&&(null===this.Rd&&(this.Rd=this.lt()),(t=g.Utility.clone(this.Rd)).width="device-width",t["initial-scale"]="1",t["maximum-scale"]="1",t["user-scalable"]="0",i=this.Nd(t),null!==g.Chat.Selector.Wv?g.Chat.Selector.Wv.setAttribute("content",i):(g.Chat.Selector.Wv=g.Template.dom(g.Template.render("viewport",{content:i})),document.querySelector("head").appendChild(g.Chat.Selector.Wv))),this.Dd=!0):this.Dd=!1}catch(t){}},i.unadapt=function(){var t;try{!0===this.Dd&&(null!==g.Chat.Selector.Wv&&0<g.Chat.Selector.Wv.length&&((t=this.Nd(this.Rd))?g.Chat.Selector.Wv.setAttribute("content",t):(g.Chat.Selector.Wv.remove(),g.Chat.Selector.Wv=null)),this.Dd=!1)}catch(t){}},i.lt=function(){var t={};try{if(t={},null!==g.Chat.Selector.Wv){var i=g.Chat.Selector.Wv.getAttribute("content");if(i=(i=i.trim()).replace(this.Sd,","))for(var n,e,r,s,o=-1!==i.indexOf(",")?i.split(","):[i],c=0;c<o.length;c++)-1!==(n=o[c]).indexOf("=")&&(r=(e=n.split("="))[0].trim(),s=e[1].trim(),r&&s&&(t[r]=s))}}catch(t){}finally{return t}},i.Nd=function(t){var i="";try{var n,e=[];for(n in t)t.hasOwnProperty(n)&&e.push([n,t[n]].join("="));i=e.join(", ")}catch(t){}finally{return i}},i.dt=function(){try{this.Dd=!1,this.Rd=null}catch(t){}},t}());g.Chat.Viewport=G;var K=new(function(){function t(){try{this.ns="CrispOverlay",this.Event=void 0,this.qd=250,this.Bd="#",this.Md=5,this.Td="overlay",this.Ud="1",this.Pd="0",this.Ld={macos:"⌘K",windows:"ctrl+k",linux:"ctrl+k"},this.dt()}catch(t){}}var i=t.prototype;return i.reset=function(){try{this.dt()}catch(t){}},i.open=function(){var t=this,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,n=!1;try{!0===g.Store.$store.base.configuration.chat.overlay_search&&(n=!0,null===this.Jd&&!0!==this.if&&(this.if=!0,g.Partial.load_bundle("overlay",function(){t.Wd(i)},function(){t.close()})))}catch(t){}finally{return n}},i.close=function(){var t=!1;try{null!==this.Jd&&(this.Jd.remove(),this.Jd=null,!(this.if=!1)===g.Chat.xo&&g.Chat.Field.focus_on_foreground(),t=!(g.Store.$store.overlay.is_opened=!1))}catch(t){}finally{return t}},i.expand_sidebar=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];try{g.Store.$store.overlay.sidebar.expanded=t,g.Library.crisp.client.Storage.set_stamp_local(this.Td,[g.Base.aa,"sidebar","retract"],!0===t?this.Ud:this.Pd)}catch(t){}},i.update_prompt_field=function(t){var i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];try{!0===i&&t&&t[0]!==this.Bd&&(t="".concat(this.Bd).concat(t)),g.Store.$store.overlay.prompt.query!==t&&!0!==g.Store.$store.overlay.prompt.thinking&&(g.Store.$store.overlay.prompt.query=t,g.Overlay.proceed_search())}catch(t){}},i.focus_on_prompt_field=function(){var i=this,t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];try{g.Utility.set_timeout(function(){var t=null===(t=i.Jd)||void 0===t?void 0:t.querySelector(".cc-ldfam");t&&t.focus()},!0===t?0:this.qd)}catch(t){}},i.move_results_source=function(){var i=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;try{var n=g.Store.$store.overlay.results.expanded+t;(n=n>=g.Store.$store.overlay.results.sources.length?0:n)<0&&(n=g.Store.$store.overlay.results.sources.length-1),g.Store.$store.overlay.results.expanded=n,g.Utility.next_render(function(){var t=null===(t=i.Jd)||void 0===t?void 0:t.querySelector("".concat(".cc-dk9cj",'[data-active="true"]'));t&&t.scrollIntoView({behavior:"smooth",block:"nearest"})})}catch(t){}},i.select_results_source=function(t){var i,n;try{switch(null===(i=t.target)||void 0===i?void 0:i.type){case"link":g.Utility.open_link("//".concat(t.target.domain).concat(t.target.path));break;case"helpdesk":!0===g.Base.is_invisible()||!0!==g.Chat.xo?(n=g.Chat.Interface.generate_channel_link("helpdesk"))&&g.Utility.open_link("".concat(n).concat(t.target.locale,"/article/")+"".concat(t.target.bang,"/")):!0===g.Chat.Helpdesk.show_article(t.target.locale,t.target.bang,t.title)&&g.Action.do_overlay_close()}}catch(t){}},i.proceed_search=function(){var t,i,n,e,r;try{!0!==g.Store.$store.overlay.prompt.thinking&&(t=(g.Store.$store.overlay.prompt.query||"").trim(),i=g.Store.$store.overlay.prompt.locale,n=g.Library.crisp.client.socket.connected,r=1==(e=(null==t?void 0:t[0])===this.Bd)?t.slice(this.Bd.length):t,g.Store.$store.overlay.prompt.thinking=0<r.length,g.Store.$store.overlay.results.query=t,g.Store.$store.overlay.results.category=e,g.Store.$store.overlay.results.answer=[],g.Store.$store.overlay.results.sources=[],g.Store.$store.overlay.results.expanded=0,g.Store.$store.overlay.results.empty=!1,g.Store.$store.overlay.results.error=!1,r?(g.Store.$store.overlay.prompt.asked=!0)==e?!0===n?g.Library.crisp.client.Overlay.get_overlay_category_suggest(r):this.handle_search_answer():!0===n?g.Library.crisp.client.Overlay.get_overlay_answer_search(r,i):this.handle_search_sources(null,!0):g.Store.$store.overlay.prompt.asked=!1)}catch(t){}},i.handle_search_chunk=function(t){try{g.Store.$store.overlay.results.answer.push(t)}catch(t){}},i.handle_search_answer=function(){var t,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;try{i?g.Store.$store.overlay.results.answer=[i]:""===i?(g.Store.$store.overlay.results.answer=[g.Locale.text("overlay","results_answer_quickie_empty")],g.Store.$store.overlay.results.empty=!0):(g.Store.$store.overlay.results.answer=[],g.Store.$store.overlay.results.error=!0),g.Store.$store.overlay.prompt.thinking=!1,null===n||-1===(t=g.Store.$store.overlay.browse.recent).indexOf(n)&&(t.unshift(n),t.length>this.Md&&t.splice(this.Md),this.Vd(t)),this.focus_on_prompt_field()}catch(t){}},i.handle_search_sources=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];try{g.Store.$store.overlay.results.sources=t||[],!0===i&&(null===t&&(g.Store.$store.overlay.results.error=!0),g.Store.$store.overlay.prompt.thinking=!1)}catch(t){}},i.Wd=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;try{var i=g.Template.dom(g.Template.render("overlay"));this.Jd=i,g.Store.$store.overlay.sidebar.expanded=g.Library.crisp.client.Storage.get_stamp_local(this.Td,[g.Base.aa,"sidebar","retract"])!==this.Pd&&!0,g.Base.Co.appendChild(i),this.so(),g.Overlay.Event.bind_all(),g.Template.vue(i),this.focus_on_prompt_field(),g.Store.$store.overlay.is_opened=!0,this.if=!1,"function"==typeof t&&t()}catch(t){}},i.Hd=function(){var t,i=null;try{"function"!=typeof(null===JSON||void 0===JSON?void 0:JSON.parse)||null!==(t=g.Library.crisp.client.Storage.get_stamp_local(this.Td,[g.Base.aa,"browse","recent"])||null)&&(i=JSON.parse(t))}catch(t){}finally{return i}},i.Vd=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];try{"function"==typeof(null===JSON||void 0===JSON?void 0:JSON.stringify)&&g.Library.crisp.client.Storage.set_stamp_local(this.Td,[g.Base.aa,"browse","recent"],JSON.stringify(t))}catch(t){}},i.so=function(){try{var t,i,n,e,r=g.Base.Us.overlay,s=g.Locale.code(),o={branding_link:"".concat(g.Store.$store.base.environment.url.crisp_web)+"/".concat(g.Locale.web(),"/livechat/")+"?ref=overlay"+"&domain=".concat(g.Store.$store.base.website.domain)+"&name=".concat(encodeURIComponent(g.Store.$store.base.website.name)),has_contact:!0!==g.Base.is_invisible(),browse:{recent:this.Hd()||[],frequent:(null===(t=r.search)||void 0===t?void 0:t[s])||(null===(i=r.search)||void 0===i?void 0:i.default)||[],tags:(null===(n=r.category)||void 0===n?void 0:n[s])||(null===(e=r.category)||void 0===e?void 0:e.default)||[]}};g.Utility.merge(g.Store.$store.overlay,o),g.Store.$store.overlay.prompt.locale=s,g.Store.$store.overlay.prompt.shortcut=this.Ld[g.Feature.operating_system()]||""}catch(t){}},i.dt=function(){try{this.Jd=null,this.if=!1}catch(t){}},t}());g.Overlay=K;var Y=new(function(){function t(){try{this.ns="CrispOverlayEvent",this.bt=["identity_action_retract_click","browse_navigate_button_click","browse_tag_button_click","prompt_controls_aside_expand_click","prompt_controls_action_close_click","prompt_field_keydown","prompt_field_submit_button_click","entice_question_picker_button_click","results_error_button_click","results_support_button_click","results_sources_result_click","results_sources_result_details_target_click","box_content_wheel","box_content_scroll","keydown"],this.So=13,this.Gd=27,this.gf=38,this.bf=40,this.xf=75,this.Kd=10,this.dt()}catch(t){}}var i=t.prototype;return i.reset=function(){try{this.dt()}catch(t){}},i.identity_action_retract_click=function(){try{g.Overlay.expand_sidebar(!1)}catch(t){}},i.browse_navigate_button_click=function(t){try{g.Overlay.update_prompt_field(t),g.Overlay.focus_on_prompt_field()}catch(t){}},i.browse_tag_button_click=function(t){try{g.Overlay.update_prompt_field(t,!0),g.Overlay.focus_on_prompt_field()}catch(t){}},i.prompt_controls_aside_expand_click=function(){try{g.Overlay.expand_sidebar(!0)}catch(t){}},i.prompt_controls_action_close_click=function(){try{g.Action.do_overlay_close()}catch(t){}},i.prompt_field_keydown=function(t){try{if(t.keyCode===this.So&&!t.shiftKey)return t.preventDefault(),t.stopPropagation(),void g.Overlay.proceed_search()}catch(t){}},i.prompt_field_submit_button_click=function(){try{g.Overlay.proceed_search()}catch(t){}},i.entice_question_picker_button_click=function(t){try{g.Overlay.update_prompt_field(t),g.Overlay.focus_on_prompt_field()}catch(t){}},i.results_error_button_click=function(){try{g.Overlay.proceed_search()}catch(t){}},i.results_support_button_click=function(){try{g.Action.do_chat_show(),g.Action.do_chat_open(function(){g.Action.do_overlay_close(),!0===g.Chat.xo&&g.Chat.Interface.toggle_chat_mode()})}catch(t){}},i.results_sources_result_click=function(t){try{g.Store.$store.overlay.results.expanded!==t?g.Store.$store.overlay.results.expanded=t:g.Store.$store.overlay.results.expanded=-1}catch(t){}},i.results_sources_result_details_target_click=function(t){try{g.Overlay.select_results_source(t)}catch(t){}},i.box_content_wheel=function(t){try{g.Utility.unwind_wheel(t,"cc-1dfvb")}catch(t){}},i.box_content_scroll=function(t,i){var n;try{!i.target||(n=i.target.scrollTop>=this.Kd)!==g.Store.$store.overlay[t].scrolled&&(g.Store.$store.overlay[t].scrolled=n)}catch(t){}},i.keydown=function(t){try{if(t.keyCode===this.Gd)return t.preventDefault(),void g.Action.do_overlay_close();if(t.keyCode===this.xf&&(t.ctrlKey||t.metaKey))return t.preventDefault(),void g.Overlay.focus_on_prompt_field(!0);if(t.keyCode===this.gf||t.keyCode===this.bf)return t.preventDefault(),t.stopPropagation(),void g.Overlay.move_results_source(t.keyCode===this.gf?-1:1)}catch(t){}},i.bind_all=function(){try{g.Store.bind_events("overlay",this.bt,this)}catch(t){}},i.dt=function(){try{this.Yd=null}catch(t){}},t}());g.Overlay.Event=Y;var Z=new(function(){function t(){try{this.ns="CrispMagnify",this.Event=void 0,this.Tl={image:["image/jpeg","image/jpg","image/webp","image/png","image/gif"],video:["video/mp4","video/webm"]},this.Zd=250,this.Xd=["image","video"],this.dt()}catch(t){}}var i=t.prototype;return i.reset=function(){try{this.dt()}catch(t){}},i.magnify=function(t,i){var n,e=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;try{!0!==this.if&&(this.if=!0,n=this.Qd(-1!==this.Xd.indexOf(t)?s:null),g.Utility.merge(g.Store.$store.magnify,{state:"loading",type:t,source:i,name:r,messages:n}),g.Partial.load_bundle("magnify",function(){e.Wd()},function(){e.disappear()},i))}catch(t){}},i.disappear=function(){try{this.ty&&this.ty.remove(),!(this.if=!1)===g.Chat.xo&&g.Chat.Field.focus_on_foreground()}catch(t){}},i.navigate=function(t){try{var i,n=g.Store.$store.magnify.messages[t];!n||!0!==g.Chat.xo||(i=g.Chat.Message.get_message_from_store(n.fingerprint))&&this.magnify(n.type,i.content.url,i.content.name,i.fingerprint)}catch(t){}},i.Wd=function(){try{var t=g.Template.dom(g.Template.render("magnify"));this.ty=t;var i=document.querySelector(".cc-1hbab");i?i.parentNode.replaceChild(t,i):g.Base.Co.appendChild(t),g.Magnify.Event.bind_all(),g.Template.vue(t),g.Utility.set_timeout(function(){t.focus()},this.Zd),this.if=!1}catch(t){}},i.Qd=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,i={previous:null,next:null};try{if(null!==t&&!isNaN(Number(t)))for(var n=parseInt(t,10),e=g.Library.crisp.client.Message.get_cached_messages(),r=0;r<e.length;r++)if(e[r].fingerprint===n){if(0<r)for(var s=r-1;0<=s;s--){var o=e[s],c=this.iy(o);if(c&&o){i.previous={fingerprint:o.fingerprint,type:c};break}}if(r<e.length-1)for(var a=r+1;a<e.length;a++){var h=e[a],u=this.iy(h);if(u){i.next={fingerprint:h.fingerprint,type:u};break}}break}}catch(t){}finally{return i}},i.iy=function(t){var i=null;try{var n,e=(null===(n=t.content)||void 0===n?void 0:n.type)||null;"file"===t.type&&(!0===this.Tl.image.includes(e)&&(i="image"),!0===this.Tl.video.includes(e)&&(i="video"))}catch(t){}finally{return i}},i.dt=function(){try{this.ty=null,this.if=!1}catch(t){}},t}());g.Magnify=Z;var X=new(function(){function t(){try{this.ns="CrispMagnifyEvent",this.bt=["disappear_fuzzy","disappear","keydown","navigate_click"],this.Gd=27,this.ny=37,this.ey=39}catch(t){}}var i=t.prototype;return i.disappear_fuzzy=function(t){try{null!=t&&t.target&&!0===t.target.classList.contains("cc-1hbab")&&g.Magnify.disappear()}catch(t){}},i.disappear=function(){try{g.Magnify.disappear()}catch(t){}},i.navigate_click=function(t){try{g.Magnify.navigate(t)}catch(t){}},i.keydown=function(t){try{switch(t.keyCode){case this.Gd:g.Magnify.disappear();break;case this.ny:g.Magnify.navigate("previous");break;case this.ey:g.Magnify.navigate("next")}}catch(t){}},i.bind_all=function(){try{g.Store.bind_events("magnify",this.bt,this)}catch(t){}},t}());g.Magnify.Event=X;var Q=new(function(){function t(){try{this.ns="CrispBrowsing",this.Assist=void 0,this.Yu()}catch(t){}}var i=t.prototype;return i.reset=function(){try{g.Utility.reset_instance_children(g.Browsing),this.Yu()}catch(t){}},i.prepare=function(i){var n=this;try{g.Partial.load_bundle("browsing",function(){g.Partial.load_dependency("browsing","browsing","browsing.js",function(t){n.ry(i,t)})})}catch(t){}},i.ry=function(t,i){try{g.Library.crisp.client.Browsing.init({resume:t.resume||!1,deps:{tree_mirror:i.TreeMirrorClient}},function(){},function(){})}catch(t){}},i.Yu=function(){try{this.sy=null,this.oy=null}catch(t){}},t}());g.Browsing=Q;var tt=new(function(){function t(){try{this.ns="CrispBrowsingAssist",this.cy="assist",this.ay=500,this.hy=750,this.uy=100,this.ly=5,this.fy=600,this.Yu(),this.dt()}catch(t){}}var i=t.prototype;return i.reset=function(){try{this.stop(),this.Yu(),this.dt()}catch(t){}},i.start=function(){try{null===g.Browsing.oy&&(g.Browsing.oy=this.cy,g.Browsing.sy=g.Template.dom(g.Template.render("browsing_assist")),this.vy=g.Browsing.sy.querySelector(".cc-etwrt"),g.Base.Co.appendChild(g.Browsing.sy),g.Template.vue(g.Browsing.sy))}catch(t){}},i.stop=function(){try{g.Browsing.oy===this.cy&&(g.Browsing.oy=null,g.Browsing.sy.remove(),g.Browsing.sy=null,this.vy=null)}catch(t){}},i.pipe_mouse=function(t){try{g.Browsing.oy===this.cy&&null!==this.vy&&t.mouse&&(this.vy.style.setProperty("display","inline-block","important"),this.vy.style.setProperty("left","".concat(t.mouse.x,"px"),"important"),this.vy.style.setProperty("top","".concat(t.mouse.y,"px"),"important"))}catch(t){}},i.pipe_scroll=function(t){var i=this;try{if(g.Browsing.oy===this.cy&&t.scroll&&window.scroll){null!==this.dy&&g.Utility.clear_interval(this.dy);var n,e={x:window.scrollX,y:window.scrollY},r={x:0,y:0};for(n in r)r.hasOwnProperty(n)&&(r[n]=(t.scroll[n]-e[n])/this.uy);var s=0,o=this.ay/this.uy;0<o&&(0!==r.x||0!==r.y)&&(g.Library.crisp.client.Browsing.toggle_ignore_scroll_event(!0),this.dy=g.Utility.set_interval(function(){e.x+=r.x,e.y+=r.y,window.scroll(e.x,e.y),++s>=i.uy&&(g.Utility.clear_interval(i.dy),(i.dy=null)!==i.yy&&g.Utility.clear_timeout(i.yy),i.yy=g.Utility.set_timeout(function(){i.yy=null,g.Library.crisp.client.Browsing.toggle_ignore_scroll_event(!1)},i.hy))},o))}}catch(t){}},i.pipe_click=function(t){var i,n,e,r,s=this;try{g.Browsing.oy===this.cy&&(null!==this.vy&&(this.vy.setAttribute("data-is-clicking","true"),null!==this.py&&g.Utility.clear_timeout(this.py),this.py=g.Utility.set_timeout(function(){s.py=null,s.vy.removeAttribute("data-is-clicking")},this.fy)),t.click&&(i=t.click.x-this.ly,n=t.click.y,i<0&&(i=0),e=document.elementFromPoint(i,n),(r=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,window,null,t.click.x,t.click.y,0,0,!1,!1,!1,!1,0,null),r.wr=!0,e&&e.dispatchEvent(r)))}catch(t){}},i.Yu=function(){try{this.vy=null}catch(t){}},i.dt=function(){try{this.dy=null,this.yy=null,this.py=null}catch(t){}},t}());g.Browsing.Assist=tt;var it=new(function(){function t(){try{this.ns="CrispCall",this.Event=null,this.my=6,this.Xo=1e3,this.dt()}catch(t){}}var i=t.prototype;return i.reset=function(){try{this.dt()}catch(t){}},i.ring=function(t){var i=this;try{this.wy(),g.Sound.initialize("call"),g.Utility.merge(g.Store.$store.call,{mode:t.mode,size:"maximized",state:null,duration:0,user:{user_id:t.user.user_id||g.Base.aa,nickname:g.Library.crisp.web.Name.parse_first_name(t.user.nickname)||g.Base.Us.website.name,type:t.user.user_id?"operator":"website"},actions:this.gy(t.mode),muted:{audio:!1,video:!1}}),g.Partial.load_bundle("call",function(){i.by()})}catch(t){}},i.screen=function(){var t=this;try{this.wy(),g.Partial.load_bundle("call",function(){t._y()})}catch(t){}},i.stop=function(){try{this.wy(),g.Sound.start("call","call-hangup")}catch(t){}},i.success=function(t){try{switch(t){case"media_remote":this.ky();break;case"media_local":this.xy()}}catch(t){}},i.error=function(){try{this.wy(),g.Sound.start("call","call-hangup")}catch(t){}},i.toggle_media_status=function(t){var i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];try{for(var n=null,e=0;e<g.Store.$store.call.actions.length;e++){var r=g.Store.$store.call.actions[e];if(r.type===t){n=r;break}}null!==n&&(n.state=i),g.Store.$store.call.muted[t]=!1===i}catch(t){}},i.toggle_fullscreen_mode=function(){var t,i;try{"minimized"===g.Store.$store.call.size||!0!==this.Fy("remote")||(t=this.Ey.querySelector('.cc-1k3n2[data-type="remote"] video'))&&(i=null,"function"==typeof(i=!1===this.Cy?t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullScreen||null:t.exitFullscreen||t.msExitFullscreen||t.mozExitFullScreen||t.webkitExitFullScreen||null)&&i.Jt(t)())}catch(t){}},i.toggle_fullscreen_aspect_ratio=function(){var t;try{this.Cy=!!document.fullscreenElement,!0!==this.Fy("remote")||(t=this.Ey.querySelector('.cc-1k3n2[data-type="remote"]'))&&(!0===this.Cy?t.setAttribute("data-aspect","contain"):t.removeAttribute("data-aspect"))}catch(t){}},i.reset_position=function(){try{var t=this.Ey.querySelector(".cc-iy8mn");t&&(t.style.removeProperty("top"),t.style.removeProperty("left"))}catch(t){}},i.by=function(){try{var t=g.Template.dom(g.Template.render("call_ring"));this.Ey=t,g.Call.Event.bind(),g.Template.vue(t),g.Base.Co.appendChild(t),g.Sound.start("call","call-ring",!0)}catch(t){}},i._y=function(){try{var t=g.Template.dom(g.Template.render("call_screen"));this.Ey=t,g.Call.Event.bind(),g.Template.vue(t),this.jy(),this.Ay("connecting"),g.Base.Co.appendChild(t)}catch(t){}},i.wy=function(){try{null!==this.Ey&&(this.Ey.remove(),this.Ey=null,this.Cy=!1,this.$y(),g.Sound.stop("call","call-ring"))}catch(t){}},i.xy=function(){try{this.Iy("local")}catch(t){}},i.ky=function(){try{!0===this.Iy("remote")&&(this.Ay("ongoing"),g.Sound.start("call","call-established"))}catch(t){}},i.Iy=function(t){var i=this.Ey.querySelector('.cc-1k3n2[data-type="'.concat(t,'"]'));if(i){var n=i.querySelector("video");if(n)return n.srcObject=g.Library.crisp.client.Call.get_stream(t),n.onloadeddata=function(){var t=n.videoWidth<n.videoHeight?"contain":null;null!==t&&n.setAttribute("data-aspect",t)},!0}return!1},i.gy=function(t){var i;try{i=[{type:"audio",state:!0,visible:!0,supported:!0},{type:"video",state:!0,visible:!0,supported:"video"===t},{type:"hangup",state:!1,visible:!0,supported:!0},{type:"toggle",state:!1,visible:!0,supported:!0},{type:"screensharing",state:!1,visible:!0,supported:g.Library.crisp.client.Call.has_support_screensharing()}]}catch(t){}finally{return i||[]}},i.Ay=function(t){try{"ongoing"===(g.Store.$store.call.state=t)&&this.zy()}catch(t){}},i.zy=function(){var t=this;try{this.$y(),null===this.Oy&&(this.Sy=0,this.Oy=g.Utility.set_interval(function(){t.Sy++,g.Store.$store.call.duration=t.Sy},this.Xo))}catch(t){}},i.$y=function(){try{null!==this.Oy&&(g.Utility.clear_interval(this.Oy),this.Oy=null,g.Store.$store.call.duration=0)}catch(t){}},i.jy=function(){var o=this;try{var c,a,h,u,i,r,n,e,l=this.Ey.querySelector(".cc-iy8mn");l&&(i=function(t,i,n,e){c=l.offsetLeft,a=l.offsetTop,h=t.clientX,u=t.clientY,g.Utility.add_event_listener(o.ns,"document",i,r),g.Utility.add_event_listener(o.ns,"document",n,e)},r=function(t){t.preventDefault(),t.stopPropagation();var i=null!==(s=t.touches)&&void 0!==s&&s[0]?t.touches[0]:t,n=a+(i.clientY-u),e=c+(i.clientX-h),r=o.my,s=o.my,t=window.innerWidth-l.clientWidth-o.my,i=window.innerHeight-l.clientHeight-o.my;return e<r?e=r:t<e&&(e=t),n<s?n=s:i<n&&(n=i),l.style.setProperty("top","".concat(n,"px"),"important"),l.style.setProperty("left","".concat(e,"px"),"important"),!1},n=function(){g.Utility.remove_event_listener(o.ns,"document","mousemove"),g.Utility.remove_event_listener(o.ns,"document","mouseup")},e=function(){g.Utility.remove_event_listener(o.ns,"document","touchmove"),g.Utility.remove_event_listener(o.ns,"document","touchend")},l.addEventListener("mousedown",function(t){"minimized"===g.Store.$store.call.size&&i(t,"mousemove","mouseup",n)}),l.addEventListener("touchstart",function(t){"minimized"!==g.Store.$store.call.size||null!==(t=(null===(t=t.touches)||void 0===t?void 0:t[0])||null)&&i(t,"touchmove","touchend",e)}))}catch(t){}},i.Fy=function(t){t=g.Library.crisp.client.Call.get_stream(t);return null!==t&&0<t.getVideoTracks().length},i.dt=function(){try{this.Ey=null,this.Sy=0,this.Oy=null,this.Cy=!1}catch(t){}},t}());g.Call=it;var nt=new(function(){function t(){try{this.ns="CrispCallEvent",this.bt=["ring_accept_click","ring_decline_click","action_click","toggle_fullscreen_mode_click","toggle_fullscreen_aspect_ratio_click"]}catch(t){}}var i=t.prototype;return i.ring_accept_click=function(){try{g.Library.crisp.client.Call.accept(),g.Call.screen()}catch(t){}},i.ring_decline_click=function(){try{g.Library.crisp.client.Call.decline()}catch(t){}},i.action_click=function(t){try{switch(t){case"video":g.Library.crisp.client.Call.toggle_video();break;case"audio":g.Library.crisp.client.Call.toggle_audio();break;case"screensharing":g.Library.crisp.client.Call.toggle_screensharing();break;case"hangup":g.Library.crisp.client.Call.stop();break;case"toggle":g.Store.$store.call.size="minimized"===g.Store.$store.call.size?"maximized":"minimized",g.Call.reset_position()}}catch(t){}},i.toggle_fullscreen_mode_click=function(){try{g.Call.toggle_fullscreen_mode()}catch(t){}},i.toggle_fullscreen_aspect_ratio_click=function(){try{g.Call.toggle_fullscreen_aspect_ratio()}catch(t){}},i.bind=function(){try{g.Store.bind_events("call",this.bt,this)}catch(t){}},t}());g.Call.Event=nt;var et={push:g.Pipeline.push.Jt(g.Pipeline),get:g.Pipeline.get.Jt(g.Pipeline),set:g.Pipeline.set.Jt(g.Pipeline),is:g.Pipeline.is.Jt(g.Pipeline),on:g.Pipeline.on.Jt(g.Pipeline),off:g.Pipeline.off.Jt(g.Pipeline),do:g.Pipeline.do.Jt(g.Pipeline),config:g.Pipeline.config.Jt(g.Pipeline),safe:g.Pipeline.safe.Jt(g.Pipeline),help:g.Pipeline.help.Jt(g.Pipeline)};if(Object.defineProperty(et,"__init",{enumerable:!1,value:g.Base.init.Jt(g.Base)}),Object.defineProperty(et,"__spool",{enumerable:!1,value:{}}),Object.defineProperty(et,"__debug",{enumerable:!1,value:g}),et.__spool.pending_actions=[],"object"==typeof window.$crisp&&0<window.$crisp.length)for(var rt=0;rt<window.$crisp.length;rt++)et.__spool.pending_actions.push(window.$crisp[rt]);window.$__CRISP_INSTANCE=et,window.$crisp=et}catch(t){}})();