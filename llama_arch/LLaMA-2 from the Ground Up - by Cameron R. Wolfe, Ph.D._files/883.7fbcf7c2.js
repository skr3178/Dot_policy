"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["883"],{44854:function(e,t,n){n.d(t,{Z:()=>r});let r={root:"root-MjHNqP",isOnInbox:"isOnInbox-pP0vQF",inboxColumn:"inboxColumn-SxsPqY",paywallStack:"paywallStack-RdkSad",pubChatColumn:"pubChatColumn-Zck7MX",pubChatFull:"pubChatFull-tEPJ4X",chatPublicationContainer:"chatPublicationContainer-y1FRFU",invitesRow:"invitesRow-QZEeej",show:"show-vL_rsU",unfurl:"unfurl-n5q4dW",sticky:"sticky-ykmBOy",unreadDot:"unreadDot-fNgNDl",unreadTabDot:"unreadTabDot-aqz7wG",selected:"selected-oDAfJA",currentVisibilityBox:"currentVisibilityBox-VAGH9Q",headerPubLink:"headerPubLink-uygNA1",sidebarRowTitle:"sidebarRowTitle-wepYF4",headerPubAvatar:"headerPubAvatar-jFmd9c",inputBox:"inputBox-UuLYvf",textInputInset:"textInputInset-jnSii9",invisible:"invisible-AW4ANv",textInput:"textInput-zlmYim",dropzone:"dropzone-W750JH",newThreadButton:"newThreadButton-POT_Ph",roundedFooterPlaceholder:"roundedFooterPlaceholder-k7TSWJ",chatContainer:"chatContainer-fnFgIy",fade:"fade-HKCqnN",composerLinkPreview:"composerLinkPreview-cBU00h",imageBox:"imageBox-NAFgde",image:"image-PfNhry",deleteFile:"deleteFile-gv_fWj",messageSquareIcon:"messageSquareIcon-_NUoeX",paywall:"paywall-hfm67h",modalChatEditor:"modalChatEditor-bbcasD",newText:"newText-IkD33N",newBorder:"newBorder-fycRk_",jumpButton:"jumpButton-yc047J",jumpBadge:"jumpBadge-IO2hJP"}},4473:function(e,t,n){n.d(t,{Z:()=>l});var r=n(7409),o=n(99282),a=n(98848),i=n(16584),c=n(64515);let l=e=>{var{size:t=24,fill:n="var(--color-fg-primary)",className:l}=e,s=(0,a._)(e,["size","fill","className"]);return(0,i.BX)(c.l,(0,o._)((0,r._)({},s),{name:"SubstackIcon",svgParams:{viewBox:"0 0 20 20"},width:t,height:t,fill:n,stroke:"none",className:l,children:[(0,i.tZ)("path",{d:"M1.96484 0.624512H18.0354V2.70052H1.96484V0.624512Z",stroke:"none"}),(0,i.tZ)("path",{d:"M1.96484 4.77655H18.0354V6.85254H1.96484V4.77655Z",stroke:"none"}),(0,i.tZ)("path",{d:"M1.96484 8.92857V19.9505L10.0001 14.6347L18.0354 19.9505V8.92857H1.96484Z",stroke:"none"})]}))}},1669:function(e,t,n){n.d(t,{o:()=>i});var r=n(16584),o=n(98914),a=n(58175);let i=e=>{let{error:t}=e,n=(0,o.HM)(t);return(null==n?void 0:n.html)?(0,r.tZ)(a.xv.B4,{weight:"medium",color:"error",dangerouslySetInnerHTML:{__html:n.html}}):(0,r.tZ)(a.xv.B4,{weight:"medium",color:"error",children:(null==n?void 0:n.msg)||"Something went wrong"})}},76566:function(e,t,n){n.d(t,{S:()=>d});var r=n(27412),o=n(16584),a=n(20042),i=n(98661),c=n(20888),l=n(9682),s=n(19081),u=n(58175);class d extends i.Component{static getDerivedStateFromError(e){return{error:e}}componentDidMount(){Promise.all([n.e("7152"),n.e("6993")]).then(n.bind(n,91985)).then(e=>{this.Sentry=e.Sentry})}componentDidCatch(e){console.error(e),this.Sentry&&this.Sentry.captureException(e)}render(){let{error:e}=this.state;return(0,o.tZ)(m,{onReset:()=>this.setState({error:null}),error:e,children:e?(0,o.tZ)(h,{}):this.props.children})}constructor(e){super(e),(0,r._)(this,"Sentry",null),this.state={error:null}}}function m(e){let{onReset:t,error:n,children:r}=e,c=(0,i.useRef)((0,a.getCurrentUrl)());return(0,l.js)(e=>{n&&c.current!==e&&t(),c.current=e},[]),n?(0,o.tZ)(h,{}):r}function h(){return(0,o.BX)(s.tu,{flex:"grow",justifyContent:"center",alignItems:"center",gap:32,padding:20,children:[(0,o.tZ)(c.e,{src:"/img/reader/toad.png",maxWidth:200}),(0,o.BX)(s.tu,{gap:8,children:[(0,o.tZ)(u.xv.H3,{weight:"semibold",align:"center",children:"Oh noâ€”this page croaked."}),(0,o.tZ)(u.xv.B3,{color:"secondary",align:"center",children:"Try again, or hop to another page."})]})]})}},50312:function(e,t,n){n.d(t,{F:()=>h,r:()=>m});var r=n(7409),o=n(99282),a=n(98848),i=n(16584),c=n(98661),l=n(20042),s=n(21811),u=n(93252),d=n(71068);let m=(0,c.forwardRef)((e,t)=>{var{href:n,onClick:c,campaign:l,replace:s,state:u,showBack:m}=e,p=(0,a._)(e,["href","onClick","campaign","replace","state","showBack"]);let f=h({href:n,onClick:c,campaign:l,replace:s,state:u=m?(0,o._)((0,r._)({},u),{showBack:!0}):u});return(0,i.tZ)(d.xu,(0,r._)((0,o._)((0,r._)({as:"a"},p),{ref:t}),f))});function h(e){let{onClick:t,href:n,campaign:o,replace:a,state:i}=e;if(n&&!(0,u.P)()){let e;try{e=new URL(n)}catch(t){try{e=new URL("".concat(document.location.origin).concat(n))}catch(e){}}if(e){if(e.origin!==document.location.origin||o){if(e.origin!==document.location.origin&&o){for(let[t,n]of Object.entries(o)){let r="name"===t?"campaign":t;e.searchParams.set("utm_".concat(r),n)}n=e.toString()}}else{let t=new URLSearchParams,r={};for(let[n,o]of e.searchParams)n.startsWith("utm_")?"utm_campaign"===n?r.name=o:r[n.replace(/^utm_/,"")]=o:t.append(n,o);o=r,n="".concat(e.pathname,"?").concat(t)}}}return{href:n,onClick:e=>{if(null==t||t(e),!e.ctrlKey&&!e.shiftKey&&!e.metaKey&&n&&!(0,u.P)()){if(e.defaultPrevented){e.stopPropagation();return}(0,s.j)((0,r._)({},o)),e.preventDefault(),e.stopPropagation(),(0,l.route)(n,a),i&&history.replaceState(i,"")}}}}},41233:function(e,t,n){n.d(t,{LZ:()=>w,et:()=>_,fA:()=>y});var r=n(7409),o=n(99282),a=n(16584),i=n(95441),c=n(17625),l=n(80026),s=n(6490),u=n(65523),d=n(4354),m=n(65942),h=n(23276),p=n(9003),f=n(24142),g=n(91400);function y(e){let{onCancel:t,onSuccess:n,onSignup:r,onUserCreated:o,noCloseButton:i,noExit:l,isOpen:u,redirectOverride:m,overrideTitle:h}=e,p=(0,g.XA)();return(0,a.tZ)(s.u_,{onClose:t,isOpen:u,children:(0,a.BX)(d.t,{children:[(0,a.tZ)(v,{onCancel:t,onSuccess:n,onSignup:r,onUserCreated:o,noCloseButton:i,noExit:l,redirectOverride:m,overrideTitle:h}),p&&(0,a.tZ)(c.o$,{})]})})}function v(e){let{onCancel:t,onSuccess:n,onSignup:i,onUserCreated:c,noCloseButton:l,noExit:s,redirectOverride:u,overrideTitle:g}=e,{mode:y}=(0,d.I)(),v={overrideTitle:g,noCloseButton:l||s,onCancel:t,onSignup:i};return(0,a.BX)(a.HY,{children:["magic-link"===y&&(0,a.tZ)(m.v,(0,o._)((0,r._)({},v),{onSuccess:n})),"email"===y&&(0,a.tZ)(h.j,(0,o._)((0,r._)({},v),{onUserCreated:c,redirectOverride:u})),"password"===y&&(0,a.tZ)(f.L,(0,o._)((0,r._)({},v),{onSuccess:n})),"mfa"===y&&(0,a.tZ)(p.n,{onSuccess:n})]})}let w=e=>{let{overrideTitle:t,noCloseButton:n,onCancel:r,onSignup:o}=e,{iString:c}=(0,i.M1)();return(0,a.tZ)(u.xB,{title:t||c("Sign in to Substack"),description:o?(0,a.BX)(a.HY,{children:[c("First time here? "),(0,a.tZ)(l.hh,{color:"substack",decoration:"hover-underline",onClick:o,cursor:"pointer",children:c("Create account")})]}):void 0,showClose:!n,onClose:r,icon:(0,a.tZ)(u.ZN,{}),alignItems:"center"})},_=e=>{let{children:t}=e;return(0,a.tZ)(l.sg,{padding:16,borderTop:"detail",children:(0,a.tZ)(l.xv.B4,{as:"span",color:"secondary",align:"center",children:t})})}},16913:function(e,t,n){n.d(t,{E:()=>d});var r=n(16584),o=n(95441),a=n(80026),i=n(98012);let c=new Intl.DateTimeFormat(void 0,{timeStyle:"short"}),l=new Intl.DateTimeFormat(void 0,{weekday:"long"}),s=new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"}),u=new Intl.DateTimeFormat(void 0,{dateStyle:"long"});function d(e){let{timestamp:t,conjunction:n=!1}=e,{iString:d,language:m}=(0,o.M1)(),h=new Date(t),p=(0,i.Z)(),f=m.startsWith("en"),g=p.isSame(h,"day")?d("Today"):p.subtract(1,"day").isSame(h,"day")?d("Yesterday"):p.isSame(h,"week")?l.format(h):p.isSame(h,"year")?s.format(h):u.format(h);return(0,r.tZ)(a.X2,{alignItems:"center",justifyContent:"center",children:(0,r.BX)(a.xv.B4,{color:"secondary",children:[g,n&&f?" at ":" ",c.format(h)]})})}},11308:function(e,t,n){n.d(t,{o:()=>l});var r=n(7409),o=n(99282),a=n(79094),i=n(48980),c=n(97842);function l(e){let{entityType:t,publication:n}=e,i=(0,a.T)(),l=(0,c.I0)();return(e,a)=>{i({onSubmit:n=>l("communityPost"===t?s((0,o._)((0,r._)({},n),{id:e})):u((0,o._)((0,r._)({},n),{id:e}))),canReportToAdmins:!!(n&&a&&n.moderation_enabled),pub:null!=n?n:void 0})}}let s=e=>{let{id:t,details:n,reportCategory:r,reportedToSubstack:o}=e;return async e=>{e({type:"posts-flag_post",payload:{id:t}});let a=await d({id:t,details:n,reportCategory:r,reportedToSubstack:o});a instanceof Error&&console.warn("error flagging post",a)}},u=e=>{let{id:t,details:n,reportCategory:r,reportedToSubstack:o}=e;return async e=>{e({type:"comments-flag_comment",payload:{id:t}});let a=await m({id:t,details:n,reportCategory:r,reportedToSubstack:o});a instanceof Error&&console.warn("error flagging comment",a)}};async function d(e){let{id:t,details:n,reportCategory:r,reportedToSubstack:o}=e;try{return await (0,i.rd)("/api/v1/community/posts/".concat(t,"/reports"),{method:"POST",json:{postId:t,details:n,reportCategory:r,reportedToSubstack:o}})}catch(e){return e}}async function m(e){let{id:t,details:n,reportCategory:r,reportedToSubstack:o}=e;try{return await (0,i.rd)("/api/v1/community/comments/".concat(t,"/reports"),{method:"POST",json:{commentId:t,details:n,reportCategory:r,reportedToSubstack:o}})}catch(e){return e}}},65958:function(e,t,n){n.d(t,{s:()=>g});var r=n(7409),o=n(99282),a=n(16584),i=n(60807),c=n(48980),l=n(80878),s=n(7882),u=n(70379),d=n(97842),m=n(81043),h=n(95551),p=n(62515),f=n(36186);function g(e){let{source:t}=e,n=function(e){let{source:t}=e,n=(0,d.I0)(),a=(0,s.ib)({pathname:"/api/v1/messages/dm/start",method:"POST"}),i=async e=>{let r=await a.refetch({json:{user_ids:e,source:t}});return r instanceof Error||n({type:"conversation-load_more",payload:{edge:"before",cursor:null,page:r}}),r};return(0,o._)((0,r._)({},a),{handleStart:i})}({source:t}),g=(0,h.d)(),y=(0,u.pm)(),v=(0,i.aF)(),{onboardingModalRef:w,requireLogin:_}=(0,m.SJ)(),b=async e=>{var t;if(!v)return _?_():w.current?w.current.open():g(Error("Onboarding modal not found"),"Could not start conversation."),!1;let i=await n.handleStart(e);return i instanceof Error?(i instanceof c.kp&&(null===(t=i.body)||void 0===t?void 0:t.type)==="profile_not_set_up"?y.popToast(e=>(0,a.tZ)(u.FN,(0,o._)((0,r._)({},e),{text:"Please set up your profile before sending a message.",cta:"Set up profile",href:(0,f.Nh)({utm_source:"substack",utm_campaign:"chat_dm_button",redirect:window.location}),localNavigation:!1}))):g(i,"Could not start conversation."),!1):((0,l._)((0,p.Rm)(i.thread.id)),!0)};return(0,o._)((0,r._)({},n),{handleStart:b})}},32189:function(e,t,n){n.d(t,{x:()=>c});var r=n(30396),o=n(60807),a=n(68833),i=n(81043);function c(e){let{surface:t,zIndex:n=null}=e,c=(0,o.aF)(),{onboardingModalRef:l}=(0,i.SJ)();return(0,r.d4)(()=>{l.current&&null!==n&&(l.current.props.zIndex=n)},[l,n]),(e,n)=>r=>{if(!e){console.warn("No publication provided to usePubOnboardingHandler handler");return}if(!c){var o,i;if(!l.current)return;r.preventDefault(),n?null===(o=l.current)||void 0===o||o.openForPub(e,n):null===(i=l.current)||void 0===i||i.openToPubSignup(e);return}(0,a.x6)(e,t)}}}}]);