"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["7053"],{84892:function(t,e,a){a.d(e,{KH:()=>j,MR:()=>Z,YX:()=>L,nO:()=>X,cM:()=>P,ko:()=>M,_g:()=>N});var r,l,w=a(7409),i=a(99282),s=a(58865),n=a(16584),o=a(94184),d=a.n(o),c=a(1852),u=a(86657);a(36081),a(36813);var b=a(99987),m=a(1055),p=a(64515);let h=t=>(0,n.BX)(p.l,(0,i._)((0,w._)({},t),{name:"VoiceoverIcon",svgParams:{height:24,width:24,viewBox:"0 0 24 24"},fill:"none",children:[(0,n.tZ)("path",{d:"M11.8518 3.31518C12.2459 4.26329 13.551 7.10985 14.4542 8.3467C15.3764 9.60967 12.8285 9.95184 12 10.5",strokeWidth:"1.5",strokeLinecap:"round"}),(0,n.tZ)("path",{d:"M12 10.5C12 10.5 12.4662 11.2332 12.7627 11.7326C13.0592 12.232 13 12.5 11.5 13C10.7772 13.2409 9.5 13.5 9.5 13.5C10.3447 13.9272 12.2664 14.1393 12.4041 14.3167C12.763 14.779 12.3241 15.4618 11.8617 15.8208C11.3994 16.1797 12.0724 18.7353 10.5 19.5C8.9276 20.2647 5.70772 19.432 3 18",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.tZ)("path",{d:"M18.5 6.5L20.3544 4.8526",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.tZ)("path",{d:"M18.5 15.5L20.3544 17.2545",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.tZ)("path",{d:"M19.5 11.0326L22 11.0326",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}));var f=a(95441);a(68833);var v=a(15771),g=a(6490),x=a(84864),k=a(72925);function y(){let t=(0,s._)(["Playback rate ",""]);return y=function(){return t},t}var Z=((r={}).Embed="Embed audio",r.Voiceover="Add voiceover",r.Podcast="Audio",r.PodcastPreview="Podcast free version",r.VideoPodcast="Video",r.ShareQuote="Share quote",r),N=((l={})[l.PubAccent=0]="PubAccent",l[l.PubFull=1]="PubFull",l[l.Substack=2]="Substack",l);let M=t=>{let{containerRef:e,currentTime:a,remainingTime:r,progress:l,onMouseDown:w,shouldCollapseOnMobile:i=!1,theme:s=1}=t;return(0,n.BX)("div",{className:"tw-flex tw-grow tw-items-center tw-gap-3 tw-font-meta tw-text-sm tw-text-substack-primary sm:tw-gap-3","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":100*l,children:[(0,n.tZ)("div",{className:d()("tw-min-w-[40px] tw-text-right",{"tw-hidden sm:tw-block":i}),children:a}),(0,n.BX)("div",{ref:e,className:d()("tw-relative tw-h-5 tw-grow ",{"tw-ml-2 sm:tw-ml-0":i}),onMouseDown:w,children:[(0,n.tZ)("div",{className:d()("audio-progress-bar tw-absolute tw-top-2 tw-right-0 tw-left-0 tw-h-1 tw-rounded",{"tw-bg-pub-detail":1===s,"tw-bg-substack-detail":1!==s})}),(0,n.tZ)("div",{className:d()("tw-absolute tw-top-2 tw-left-0 tw-h-1 tw-rounded-l-full",{"tw-bg-pub-accent":2!==s,"tw-bg-substack-accent":2===s}),style:{width:"".concat(100*l,"%")}}),(0,n.tZ)("div",{className:d()("audio-playhead tw-absolute tw-ml-[-10px] tw-h-4 tw-w-4 tw-rounded-full tw-border-2 tw-border-solid ",{"tw-border-pub-background":1===s,"tw-border-substack-bg":1!==s,"tw-bg-substack-accent":2===s,"tw-bg-pub-accent":2!==s}),style:{left:"".concat(100*l,"%")}})]}),(0,n.tZ)("div",{className:"tw-min-w-[40px]",children:r})]})},B=[{value:1,display:"1"},{value:1.25,display:"1.25"},{value:1.5,display:"1.5"},{value:1.75,display:"1.75"},{value:2,display:"2"}],C=t=>{var e;let{onSetPlaybackRate:a,playbackRate:r,className:l}=t,w=B.findIndex(t=>{let{value:e}=t;return e===r}),{iTemplate:i}=(0,f.M1)(),s=(null==B?void 0:null===(e=B[w])||void 0===e?void 0:e.display)?"".concat(null==B?void 0:B[w].display,"x"):"";return(0,n.BX)("div",{onClick:()=>{let t=(w+1)%B.length;a(B[t].value)},className:l,"aria-label":i(y(),s),children:[B[w].display,"\xd7"]})},P=t=>{let{iString:e}=(0,f.M1)();return(0,n.tZ)(u.Z,(0,i._)((0,w._)({},t),{metricsPost:t.post,feature:"Embed audio",render:a=>{let{currentTime:r,isPlaying:l,progress:w,progressBarRef:i,progressBarOnMouseDown:s,remainingTime:o,playbackRate:d,setPlaybackRate:c,togglePlayback:u}=a;return(0,n.BX)("div",{"data-component-name":"AudioEmbedPlayer","data-drag-handle":"",className:"audio-embed tw-my-4 tw-box-border tw-flex tw-w-full tw-select-none tw-items-center tw-gap-4 tw-space-y-0 tw-rounded-full tw-bg-pub-wash tw-p-4 tw-font-sans sm:tw-gap-5",role:"region","aria-label":e("Audio embed player"),children:[(0,n.tZ)(C,{onSetPlaybackRate:c,playbackRate:d,className:"audio-button tw-w-12 tw-cursor-pointer tw-rounded-full tw-border tw-border-solid tw-border-pub-detail-light tw-py-1 tw-text-center tw-font-meta tw-text-sm tw-font-semibold tw-leading-none tw-text-pub-secondary-text hover:tw-border-pub-detail"}),(0,n.BX)("div",{className:"tw-flex tw-w-full tw-flex-wrap",children:[t.label&&(0,n.tZ)("div",{className:"tw-basis-full tw-pb-2 tw-text-ssm tw-font-semibold tw-text-pub-primary-text",children:t.label}),(0,n.tZ)("div",{className:"tw-flex tw-w-full tw-items-center tw-justify-between tw-gap-2 sm:tw-gap-4",children:(0,n.tZ)(M,{currentTime:r,remainingTime:o,containerRef:i,progress:w,onMouseDown:s})})]}),(0,n.tZ)("div",{className:"audio-embed-play-button tw-relative tw-flex tw-h-12 tw-w-12 tw-shrink-0 tw-cursor-pointer tw-items-center tw-justify-center tw-rounded-full tw-border-2 tw-border-solid tw-border-pub-detail tw-bg-pub-background tw-transition-transform hover:tw-scale-105",onClick:u,role:"button","aria-label":e("Play/pause"),children:l?(0,n.BX)("div",{className:"tw-flex tw-h-5 tw-w-4 tw-justify-between",children:[(0,n.tZ)("div",{className:"pause-icon tw-h-full tw-w-1/3 tw-rounded-sm tw-bg-pub-accent"}),(0,n.tZ)("div",{className:"pause-icon tw-h-full tw-w-1/3 tw-rounded-sm tw-bg-pub-accent"})]}):(0,n.tZ)(m.Z,{className:"tw-relative tw-left-[.1rem] tw-fill-pub-accent",stroke:"none",height:18})})]})}}))},X=t=>{var e;let{pub:a,post:r,duration:l,label:w}=t,{iString:i}=(0,f.M1)();return(0,n.tZ)("table",{"data-component-name":"AudioEmbedPlayerStatic",className:"tw-w-full tw-rounded-full tw-bg-substack-wash",children:(0,n.tZ)("tr",{children:(0,n.tZ)("td",{className:"tw-text-center tw-font-meta tw-text-ssm tw-uppercase tw-text-substack-primary",children:(0,n.BX)("a",{href:null==r?void 0:r.canonical_url,className:d()("tw-block tw-w-full tw-p-4 tw-text-substack-primary",k.Z.noUnderline),children:[(0,n.tZ)(b.Z,{className:"tw-w-max-4 tw-mr-2 tw-inline-block tw-w-4 tw-align-middle",stroke:null===(e=a.theme)||void 0===e?void 0:e.background_pop_color,isStatic:!0}),(0,n.BX)("span",{className:"tw-align-middle",children:[(0,x.truncateText)(w,10)||i("Listen now")," \xb7 ",(0,x.secondsToHHMMSS)(l||0)]})]})})})})},j=t=>{let e=(0,c.useMediaQuery)({maxWidth:631}),a="/api/v1/audio/upload/".concat(t.mediaUploadId,"/src"),{iString:r}=(0,f.M1)();return(0,n.tZ)(u.Z,(0,i._)((0,w._)({},t),{src:a,feature:"Add voiceover",metricsPost:t.post,render:t=>{let{isPaywalled:a,currentTime:l,isPlaying:w,progress:i,progressBarRef:s,progressBarOnMouseDown:o,remainingTime:d,playbackRate:c,setPlaybackRate:u,togglePlayback:b}=t;return(0,n.BX)("div",{className:"tw-mb-6 tw-flex sm:tw-gap-1",children:[(0,n.tZ)("div",{className:"tw-hidden tw-h-20 tw-shrink-0 tw-basis-20 tw-items-center tw-justify-center tw-rounded-md tw-bg-pub-wash tw-fill-pub-primary-text tw-text-pub-primary-text sm:tw-flex",children:(0,n.tZ)(h,{className:"tw-stroke-pub-secondary-text"})}),(0,n.BX)("div",{className:"tw-box-border tw-flex tw-h-20 tw-w-full tw-select-none tw-items-center tw-gap-3 tw-space-y-0 tw-rounded-l-md tw-rounded-r-[64px] tw-bg-pub-wash  tw-p-4 tw-font-sans",children:[a?(0,n.tZ)("div",{className:"tw-flex tw-w-full tw-flex-wrap tw-justify-center tw-text-ssm tw-text-pub-secondary-text sm:tw-text-sm",children:r("Upgrade to paid to play voiceover")}):(0,n.BX)("div",{className:"tw-flex tw-w-full tw-flex-wrap",children:[(0,n.tZ)("div",{className:"tw-basis-full tw-pb-2 tw-text-ssm tw-font-semibold tw-uppercase tw-text-pub-secondary-text",children:r("Article voiceover")}),(0,n.BX)("div",{className:"tw-flex tw-w-full tw-items-center tw-justify-between tw-gap-2 ",children:[(0,n.tZ)(C,{onSetPlaybackRate:u,playbackRate:c,className:"tw-w-12 tw-cursor-pointer tw-rounded-full tw-border tw-border-solid tw-border-pub-detail-light tw-py-1 tw-text-center tw-font-meta tw-text-sm tw-font-semibold tw-leading-none tw-text-pub-secondary-text hover:tw-border-pub-detail"}),(0,n.tZ)(M,{currentTime:l,remainingTime:d,containerRef:s,progress:i,onMouseDown:o,shouldCollapseOnMobile:!0})]})]}),a?(0,n.tZ)("div",{className:"tw-relative tw-flex tw-h-14 tw-w-14 tw-shrink-0 tw-cursor-not-allowed tw-items-center tw-justify-center tw-rounded-full tw-border-2 tw-border-solid tw-border-pub-detail tw-bg-pub-background tw-transition-transform",children:(0,n.tZ)(m.Z,{className:"tw-relative tw-left-[.15rem] tw-fill-pub-detail",stroke:"none",height:e?20:24})}):(0,n.tZ)("div",{className:"tw-relative tw-flex tw-h-14 tw-w-14 tw-shrink-0 tw-cursor-pointer tw-items-center tw-justify-center tw-rounded-full tw-border-2 tw-border-solid  tw-border-pub-detail tw-bg-pub-background tw-transition-transform hover:tw-scale-105",onClick:b,role:"button",children:w?(0,n.BX)("div",{className:"tw-flex tw-h-5 tw-w-5 tw-justify-between",children:[(0,n.tZ)("div",{className:"tw-h-full tw-w-1/3 tw-rounded-sm tw-bg-pub-accent"}),(0,n.tZ)("div",{className:"tw-h-full tw-w-1/3 tw-rounded-sm tw-bg-pub-accent"})]}):(0,n.tZ)(m.Z,{className:"tw-relative tw-left-[.15rem] tw-fill-pub-accent",stroke:"none",height:20})})]})]})}}))},L=t=>{let{isOpen:e,onDismiss:a}=t,{iString:r}=(0,f.M1)();return(0,n.BX)(g.u_,{isOpen:e,onClose:a,children:[(0,n.tZ)(g.xB,{showClose:!1,title:r("Something went wrong...")}),(0,n.tZ)(g.fe,{children:r("Unfortunately, there was a problem with your audio file upload. We'll investigate, but in the meantime, please try again, and we apologize for the inconvenience.")}),(0,n.tZ)(g.mz,{showDivider:!1,direction:"row",primaryButton:(0,n.tZ)(v.zx,{onClick:a,priority:"primary",children:r("Got it")})})]})}}}]);