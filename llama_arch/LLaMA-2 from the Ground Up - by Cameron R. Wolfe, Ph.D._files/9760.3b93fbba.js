(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["9760"],{53836:function(t,e,n){e.__esModule=!0;var r,i,u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=n(6400),c=f(n(98278)),s=f(n(10251)),T=f(n(27418)),l=n(7937);function f(t){return t&&t.__esModule?t:{default:t}}function A(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var E="data-preact-helmet",p=function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},S=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r[e])return r[e]}return null},g=function(t){var e=S(t,"title"),n=S(t,"titleTemplate");if(n&&e)return n.replace(/%s/g,function(){return e});var r=S(t,"defaultTitle");return e||r||""},h=function(t,e){return e.filter(function(e){return void 0!==e[t]}).map(function(e){return e[t]}).reduce(function(t,e){return o({},t,e)},{})},_=function(t,e,n){var r={};return n.filter(function(e){return void 0!==e[t]}).map(function(e){return e[t]}).reverse().reduce(function(t,n){var i={};n.filter(function(t){for(var n=void 0,u=Object.keys(t),o=0;o<u.length;o++){var a=u[o],c=a.toLowerCase();-1!==e.indexOf(c)&&(n!==l.TAG_PROPERTIES.REL||"canonical"!==t[n].toLowerCase())&&(c!==l.TAG_PROPERTIES.REL||"stylesheet"!==t[c].toLowerCase())&&(n=c),-1!==e.indexOf(a)&&(a===l.TAG_PROPERTIES.INNER_HTML||a===l.TAG_PROPERTIES.CSS_TEXT||a===l.TAG_PROPERTIES.ITEM_PROP)&&(n=a)}if(!n||!t[n])return!1;var s=t[n].toLowerCase();return r[n]||(r[n]={}),i[n]||(i[n]={}),!r[n][s]&&(i[n][s]=!0,!0)}).reverse().forEach(function(e){return t.push(e)});for(var u=Object.keys(i),o=0;o<u.length;o++){var a=u[o],c=(0,T.default)({},r[a],i[a]);r[a]=c}return t},[]).reverse()},d=function(t,e){document.title=t||document.title,v(l.TAG_NAMES.TITLE,e)},v=function(t,e){for(var n=document.getElementsByTagName(t)[0],r=n.getAttribute(E),i=r?r.split(","):[],u=[].concat(i),o=Object.keys(e),a=0;a<o.length;a++){var c=o[a],s=e[c]||"";n.setAttribute(c,s),-1===i.indexOf(c)&&i.push(c);var T=u.indexOf(c);-1!==T&&u.splice(T,1)}for(var l=u.length-1;l>=0;l--)n.removeAttribute(u[l]);i.length===u.length?n.removeAttribute(E):n.setAttribute(E,i.join(","))},b=function(t,e){var n=document.head||document.querySelector("head"),r=n.querySelectorAll(t+"["+E+"]"),i=Array.prototype.slice.call(r),u=[],o=void 0;return e&&e.length&&e.forEach(function(e){var n=document.createElement(t);for(var r in e)if(e.hasOwnProperty(r)){if("innerHTML"===r)n.innerHTML=e.innerHTML;else if("cssText"===r)n.styleSheet?n.styleSheet.cssText=e.cssText:n.appendChild(document.createTextNode(e.cssText));else{var a=void 0===e[r]?"":e[r];n.setAttribute(r,a)}}n.setAttribute(E,"true"),i.some(function(t,e){return o=e,n.isEqualNode(t)})?i.splice(o,1):u.push(n)}),i.forEach(function(t){return t.parentNode.removeChild(t)}),u.forEach(function(t){return n.appendChild(t)}),{oldTags:i,newTags:u}},R=function(t){return Object.keys(t).reduce(function(e,n){var r=void 0!==t[n]?n+'="'+t[n]+'"':""+n;return e?e+" "+r:r},"")},P=function(t,e,n){var r=R(n);return r?"<"+t+" "+E+" "+r+">"+p(e)+"</"+t+">":"<"+t+" "+E+">"+p(e)+"</"+t+">"},O=function(t,e,n){var r=A({key:e},E,!0),i=Object.keys(n).reduce(function(t,e){return t[e]=n[e],t},r);return[(0,a.h)(l.TAG_NAMES.TITLE,i,e)]},M=function(t,e){switch(t){case l.TAG_NAMES.TITLE:return{toComponent:function(){return O(t,e.title,e.titleAttributes)},toString:function(){return P(t,e.title,e.titleAttributes)}};case l.TAG_NAMES.HTML:return{toComponent:function(){return e},toString:function(){return R(e)}};default:return{toComponent:function(){return e.map(function(e,n){var r=A({key:n},E,!0);return Object.keys(e).forEach(function(t){if("innerHTML"===t||"cssText"===t){var n=e.innerHTML||e.cssText;r.dangerouslySetInnerHTML={__html:n}}else r[t]=e[t]}),(0,a.h)(t,r)})},toString:function(){return e.reduce(function(e,n){var r=Object.keys(n).filter(function(t){return"innerHTML"!==t&&"cssText"!==t}).reduce(function(t,e){var r=void 0===n[e]?e:e+'="'+p(n[e])+'"';return t?t+" "+r:r},""),i=n.innerHTML||n.cssText||"",u=-1===[l.TAG_NAMES.NOSCRIPT,l.TAG_NAMES.SCRIPT,l.TAG_NAMES.STYLE].indexOf(t);return e+"<"+t+" "+E+" "+r+(u?">":">"+i+"</"+t+">")},"")}}}},y=function(t){var e=t.htmlAttributes,n=t.title,r=t.titleAttributes,i=t.baseTag,u=t.metaTags,o=t.linkTags,a=t.scriptTags,c=t.noscriptTags,s=t.styleTags;return{htmlAttributes:M(l.TAG_NAMES.HTML,e),title:M(l.TAG_NAMES.TITLE,{title:n,titleAttributes:r}),base:M(l.TAG_NAMES.BASE,i),meta:M(l.TAG_NAMES.META,u),link:M(l.TAG_NAMES.LINK,o),script:M(l.TAG_NAMES.SCRIPT,a),noscript:M(l.TAG_NAMES.NOSCRIPT,c),style:M(l.TAG_NAMES.STYLE,s)}},N=(0,c.default)(function(t){var e;return{htmlAttributes:h(l.TAG_NAMES.HTML,t),title:g(t),titleAttributes:h("titleAttributes",t),baseTag:(e=[l.TAG_PROPERTIES.HREF],t.filter(function(t){return void 0!==t[l.TAG_NAMES.BASE]}).map(function(t){return t[l.TAG_NAMES.BASE]}).reverse().reduce(function(t,n){if(!t.length)for(var r=Object.keys(n),i=0;i<r.length;i++){var u=r[i].toLowerCase();if(-1!==e.indexOf(u)&&n[u])return t.concat(n)}return t},[])),metaTags:_(l.TAG_NAMES.META,[l.TAG_PROPERTIES.NAME,l.TAG_PROPERTIES.CHARSET,l.TAG_PROPERTIES.HTTPEQUIV,l.TAG_PROPERTIES.PROPERTY,l.TAG_PROPERTIES.ITEM_PROP],t),linkTags:_(l.TAG_NAMES.LINK,[l.TAG_PROPERTIES.REL,l.TAG_PROPERTIES.HREF],t),scriptTags:_(l.TAG_NAMES.SCRIPT,[l.TAG_PROPERTIES.SRC,l.TAG_PROPERTIES.INNER_HTML],t),noscriptTags:_(l.TAG_NAMES.NOSCRIPT,[l.TAG_PROPERTIES.INNER_HTML],t),styleTags:_(l.TAG_NAMES.STYLE,[l.TAG_PROPERTIES.CSS_TEXT],t),onChangeClientState:S(t,"onChangeClientState")||function(){}}},function(t){var e=t.htmlAttributes,n=t.title,r=t.titleAttributes,i=t.baseTag,u=t.metaTags,o=t.linkTags,a=t.scriptTags,c=t.noscriptTags,s=t.styleTags,T=t.onChangeClientState;v("html",e),d(n,r);var f={baseTag:b(l.TAG_NAMES.BASE,i),metaTags:b(l.TAG_NAMES.META,u),linkTags:b(l.TAG_NAMES.LINK,o),scriptTags:b(l.TAG_NAMES.SCRIPT,a),noscriptTags:b(l.TAG_NAMES.NOSCRIPT,c),styleTags:b(l.TAG_NAMES.STYLE,s)},A={},E={};Object.keys(f).forEach(function(t){var e=f[t],n=e.newTags,r=e.oldTags;n.length&&(A[t]=n),r.length&&(E[t]=f[t].oldTags)}),T(t,A,E)},y)(function(){return null});e.default=(i=r=function(t){function e(){return function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),u(e,[{key:"shouldComponentUpdate",value:function(t){var e=o({},t);return e.children&&e.children.length||delete e.children,!(0,s.default)(this.props,e)}},{key:"render",value:function(){return(0,a.h)(N,this.props)}}],[{key:"canUseDOM",set:function(t){N.canUseDOM=t}}]),e}(a.Component),r.peek=N.peek,r.rewind=function(){var t=N.rewind();return t||(t=y({htmlAttributes:{},title:"",titleAttributes:{},baseTag:[],metaTags:[],linkTags:[],scriptTags:[],noscriptTags:[],styleTags:[]})),t},i),t.exports=e.default}}]);