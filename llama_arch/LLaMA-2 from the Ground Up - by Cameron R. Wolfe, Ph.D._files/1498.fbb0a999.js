"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["1498"],{72925:function(e,t,n){n.d(t,{Z:()=>r});let r={themedSelectOption:"themedSelectOption-uLytVj",noUnderline:"noUnderline-eUUJmS",podcastPaywallMenuButton:"podcastPaywallMenuButton-pkG3vq",paywallMenuDropdown:"paywallMenuDropdown-r7kYMC",paywallMenuDropdownItem:"paywallMenuDropdownItem-DQmkqr",paywallMenuDropdownIcon:"paywallMenuDropdownIcon-hVB_f0",paywallMenuDropdownItemTop:"paywallMenuDropdownItemTop-fWca_0",paywallMenuDropdownDeleteItem:"paywallMenuDropdownDeleteItem-ChWkG9"}},21694:function(e,t,n){n.d(t,{Z:()=>r});let r={root:"root-LeqPP3",badge:"badge-WYVub3",circle:"circle-_ZTVoA"}},23970:function(e,t,n){n.d(t,{m:()=>o});var r=n(16584),i=n(4615);function o(e){let{children:t}=e;return(0,r.tZ)(i.f6,{theme:"substack-theme",children:t})}},99987:function(e,t,n){n.d(t,{Z:()=>a});var r=n(7409),i=n(99282),o=n(16584),l=n(64515);let a=e=>(0,o.BX)(l.l,(0,i._)((0,r._)({},e),{name:"PlayIconRound",svgParams:{height:24,width:24},children:[(0,o.tZ)("path",{className:"outer-circle",d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",strokeWidth:"1.5",strokeLinecap:"round","stroke-linejoin":"round"}),(0,o.tZ)("path",{className:"inner-triangle",d:"M10 8L16 12L10 16V8Z",strokeWidth:"1.5",strokeLinecap:"round","stroke-linejoin":"round"})]}))},28161:function(e,t,n){n.d(t,{Z:()=>a});var r=n(7409),i=n(99282),o=n(16584),l=n(64515);let a=e=>(0,o.BX)(l.l,(0,i._)((0,r._)({},e),{name:"SubstackLogoIcon",svgParams:{height:18,width:16,fill:"#ff6719",stroke:"none"},children:[(0,o.tZ)("path",{d:"M16 4H0V6H16V4Z"}),(0,o.tZ)("path",{d:"M0 8V18L7.9993 13.534L16 18V8H0Z"}),(0,o.tZ)("path",{d:"M16 0H0V2H16V0Z"})]}))},43470:function(e,t,n){n.d(t,{v:()=>ee});var r=n(7409),i=n(16584),o=n(30396),l=n(94184),a=n.n(l),d=n(14293),s=n.n(d),c=n(56743),u=n(1852),v=n(28161),m=n(57577),h=n(33804),p=n(99282),f=n(49336),g=n(2564),_=n(94499),b=n(98422),w=n(19081),y=n(84747),Z=n(17043);let k={subMenuTrigger:"subMenuTrigger-SKUcXd",subMenuItem:"subMenuItem-zrY1yO",disabled:"disabled-TCpkl9",logo:"logo-Jt_Kvr",chevron:"chevron-_e2GYQ"};function x(e){let{className:t,hideBorders:n,items:r,menuItemClassName:l,selectedMenuItemClassName:d,selectedSlug:s,pub:u}=e,{isMobile:v}=(0,b.v9)(),m=(0,o.sO)(null),[h,p]=(0,o.eJ)(!1),[x,C]=(0,o.eJ)(!1);function N(e){let{scrollLeft:t,scrollWidth:n,clientWidth:r}=e;p(t>10),C(n-(r+t)>10)}let I=e=>()=>{let{current:t}=m;t&&t.scrollBy({left:250*e,behavior:"smooth"})};return(0,o.d4)(()=>{N(m.current)},[]),(0,i.tZ)("div",{className:a()("overflow-list-container",t),children:(0,i.BX)(w.gq,{borderBottom:n?void 0:"detail",borderTop:n||v?void 0:"detail",className:a()("section-bar",{scroll:!0,"overflow-left":h,"overflow-right":x}),font:"text",height:v?44:48,justifyContent:v?"start":"center",paddingX:4,position:"relative",children:[(0,i.tZ)("div",{ref:m,className:"overflow-items",onScroll:e=>N(e.target),children:r.map(e=>{let{label:t,href:n,slug:r,isNative:o,onClick:c,noFollow:v,subItems:m,newTab:h}=e;return m?(0,i.tZ)(y.M,{hideOnScroll:!0,layerOptions:{placement:"bottom-start",triggerOffset:6},title:t,trigger:(0,i.tZ)("div",{className:a()("menu-item",{selected:r===s},l,d&&{[d]:r===s}),children:(0,i.BX)(_.Z,{className:k.subMenuTrigger,native:o,rel:v?"nofollow":null,onClick:c,children:[(0,i.tZ)("span",{className:"overflow-item-text",children:t}),(0,i.tZ)(f.Z,{className:k.chevron,size:16})]})}),children:m.map(e=>{let{label:t,href:n,slug:r,isNative:o,onClick:l,noFollow:d,logoUrl:s}=e,c=!!r&&parseInt("".concat(r))===(null==u?void 0:u.id),v=s||(null==u?void 0:u.logo_url);return(0,i.tZ)(y.u,{className:a()(k.subMenuItem,{[k.disabled]:c}),disabled:c,href:n,native:o,priority:"primary",rel:d?"nofollow":void 0,onClick:l,children:(0,i.BX)(w.gq,{alignItems:"center",gap:12,style:{margin:"-4px 0 -4px -4px"},children:[v&&(0,i.tZ)("img",{className:k.logo,src:(0,Z.zF)(v,64),width:32}),t]})})})}):(0,i.tZ)("div",{className:a()("menu-item",{selected:r===s},l,d&&{[d]:r===s}),children:(0,i.tZ)(_.Z,{href:n,native:o,newTab:h,rel:v?"nofollow":null,onClick:c,children:(0,i.tZ)("span",{className:"overflow-item-text",children:t})})})})}),(0,i.tZ)("div",{className:"left-button",children:(0,i.tZ)("div",{className:"scroll-button-hitbox",role:"button",onClick:I(-1),children:(0,i.tZ)(c.Z,{strokeWidth:1.5})})}),(0,i.tZ)("div",{className:"right-button",children:(0,i.tZ)("div",{className:"scroll-button-hitbox",role:"button",onClick:I(1),children:(0,i.tZ)(g.Z,{strokeWidth:1.5})})})]})})}var C=n(95441),N=n(56629),I=n(40647),B=n(48884),M=n(76819),S=n(6070),O=n(63651),L=n(84864);let T={zeteo:{121146:"We’re Not Kidding"}},A=["/about","/chat","/archive","/newsletters"],F=e=>{let{isChatActive:t,isMeetingsActive:n,pub:r,selectedSectionId:o}=e,{language:l}=(0,C.M1)(),{getSettingFor:a}=(0,N.So)(),{getConfigFor:d}=(0,I.xR)(),s=!!d("publication_tabs_reorder"),c=!!a("notes_feed_enabled"),u=!!(a("reader_referrals_enabled")&&a("reader_referrals_leaderboard_enabled")),v=X({groupNewsletters:!!a("group_sections_and_podcasts_in_menu_enabled"),navBarItems:(0,M.Rx)(r.navigationBarItems||[],{isFeedEnabled:c,isChatActive:!!t,isChatEnabled:!!r.threads_v2_enabled,isMeetingsActive:!!n,hasMultipleNewsletters:r.sections&&r.sections.length>0,isReaderReferralsLeaderboardActive:u,language:l,useReordering:s}).filter(e=>!e.is_hidden),pub:r,language:l});return(0,i.tZ)(x,{items:v,className:"sections-overflow",selectedSlug:o,pub:r})},X=e=>{let{groupNewsletters:t,navBarItems:n,pub:r,language:i}=e,{iString:o}=B.mb.i(i),l=[];l.push({href:"/",label:o("Home"),slug:"/home"}),r.podcast_enabled&&r.show_pub_podcast_tab&&l.push({href:"/podcast",label:o("Podcast"),slug:"/podcast"});let a=[];return(0,S.Vb)({pub:r})?a=J({navBarItems:n,groups:[{label:"Shows",condition:e=>!!e.section}]}):(0,S.jC)({pub:r})?a=J({navBarItems:n,groups:[{condition:e=>{var t;return(null===(t=e.section)||void 0===t?void 0:t.id)===118995},excludeFromOthers:!0,isStandalone:!0},{condition:e=>{var t;return(null===(t=e.section)||void 0===t?void 0:t.id)===121146},excludeFromOthers:!0,isStandalone:!0},{label:"Shows",condition:e=>{var t,n;return!!(null===(t=e.section)||void 0===t?void 0:t.is_podcast)||(null===(n=e.postTag)||void 0===n?void 0:n.slug)==="townhall"}},{label:"Columns",condition:e=>{var t,n,r;return!!e.section&&!(null===(t=e.section)||void 0===t?void 0:t.is_podcast)&&![132068,243259].includes(null!==(r=null===(n=e.section)||void 0===n?void 0:n.id)&&void 0!==r?r:-1)}},{label:"Documentaries",condition:e=>{var t,n;return[132068,214805,243259].includes(null!==(n=null===(t=e.section)||void 0===t?void 0:t.id)&&void 0!==n?n:-1)}}]}):(0,S.VL)({pub:r})?(l.push({href:"/listen",label:"Shows",slug:"/listen"}),a=J({navBarItems:n.filter(e=>!e.section||!e.section.is_podcast||(0,L.sectionIsSpecificallyMarkedAsNewsletter)({section:e.section,pub:r})),groups:[{label:"Newsletters",condition:e=>!!e.section}]})):a=(0,S.p$)({pub:r})?J({navBarItems:n,groups:[{label:"Projects",condition:e=>{var t,n;return[146942,146943,150226].includes(null!==(n=null===(t=e.section)||void 0===t?void 0:t.id)&&void 0!==n?n:-1)},excludeFromOthers:!0},{label:"News / Research",condition:e=>{var t,n;return[146936,146935].includes(null!==(n=null===(t=e.section)||void 0===t?void 0:t.id)&&void 0!==n?n:-1)},excludeFromOthers:!0},{label:"Calls-to-Action",condition:e=>{var t,n;return[146939,146941,146949].includes(null!==(n=null===(t=e.section)||void 0===t?void 0:t.id)&&void 0!==n?n:-1)},excludeFromOthers:!0},{label:"Recommendations",condition:e=>{var t,n;return[146958].includes(null!==(n=null===(t=e.section)||void 0===t?void 0:t.id)&&void 0!==n?n:-1)||"https://bookshop.org/shop/globalfreedoms"===e.link_url},excludeFromOthers:!0},{label:"Podcasts",condition:e=>{var t;return!!(null===(t=e.section)||void 0===t?void 0:t.is_podcast)},excludeFromOthers:!0}]}):t?J({navBarItems:n,groups:[{label:o("Newsletters"),condition:e=>{var t;return!!e.section&&!(null===(t=e.section)||void 0===t?void 0:t.is_podcast)}},{label:o("Podcasts"),condition:e=>{var t;return!!(null===(t=e.section)||void 0===t?void 0:t.is_podcast)}}]}):n,[...l,...E({groupedNavBarItems:a,pub:r})]},J=e=>{let{navBarItems:t,groups:n}=e,r=[...t],i=[],o=[...t];for(let e of n)if(e.isStandalone){let t=r.find(e.condition);if(!t)continue;i.push(t),o=o.filter(e=>e!==t),e.excludeFromOthers&&(r=r.filter(e=>e!==t))}else{var l;let t=r.filter(e.condition);if(0===t.length)continue;i.push({label:null!==(l=e.label)&&void 0!==l?l:"Other",navBarItems:t}),o=o.filter(t=>!e.condition(t)),e.excludeFromOthers&&(r=r.filter(t=>!e.condition(t)))}return[...i,...o]},E=e=>{let{groupedNavBarItems:t,pub:n}=e;return t.map(e=>"navBarItems"in e?{label:e.label,subItems:e.navBarItems.map(e=>P({navBarItem:e,pub:n}))}:P({navBarItem:e,pub:n}))},P=e=>{var t,n,i,o,l,a;let{navBarItem:d,pub:s}=e;if(d.section){let e=d.section,a=e.is_podcast&&null!==(o=null===(n=s.sections.find(t=>t.id===e.id))||void 0===n?void 0:null===(t=n.podcastSettings)||void 0===t?void 0:t.podcast_art_url)&&void 0!==o?o:e.logo_url;return(0,p._)((0,r._)({label:null!==(l=null===(i=T[s.subdomain])||void 0===i?void 0:i[e.id])&&void 0!==l?l:(0,L.truncateText)(e.name,30),href:(0,O.Ucy)(s,{section:e})},a?{logoUrl:a}:null),{slug:e.id})}let c=(0,M.Hs)(d),u="link"===c&&!(d.standard_key||A.includes(null!==(a=d.link_url)&&void 0!==a?a:"")),v=u&&s.tier<2;return(0,p._)((0,r._)({href:(0,O.Oz)(s,d,{addBase:u}),label:(0,L.truncateText)((0,M.ye)(d),30)},v?{noFollow:v}:null,"page"===c?{isNative:!0}:null),{slug:(0,O.Oz)(s,d,{addBase:!1}),newTab:u})};var R=n(347),z=n(98914);let V=()=>Math.max(document.documentElement.scrollTop||document.body.scrollTop,0),D=e=>{let{alwaysShow:t,disable:n,menuContentRef:r,menuHeight:i}=e,l=(0,o.sO)(!1),a=(0,o.sO)(V()),d=(0,o.sO)(V()),s=(0,o.I4)((e,t)=>{a.current=t,r.current&&(r.current.style.position=e,r.current.style.top="fixed"===e&&t>=0?"":"".concat(t,"px"))},[r]),c=(0,o.I4)(()=>{s("absolute",V()-i),l.current=!1},[i,s]),u=(0,o.I4)(e=>{let t=e.target;((null==t?void 0:t.classList.contains("footnote-number"))||(null==t?void 0:t.classList.contains("footnote-anchor")))&&(l.current=!0,setTimeout(c,0))},[c]),v=(0,o.I4)(()=>{var e;if(t){s("fixed",0);return}if(l.current)return;let o=d.current;d.current=V();let c=d.current,u=(null===(e=r.current)||void 0===e?void 0:e.style.position)==="fixed",v=c<=0||0>=(0,z.bs)(),m=c>=(0,z.bs)(),h=c>o,p=c<o;if(v){s("fixed",0);return}if(n){s("absolute",0);return}if(!m){if(h){if(u&&a.current>=0){s("absolute",c);return}if(!u&&a.current<c-i){s("fixed",-i);return}}if(p){if(a.current>c){s("fixed",c);return}let e=Math.max(c-i,0);if(a.current<e){s("absolute",e);return}}}},[t,r,n,s,i]);(0,o.d4)(()=>{if("undefined"!=typeof window)return window.addEventListener("scroll",v),window.addEventListener("click",u),v(),()=>{window.removeEventListener("scroll",v),window.removeEventListener("click",u)}},[n,u,v,s])};var U=n(68833),q=n(9682),j=n(15771),W=n(38841),H=n(63474),G=n(58175),Y=n(77614),Q=n(60308),K=n(47929);let $={mainMenuContent:"mainMenuContent-DME8DR",topBar:"topBar-pIF0J1",titleWithWordmark:"titleWithWordmark-GfqxEZ",titleContainer:"titleContainer-DJYq5v",title:"title-oOnUGd",buttonsContainer:"buttonsContainer-SJBuep",logoContainer:"logoContainer-p12gJb","fixed-screen-border":"fixed-screen-border-gLZ7nt",fixedScreenBorder:"fixed-screen-border-gLZ7nt"},ee=e=>{var t;let{className:n,freeSignup:l,freeSignupEmail:d,hasViralGiftsCount:s,hideNavBar:h,hideTitle:p,isAccountContext:f,isChatActive:g,isMeetingsActive:_,isPostView:y,pub:Z,selectedSectionId:k,showCustomerSupportModeModal:x,user:C,profile:N}=e;p="profile"===Z.homepage_type||p;let{getConfigFor:B}=(0,I.xR)(),{isMobile:M}=(0,b.v9)(),L=(0,u.useMediaQuery)({query:"(max-width: 650px)"}),[T]=(0,q.tv)(),A=(0,o.sO)(null),X=(0,o.sO)(null),J=(0,o.sO)(null),E="profile"===Z.homepage_type,P=E&&T.path.match(/\/profile\/(subscribers|followers|following)/),R=!E&&!!Z.logo_url&&!(0,S.kb)({pub:Z}),z=!!(!p&&Z.logo_url_wide),V=y?!!B("show_menu_on_posts"):!h,Y=(0,S.kb)({pub:Z})||!!(B("larger_wordmark_on_publication_homepage")&&z),{currentMenuHeight:ee,currentTopBarHeight:ei,isMinimized:eo,maxMenuHeight:el}=et({hasExpandableTopBar:Y,forceMaximized:!y&&!f,forceMinimized:!!f,isMobile:M,showNavBar:V,showWordmark:z}),ea=M?12:Y?40:20,ed=!M&&Y&&eo?20:0,es=M?Y?32:20:Y?72:36,ec=!M&&Y&&eo?.5555555555555556:1;D({alwaysShow:!1,disable:!y,menuContentRef:A,menuHeight:ee});let{shouldCenterTitle:eu}=en({buttonsRef:J,titleRef:X,horizontalGap:12,horizontalPadding:Y?40:20}),ev=M||!eu,em=f?(0,O.SVA)(Z):"/",eh=0;return E&&!L&&("/"===T.path||"/profile/subscribers"===T.path)&&(eh=ea+(M?48:38)+12),(0,i.tZ)(er,{profile:N,pub:Z,useAccentTheme:!!f,children:(0,i.BX)("div",{className:a()("main-menu",n),"data-testid":"navbar",children:[(0,i.BX)("div",{ref:A,className:$.mainMenuContent,children:[E&&("/"===T.path||"/profile/subscribers"===T.path)&&(0,i.tZ)("div",{className:$.fixedScreenBorder,style:{height:ei}}),(0,i.BX)(w.gq,{alignItems:"center",borderBottom:V?void 0:"detail-themed",className:$.topBar,gap:12,justifyContent:"space-between",paddingBottom:M?12*!V:void 0,paddingTop:M?12:void 0,paddingX:ea,style:M?void 0:{position:"relative",height:ei},children:[(0,i.BX)("div",{className:$.logoContainer,style:(0,r._)({display:E||R||!ev?null:"none",flexBasis:0,flexGrow:+!ev},Y?{transform:"translateX(-".concat(ed,"px)")}:null),children:[E&&(0,i.BX)(w.gq,{alignItems:"center",gap:40,children:[(0,i.tZ)(w.hs,{alignItems:"center",as:"a",height:20,href:(0,O.n1t)((0,O.SVA)(),{utm_content:K.fZ.islandSubstackLogo}),justifyContent:"center",tabIndex:-1,width:20,children:M?(0,i.tZ)(v.Z,{height:24}):(0,i.tZ)(v.Z,{style:{transform:"scale(1.4)"}})}),P&&(0,i.tZ)(j.hU,{className:$.backButton,href:(0,Q.TJI)(Z),size:M?"sm":"md",children:(0,i.tZ)(c.Z,{size:20})})]}),R&&(0,i.tZ)(W.jM,{href:em,pub:Z,size:M?32:40,onClick:()=>{(0,U.j)(U.FP.NAV_BAR_HOME_LINK_CLICKED)}})]}),!p&&(0,i.tZ)("div",{ref:X,className:$.titleContainer,style:(0,r._)({flexGrow:0},Y?{transform:"translateX(".concat(ev?-ed:0,"px)")}:null),children:(0,i.tZ)(G.xv,{as:"h1",className:a()($.title,{[null!==(t=$.titleWithWordmark)&&void 0!==t?t:""]:Z.logo_url_wide}),font:"pub-headings",children:(0,i.tZ)(H.A0,{href:em,children:Z.logo_url_wide?(0,i.tZ)("img",{alt:Z.name,src:(0,O.zF4)(Z.logo_url_wide,null,{height:2*es,crop:"limit",leadingSegments:["e_trim:10:white","e_trim:10:transparent"]}),style:(0,r._)({display:"block",height:es},Y?{transform:"scale(".concat(ec,")"),transformOrigin:ev?"left":"center"}:null)}):Z.name})})}),(0,i.tZ)(w.gq,{alignItems:"center",justifyContent:"end",style:{flexBasis:0,flexGrow:1},children:(0,i.tZ)("div",{ref:J,className:$.buttonsContainer,style:Y?{transform:"translateX(".concat(ed,"px)")}:void 0,children:(0,i.tZ)(m.Z,{freeSignup:l,freeSignupEmail:d,hasViralGiftsCount:s,isAccountContext:f,isMeetingsActive:_,pub:Z,showCustomerSupportModeModal:x,user:C})})}),E&&eh>0&&(0,i.tZ)("div",{style:{position:"absolute",bottom:M?"0px":"-1px",left:"0px",width:"".concat(eh,"px"),height:"1px",backgroundColor:"var(--color-bg-primary)",zIndex:1}})]}),V&&(0,i.tZ)(F,{isChatActive:g,isMeetingsActive:_,pub:Z,selectedSectionId:k})]}),(0,i.tZ)("div",{style:{height:el}})]})})},et=e=>{let{forceMaximized:t,forceMinimized:n,hasExpandableTopBar:r,isMobile:i,showNavBar:l,showWordmark:a}=e,[d,c]=(0,o.eJ)(!1),u=(0,o.sO)(null),v=!!n||!t&&d,m=e=>i?l?44:56:r?e?72:120:a?88:72,h=l?i?45:50:0,p=m(n)+h,f=m(v),g=(0,o.I4)(()=>{let e=u.current,t=document.documentElement.scrollTop||document.body.scrollTop;if(u.current=t,!s()(e))t>e?t>p+5&&c(!0):t<=0&&c(!1)},[p]);return(0,o.d4)(()=>(window.addEventListener("scroll",g),()=>window.removeEventListener("scroll",g)),[g]),{currentMenuHeight:f+h,currentTopBarHeight:f,isMinimized:v,maxMenuHeight:p}},en=e=>{let{buttonsRef:t,titleRef:n,horizontalGap:r,horizontalPadding:i}=e,{isMobile:l}=(0,b.v9)(),[a,d]=(0,o.eJ)(!l),s=(0,o.I4)(()=>{if(!t.current||!n.current)return;if(l){d(!1);return}let e=t.current.getBoundingClientRect().width,o=n.current.getBoundingClientRect().width;d(.5*document.body.clientWidth-e-r-i>.5*o)},[t,r,i,l,n]);return(0,o.d4)(()=>(window.addEventListener("resize",s),s(),setTimeout(s,0),()=>{window.removeEventListener("resize",s)}),[s]),{shouldCenterTitle:a}},er=e=>{let{profile:t,pub:n,useAccentTheme:r,children:o}=e;return r?(0,i.tZ)(h.w,{children:o}):"profile"===n.homepage_type&&t?(0,i.tZ)(Y.F,{profile:t,children:o}):(0,i.tZ)(R.h,{children:o})}},21061:function(e,t,n){n.d(t,{l:()=>a});var r=n(30396),i=n(24350),o=n.n(i),l=n(81977);let a=e=>{let{pub:t}=e,n=o()(null==t?void 0:t.sections,"id"),{setting:i,save:a}=(0,l.m)({key:"archived_section_ids",fallback:[]}),[d,s]=(0,r.eJ)(i),[c,u]=(0,r.eJ)(!1),v=async()=>{u(!0),await a({setting:d})};return{isSaving:c,ids:d,onChange:e=>{let{ids:t}=e;s(t.filter(e=>n[e]))},onSave:v}}},73207:function(e,t,n){n.d(t,{I:()=>s});var r=n(30396),i=n(24350),o=n.n(i),l=n(78718),a=n.n(l),d=n(81977);let s=e=>{let{pub:t,pubSetting:n="column_section_ids"}=e,i=o()(null==t?void 0:t.sections,"id"),{setting:l,save:s}=(0,d.m)({key:n,fallback:{metadata:{},order:[]}}),[c,u]=(0,r.eJ)(l.order),[v,m]=(0,r.eJ)(l.metadata),[h,p]=(0,r.eJ)(!1),f=async()=>{p(!0),await s({setting:{order:c,metadata:a()(v,c)}})};return{isSaving:h,metadata:v,ids:c,onChangeMetadata:e=>{let{metadata:t}=e;m(t)},onChangeOrder:e=>{let{ids:t}=e;u(t.filter(e=>i[e]))},onSave:f}}},98130:function(e,t,n){n.d(t,{L:()=>s});var r=n(30396),i=n(39693),o=n.n(i),l=n(24350),a=n.n(l),d=n(81977);let s=e=>{let{pub:t}=e,n=a()(null==t?void 0:t.sections,"id"),{setting:i,save:l}=(0,d.m)({key:"event_section_ids",fallback:[]}),[s,c]=(0,r.eJ)(i),[u,v]=(0,r.eJ)(!1),m=async()=>{v(!0),await l({setting:s})};return{initialSections:o()(i.map(e=>n[e])),isSaving:u,ids:s,sections:o()(s.map(e=>n[e])),onChange:e=>{let{ids:t}=e;c(t.filter(e=>n[e]))},onSave:m}}},81977:function(e,t,n){n.d(t,{m:()=>i});var r=n(56629);let i=e=>{let t,{key:n,fallback:i}=e,{getSettingFor:o,changeSetting:l}=(0,r.So)(),a=o(n);try{t=a?JSON.parse(a):i}catch(e){t=i}return{setting:t,save:async e=>{let{setting:t}=e;await l({[n]:JSON.stringify(t)})}}}},94778:function(e,t,n){n.d(t,{c:()=>v});var r=n(30396),i=n(39693),o=n.n(i),l=n(24350),a=n.n(l),d=n(78718),s=n.n(d),c=n(81977);let u=["mediumYellow","darkGreen","mediumRed","darkOrange","mediumPurple","mediumBlue"],v=e=>{let{pub:t}=e,n=a()(null==t?void 0:t.sections,"id"),{setting:i,save:l}=(0,c.m)({key:"video_section_ids",fallback:{metadata:{},order:[]}});for(let e=0;e<i.order.length;e++){var d,v,m;let t=i.order[e];t&&((null===(d=i.metadata[t])||void 0===d?void 0:d.carouselColor)||(i.metadata[t]={youtubeUrl:null!==(m=null===(v=i.metadata[t])||void 0===v?void 0:v.youtubeUrl)&&void 0!==m?m:"",carouselColor:u[e%u.length]}))}let[h,p]=(0,r.eJ)(i.order),[f,g]=(0,r.eJ)(i.metadata),[_,b]=(0,r.eJ)(!1),w=async()=>{b(!0),await l({setting:{order:h,metadata:s()(f,h)}}),window.location.reload()};return{initialSections:o()(i.order.map(e=>n[e])),isSaving:_,metadata:f,ids:h,sections:o()(h.map(e=>n[e])),onChangeMetadata:e=>{let{metadata:t}=e;g(t)},onChangeOrder:e=>{let{ids:t}=e;p(t.filter(e=>n[e]))},onSave:w}}},35543:function(e,t,n){n.d(t,{Sv:()=>S,Xe:()=>I,oJ:()=>B,oh:()=>M,yr:()=>O});var r=n(7409),i=n(99282),o=n(58865),l=n(16584),a=n(30396),d=n(82569),s=n.n(d),c=n(94734),u=n(17520),v=n(69241),m=n(19548),h=n(95441),p=n(60807),f=n(54371),g=n(6910),_=n(48980),b=n(63018),w=n(98914),y=n(84747),Z=n(70379),k=n(81043),x=n(23945);function C(){let e=(0,o._)(["Followed ",""]);return C=function(){return e},e}function N(){let e=(0,o._)(["Unfollowed ",""]);return N=function(){return e},e}function I(e){let t=(0,p.aF)();return(0,b._I)("/api/v1/feed/following",(0,r._)({auto:!!t},e))}function B(){let{mutate:e}=(0,v.kY)();return function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e("/api/v1/feed/following",...n)}}function M(e,t,n){let{isFollowing:r,toggle:i}=S(e,t,n),o=(0,p.aF)(),a=(0,m.gc)(null==e?void 0:e.id),d=!!(o&&e&&o.id!==e.id)&&!a,s=[];return d&&s.push((0,l.tZ)(y.u,{leading:r?(0,l.tZ)(g.m,{stroke:"var(--color-fg-primary)"}):(0,l.tZ)(f.w,{stroke:"var(--color-fg-primary)"}),onClick:i,children:r?"Unfollow":"Follow"})),s}function S(e,t,n,o){let a=(0,p.aF)(),{onboardingModalRef:d,requireLogin:v}=(0,k.SJ)(),m=function(e,t){let{data:n}=I(t);return(null!=n?n:[]).includes(null!=e?e:0)}(null==e?void 0:e.id,o),{mutate:f,data:g}=I(o),b=(0,Z.pm)(),y=(0,x.Q1)((null==e?void 0:e.name)||""),{iString:B,iTemplate:M}=(0,h.M1)(),S=async o=>{if(e){if(!a&&d.current){v?v():d.current.open();return}f(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return o?[...t,e.id]:s()(t,e.id)},{revalidate:!1});try{await (0,_.rd)("/api/v1/feed/".concat(e.id,"/follow"),{method:o?"POST":"DELETE",json:{surface:t,noteId:n}}),b.popToast(e=>(0,l.tZ)(Z.FN,(0,i._)((0,r._)({},e),{Icon:o?c.Z:u.Z,text:o?M(C(),y):M(N(),y),cta:B("Undo"),onAccept:()=>S(!o)})))}catch(e){b.popToast(t=>(0,l.tZ)(Z.FN,(0,i._)((0,r._)({},t),{text:(0,w.zx)(e)})));return}}};return{isFollowing:m,toggle:()=>S(!m),isLoaded:!!g}}function O(e,t,n){let{isFollowing:r,toggle:i}=S(e,t,n),[o,l]=(0,a.eJ)(!1);return{isFollowing:r,buttonProps:{onClick:()=>{i(),r||l(!0)},onMouseLeave:()=>l(!1)}}}},36518:function(e,t,n){n.d(t,{N$:()=>h,lR:()=>f});var r=n(16584),i=n(6400),o=n(30396),l=n(32351),a=n(14952),d=n(48980),s=n(8635),c=n(7882),u=n(98750),v=n(98914),m=n(6070);function h(e){let{defaultState:t,shouldLoad:n=!0,shouldPoll:i=!1,activityToken:o,children:l}=e;return(0,r.tZ)(g,{defaultState:null==t?void 0:t.activity,shouldLoad:n,shouldPoll:i,activityToken:o,children:l})}let p=(0,i.createContext)({lastViewedAt:null,activityUnreadCount:0,activityUnreadAtMax:!1,refetch:async()=>!0,markAllAsRead:async()=>{},hasLoadedOnce:!1});function f(){return(0,o.qp)(p)}function g(e){let{defaultState:t,shouldLoad:n=!0,shouldPoll:i=!1,activityToken:h,children:f}=e,g=(0,c.ib)({pathname:"/api/v1/activity/unread",deps:[],auto:n,initialResult:t,query:{token:h}}),_=(0,a.Ij)(),b=!!_&&(0,m.HD)({pub:_}),w=!(0,u.th)()&&!b,y=async()=>{let e=await (0,d.rd)("/api/v1/activity/unread",{method:"post",json:{after:new Date().toISOString(),token:h}});g.setResult(e)};(0,s.Z)(async()=>{if(i&&n&&(0,v.dr)()){var e;let t=(null===(e=g.result)||void 0===e?void 0:e.count)||0,n=await g.refetch();if(t!==(!(n instanceof Error)&&n.count||0))return!0}},6e4);let Z=null!=g.result?g.result.count:0;return(0,o.d4)(()=>{try{var e,t;null===(e=(t=navigator).setAppBadge)||void 0===e||e.call(t,Z)}catch(e){console.warn(e)}},[Z]),(0,r.BX)(p.Provider,{value:{lastViewedAt:null!=g.result?g.result.lastViewedAt:null,activityUnreadCount:Z,activityUnreadAtMax:null!=g.result&&g.result.max,refetch:g.refetch,markAllAsRead:y,hasLoadedOnce:g.hasLoadedOnce},children:[(0,r.tZ)(l.Metadata,{badge:w?Z:void 0}),f]})}p.displayName="NotificationsContext"},42375:function(e,t,n){n.d(t,{$U:()=>v,rI:()=>h});var r=n(16584),i=n(98661),o=n(30396),l=n(25642),a=n(27744),d=n(75822),s=n(81043),c=n(75419),u=n(41233);function v(e){let{state:t,dispatch:n,surface:i,children:v}=e,{onboardingModalRef:h}=(0,s.SJ)(),p=(0,o.Ye)(()=>({dispatch:n}),[]);return(0,r.tZ)(m.Provider,{value:i,children:(0,r.tZ)(a.RR.Provider,{value:p,children:(0,r.tZ)(a.ev.Provider,{value:t,children:(0,r.tZ)(l.ju,{children:(0,r.tZ)(c.Au,{children:(0,r.BX)(d.qS,{children:[v,(0,r.tZ)(u.fA,{isOpen:!!t.isSigningIn,onCancel:()=>n({type:"sign_in",payload:{isSigningIn:!1}}),onSuccess:()=>{n({type:"sign_in",payload:{isSigningIn:!1}}),document.location.reload()},onSignup:()=>{var e;n({type:"sign_in",payload:{isSigningIn:!1}}),null===(e=h.current)||void 0===e||e.open()},noExit:t.signInNoExit})]})})})})})})}let m=(0,i.createContext)("feed");function h(){return(0,o.qp)(m)}},43251:function(e,t,n){n.d(t,{Lw:()=>i});var r=n(60308);function i(e,t){return(null==e?void 0:e.profile_set_up_at)?(0,r.NNq)(e,t):(0,r.Nhr)((null==t?void 0:t.utm_source)?{utm_source:t.utm_source}:void 0)}},46234:function(e,t,n){n.d(t,{B:()=>s});var r=n(7409),i=n(16584),o=n(19081),l=n(58175),a=n(14773),d=n(63651);let s=e=>{let{firehoseFeedUrl:t,pub:n,section:s,trackingSource:c,variant:u="default"}=e,v=(0,a.n1)("/p/how-do-i-add-a-bulwark-member-only",(0,r._)({utm_source:c},s?{utm_content:s.id}:null)),m=(0,a.n1)("/account/add-all-podcasts",(0,r._)({utm_source:c},s?{utm_content:s.id}:null)),h=t?(0,i.BX)(l.xv.B3,{as:"li",font:"text",children:["Click here to set up your podcast app for"," ",(0,i.tZ)("a",{href:t,rel:"noopener noreferrer",target:"_blank",children:"everything in one feed"})]}):null,p=(0,d.W1P)(n,{params:{utm_source:c}});return(0,i.tZ)("div",{className:"container-o06YlK",children:"member-only"===u?(0,i.BX)(o.tu,{as:"ul",gap:4,children:[(0,i.BX)(l.xv.B3,{as:"li",font:"text",children:["Want to listen without ads? Join Bulwark+ for exclusive ad-free versions of all Bulwark shows."," ",(0,i.tZ)("a",{href:p,rel:"noopener noreferrer",target:"_blank",children:"Upgrade now"})]}),(0,i.BX)(l.xv.B3,{as:"li",font:"text",children:["Already a Bulwark+ member? Login to access premium shows. ",(0,i.tZ)("a",{href:v,children:"Learn more here"})]})]}):(0,i.BX)(o.tu,{as:"ul",gap:4,children:[(0,i.BX)(l.xv.B3,{as:"li",font:"text",children:["Learn about"," ",(0,i.tZ)("a",{href:v,rel:"noopener noreferrer",target:"_blank",children:"setting up your Bulwark+ private podcast feeds"})]}),h||(0,i.BX)(l.xv.B3,{as:"li",font:"text",children:["Add the Bulwark Premium Show"," ",(0,i.tZ)("a",{href:m,rel:"noopener noreferrer",target:"_blank",children:"super feed"})]})]})})}},30733:function(e,t,n){n.d(t,{N:()=>a});var r=n(16584),i=n(94184),o=n.n(i),l=n(71068);let a=e=>{let{children:t,columns:n=2,paddingTop:i=24}=e,a=(0,l.oB)({paddingTop:i,paddingX:16,paddingBottom:32});return(0,r.tZ)("div",{className:o()("container-kIrj2N",a,{"containerThreeColumn-Rot594":3===n,"containerFourColumn-vOHVwe":4===n}),children:t})}},84370:function(e,t,n){n.d(t,{T:()=>a});var r=n(16584),i=n(43570),o=n(58175),l=n(52503);function a(e){let{modifier:t,children:n,className:a}=e,d=function(e){let t=navigator.platform.toLowerCase().includes("mac");switch(null==e?void 0:e.toLowerCase()){case"cmd":return t?"⌘":"Ctrl + ";case"shift":return t?"⇧":"Shift + ";case"alt":case"opt":return t?"⌥":"Alt + ";case"ctrl":return t?"⌃":"Ctrl + ";case"esc":return"Esc";case"left":return"←";case"right":return"→";case"up":return"↑";case"down":return"↓";default:return""}}(t);return(0,r.tZ)(i.Vp,{priority:"secondary-outline",theme:"default",className:a,children:(0,r.BX)(o.xv,{as:"kbd",font:"text",weight:"regular",color:"secondary",className:l.Z.kbd,children:[d,n]})})}},15562:function(e,t,n){n.d(t,{W:()=>o});var r=n(16584),i=n(6490);let o=e=>{let{isOpen:t=!1,title:n,description:o,icon:l,onClose:a,primaryButton:d,secondaryButton:s}=e;return(0,r.BX)(i.u_,{isOpen:t,onClose:a,children:[n&&(0,r.tZ)(i.xB,{title:n,description:o,showClose:!1,icon:l}),(0,r.tZ)(i.ex,{}),(0,r.tZ)(i.mz,{primaryButton:d,secondaryButton:s})]})}},78096:function(e,t,n){n.d(t,{dm:()=>f,gd:()=>g,yo:()=>_});var r=n(7409),i=n(99282),o=n(98848),l=n(16584),a=n(94184),d=n.n(a),s=n(98661),c=n(86374),u=n(95441),v=n(15771),m=n(19081),h=n(84747),p=n(87815);let f=e=>{var{priority:t="secondary-outline",size:n="md"}=e,i=(0,o._)(e,["priority","size"]);"secondary-outline"===t&&(t="tertiary");let a="tertiary"===t;return(0,l.tZ)(w.Provider,{value:{priority:t,size:n},children:(0,l.tZ)(m.X2,(0,r._)({radius:"sm"===n?"xs":"sm",className:d()(p.Z.group,a&&p.Z.outlined)},i))})},g=e=>{var{children:t,priority:n="primary",size:a="md",menuItems:d,additionalMenuProps:s={}}=e,v=(0,o._)(e,["children","priority","size","menuItems","additionalMenuProps"]);let{iString:m}=(0,u.M1)();return(0,l.BX)(f,{priority:n,size:a,children:[(0,l.tZ)(_,(0,i._)((0,r._)({},v),{children:t})),(0,l.tZ)(h.M,(0,i._)((0,r._)({},s),{layerOptions:{placement:"bottom-end"},trigger:(0,l.tZ)(b,(0,i._)((0,r._)({},v),{"aria-label":m("Dropdown menu"),children:(0,l.tZ)(c.Z,{size:"sm"===a?16:"md"===a?20:24})})),children:d}))]})},_=(0,s.forwardRef)((e,t)=>{var{className:n}=e,a=(0,o._)(e,["className"]);let{priority:c,size:u}=(0,s.useContext)(w);return(0,l.tZ)(v.zx,(0,i._)((0,r._)({priority:c,size:u,className:d()(p.Z.segment,n)},a),{ref:t}))}),b=(0,s.forwardRef)((e,t)=>{var{className:n}=e,a=(0,o._)(e,["className"]);let{priority:c,size:u}=(0,s.useContext)(w);return(0,l.tZ)(v.hU,(0,i._)((0,r._)({priority:c,size:u,className:d()(p.Z.segment,n)},a),{ref:t}))}),w=(0,s.createContext)({priority:"primary",size:"md"})},57693:function(e,t,n){n.d(t,{l:()=>g});var r=n(16584),i=n(30396),o=n(19425),l=n(20160),a=n(57391),d=n(36518),s=n(60807),c=n(68833),u=n(7882),v=n(19081),m=n(74312),h=n(98012);let p={alert:"alert-pEnrFa",transition:"transition-FsyEAS",enterFrom:"enterFrom-dljIVN",enterTo:"enterTo-HLLVxF",leaveFrom:"leaveFrom-aHkaAL",leaveTo:"leaveTo-k1oI5e"},f=e=>{(0,c.j)(c.FP.NOTIFICATIONS_ALERT_SHOWN,["comment_audience","comment_id","community_comment_id","created_at","id","mention_id","publication_id","sender_count","target_comment_id","target_community_comment_id","target_community_post_id","target_post_id","target_user_id","type"].reduce((t,n)=>(t[n]=null==e?void 0:e[n],t),{}))};function g(){var e;let{activityUnreadCount:t}=(0,d.lR)(),{exposeExperiment:c,getExperimentVariant:g}=(0,a.jc)(),{isLoading:_,result:b,refetch:w}=(0,u.ib)({pathname:"/api/v1/activity-feed-web",query:{limit:1},auto:!1});(0,i.d4)(()=>{t>0&&w()},[t]);let[y,Z]=(0,i.eJ)(!1),[k,x]=(0,i.eJ)(!1),{isLoading:C,fetch:N,result:I}=(0,m.Oe)({module:"./MiniNotificationsViewer",onRequest:()=>Promise.all([n.e("3751"),n.e("5434"),n.e("276"),n.e("7833"),n.e("3030")]).then(n.bind(n,79075)),fetchImmediately:!1}),B=(0,h.Z)(),{userSettings:M,changeSetting:S}=(0,s.SE)(),O=null==b?void 0:null===(e=b.activityItems)||void 0===e?void 0:e[0],L=(null==O?void 0:O.created_at)?(0,h.Z)(null==O?void 0:O.created_at):B.subtract(100,"year"),T=(null==M?void 0:M.last_notification_alert_shown_at)?(0,h.Z)(M.last_notification_alert_shown_at):B.subtract(100,"year"),A=7>B.diff(L,"day")&&L.diff(T,"hour")>2,F=(0,i.sO)(null),X=()=>{F.current&&window.clearTimeout(F.current)},J=()=>{X(),F.current=window.setTimeout(()=>{Z(!1)},6e3)};return(0,i.d4)(()=>{A&&t>0&&(c("notification_alert_improved"),"treatment"!==g("notification_alert_improved")||(I&&!y?window.setTimeout(()=>{Z(!0),S("last_notification_alert_shown_at",(0,h.Z)().toISOString()),f(O),J()},2e3):I||C||N()))},[_,b,t,C,A,y,Z]),(0,r.tZ)(r.HY,{children:(y||k)&&b&&(0,r.tZ)(o.u,{style:{position:"fixed",left:"auto",right:20,top:92,zIndex:100},appear:!0,show:y,beforeEnter:()=>x(!0),afterLeave:()=>x(!1),enter:p.transition,enterFrom:p.enterFrom,enterTo:p.enterTo,leave:p.transition,leaveFrom:p.leaveFrom,leaveTo:p.leaveTo,children:(0,r.tZ)(l.W,{children:(0,r.tZ)(v.hs,{radius:"md",border:"detail",className:p.alert,onMouseEnter:X,onMouseLeave:J,shadow:"lg",bg:"primary",children:(0,r.tZ)(m.cr,{module:"@/frontend/reader2/activity/MiniNotificationsViewer",resolve:e=>e.MiniNotificationsStack,onRequest:()=>Promise.all([n.e("3751"),n.e("5434"),n.e("276"),n.e("7833"),n.e("3030")]).then(n.bind(n,79075)),result:b,isReadOnly:!0})})})})})}},83010:function(e,t,n){n.d(t,{H:()=>c,n:()=>u});var r=n(7409),i=n(99282),o=n(16584),l=n(6400),a=n(30396),d=n(68833);let s=(0,l.createContext)({surface:null,platform:"web"});function c(e){let{children:t,trackingProps:n}=e,i=(0,a.qp)(s),l=(0,a.Ye)(()=>(0,r._)({},i,n),Object.values(n));return(0,o.tZ)(s.Provider,{value:l,children:t})}function u(){let e=(0,a.qp)(s);return(t,n)=>(0,d.j)(t,(0,r._)((0,i._)((0,r._)({},e),{ui:"page"===e.surface?"activity-page":e.surface}),n))}},8828:function(e,t,n){n.d(t,{dd:()=>o,oH:()=>i});var r=n(48980);let i=function(){let{before:e,tab:t="all"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async n=>{try{var i,o;let l=await (0,r.rd)("/api/v1/messages/inbox",{query:{paginate:"true",tab:t,before:e}});n({type:"inbox-new_items",payload:{threads:null==l?void 0:l.threads,hasMore:null==l?void 0:l.more,directMessagesUnreadCount:null==l?void 0:l.directMessagesUnreadCount,pendingInviteCount:null==l?void 0:l.pendingInviteCount,pendingInviteUnreadCount:null!==(i=null==l?void 0:l.pendingInviteUnreadCount)&&void 0!==i?i:null==l?void 0:l.pendingInviteCount,pubChatUnreadCount:null!==(o=null==l?void 0:l.pubChatUnreadCount)&&void 0!==o?o:0,mostRecentChatTimestamp:l.mostRecentChatTimestamp}})}catch(e){if(console.warn("error",e),e instanceof r.kp)n({type:"inbox-new_error",payload:{error:e}});else throw e}}},o=e=>async t=>{"direct-message"===e&&t(i({tab:"people"})),t({type:"inbox-set_filter",payload:e})}},76819:function(e,t,n){n.d(t,{Hs:()=>l,Rx:()=>a,ye:()=>o});var r=n(7409),i=n(75561);function o(e){var t,n,r;return e.link_title||(null===(t=e.postTag)||void 0===t?void 0:t.name)||(null===(n=e.section)||void 0===n?void 0:n.name)||(null===(r=e.post)||void 0===r?void 0:r.title)||""}function l(e){var t;return e.postTag?"tag":e.section?"section":(null===(t=e.post)||void 0===t?void 0:t.type)==="page"?"page":e.post?"post":"link"}function a(e,t){let{isChatActive:n,isMeetingsActive:o,hasMultipleNewsletters:l,isChatEnabled:a,isFeedEnabled:d,isReaderReferralsLeaderboardActive:s,language:c="en",useReordering:u=!1}=t,v=e.filter(e=>!e.standard_key),m=new Map(e.filter(e=>e.standard_key).map(e=>[e.standard_key,e])),{iString:h}=I18N.i(c);for(let e of v){var p;(null===(p=e.section)||void 0===p?void 0:p.hide_from_navbar)&&(e.is_hidden=!0)}let f=[d&&{standard_key:"notes",link_title:"Notes",link_url:"/notes"},a&&{standard_key:"chat",link_title:"Chat",link_url:"/chat",is_hidden:!n},o&&{standard_key:"meetings",link_title:"Meetings",link_url:"/meetings"},...v,{standard_key:"archive",link_title:h("Archive"),link_url:"/archive"},l&&{standard_key:"newsletters",link_title:h("Newsletters"),link_url:"/newsletters",is_hidden:!0},s&&{standard_key:"leaderboard",link_title:h("Leaderboard"),link_url:"/leaderboard"},{standard_key:"about",link_title:h("About"),link_url:"/about"}].filter(e=>!!e).map(e=>{if(e.standard_key){let t=m.get(e.standard_key);if(t)return(0,i.CD)((0,r._)({},e),t)}return e});if(u){let e=["about","notes","chat","archive"];return[...f.filter(t=>!e.includes(t.standard_key||"")),...e.map(e=>f.find(t=>t.standard_key===e)).filter(e=>!!e)].filter(e=>!!e)}return f}},62515:function(e,t,n){n.d(t,{Ds:()=>d,Rm:()=>o,aD:()=>l,gp:()=>a});var r=n(14773),i=n(63651);function o(e,t){return(0,r.Q2)("/chat/".concat(e),t)}function l(e,t){return(0,r.Q2)("/chat/".concat(e),t)}function a(e){return(0,r.Q2)("/chat/new",e)}function d(e){let{userId:t,userName:n}=e,o=(0,i.JlE)({userId:t,userName:n});return"".concat((0,r.ZX)(),"/chat/dm/user/").concat(o)}}}]);