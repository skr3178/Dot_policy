"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["1844"],{54796:function(e,t,i){i.d(t,{Z:()=>n});let n={imageBubble:"imageBubble-PUJ2WF",clickable:"clickable-z7o89Z",imageGrid:"imageGrid-TadIyX","size-1":"size-1-rfav9C",size1:"size-1-rfav9C","size-2":"size-2-LosM46",size2:"size-2-LosM46","size-4":"size-4-O0kTBk",size4:"size-4-O0kTBk","size-3":"size-3-MmfJJu",size3:"size-3-MmfJJu","size-5":"size-5-cc0rFG",size5:"size-5-cc0rFG","size-6":"size-6-SP0NOv",size6:"size-6-SP0NOv",contained:"contained-GU4Fy5",preview:"preview-SSSK5E",dm:"dm-XsOsrC",diptychImage:"diptychImage-L7kJ7N",carouselImage:"carouselImage-X3Cree",imageCountOverlay:"imageCountOverlay-J0DNI5",imageGridThumbnail:"imageGridThumbnail-D4cu25",thumbnailImage:"thumbnailImage-uSyTfq",imageCarouselContainer:"imageCarouselContainer-Y1hu48",imageCarousel:"imageCarousel-s8aXY3",carouselSpacer:"carouselSpacer-yyKzy_",overscrollTransition:"overscrollTransition-FddfeV",arrowContainer:"arrowContainer-_8XYI6",left:"left-QRb4rs",right:"right-_sA6d0",arrowButton:"arrowButton-iwL13X",hidden:"hidden-YjEzYn",arrowIcon:"arrowIcon-Vpjw1u",permalink:"permalink-Zw9a6V",restack:"restack-AvS7gl"}},71891:function(e,t,i){i.d(t,{Z:()=>n});let n={header:"header-m3czQu",headerWithJustTitle:"headerWithJustTitle-AWuTLu",noImage:"noImage-VVe5Lh",actions:"actions-mMxsK2",thickRule:"thickRule-c8r1qH",bodyWrapperTwoMiddleColumns:"bodyWrapperTwoMiddleColumns-EOoshF",notifyButton:"notifyButton-wkevVH",hoverText:"hoverText-OtXqlP",notifyButtonInternal:"notifyButtonInternal-wv0x02",titleNotifyButton:"titleNotifyButton-bWyjlY",caret:"caret-vNjCU3",collapsed:"collapsed-KQpXLZ"}},44989:function(e,t,i){i.d(t,{Z:()=>n});let n={listOuter:"listOuter-l1CBOE"}},16823:function(e,t,i){i.d(t,{Z:()=>n});let n={specialFeatureHeaderContainer:"specialFeatureHeaderContainer-Skrlng",thickRule:"thickRule-oguYhe",threeColumnContainer:"threeColumnContainer-ziuSvf",mediumRule:"mediumRule-wQbBfo",headerButtonMobile:"headerButtonMobile-DURJFG",america250HomepageHeader:"america250HomepageHeader-Gp7Pmn",a250Rule:"a250Rule-oAzvtB",a250Logo:"a250Logo-sb3SfS"}},52478:function(e,t,i){i.d(t,{Z:()=>n});let n={dragArea:"dragArea-sMT00C",dragActive:"dragActive-g1aWbC",text:"text-ehFyYa",file:"file-P3qftv"}},36938:function(e,t,i){i.d(t,{Z:()=>n});let n={input:"input-HbMy35",inputBox:"inputBox-s2Hfm6",hasChips:"hasChips-CWoZeG",options:"options-cBih9B",empty:"empty-BlbXgq",option:"option-H0r16D",check:"check-AsJsGw",button:"button-rODruy"}},77081:function(e,t,i){i.d(t,{D:()=>S});var n=i(7409),o=i(99282),r=i(58865),l=i(16584),a=i(30396),s=i(80569),d=i.n(s),c=i(95441),u=i(15771),p=i(17352),h=i(82402),m=i(19081),g=i(6490),v=i(38841),Z=i(58175),f=i(70379),b=i(60308),w=i(84864);function y(){let e=(0,r._)(["Recommend ","?"]);return y=function(){return e},e}function _(){let e=(0,r._)(["Recommend "," and "," other Substacks?"]);return _=function(){return e},e}function C(){let e=(0,r._)(["Since you embedded "," in your post, we thought you might like to recommend them to your subscribers."]);return C=function(){return e},e}function B(){let e=(0,r._)(["Since you embedded these Substacks in your post, we thought you might like to recommend them to your subscribers."]);return B=function(){return e},e}function k(){let e=(0,r._)(["Recommend "," Substack"]);return k=function(){return e},e}function x(){let e=(0,r._)(["Recommend "," Substacks"]);return x=function(){return e},e}function S(e){var t,i;let{pub:r,pubsToRecommend:s}=e,{iString:p,iTemplate:h,iPlural:v}=(0,c.M1)(),Z=(0,f.pm)(),[b,w]=(0,a.eJ)(!0),[S,I]=(0,a.eJ)(!1),[X,T]=(0,a.eJ)(new Set((s||[]).map(e=>e.id)));if(0===s.length||!s[0])return null;let N=()=>{w(!1)},L=e=>{let t=new Set(X);t.has(e)?t.delete(e):t.add(e),T(t)},q=async()=>{try{I(!0);let e=Array.from(X);await d().put("/api/v1/recommendations/multiple").send({recommending_publication_id:r.id,recommended_publication_ids:e,source:"post_publish_cta",suggested:e.map(()=>!0)}),e.length&&Z.popToast(t=>(0,l.tZ)(f.FN,(0,o._)((0,n._)({},t),{text:v("Added %1 recommendation","Added %1 recommendations",e.length)}))),N()}catch(e){console.error("Failed to add recommendations: ",e),Z.popToast(e=>(0,l.tZ)(f.FN,(0,o._)((0,n._)({},e),{text:p("Failed to add recommendations")}))),N()}finally{I(!1)}},M=X.size,E=1===s.length?h(y(),s[0].name):h(_(),s[0].name,s.length-1),z=1===s.length?h(C(),null!==(i=null===(t=s[0])||void 0===t?void 0:t.name)&&void 0!==i?i:""):h(B());return(0,l.tZ)(l.HY,{children:b?(0,l.BX)(g.u_,{isOpen:b,onClose:N,children:[(0,l.tZ)(g.xB,{title:E,description:z,onClose:N,showClose:!0,showDivider:!0}),(0,l.tZ)(g.fe,{children:(0,l.tZ)(m.sg,{gap:16,children:s.map(e=>(0,l.tZ)(P,{pub:e,checked:X.has(e.id),onChange:()=>L(e.id)},e.id))})}),(0,l.tZ)(g.mz,{showDivider:!0,primaryButton:(0,l.tZ)(u.zx,{onClick:q,disabled:0===M,loading:S,children:0===M?p("Recommend"):h(1===M?k():x(),M)}),secondaryButton:(0,l.tZ)(u.zx,{onClick:N,priority:"secondary",children:p("Cancel")})})]}):null})}function P(e){let{pub:t,checked:i,onChange:n}=e;return(0,l.tZ)("label",{children:(0,l.BX)(p.Z,{padding:12,gap:12,direction:"row",alignItems:"center",cursor:"pointer",children:[(0,l.tZ)(v.jM,{pub:t,size:40,openInNewTab:!0}),(0,l.BX)(m.sg,{gap:2,flex:"grow",children:[(0,l.tZ)(Z.xv.B3,{children:(0,l.tZ)(Z.hh,{href:(0,b.SVA)(t),target:"_blank",children:t.name})}),(0,l.tZ)(Z.xv.B4,{color:"secondary",children:(0,w.getByLine)(t)})]}),(0,l.tZ)(h.X,{name:"pub-".concat(t.id),checked:i,onChange:n,size:"sm"})]})})}},70011:function(e,t,i){i.d(t,{Z:()=>s});var n=i(7409),o=i(99282),r=i(98848),l=i(16584),a=i(64515);function s(e){var{fill:t="#10BC4C",size:i=24}=e,s=(0,r._)(e,["fill","size"]);return(0,l.BX)(a.l,(0,o._)((0,n._)({name:"SpotifyIcon",svgParams:{viewBox:"0 0 24 24"},width:i,height:i,fill:"none",stroke:"none"},s),{children:[(0,l.tZ)("circle",{cx:"12",cy:"12",r:"12",fill:t}),(0,l.tZ)("path",{d:"M17.4551 16.8197C17.2501 17.145 16.8127 17.2361 16.471 17.0409C13.7785 15.4795 10.4025 15.1281 6.41156 15.9869C6.02886 16.065 5.64617 15.8438 5.56416 15.4795C5.48215 15.1151 5.7145 14.7508 6.0972 14.6727C10.4572 13.7228 14.2022 14.1262 17.2091 15.8828C17.5508 16.078 17.6601 16.4944 17.4551 16.8197ZM18.8492 13.8529C18.5895 14.2563 18.0428 14.3734 17.6191 14.1392C14.5439 12.3305 9.85583 11.81 6.22021 12.864C5.74184 12.9941 5.2498 12.7469 5.11313 12.3045C4.97645 11.8491 5.23613 11.3806 5.7145 11.2505C9.86949 10.0534 15.0359 10.6259 18.5758 12.6949C18.9722 12.9291 19.1089 13.4496 18.8492 13.8529ZM18.9722 10.756C15.2819 8.6741 9.19978 8.47892 5.6735 9.49387C5.11313 9.66303 4.51175 9.36375 4.33406 8.81724C4.15638 8.28374 4.48441 7.7112 5.04479 7.54205C9.09043 6.37095 15.815 6.60517 20.052 8.99941C20.5577 9.28568 20.7217 9.91026 20.421 10.3917C20.134 10.8862 19.4779 11.0553 18.9722 10.756Z",fill:"white"})]}))}},86790:function(e,t,i){i.d(t,{Fx:()=>h,ZP:()=>p});var n=i(27412),o=i(16584),r=i(6400),l=i(94184),a=i.n(l),s=i(72984),d=i(13304),c=i(98914);i(66054);let u="active";class p extends r.Component{componentDidMount(){document.addEventListener("mouseup",e=>this.onDocumentMouseUp(e)),document.addEventListener("keydown",e=>this.onDocumentKeyDown(e)),"undefined"!=typeof window&&window.addEventListener("resize",()=>this.onWindowResize()),this.placeDropdown()}componentWillUnmount(){document.removeEventListener("mouseup",e=>this.onDocumentMouseUp(e)),document.removeEventListener("keydown",e=>this.onDocumentKeyDown(e)),"undefined"!=typeof window&&window.removeEventListener("resize",()=>this.onWindowResize())}onDocumentMouseUp(e){let t=e.target;(0,c.rs)(t,this.base)||t.closest("[data-submenu-root]")||!this.state.active||this.blockToggle||(this.close(),this.blockToggle=!0,setTimeout(()=>{this.blockToggle=!1},0))}onDocumentKeyDown(e){"Escape"===e.key&&this.state.active&&this.close()}onWindowResize(){this.placeDropdown()}open(){this.toggle({active:!0})}close(){this.toggle({active:!1})}toggle(){let{active:e=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.blockToggle||(0,c.nn)(this,t=>{null===e&&(e=!t.active),this.props.preventScrollBehindDrawer&&this.useDrawerStyle()&&document.documentElement.classList[e?"add":"remove"]("modal-in"),this.setState({active:e},()=>{this.props.onToggle&&this.props.onToggle({active:e})})})}isOpen(){return!!this.state.active}useDrawerStyle(){return!!this.props.useDrawerOnMobile&&!!this.state.isMobileWidth}drawerBackdropClicked(){this.props.backdropDismiss&&this.close()}placeDropdown(){var e,t;if(!this.base||this.useDrawerStyle()||this.props.noPlace){this.setState({left:null,right:null});return}let i=this.base.getBoundingClientRect(),n=i.width/(this.state.active?1:.7),o=i.right+(n-i.width)/2,r=i.left-(n-i.width)/2,l="undefined"!=typeof window?window.innerWidth:0;if(n>=l)return;let a="undefined"!=typeof window?window.getComputedStyle(this.base):{left:"0",right:"0"},s=!isNaN(parseFloat(a.left))&&parseFloat(a.left),d=!isNaN(parseFloat(a.right))&&parseFloat(a.right),c=null!==(e=this.state.originalLeft)&&void 0!==e?e:a.left,u=null!==(t=this.state.originalRight)&&void 0!==t?t:a.right;void 0===this.state.originalLeft&&this.setState({originalLeft:c}),void 0===this.state.originalRight&&this.setState({originalRight:u}),r<0?"number"==typeof this.state.left?this.setState({left:this.state.left-r,right:null}):"number"==typeof this.state.right?this.setState({left:null,right:this.state.right+r}):"number"==typeof d?this.setState({left:null,right:d+r}):this.setState({left:(s||0)-r,right:null}):o>=l&&("number"==typeof this.state.left?this.setState({left:this.state.left-o+l,right:null}):"number"==typeof this.state.right?this.setState({left:null,right:this.state.right+o-l}):"number"==typeof s?this.setState({left:s-o+l,right:null}):this.setState({left:null,right:(d||0)+o-l}))}render(e,t){let{noTail:i,attachOnActive:n,noDrawerCloseButton:l}=e,{active:c}=t,p=(0,r.toChildArray)(this.props.children),h={},m={};"number"==typeof this.state.left?(h.left="".concat(this.state.left,"px"),h.right="unset",m.right="calc(50% + ".concat(this.state.left-parseFloat(this.state.originalLeft)||0,"px)")):"number"==typeof this.state.right&&(h.left="unset",h.right="".concat(this.state.right,"px"),m.right="calc(50% - ".concat(this.state.right-parseFloat(this.state.originalRight)||0,"px)"));let g=this.useDrawerStyle();return(0,o.BX)(o.HY,{children:[g&&(0,o.tZ)("div",{className:a()("dropdown-drawer-backdrop",{[u]:c}),onclick:e=>{e.stopPropagation(),this.drawerBackdropClicked()}}),(!n||c||g)&&(0,o.BX)("ul",{className:a()("dropdown-menu",this.props.className,{[u]:c,"no-rect":this.props.noRectWhenClosed,drawer:g,tooltip:!g,"no-place":!!this.props.noPlace}),style:h,children:[!i&&!this.useDrawerStyle()&&(0,o.BX)(o.HY,{children:[(0,o.tZ)("div",{className:"dropdown-menu-tail",style:m}),(0,o.tZ)("div",{className:"dropdown-menu-tail-shadow",style:m})]}),(0,o.BX)("div",{className:a()("dropdown-menu-wrapper",this.props.wrapperClassName),children:[g&&!l&&(0,o.tZ)(s.k,{className:"drawer-close-button",onClick:e=>{e.stopPropagation(),this.close()},children:(0,o.tZ)(d.Z,{height:24,className:"drawer-close-icon"})}),this.props.noList?p:p.map(e=>(0,o.tZ)("li",{children:e}))]})]})]})}constructor(e,t){var i;if(super(e,t),(0,n._)(this,"blockToggle",void 0),"undefined"!=typeof window&&(null===(i=window)||void 0===i?void 0:i.matchMedia)){let e=window.matchMedia("screen and (max-width: 650px)");this.state={isMobileWidth:e.matches};let t=e=>{this.setState({isMobileWidth:e.matches})};e.addEventListener?e.addEventListener("change",t):e.addListener&&e.addListener(t)}}}class h extends r.Component{componentDidMount(){document.addEventListener("mouseup",this.onDocumentMouseUp),document.addEventListener("keydown",this.onDocumentKeyDown)}componentWillUnmount(){document.removeEventListener("mouseup",this.onDocumentMouseUp),document.removeEventListener("keydown",this.onDocumentKeyDown)}onWindowResize(){this.placeDropdown()}placeDropdown(){}open(){this.toggle({active:!0})}close(){this.toggle({active:!1})}toggle(){let{active:e=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.blockToggle||(0,c.nn)(this,t=>{null===e&&(e=!t.active),this.setState({active:e},()=>{this.props.onToggle&&this.props.onToggle()})})}isOpen(){return!!this.state.active}render(){let e=(0,r.toChildArray)(this.props.children);return this.props.noList?(0,o.tZ)("div",{className:a()("dropdown-menu tooltip",this.props.className,{[u]:this.state.active}),ref:this.props.forwardedRef,children:(0,o.tZ)("div",{className:"dropdown-menu-wrapper",children:e})}):(0,o.BX)("ul",{className:a()("dropdown-menu tooltip",this.props.className,{[u]:this.state.active}),ref:this.props.forwardedRef,children:[!this.props.hideMenuTail&&(0,o.tZ)("div",{className:"dropdown-menu-tail"}),!this.props.hideMenuTail&&(0,o.tZ)("div",{className:"dropdown-menu-tail-shadow"}),(0,o.tZ)("div",{className:"dropdown-menu-wrapper",children:e.map(e=>(0,o.tZ)("li",{children:e}))})]})}constructor(...e){super(...e),(0,n._)(this,"blockToggle",void 0),(0,n._)(this,"onDocumentMouseUp",e=>{(0,c.rs)(e.target,this.base)||!this.state.active||this.blockToggle||(this.close(),this.blockToggle=!0,setTimeout(()=>{this.blockToggle=!1},0))}),(0,n._)(this,"onDocumentKeyDown",e=>{"Escape"===e.key&&this.close()})}}},39900:function(e,t,i){i.d(t,{Z:()=>d});var n=i(7409),o=i(99282),r=i(16584),l=i(98848),a=i(64515);let s=e=>{var{name:t,children:i}=e,s=(0,l._)(e,["name","children"]);return(0,r.tZ)(a.l,(0,o._)((0,n._)({},s),{name:t,svgParams:{viewBox:"0 0 24 24",height:24,width:24,stroke:"#1C110B"},children:i}))},d=e=>(0,r.BX)(s,(0,o._)((0,n._)({},e),{name:"ActivationUsersIcon",children:[(0,r.tZ)("path",{d:"M17 21V19C17 16.7909 15.2091 15 13 15H5C2.79086 15 1 16.7909 1 19V21",strokeWidth:"1.3",strokeLinecap:"round","stroke-linejoin":"round"}),(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 11C11.2091 11 13 9.20917 13 7.00003C13 4.79089 11.2091 3.00003 9 3.00003C6.79086 3.00003 5 4.79089 5 7.00003C5 9.20917 6.79086 11 9 11Z",strokeWidth:"1.3",strokeLinecap:"round","stroke-linejoin":"round"}),(0,r.tZ)("path",{d:"M23 21V19C22.9986 17.1772 21.765 15.5858 20 15.13",strokeWidth:"1.3",strokeLinecap:"round","stroke-linejoin":"round"}),(0,r.tZ)("path",{d:"M16 3.13004C17.7699 3.58321 19.0078 5.17803 19.0078 7.00504C19.0078 8.83204 17.7699 10.4269 16 10.88",strokeWidth:"1.3",strokeLinecap:"round","stroke-linejoin":"round"})]}))},30428:function(e,t,i){i.d(t,{Z:()=>s});var n=i(7409),o=i(99282),r=i(98848),l=i(16584),a=i(64515);let s=e=>{var{size:t=20,color:i="var(--color-fg-primary)",className:s}=e,d=(0,r._)(e,["size","color","className"]);return(0,l.tZ)(a.l,(0,o._)((0,n._)({},d),{name:"FilledCircleCrossIcon",svgParams:{viewBox:"0 0 20 20"},stroke:"none",width:t,height:t,fill:i,className:s,children:(0,l.tZ)("path",{d:"M10 18.6646C8.80469 18.6646 7.68408 18.4377 6.63818 17.9839C5.59229 17.5356 4.6709 16.9131 3.87402 16.1162C3.08268 15.3249 2.46289 14.409 2.01465 13.3687C1.56641 12.3228 1.34229 11.2021 1.34229 10.0068C1.34229 8.81152 1.56641 7.69092 2.01465 6.64502C2.46289 5.59912 3.08268 4.6805 3.87402 3.88916C4.6709 3.09229 5.59229 2.46973 6.63818 2.02148C7.68408 1.57324 8.80469 1.34912 10 1.34912C11.1953 1.34912 12.3159 1.57324 13.3618 2.02148C14.4077 2.46973 15.3263 3.09229 16.1177 3.88916C16.909 4.6805 17.5288 5.59912 17.9771 6.64502C18.4308 7.69092 18.6577 8.81152 18.6577 10.0068C18.6577 11.2021 18.4308 12.3228 17.9771 13.3687C17.5288 14.409 16.909 15.3249 16.1177 16.1162C15.3263 16.9131 14.4077 17.5356 13.3618 17.9839C12.3159 18.4377 11.1953 18.6646 10 18.6646ZM7.31885 13.543C7.5734 13.543 7.78646 13.46 7.95801 13.2939L10.0083 11.2354L12.0669 13.2939C12.2274 13.46 12.4321 13.543 12.6812 13.543C12.9246 13.543 13.1294 13.46 13.2954 13.2939C13.4614 13.1279 13.5444 12.9232 13.5444 12.6797C13.5444 12.4417 13.4587 12.2425 13.2871 12.082L11.2202 10.0151L13.2954 7.94824C13.4614 7.77669 13.5444 7.57747 13.5444 7.35059C13.5444 7.1071 13.4614 6.90511 13.2954 6.74463C13.1349 6.57861 12.9357 6.49561 12.6978 6.49561C12.4543 6.49561 12.2495 6.57861 12.0835 6.74463L10.0083 8.81152L7.94141 6.75293C7.76986 6.58691 7.56234 6.50391 7.31885 6.50391C7.08089 6.50391 6.87891 6.58691 6.71289 6.75293C6.55241 6.91341 6.47217 7.1154 6.47217 7.35889C6.47217 7.58577 6.55518 7.78223 6.72119 7.94824L8.79639 10.0151L6.72119 12.0903C6.55518 12.2563 6.47217 12.4528 6.47217 12.6797C6.47217 12.9232 6.55241 13.1279 6.71289 13.2939C6.87891 13.46 7.08089 13.543 7.31885 13.543Z",stroke:"none"})}))}},15702:function(e,t,i){i.d(t,{Z:()=>a});var n=i(7409),o=i(99282),r=i(16584),l=i(64515);let a=e=>(0,r.BX)(l.l,(0,o._)((0,n._)({},e),{name:"FoundingBadgeIcon",svgParams:{height:14,width:14,viewBox:"0 0 14 14"},children:[(0,r.tZ)("circle",{cx:"3.93749",cy:"5.97916",r:"3.4375"}),(0,r.tZ)("path",{d:"M8.39583 9.49273C8.39583 11.3912 6.85681 12.9302 4.95833 12.9302C3.05985 12.9302 1.52083 11.3912 1.52083 9.49273C1.52083 7.59425 3.05985 6.05523 4.95833 6.05523C6.85681 6.05523 8.39583 7.59425 8.39583 9.49273Z"}),(0,r.tZ)("path",{d:"M12.4792 9.49273C12.4792 11.3912 10.9402 12.9302 9.04172 12.9302C7.14324 12.9302 5.60422 11.3912 5.60422 9.49273C5.60422 7.59425 7.14324 6.05523 9.04172 6.05523C10.9402 6.05523 12.4792 7.59425 12.4792 9.49273Z"}),(0,r.tZ)("circle",{cx:"6.99999",cy:"3.9375",r:"3.4375"}),(0,r.tZ)("circle",{cx:"10.0625",cy:"5.97916",r:"3.4375"})]}))},25682:function(e,t,i){i.d(t,{Z:()=>s});var n=i(7409),o=i(99282),r=i(98848),l=i(16584),a=i(64515);let s=e=>{var{color:t="#262626"}=e,i=(0,r._)(e,["color"]);return(0,l.BX)(a.l,(0,o._)((0,n._)({},i),{name:"LockThinIcon",svgParams:{height:16,width:16},children:[(0,l.tZ)("path",{className:"lock-shackle",d:"M5 6L5 3.9C5 2.57452 6.11929 1.5 7.5 1.5C8.88071 1.5 10 2.57452 10 3.9V6",stroke:t}),(0,l.tZ)("path",{className:"lock-body",d:"M2 7.5C2 6.94772 2.44772 6.5 3 6.5H12C12.5523 6.5 13 6.94772 13 7.5V12.5C13 13.0523 12.5523 13.5 12 13.5H3C2.44771 13.5 2 13.0523 2 12.5V7.5Z",fill:t,stroke:t})]}))}},21286:function(e,t,i){i.d(t,{Z:()=>s});var n=i(7409),o=i(99282),r=i(16584),l=i(13808),a=i(64515);let s=function(e){return(0,r.tZ)(a.l,(0,o._)((0,n._)({},e),{name:"LucideBookmark",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0},children:(0,r.tZ)(l.Z,{height:24,stroke:e.stroke,fill:e.fill,strokeWidth:e.strokeWidth})}))}},76157:function(e,t,i){i.d(t,{Z:()=>s});var n=i(7409),o=i(99282),r=i(16584),l=i(4675),a=i(64515);let s=e=>(0,r.tZ)(a.l,(0,o._)((0,n._)({},e),{name:"LucideArrowLeftRight",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0},children:(0,r.tZ)(l.Z,{height:24,stroke:e.stroke,fill:e.fill,strokeWidth:e.strokeWidth})}))},39929:function(e,t,i){i.d(t,{Z:()=>a});var n=i(7409),o=i(99282),r=i(16584),l=i(64515);let a=e=>(0,r.BX)(l.l,(0,o._)((0,n._)({},e),{name:"PinIconSmall",svgParams:{height:16,width:14},children:[(0,r.tZ)("path",{d:"M7 1.00006L10 1.00006C10.5523 1.00006 11.0846 1.47946 10.8452 1.97714C10.6681 2.3451 10.2927 2.75194 9.5 3.17301L10 7.51891C10.7819 7.7681 11.949 8.31222 12.9204 9.21856C13.4827 9.74324 13.0402 10.561 12.2711 10.561H7"}),(0,r.tZ)("path",{d:"M7 1.00006L4 1.00006C3.44772 1.00006 2.91538 1.47946 3.15482 1.97714C3.33185 2.3451 3.70727 2.75194 4.5 3.17301L4 7.51891C3.2181 7.7681 2.05103 8.31222 1.07961 9.21856C0.517263 9.74324 0.959808 10.561 1.72891 10.561H7"}),(0,r.tZ)("path",{d:"M7 10.561L7 15","stroke-linecap":"round","stroke-linejoin":"round"})]}))},77187:function(e,t,i){i.d(t,{Z:()=>a});var n=i(7409),o=i(99282),r=i(16584),l=i(64515);let a=e=>(0,r.tZ)(l.l,(0,o._)((0,n._)({},e),{name:"ShareFacebookBoxedIcon",svgParams:{height:17,width:16,viewBox:"10 0 10 26"},children:(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15,3C8.373,3,3,8.373,3,15c0,6.016,4.432,10.984,10.206,11.852V18.18h-2.969v-3.154h2.969v-2.099c0-3.475,1.693-5,4.581-5 c1.383,0,2.115,0.103,2.461,0.149v2.753h-1.97c-1.226,0-1.654,1.163-1.654,2.473v1.724h3.593L19.73,18.18h-3.106v8.697 C22.481,26.083,27,21.075,27,15C27,8.373,21.627,3,15,3z"})}))},74937:function(e,t,i){i.d(t,{Z:()=>a});var n=i(7409),o=i(99282),r=i(16584),l=i(64515);let a=e=>(0,r.tZ)(l.l,(0,o._)((0,n._)({},e),{name:"ShareCopyLinkIcon",svgParams:{height:16,width:20},children:(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.1303 0.000379039C10.9833 -0.00959082 9.87819 0.431464 9.05309 1.22855L9.04556 1.23593L7.79145 2.48303C7.50587 2.767 7.50453 3.22877 7.78844 3.51441C8.07235 3.80004 8.53401 3.80139 8.81959 3.51741L10.0698 2.27423C10.6194 1.74503 11.3546 1.45229 12.1177 1.45892C12.8824 1.46556 13.6139 1.77236 14.1546 2.31323C14.6954 2.8541 15.0021 3.58577 15.0087 4.35065C15.0154 5.11353 14.7229 5.84857 14.1943 6.39829L12.0116 8.58145L12.0115 8.58155C11.7159 8.87739 11.36 9.10617 10.9682 9.25237C10.5764 9.39857 10.1577 9.45878 9.74051 9.42889C9.32337 9.39901 8.91752 9.27975 8.55051 9.07918C8.1835 8.87862 7.8639 8.60146 7.6134 8.26649C7.3722 7.94396 6.91526 7.87807 6.5928 8.11933C6.27034 8.36059 6.20447 8.81763 6.44567 9.14016C6.82142 9.64261 7.30082 10.0584 7.85134 10.3592C8.40186 10.66 9.01062 10.8389 9.63634 10.8838C10.2621 10.9286 10.8901 10.8383 11.4779 10.619C12.0656 10.3997 12.5994 10.0565 13.0429 9.61274L15.2302 7.42494L15.2391 7.4159C16.036 6.59062 16.4769 5.48529 16.467 4.33797C16.457 3.19066 15.9969 2.09316 15.1858 1.28185C14.3746 0.470545 13.2774 0.0103489 12.1303 0.000379039ZM7.29806 5.11625C6.67234 5.07142 6.0443 5.16173 5.45654 5.38103C4.86882 5.60031 4.33502 5.94355 3.89153 6.38727L1.70423 8.57506L1.69534 8.5841C0.898438 9.40939 0.457483 10.5147 0.467451 11.662C0.477418 12.8094 0.937512 13.9069 1.74864 14.7182C2.55976 15.5295 3.65701 15.9897 4.80407 15.9996C5.95113 16.0096 7.05622 15.5685 7.88132 14.7715L7.89035 14.7626L9.13717 13.5155C9.42192 13.2307 9.42192 12.7689 9.13717 12.4841C8.85243 12.1993 8.39077 12.1993 8.10602 12.4841L6.86392 13.7265C6.31432 14.2552 5.57945 14.5477 4.81675 14.5411C4.05204 14.5344 3.32054 14.2276 2.77979 13.6868C2.23904 13.1459 1.93231 12.4142 1.92566 11.6494C1.91904 10.8865 2.21146 10.1514 2.74011 9.60172L4.92287 7.41846C5.21854 7.12262 5.57437 6.89384 5.96621 6.74763C6.35805 6.60143 6.77674 6.54123 7.19389 6.57111C7.61104 6.601 8.01688 6.72026 8.38389 6.92082C8.75091 7.12138 9.0705 7.39855 9.32101 7.73352C9.56221 8.05605 10.0191 8.12194 10.3416 7.88068C10.6641 7.63942 10.7299 7.18238 10.4887 6.85985C10.113 6.3574 9.63359 5.94165 9.08307 5.64081C8.53255 5.33997 7.92378 5.16107 7.29806 5.11625Z"})}))},30379:function(e,t,i){i.d(t,{Z:()=>a});var n=i(7409),o=i(99282),r=i(16584),l=i(64515);let a=e=>(0,r.tZ)(l.l,(0,o._)((0,n._)({},e),{name:"ShareEmailIcon",svgParams:{height:16,width:21},children:(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.22192 2.20503C2.36754 1.77115 2.78269 1.45455 3.26639 1.45455H17.9332C18.4169 1.45455 18.8321 1.77118 18.9777 2.2051L10.5999 8.02107L2.22192 2.20503ZM2.16639 3.94198V13.4545C2.16639 14.0529 2.66307 14.5455 3.26639 14.5455H17.9332C18.5365 14.5455 19.0332 14.0529 19.0332 13.4545V3.94206L11.0204 9.50462C10.7679 9.67991 10.4318 9.67991 10.1793 9.50462L2.16639 3.94198ZM20.4999 2.55809V13.4545C20.4999 14.8562 19.3465 16 17.9332 16H3.26639C1.85304 16 0.699707 14.8562 0.699707 13.4545V2.54545C0.699707 1.14379 1.85304 0 3.26639 0H17.9332C19.3407 0 20.4904 1.13441 20.4998 2.52818C20.5 2.53816 20.5001 2.54813 20.4999 2.55809Z"})}))},98435:function(e,t,i){i.d(t,{Z:()=>a});var n=i(7409),o=i(99282),r=i(16584),l=i(64515);let a=e=>(0,r.tZ)(l.l,(0,o._)((0,n._)({},e),{name:"TwitterIcon",svgParams:{height:24,width:24},children:(0,r.tZ)("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})}))},48917:function(e,t,i){i.d(t,{y:()=>Q,l:()=>$});var n=i(7409),o=i(99282),r=i(58865),l=i(16584),a=i(98661),s=i(30396),d=i(48493),c=i(68494),u=i(33703),p=i(28596),h=i(45609),m=i(73820),g=i(18102),v=i(60374),Z=i(5281),f=i(63623),b=i(56687),w=i(67659),y=i(71212),_=i(29162),C=i(78526),B=i(67747),k=i(23260),x=i(80569),S=i.n(x),P=i(86790),I=i(64515);let X=e=>(0,l.BX)(I.l,(0,o._)((0,n._)({},e),{name:"DotDotDotIcon",svgParams:{height:100,width:100},children:[(0,l.tZ)("circle",{cx:"23",cy:"50",r:"9"}),(0,l.tZ)("circle",{cx:"50",cy:"50",r:"9"}),(0,l.tZ)("circle",{cx:"77",cy:"50",r:"9"})]})),T=e=>(0,l.BX)(I.l,(0,o._)((0,n._)({},e),{name:"DotDotDotThinIcon",svgParams:{height:18,width:18},children:[(0,l.tZ)("path",{d:"M1.12554 8.52747C1.41102 7.46201 2.48571 6.83933 3.51336 7.11468C4.541 7.39004 5.16037 8.46664 4.87488 9.5321C4.58939 10.5976 3.5147 11.2202 2.48706 10.9449C1.45941 10.6695 0.840049 9.59292 1.12554 8.52747Z"}),(0,l.tZ)("path",{d:"M7.12803 8.52747C7.41352 7.46201 8.48821 6.83933 9.51585 7.11468C10.5435 7.39004 11.1629 8.46664 10.8774 9.5321C10.5919 10.5976 9.51719 11.2202 8.48955 10.9449C7.46191 10.6695 6.84254 9.59292 7.12803 8.52747Z"}),(0,l.tZ)("path",{d:"M13.1266 8.52747C13.4121 7.46201 14.4867 6.83933 15.5144 7.11468C16.542 7.39004 17.1614 8.46664 16.8759 9.5321C16.5904 10.5976 15.5157 11.2202 14.4881 10.9449C13.4604 10.6695 12.8411 9.59292 13.1266 8.52747Z"})]}));var N=i(94499),L=i(94442),q=i(1381),M=i(95441),E=i(68833),z=i(48980),R=i(49762),A=i(98914),O=i(68648),D=i(19081),F=i(36500),U=i(84747),H=i(70379),W=i(46585),J=i(98012),Y=i(6070),V=i(60308),j=i(63651),G=i(84864);function K(){let e=(0,r._)([""," top posts"]);return K=function(){return e},e}let Q=(0,a.forwardRef)((e,t)=>{var i,r,a,x;let{pub:I,post:X,hideDropCapOption:T,hidePinning:N,hidePostHeaderOptions:E,user:Q,emailSent:$,allowSendEmail:ee,className:et,useDrawerOnMobile:ei,handleCrossPost:en,onToggleMenu:eo,onSummaryOpen:er}=e,el=(0,s.sO)(null);(0,s.aP)(t,()=>({toggle:()=>{var e;return null===(e=el.current)||void 0===e?void 0:e.toggle()},isOpen:()=>{var e;return null===(e=el.current)||void 0===e?void 0:e.isOpen()},open:()=>{var e;return null===(e=el.current)||void 0===e?void 0:e.open()},close:()=>{var e;return null===(e=el.current)||void 0===e?void 0:e.close()}}));let ea=(0,s.qp)(O.re),es=(0,H.pm)(),{iString:ed,iTemplate:ec}=(0,M.M1)(),[eu,ep]=(0,s.eJ)(!1),[eh,em]=(0,s.eJ)(!1),[eg,ev]=(0,s.eJ)(!1),[eZ,ef]=(0,s.eJ)(!1),[eb,ew]=(0,s.eJ)(!1),[ey,e_]=(0,s.eJ)(!1),[eC,eB]=(0,s.eJ)(null),[ek,ex]=(0,s.eJ)(null),[eS,eP]=(0,s.eJ)(null),[eI,eX]=(0,s.eJ)(!1);(0,s.d4)(()=>{let e=async()=>{e_(!!await (0,z.rd)("/api/v1/notification_settings/post/".concat(X.id,"/mute"),{method:"GET"}))};eu&&e()},[eu,X.id]);let eT=async e=>{let t;switch(e){case"1hour":t=1;break;case"8hours":t=8;break;case"24hours":t=24}let i=t?{expires_at:(0,J.Z)().add(t,"hour").toISOString()}:{};await (0,z.rd)("/api/v1/notification_settings/post/".concat(X.id,"/mute"),{method:"POST",json:i}),e_(!0),es.popToast(e=>(0,l.tZ)(H.FN,(0,o._)((0,n._)({},e),{text:ed("Paused notifications"),Icon:d.Z})))},eN=async()=>{await (0,z.rd)("/api/v1/notification_settings/post/".concat(X.id,"/mute"),{method:"DELETE"}),e_(!1),es.popToast(e=>(0,l.tZ)(H.FN,(0,o._)((0,n._)({},e),{text:ed("Unpaused notifications"),Icon:c.Z})))},eL=async()=>{let e={everyone:"everyone",only_free:"free subscribers",only_paid:"paid subscribers",founding:"founding members"}[X.audience];if(confirm("Send this published post as an email to ".concat(e,"?")))try{await S().post("/api/v1/drafts/".concat(X.id,"/publish")).send({send:!0,only_send:!0}),location.reload()}catch(e){alert((0,A.zx)(e))}},eq=async()=>{try{await S().put("/api/v1/posts/".concat(X.id,"/clear_cache")),location.reload()}catch(e){alert((0,A.zx)(e))}},eM=async()=>{em(!0);try{let e=await S().post("/api/v1/posts/".concat(X.id,"/duplicate"));(0,A.uX)((0,V.ANx)(I,e.body.id),{local_navigation:!1})}catch(e){alert((0,A.zx)(e)),em(!1)}},eE=async e=>{ef(!0),await S().patch("/api/v1/post/".concat(X.id,"/theme")).send({post_preview_crop_gravity:e}),location.reload()},ez=async e=>{ew(!0),await S().patch("/api/v1/post/".concat(X.id,"/theme")).send({disable_drop_cap:e}),location.reload()},eR=async()=>{if(eC)return;eB(I.id);let e=X.pins.includes(I.id),t="/api/v1/publication/".concat(I.id,"/pin/").concat(X.id);try{e?(await S().del(t),X.pins=X.pins.filter(e=>e!==I.id)):(await S().post(t),I.multiple_pins||(X.pins=[]),X.pins.push(I.id)),["/","/beta","/publish"].includes(location.pathname)&&location.reload()}catch(e){alert((0,A.zx)(e))}finally{eB(null)}},eA=async()=>{if(ek)return;let e=X.section_id;if(!e)return;ex(e);let t="/api/v1/publication/".concat(I.id,"/section/").concat(e,"/pin/").concat(X.id);try{X.is_section_pinned?(await S().del(t),X.is_section_pinned=!1):(await S().post(t),X.is_section_pinned=!0),(["/","/beta","/publish"].includes(location.pathname)||location.pathname.startsWith("/s/"))&&location.reload()}catch(e){alert((0,A.zx)(e))}finally{ex(null)}},eO=async()=>{if(eS)return;eP(I.id);let e=X.top_exclusions.includes(I.id),t="/api/v1/publication/".concat(I.id,"/exclusion/").concat(X.id);try{e?(await S().del(t),X.top_exclusions=[]):(await S().post(t),X.top_exclusions=[I.id]),["/","/beta","/publish"].includes(location.pathname)&&location.reload()}catch(e){alert((0,A.zx)(e))}finally{eP(null)}},eD=(null===(i=X.postTheme)||void 0===i?void 0:i.post_preview_crop_gravity)||ea.cropGravity,eF=!(null===(r=X.postTheme)||void 0===r?void 0:r.disable_drop_cap),eU=null===(a=I.sections)||void 0===a?void 0:a.find(e=>e.id===X.section_id),eH="undefined"!=typeof window?window.location.pathname:"",eW=!!(0,R.ZP)("enable_post_summarization"),eJ=(0,Y.HD)({pub:I}),eY=X.is_section_pinned!==(ek===X.section_id),eV=X.pins.includes(I.id)!==(eC===I.id),ej=X.top_exclusions.includes(I.id)!==(eS===I.id),eG=eJ&&!E&&(null===(x=X.postTheme)||void 0===x?void 0:x.header_variant)==="full-width-image";return(0,l.BX)(l.HY,{children:[(0,l.tZ)(L.RZ,{isOpen:eg,setIsOpen:ev}),(0,l.tZ)(q.I,{isOpen:eI,onClose:()=>eX(!1),post:X}),(0,l.tZ)(P.ZP,{attachOnActive:!0,ref:el,className:et,useDrawerOnMobile:ei,onToggle:e=>{e.active&&ep(!0),null==eo||eo(e)},children:(0,l.BX)(D.tu,{gap:8,style:{minWidth:270},onClick:e=>{e.stopPropagation()},children:[(0,l.BX)(F.xw,{isFirst:!0,children:[(0,l.tZ)(U.u,{leading:(0,l.tZ)(u.Z,{}),href:(0,V.uRy)(I,X,{edit:!0}),children:ed("Edit")}),!$&&ee&&X.is_published&&(0,l.tZ)(U.u,{leading:(0,l.tZ)(p.Z,{}),onClick:eL,children:ed("Send as email")}),(0,l.tZ)(U.u,{leading:(0,l.tZ)(h.Z,{}),disabled:eh,onClick:eM,children:eh?"Copying...":"Make a copy"}),en&&(0,l.tZ)(U.u,{leading:(0,l.tZ)(m.Z,{}),onClick:en,children:ed("Cross post")}),eJ&&(0,l.tZ)(U.u,{disabled:eZ,leading:(0,l.tZ)(g.Z,{}),onClick:()=>eE("auto"===eD?"center":"auto"),children:eZ?"Updating...":"auto"===eD?"Disable smart cropping":"Enable smart cropping"}),eJ&&!T&&(0,l.tZ)(U.u,{disabled:eb,leading:(0,l.tZ)(v.Z,{}),onClick:()=>ez(eF),children:eb?"Updating...":eF?"Disable drop cap":"Enable drop cap"}),eG&&(0,l.tZ)(U.u,{leading:(0,l.tZ)(Z.Z,{}),onClick:()=>eX(!0),children:"Edit full width image options"}),eW&&er&&(0,l.tZ)(U.u,{leading:(0,l.tZ)(f.Z,{}),onClick:er,children:ed("Reader guide")}),(0,R.ZP)("show_open_post_as_pdf_button")&&(0,l.tZ)(U.u,{leading:(0,l.tZ)(b.Z,{}),onClick:()=>{ev(!0),(0,A.uX)((0,j.SUl)(I,X.id),{local_navigation:!1})},children:ed("Open as PDF")})]}),(0,l.BX)(F.xw,{children:[(0,l.tZ)(U.u,{leading:(0,l.tZ)(w.Z,{}),href:(0,j.cwg)(void 0,X.id,{referrer:eH}),children:ed("View stats")}),(0,l.tZ)(U.u,{leading:(0,l.tZ)(y.Z,{}),onClick:()=>window.open((0,V.fQy)(I,X.id)),children:ed("Get share images")})]}),(0,l.tZ)(F.xw,{children:ey?(0,l.tZ)(W.WS,{onClick:eN,customLabel:ed("Unpause notifications")}):(0,l.tZ)(W.KV,{onMute:e=>eT(e),customLabel:ed("Pause notifications")})}),(0,l.BX)(F.xw,{children:[!N&&X.slug&&(0,l.BX)(l.HY,{children:[(0,G.isPinnable)(I)&&X.section_id&&(X.section_name||(null==eU?void 0:eU.name))&&(0,l.BX)(U.u,{leading:eY?(0,l.tZ)(_.Z,{}):(0,l.tZ)(C.Z,{}),onClick:eA,children:[eY?"Unpin from":"Pin to"," ",X.section_name||(null==eU?void 0:eU.name)]}),(0,G.isPinnable)(I)&&(0,l.tZ)(U.u,{leading:eV?(0,l.tZ)(_.Z,{}):(0,l.tZ)(C.Z,{}),onClick:eR,children:eV?"Unpin from homepage":"Pin to homepage"})]}),X.slug&&"adhoc_email"!==X.type&&(0,l.tZ)(U.u,{leading:ej?(0,l.tZ)(B.Z,{}):(0,l.tZ)(k.Z,{}),onClick:eO,children:ec(K(),ej?"Include in":"Hide from")})]}),(null==Q?void 0:Q.is_global_admin)&&(0,l.BX)(F.xw,{children:[(0,l.tZ)(U.u,{priority:"secondary",onClick:eq,children:ed("Clear post from cache")}),(0,l.tZ)(U.u,{priority:"secondary",href:"".concat((0,V.SVA)({subdomain:"admin"}),"/posts/").concat(X.id),children:ed("Open in Underground")})]})]})})]})});function $(e){let{pub:t,post:i,iconHeight:n,hidePinning:o,user:r,emailSent:a,allowSendEmail:d,showUpdatedIcons:c,dropdownClassName:u,iconClassName:p}=e,h=(0,s.sO)(null);return(0,l.BX)(l.HY,{children:[(0,l.tZ)(N.Z,{onClick:()=>{var e,t;(null===(e=h.current)||void 0===e?void 0:e.isOpen())||(0,E.j)(E.FP.EDIT_POST_DROPDOWN_MENU_OPENED),null===(t=h.current)||void 0===t||t.toggle()},children:c?(0,l.tZ)(T,{stroke:"#262626",height:n,className:p}):(0,l.tZ)(X,{stroke:"#757575",height:n,className:p})}),(0,l.tZ)(Q,{ref:h,pub:t,post:i,hidePinning:o,user:r,emailSent:a,allowSendEmail:d,className:u})]})}},2995:function(e,t,i){i.d(t,{J:()=>N});var n=i(7409),o=i(16584),r=i(30396),l=i(80569),a=i.n(l),s=i(60826),d=i(33804),c=i(50515),u=i(95441),p=i(68833),h=i(98914),m=i(12900),g=i(15771),v=i(96745),Z=i(19081),f=i(17391),b=i(1844),w=i(68709),y=i(6490),_=i(38841),C=i(17688),B=i(58175),k=i(64300),x=i(51776),S=i(70379),P=i(98012),I=i(31377),X=i(60308);let T={everyone:"Everyone",only_paid:"Paid subscribers",founding:"Founding members"},N=e=>{let{pub:t,post:i,user:l,open:s,setOpen:_,placeholderText:N=""}=e,q=(0,P.Z)().add(2,"minutes"),[M,E]=(0,r.eJ)(null),[z,R]=(0,r.eJ)(N),[A,O]=(0,r.eJ)(!1),[D,F]=(0,r.eJ)(!0),[U,H]=(0,r.eJ)("PREAMBLE"),[W,J]=(0,r.eJ)(null),[Y,V]=(0,r.eJ)(void 0),[j,G]=(0,r.eJ)(!0),[K,Q]=(0,r.eJ)(!0),[$,ee]=(0,r.eJ)(!1),[et,ei]=(0,r.eJ)((0,P.Z)().add(1,"day").toDate()),[en,eo]=(0,r.eJ)(""),{iString:er}=(0,u.M1)(),el={everyone:"to everyone",founding:"to founding members",only_paid:"to paid subscribers"}[null!=Y?Y:"null"],ea=j?"Send":"Publish",es=$&&et?(0,P.Z)(et).max(q).fromNow():"",ed=j?el:"",ec="".concat(ea," cross-post ").concat(ed," ").concat(es),eu=null==M?void 0:M.find(e=>e.id===W),ep=(0,S.pm)();(0,r.d4)(()=>{let e=async()=>{try{var e;let t=await a().get("/api/v1/restack/restackable-pubs"),i=(null==t?void 0:null===(e=t.body)||void 0===e?void 0:e.publications)||[];E(i),F(!1),i.length>0&&(J(i[0].id),V("everyone"))}catch(e){console.error("Failed to load user profile for restacking: ",e)}};s&&!M&&D&&e()},[s,l,D,F,M,E]),(0,r.d4)(()=>{s&&M&&0===M.length&&!D&&(0,h.uX)((0,X._HV)())},[s,M,D]);let eh=(e,r)=>{_(!s,r),H("PREAMBLE"),eo(null),F(!1),r&&(R(""),(0,p.j)(p.FP.RESTACK_POST_SUBMITTED,{restacked_publication_id:t.id,restacked_post_id:i.id,restacking_user_id:l.id,restacking_publication_id:null==eu?void 0:eu.id,restacking_blurb:z}),ep.popToast(e=>(0,o.tZ)(S.FN,(0,n._)({text:$?"This post is scheduled to cross-post ".concat(es):"This post was cross-posted to your subscribers"},e)))),(0,p.j)(p.FP.CROSS_POST_MODAL_CLOSED,{didRestack:r})},em=async()=>{(0,p.j)(p.FP.CROSS_POST_MODAL_SUBMIT_CLICKED),F(!0);try{if($){let e=(0,P.Z)(et).max(q).toDate();if(!eu)throw Error("no selectedPub");await a().post("/api/v1/restack/".concat(i.id,"/schedule")).send({audience:Y,restackingPubId:eu.id,introText:z,sendEmail:j,publishToWeb:K,scheduledAt:e})}else{if(!eu)throw Error("no selectedPub");await a().post("/api/v1/restack/".concat(i.id)).send({audience:Y,restackingPubId:eu.id,introText:z,sendEmail:j,publishToWeb:K})}(0,p.j)(p.FP.CROSS_POST_MODAL_SUBMITTED),eh({},!0);return}catch(e){if((0,p.j)(p.FP.CROSS_POST_MODAL_SUBMIT_FAILED,{error:(0,h.zx)(e,"Could not retrieve error message")}),console.error("Failed to restack post:",e),e instanceof TypeError)throw eo("An unknown error ocurred. This post was not recommended."),F(!1),e;eo((0,h.zx)(e,"This post could not be recommended.")),F(!1)}};return(0,o.tZ)(y.u_,{isOpen:s,onClose:eh,children:(0,o.BX)(d.w,{children:[(0,o.tZ)(y.xB,{showClose:!0,onClose:eh,title:er("Cross-post to your Substack"),showDivider:!0}),"PREAMBLE"===U?(0,o.BX)(o.HY,{children:[(0,o.tZ)(y.fe,{children:(0,o.BX)(Z.tu,{gap:20,children:[(0,o.tZ)(L,{post:i,pub:t}),(0,o.tZ)(k.g,(0,n._)({placeholder:er("Say why this post is worth reading..."),onChange:e=>{A||(O(!0),(0,p.j)(p.FP.CROSS_POST_MODAL_TYPING_STARTED)),R(e.target.value)},value:z,maxLength:800,rows:5},c.J)),en&&(0,o.tZ)(b.y,{children:en})]})}),(0,o.tZ)(y.mz,{direction:"column",primaryButton:(0,o.tZ)(g.zx,{priority:"primary",onClick:()=>{if((0,p.j)(p.FP.CROSS_POST_MODAL_CONTINUE_CLICKED),!z){eo("Please write something to your subscribers to continue"),(0,p.j)(p.FP.CROSS_POST_MODAL_CONTINUE_FAILED);return}eo(""),H("AUDIENCE_SELECTION"),(0,p.j)(p.FP.CROSS_POST_MODAL_CONTINUED)},disabled:!z,loading:D,children:er("Continue")})})]}):(0,o.BX)(o.HY,{children:[(0,o.tZ)(y.fe,{children:(0,o.BX)(Z.tu,{gap:20,children:[(0,o.BX)(x.fv,{children:[(0,o.tZ)(w.__,{children:er("Post to")}),(0,o.tZ)(C.i,{value:null==eu?void 0:eu.id,onChange:e=>{let t=e.currentTarget.value;V("everyone"),J(Number(t))},children:null==M?void 0:M.map(e=>(0,o.tZ)("option",{value:e.id,children:e.name}))})]}),(0,o.BX)(x.fv,{children:[(0,o.tZ)(w.__,{children:er("Send to")}),(0,o.tZ)(C.i,{value:Y,onChange:e=>V(e.target.value),children:((null==eu?void 0:eu.payments_state)==="enabled"?(0,I.getAudiencesForPublicListing)():["everyone"]).map(e=>(0,o.tZ)("option",{value:e,children:T[e]}))})]}),(0,o.BX)(Z.tu,{gap:12,children:[(0,o.tZ)(w.__,{children:er("Delivery")}),(0,o.BX)(d.w,{children:[(0,o.tZ)(f.j,{value:j,label:er("Send cross-post via email"),onChange:e=>G(e)}),(0,o.tZ)(f.j,{value:K,label:er("Publish cross-post to web"),onChange:e=>Q(e)}),(0,o.tZ)(f.j,{value:$,label:er("Schedule time to publish cross-post"),onChange:e=>ee(e),contentBelow:(0,o.tZ)(m.H,{expanded:$,children:(0,o.tZ)(Z.tu,{paddingTop:8,children:(0,o.tZ)(v.Tz,{value:null!=et?et:new Date,max:(0,P.Z)().add(92,"days").toDate(),onChange:e=>{ei(new Date(e.currentTarget.value))}})})})})]})]}),en&&(0,o.tZ)(B.xv.B4,{color:"error",children:en})]})}),(0,o.tZ)(y.mz,{direction:"column",primaryButton:(0,o.tZ)(g.zx,{priority:j||K?"primary":"secondary",onClick:em,disabled:D||!j&&!K,children:ec})})]})]})})},L=e=>{let{post:t,pub:i}=e;return(0,o.BX)(Z.tu,{gap:12,border:"detail",radius:"md",shadow:"xs",bg:"secondary",padding:12,children:[(0,o.BX)(Z.gq,{alignItems:"center",gap:8,children:[(0,o.tZ)(_.wk,{pub:i,size:18}),(0,o.tZ)(B.xv.Meta,{weight:"medium",children:i.name})]}),(0,o.BX)(Z.tu,{gap:2,children:[(0,o.tZ)(B.xv.B3,{weight:"semibold",clamp:2,children:t.title}),(0,o.tZ)(B.xv.B4,{color:"secondary",clamp:2,children:t.truncated_body_text?(t.truncated_body_text||"").replace(s.W.PUBLICATION_NAME,i.name):t.subtitle||""})]})]})}},44846:function(e,t,i){i.d(t,{r:()=>Q});var n=i(16584),o=i(30396),r=i(887),l=i(7409),a=i(99282),s=i(57557),d=i.n(s),c=i(94697),u=i(45587),p=i(24285),h=i(39693),m=i.n(h),g=i(24350),v=i.n(g),Z=i(89734),f=i.n(Z),b=i(71375),w=i(95441),y=i(55480),_=i(15771),C=i(19081),B=i(52202),k=i(17688),x=i(58175);let S=e=>{let{addLabel:t,hideAdd:i,isValidSection:r,metadata:l,pub:a,renderEditMetadata:s,renderMetadata:d,selectedIds:p,selectedLabel:h,validateMetadata:g,onChangeMetadata:Z,onChangeSelectedIds:f}=e,[b,w]=(0,o.eJ)(null),_=(0,c.Dy)((0,c.VT)(c.we,{activationConstraint:{distance:5}})),k=v()(a.sections,"id"),S=(0,y.jU)({pub:a}),T=m()(p.map(e=>{var t;return -1===e?{id:-1,name:null!==(t=S.title)&&void 0!==t?t:""}:k[e]})),N=e=>{f(p.filter(t=>t!==e))},L=e=>{w(e)};return(0,n.BX)(C.tu,{gap:16,children:[(0,n.tZ)(B.g,{label:h,children:(0,n.tZ)(C.tu,{gap:8,children:p.length?(0,n.tZ)(c.LB,{collisionDetection:c.pE,sensors:_,onDragEnd:e=>{let{active:t,over:i}=e;if(t.id!==i.id){let e=p.findIndex(e=>e===t.id),n=p.findIndex(e=>e===i.id);f((0,u.Rp)(p,e,n))}},children:(0,n.tZ)(u.Fo,{items:T,strategy:u.U2,children:T.map(e=>{var t;return(0,n.tZ)(I,{disableDrag:!!b,id:e.id,children:(0,n.tZ)(X,{isEditing:b===e.id,renderEditMetadata:s,renderMetadata:d,sectionId:e.id,sectionMetadata:null!==(t=null==l?void 0:l[e.id])&&void 0!==t?t:null,sectionName:e.name,validateMetadata:g,onChangeMetadata:Z,onEdit:L,onRemove:N},e.id)},e.id)})})}):(0,n.tZ)(x.xv.B3,{color:"pub-secondary-text",children:"No sections selected"})})}),!i&&(0,n.tZ)(B.g,{label:null!=t?t:"Add section",children:(0,n.tZ)(P,{excludedSectionIds:[...T.map(e=>e.id),...r?a.sections.filter(e=>!r(e)).map(e=>e.id):[]],pub:a,onSelect:e=>{f([...p,e])}})})]})},P=e=>{let{excludedSectionIds:t,pub:i,onSelect:o}=e,{iString:r}=(0,w.M1)(),l=i.sections.filter(e=>!(null==t?void 0:t.includes(e.id)));return(0,n.BX)(k.i,{value:"",onChange:e=>{let t=e.target.value;t&&o(parseInt(t))},children:[(0,n.tZ)(k.d,{children:r("Select a section")}),f()(l,"name").map(e=>(0,n.tZ)("option",{value:e.id,children:e.name}))]})},I=e=>{let{children:t,disableDrag:i,id:o}=e,{attributes:r,isDragging:s,listeners:d,setNodeRef:c,transform:h,transition:m}=(0,u.nB)({id:o}),g={transform:p.ux.Translate.toString(h),transition:m,zIndex:+!!s,cursor:s?"grabbing":"grab"};return i?(0,n.tZ)("div",{children:t}):(0,n.tZ)("div",(0,a._)((0,l._)({ref:c},r,d),{role:"button",style:g,children:t}))},X=e=>{let{isEditing:t,renderEditMetadata:i,renderMetadata:l,sectionId:a,sectionName:s,sectionMetadata:d,validateMetadata:c,onChangeMetadata:u,onEdit:p,onRemove:h}=e,[m,g]=(0,o.eJ)(d),[v,Z]=(0,o.eJ)(null);return(0,n.BX)(C.gq,{alignItems:"start",bg:"white",border:"detail-themed",justifyContent:"space-between",paddingLeft:12,paddingRight:8,paddingY:8,radius:"sm",children:[(0,n.BX)(C.tu,{children:[(0,n.tZ)(x.xv.B4,{weight:"semibold",children:s}),!t&&l&&(0,n.tZ)("div",{children:l(d)}),t&&i&&(0,n.BX)(C.tu,{alignItems:"start",gap:12,paddingTop:12,children:[i({errors:v,value:m,onChange:g}),u&&(0,n.BX)(C.gq,{gap:8,children:[(0,n.tZ)(_.zx,{size:"sm",onClick:()=>{if(u){if(c){let{isValid:e,message:t}=c(m);if(!e&&t){Z([t]);return}Z(null)}u({sectionId:a,value:m}),p(null)}},children:"Done"}),(0,n.tZ)(_.zx,{priority:"secondary",size:"sm",onClick:()=>{p(null)},children:"Cancel"})]})]})]}),!t&&(0,n.BX)(C.gq,{alignItems:"center",gap:8,children:[!!i&&(0,n.tZ)(_.hU,{size:"xs",onClick:()=>{p(a)},children:(0,n.tZ)(r.Z,{size:14})}),(0,n.tZ)(_.hU,{size:"xs",onClick:()=>{h(a)},children:(0,n.tZ)(b.Z,{size:14})})]})]})},T=e=>{let{emptyText:t,label:i,value:o}=e;return(0,n.BX)(C.gq,{alignItems:"baseline",gap:4,children:[(0,n.BX)(x.xv.B4,{fontWeight:"semibold",children:[i,":"]}),(0,n.tZ)(x.xv.B4,{color:o?"primary":"secondary",children:o||t})]})};var N=i(21061),L=i(73207),q=i(89263),M=i(6490);let E=e=>{let{pub:t,onClose:i}=e,{isSaving:o,metadata:r,ids:s,onChangeMetadata:c,onChangeOrder:u,onSave:p}=(0,L.I)({pub:t}),{isSaving:h,metadata:m,ids:g,onChangeMetadata:v,onChangeOrder:Z,onSave:f}=(0,L.I)({pub:t,pubSetting:"fp_primary_column_section_ids"}),{ids:b,isSaving:w,onChange:y,onSave:B}=(0,N.l)({pub:t}),k=async()=>{await p(),await f(),await B(),window.location.reload()};return(0,n.BX)(M.u_,{isOpen:!0,onClose:i,children:[(0,n.tZ)(M.xB,{showClose:!0,title:"Edit featured and archived sections",onClose:i}),(0,n.tZ)(M.fe,{children:(0,n.BX)(C.tu,{gap:36,children:[(0,n.tZ)(S,{addLabel:"Add From the Free Press section",metadata:m,pub:t,renderEditMetadata:e=>{var t,i;let{value:o,onChange:r}=e;return(0,n.BX)(C.tu,{gap:8,children:[(0,n.tZ)(q.n,{label:"Tagline",value:null!==(t=null==o?void 0:o.tagline)&&void 0!==t?t:"",width:260,onChange:e=>{var t;r({frequency:null!==(t=null==o?void 0:o.frequency)&&void 0!==t?t:"",tagline:e})}}),(0,n.tZ)(q.n,{label:"Frequency",value:null!==(i=null==o?void 0:o.frequency)&&void 0!==i?i:"",width:260,onChange:e=>{r((0,a._)((0,l._)({},o),{frequency:e}))}})]})},renderMetadata:e=>{var t,i;return(0,n.BX)(C.tu,{children:[(0,n.tZ)(T,{emptyText:"no tagline set",label:"Tagline",value:null!==(t=null==e?void 0:e.tagline)&&void 0!==t?t:""}),(0,n.tZ)(T,{emptyText:"no frequency set",label:"Frequency",value:null!==(i=null==e?void 0:e.frequency)&&void 0!==i?i:""})]})},selectedIds:g,selectedLabel:"From The Free Press sections",onChangeMetadata:e=>{var t;let{sectionId:i,value:n}=e;v({metadata:n?(0,a._)((0,l._)({},r),{[i]:(0,a._)((0,l._)({},n),{frequency:null!==(t=null==n?void 0:n.frequency)&&void 0!==t?t:""})}):d()(r,i)})},onChangeSelectedIds:e=>{Z({ids:e})}}),(0,n.tZ)(S,{addLabel:"Add featured section",metadata:r,pub:t,renderEditMetadata:e=>{var t,i;let{value:o,onChange:r}=e;return(0,n.BX)(C.tu,{gap:8,children:[(0,n.tZ)(q.n,{label:"Tagline",value:null!==(t=null==o?void 0:o.tagline)&&void 0!==t?t:"",width:260,onChange:e=>{var t;r({frequency:null!==(t=null==o?void 0:o.frequency)&&void 0!==t?t:"",tagline:e})}}),(0,n.tZ)(q.n,{label:"Frequency",value:null!==(i=null==o?void 0:o.frequency)&&void 0!==i?i:"",width:260,onChange:e=>{r((0,a._)((0,l._)({},o),{frequency:e}))}})]})},renderMetadata:e=>{var t,i;return(0,n.BX)(C.tu,{children:[(0,n.tZ)(T,{emptyText:"no tagline set",label:"Tagline",value:null!==(t=null==e?void 0:e.tagline)&&void 0!==t?t:""}),(0,n.tZ)(T,{emptyText:"no frequency set",label:"Frequency",value:null!==(i=null==e?void 0:e.frequency)&&void 0!==i?i:""})]})},selectedIds:s,selectedLabel:"Featured sections",onChangeMetadata:e=>{var t;let{sectionId:i,value:n}=e;c({metadata:n?(0,a._)((0,l._)({},r),{[i]:(0,a._)((0,l._)({},n),{frequency:null!==(t=null==n?void 0:n.frequency)&&void 0!==t?t:""})}):d()(r,i)})},onChangeSelectedIds:e=>{u({ids:e})}}),(0,n.tZ)(S,{addLabel:"Add archived section",pub:t,selectedIds:b,selectedLabel:"Archived sections",onChangeSelectedIds:e=>{y({ids:e})}})]})}),(0,n.tZ)(M.mz,{primaryButton:(0,n.tZ)(_.zx,{disabled:o||w||h,onClick:k,children:"Save"}),secondaryButton:(0,n.tZ)(_.zx,{disabled:o||w||h,priority:"secondary",onClick:i,children:"Cancel"})})]})};var z=i(98130);let R=e=>{let{pub:t,onClose:i}=e,{isSaving:o,ids:r,onSave:l,onChange:a}=(0,z.L)({pub:t}),s=async()=>{await l(),window.location.reload()};return(0,n.BX)(M.u_,{isOpen:!0,onClose:i,children:[(0,n.tZ)(M.xB,{showClose:!0,title:"Edit event sections",onClose:i}),(0,n.tZ)(M.fe,{children:(0,n.tZ)(S,{addLabel:"Add event section",pub:t,selectedIds:r,selectedLabel:"Event sections",onChangeSelectedIds:e=>{a({ids:e})}})}),(0,n.tZ)(M.mz,{primaryButton:(0,n.tZ)(_.zx,{disabled:o,onClick:s,children:"Save"}),secondaryButton:(0,n.tZ)(_.zx,{disabled:o,priority:"secondary",onClick:i,children:"Cancel"})})]})};var A=i(87725),O=i(24476),D=i(87185);let F=e=>{let{pub:t,onClose:i}=e,{ids:r,metadata:s,onChangeOrder:d,onChangeMetadata:c,onSave:u}=(0,A.F)({pub:t}),[p,h]=(0,o.eJ)(!1),m=async()=>{h(!0),await u(),window.location.reload()};return(0,n.BX)(M.u_,{isOpen:!0,onClose:i,children:[(0,n.tZ)(M.xB,{title:"Edit podcast sections",onClose:i}),(0,n.tZ)(M.fe,{children:(0,n.tZ)(S,{addLabel:"Add podcast section",isValidSection:e=>e.is_podcast,metadata:s,pub:t,renderEditMetadata:e=>{var t;let{value:i,onChange:o}=e;return(0,n.tZ)(C.tu,{gap:12,children:(0,n.tZ)(D.m,{label:"Carousel color",options:O.k.map(e=>({label:e,value:e})),value:null!==(t=null==i?void 0:i.carouselColor)&&void 0!==t?t:"black",onChange:e=>{o({carouselColor:e})}})})},renderMetadata:e=>{var t;return(0,n.tZ)(C.gq,{height:20,radius:"xs",style:{backgroundColor:O.t[null!==(t=null==e?void 0:e.carouselColor)&&void 0!==t?t:"black"].hex},width:20})},selectedIds:r,selectedLabel:"Podcast sections",onChangeMetadata:e=>{let{sectionId:t,value:i}=e;c({metadata:(0,a._)((0,l._)({},s),{[t]:i})})},onChangeSelectedIds:e=>{d({ids:e})}})}),(0,n.tZ)(M.mz,{primaryButton:(0,n.tZ)(_.zx,{disabled:p,onClick:m,children:"Save"}),secondaryButton:(0,n.tZ)(_.zx,{disabled:p,priority:"secondary",onClick:i,children:"Cancel"})})]})};var U=i(94778),H=i(43905);let W=e=>{let{pub:t,onClose:i}=e,{isSaving:o,metadata:r,ids:s,onChangeMetadata:d,onChangeOrder:c,onSave:u}=(0,U.c)({pub:t}),p=async()=>{await u(),window.location.reload()};return(0,n.BX)(M.u_,{isOpen:!0,onClose:i,children:[(0,n.tZ)(M.xB,{showClose:!0,title:"Edit video sections",onClose:i}),(0,n.tZ)(M.fe,{children:(0,n.tZ)(S,{addLabel:"Add video section",metadata:r,pub:t,renderEditMetadata:e=>{var t,i;let{errors:o,value:r,onChange:l}=e;return(0,n.BX)(C.tu,{gap:12,children:[(0,n.tZ)(D.m,{label:"Carousel color",options:O.k.map(e=>({label:e,value:e})),value:null!==(t=null==r?void 0:r.carouselColor)&&void 0!==t?t:"black",onChange:e=>{var t;l({carouselColor:e,youtubeUrl:null!==(t=null==r?void 0:r.youtubeUrl)&&void 0!==t?t:""})}}),(0,n.tZ)(q.n,{errors:o,label:"YouTube URL",value:null!==(i=null==r?void 0:r.youtubeUrl)&&void 0!==i?i:"",width:260,onChange:e=>{var t;l({carouselColor:null!==(t=null==r?void 0:r.carouselColor)&&void 0!==t?t:"black",youtubeUrl:e})}})]})},renderMetadata:e=>{var t;return(0,n.BX)(C.gq,{alignItems:"center",gap:8,children:[(0,n.tZ)(C.gq,{height:20,radius:"xs",style:{backgroundColor:O.t[null!==(t=null==e?void 0:e.carouselColor)&&void 0!==t?t:"black"].hex},width:20}),(null==e?void 0:e.youtubeUrl)?(0,n.tZ)(x.xv.B4,{children:(0,n.tZ)("a",{href:null==e?void 0:e.youtubeUrl,rel:"noopener noreferrer",target:"_blank",children:"YouTube link"})}):(0,n.tZ)(x.xv.B4,{color:"pub-secondary-text",children:"No YouTube link set"})]})},selectedIds:s,selectedLabel:"Video sections",validateMetadata:e=>{var t;let i=(null!==(t=null==e?void 0:e.youtubeUrl)&&void 0!==t?t:"").trim();if(!i)return{isValid:!0,message:null};let{isValid:n,message:o}=(0,H.tc)({platform:"youtube",url:i,language:"en"});return{isValid:n,message:o}},onChangeMetadata:e=>{var t,i;let{sectionId:n,value:o}=e;d({metadata:(0,a._)((0,l._)({},r),{[n]:(0,a._)((0,l._)({},o),{carouselColor:null!==(t=null==o?void 0:o.carouselColor)&&void 0!==t?t:"black",youtubeUrl:null!==(i=null==o?void 0:o.youtubeUrl)&&void 0!==i?i:""})})})},onChangeSelectedIds:e=>{c({ids:e})}})}),(0,n.tZ)(M.mz,{primaryButton:(0,n.tZ)(_.zx,{disabled:o,onClick:p,children:"Save"}),secondaryButton:(0,n.tZ)(_.zx,{disabled:o,priority:"secondary",onClick:i,children:"Cancel"})})]})},J=e=>{let{pub:t,selectedIds:i,selectedLabel:o,onChangeSelectedIds:r}=e,s=(0,c.Dy)((0,c.VT)(c.we,{activationConstraint:{distance:5}})),d=v()(t.contributors,"user_id"),p=m()(i.map(e=>d[e]?(0,a._)((0,l._)({},d[e]),{id:e}):null)),h=e=>{r(i.filter(t=>t!==e))};return(0,n.BX)(C.tu,{gap:16,children:[(0,n.tZ)(B.g,{label:o,children:(0,n.tZ)(C.tu,{gap:8,children:i.length?(0,n.tZ)(c.LB,{collisionDetection:c.pE,sensors:s,onDragEnd:e=>{let{active:t,over:n}=e;if(t.id!==n.id){let e=i.findIndex(e=>e===t.id),o=i.findIndex(e=>e===n.id);r((0,u.Rp)(i,e,o))}},children:(0,n.tZ)(u.Fo,{items:p,strategy:u.U2,children:p.map(e=>(0,n.tZ)(V,{id:e.user_id,children:(0,n.tZ)(j,{authorId:e.user_id,authorName:e.name,onRemove:h})},e.user_id))})}):(0,n.tZ)(x.xv.B3,{color:"pub-secondary-text",children:"No authors selected"})})}),(0,n.tZ)(B.g,{label:"Add an author",children:(0,n.tZ)(Y,{excludedAuthorIds:p.map(e=>e.id),pub:t,onSelect:e=>{r([...i,e])}})})]})},Y=e=>{let{excludedAuthorIds:t,pub:i,onSelect:o}=e,{iString:r}=(0,w.M1)(),l=i.contributors.filter(e=>!(null==t?void 0:t.includes(e.user_id)));return(0,n.BX)(k.i,{value:"",onChange:e=>{let t=e.target.value;t&&o(parseInt(t))},children:[(0,n.tZ)(k.d,{children:r("Select a section")}),f()(l,"name").map(e=>(0,n.tZ)("option",{value:e.user_id,children:e.name}))]})},V=e=>{let{children:t,disableDrag:i,id:o}=e,{attributes:r,isDragging:s,listeners:d,setNodeRef:c,transform:h,transition:m}=(0,u.nB)({id:o}),g={transform:p.ux.Translate.toString(h),transition:m,zIndex:+!!s,cursor:s?"grabbing":"grab"};return i?(0,n.tZ)("div",{children:t}):(0,n.tZ)("div",(0,a._)((0,l._)({ref:c},r,d),{role:"button",style:g,children:t}))},j=e=>{let{authorId:t,authorName:i,onRemove:o}=e;return(0,n.BX)(C.gq,{alignItems:"start",bg:"white",border:"detail-themed",justifyContent:"space-between",paddingLeft:12,paddingRight:8,paddingY:8,radius:"sm",children:[(0,n.tZ)(C.tu,{children:(0,n.tZ)(x.xv.B4,{weight:"semibold",children:i})}),(0,n.tZ)(_.hU,{size:"xs",onClick:()=>{o(t)},children:(0,n.tZ)(b.Z,{size:14})})]})};var G=i(1056);let K=e=>{let{pub:t,onClose:i}=e,{ids:r,onSave:l,onChange:a}=(0,G.d)({pub:t}),[s,d]=(0,o.eJ)(!1),c=async()=>{d(!0),await l(),window.location.reload()};return(0,n.BX)(M.u_,{isOpen:!0,onClose:i,children:[(0,n.tZ)(M.xB,{showClose:!0,title:"Edit authors",onClose:i}),(0,n.tZ)(M.fe,{children:(0,n.tZ)(J,{pub:t,selectedIds:r,selectedLabel:"Authors to show",onChangeSelectedIds:e=>{a({ids:e})}})}),(0,n.tZ)(M.mz,{primaryButton:(0,n.tZ)(_.zx,{disabled:s,onClick:c,children:"Save"}),secondaryButton:(0,n.tZ)(_.zx,{disabled:s,priority:"secondary",onClick:i,children:"Cancel"})})]})},Q=e=>{let{pub:t,sectionType:i,user:l}=e,[a,s]=(0,o.eJ)(!1);return(null==l?void 0:l.is_admin)?(0,n.BX)(n.HY,{children:[(0,n.tZ)(_.hU,{priority:"primary-mono",size:"sm",onClick:()=>{s(!0)},children:(0,n.tZ)(r.Z,{size:16})}),a&&"columns"===i&&(0,n.tZ)(E,{pub:t,onClose:()=>{s(!1)}}),a&&"event"===i&&(0,n.tZ)(R,{pub:t,onClose:()=>{s(!1)}}),a&&"podcast"===i&&(0,n.tZ)(F,{pub:t,onClose:()=>{s(!1)}}),a&&"video"===i&&(0,n.tZ)(W,{pub:t,onClose:()=>{s(!1)}}),a&&"who-we-are"===i&&(0,n.tZ)(K,{pub:t,onClose:()=>{s(!1)}})]}):null}},56378:function(e,t,i){i.d(t,{z:()=>s});var n=i(16584),o=i(14952),r=i(68833),l=i(60590),a=i(63651);let s=e=>{let{trigger:t,liveStream:i,trackingSurface:s}=e,d=(0,o.Ij)();if(!d)return null;let c={title:i.title,description:i.description||"",location:(0,a.thY)({pub:d}),start:i.scheduled_at||new Date,duration:[1,"hour"],allDay:!1,busy:!0};return(0,n.tZ)(l.m,{event:c,handleClick:e=>{(0,r.j)(r.FP.ADD_TO_CALENDAR_CLICKED,{liveStreamId:i.id,surface:s,type:e})},menuProps:{trigger:t}})}},18582:function(e,t,i){i.d(t,{q:()=>v});var n=i(7409),o=i(99282),r=i(16584),l=i(94184),a=i.n(l),s=i(32351),d=i(347),c=i(81451),u=i(7523),p=i(49688),h=i(98422),m=i(19081),g=i(71891);let v=e=>{let{actions:t,aboveTitle:i,belowDescription:l,bodyWrapperVariant:v,children:Z,description:f,image:b,isLoading:w,metadata:y,title:_,pageCTA:C,hideDivider:B=!1}=e,{isMobile:k}=(0,h.v9)(),x=!!(_&&!f&&!i&&!l&&!t&&!b),{markdownProps:S}=(0,p.V)(f);return(0,r.BX)(d.h,{children:[y&&(0,r.tZ)(s.Metadata,(0,n._)({},y)),(0,r.tZ)(c.x,{paddingTop:k?40:64,children:!w&&(0,r.BX)(m.tu,{gap:k?24:40,paddingBottom:64,children:[(0,r.tZ)("div",{className:a()(g.Z.header,{[g.Z.noImage]:!b,[g.Z.headerWithJustTitle]:x}),children:k?(0,r.BX)(m.tu,{gap:24,children:[i&&(0,r.tZ)(m.gq,{alignSelf:"start",children:i}),(0,r.tZ)(u.Z,{preset:"h1-serif",children:_}),b&&(0,r.tZ)(m.gq,{children:b}),f&&(0,r.tZ)(u.Z,(0,o._)((0,n._)({},S),{preset:"d1-sans-regular"})),l]}):(0,r.BX)(r.HY,{children:[(0,r.BX)(m.tu,{children:[i&&(0,r.tZ)(m.gq,{alignSelf:"start",children:i}),(0,r.tZ)(u.Z,{preset:"h1-serif",children:_}),(0,r.BX)(m.tu,{gap:24,children:[f&&(0,r.tZ)(u.Z,(0,o._)((0,n._)({},S),{preset:"d1-sans-regular"})),l]})]}),b&&(0,r.tZ)(m.gq,{justifyContent:"end",children:b}),t&&(0,r.tZ)("div",{className:g.Z.actions,children:t})]})}),!B&&(0,r.tZ)("div",{className:g.Z.thickRule,children:C}),(0,r.tZ)("div",{className:a()({[g.Z.bodyWrapperTwoMiddleColumns]:"two-middle-columns"===v}),children:Z})]})})]})}},81451:function(e,t,i){i.d(t,{x:()=>r});var n=i(16584),o=i(19081);let r=e=>{let{children:t,paddingTop:i}=e;return(0,n.tZ)(o.tu,{className:"container-Y7VoFt",paddingTop:i,children:t})}},9550:function(e,t,i){i.d(t,{o:()=>b});var n=i(7409),o=i(99282),r=i(16584),l=i(77989),a=i(51043),s=i(62372),d=i(70011),c=i(7523),u=i(24476),p=i(95441),h=i(55480),m=i(98914),g=i(19081),v=i(70379),Z=i(74571),f=i(43905);let b=e=>{let{pub:t,section:i,user:b}=e,{iString:w}=(0,p.M1)(),[y,_]=(0,s.XI)(),[C,B]=(0,s.XI)(),[k,x]=(0,s.XI)(),S=(0,v.pm)(),{feedUrl:P}=(0,Z.fn)({pub:t,user:null!=b?b:null,section:i}),I=(0,f.a9)({pub:t,section:i,spotifySettings:(0,h.pp)({pub:t,section:null!=i?i:null})}),X={as:"a",cursor:"pointer",rel:"noreferrer noopener",target:"_blank"};return(0,r.BX)(g.gq,{alignItems:"center",gap:12,children:[(0,r.tZ)(c.Z,{preset:"d1-sans-medium",children:"Listen On:"}),(0,r.BX)(g.gq,{alignItems:"center",gap:16,children:[I.spotify_url&&(0,r.tZ)(g.gq,(0,o._)((0,n._)({},_,X),{href:I.spotify_url,children:(0,r.tZ)(d.Z,{fill:y?void 0:u.t.black.hex})})),I.apple_podcasts_url&&(0,r.tZ)(g.gq,(0,o._)((0,n._)({},B,X),{href:I.apple_podcasts_url,children:(0,r.tZ)(l.Z,{color:C?"#B53CD9":u.t.black.hex,size:24})})),(0,r.tZ)(g.gq,(0,o._)((0,n._)({},x),{cursor:"pointer",onClick:()=>{S.popToast(e=>(0,r.tZ)(v.FN,(0,o._)((0,n._)({},e),{text:w("RSS feed URL copied")}))),(0,m.vQ)(P)},children:(0,r.tZ)(a.Z,{color:k?"#F88800":u.t.black.hex,size:24})}))]})]})}},33636:function(e,t,i){i.d(t,{L:()=>l});var n=i(16584),o=i(7523),r=i(19081);let l=e=>{let{children:t}=e;return(0,n.tZ)(r.gq,{children:(0,n.tZ)(r.gq,{className:"container-f0oiU0",paddingBottom:8,children:(0,n.tZ)(o.Z,{preset:"detail-large",children:t})})})}},4767:function(e,t,i){i.d(t,{E:()=>o});var n=i(16584);let o=e=>{let{children:t}=e;return(0,n.tZ)("div",{className:"container-mcXs8_",children:t})}},58023:function(e,t,i){i.d(t,{Z:()=>d});var n=i(16584),o=i(98661),r=i(39693),l=i.n(r),a=i(61254),s=i(19081);let d=e=>{let{children:t,gap:i=32,includeBottomDivider:r,includeTopDivider:d,paddingTop:c=0}=e,u=o.Children.toArray(t),p=l()(u).flatMap((e,t)=>0!==t||d?[(0,n.tZ)(a.iz,{flex:"auto"}),e]:[e]);return(0,n.BX)(s.tu,{gap:i,paddingTop:c,children:[p,r&&(0,n.tZ)(a.iz,{flex:"auto"})]})}},11183:function(e,t,i){i.d(t,{I:()=>a});var n=i(16584),o=i(42312),r=i(98422),l=i(19081);let a=e=>{let{post:t,pub:i,user:a}=e,{isMobile:s}=(0,r.v9)();return(0,n.BX)(l.gq,{gap:s?16:40,justifyContent:"center",children:[(0,n.tZ)(o.Ck,{cta:s?"Comment":"Make a comment",post:t,pub:i,showCounts:!1,size:"large"}),(0,n.tZ)(o.gV,{cta:s?"Like":"Like article",post:t,pub:i,showCounts:!1,size:"large",user:a}),(0,n.tZ)(o.fA,{cta:s?"Share":"Share article",post:t,pub:i,user:a})]})}},49259:function(e,t,i){i.d(t,{z:()=>h});var n=i(16584),o=i(7523),r=i(98422),l=i(68648),a=i(31883),s=i(17258),d=i(19081),c=i(31377),u=i(84864);let p={verticalDivider:"verticalDivider-JbC7L1"},h=e=>{let{post:t}=e,{isMobile:i}=(0,r.v9)(),{pub:h}=(0,l.ZT)(),m=(0,c.getDurationForPostPreview)({post:t});return(0,n.tZ)(o.Z,{color:"tertiary",preset:"caption",style:{lineHeight:1},children:(0,n.BX)(d.gq,{gap:16,children:[(0,n.tZ)(a.wz,{customFormat:"MMMM D, YYYY",post:t}),(0,n.tZ)("div",{className:p.verticalDivider}),(0,n.tZ)(s.p,{clamp:1,post:t,pub:h}),!!m&&!i&&(0,n.BX)(n.HY,{children:[(0,n.tZ)("div",{className:p.verticalDivider}),(0,u.formatPodcastDuration)(m)]})]})})}},82661:function(e,t,i){i.d(t,{I:()=>d});var n=i(16584),o=i(56378),r=i(74626),l=i(7523),a=i(19081),s=i(98012);let d=e=>{let{liveStream:t,trackingSurface:i}=e,d=(0,s.Z)(t.scheduled_at).format("dddd MMMM D, YYYY"),c=(0,s.Z)(t.scheduled_at).format("h:mm A");return(0,n.BX)(a.tu,{gap:24,children:[(0,n.BX)(a.tu,{gap:8,children:[(0,n.tZ)(l.Z,{preset:"h5-serif",children:t.title}),(0,n.tZ)(l.Z,{preset:"d3-serif",children:t.description}),(0,n.tZ)(l.Z,{preset:"timestamp",children:d}),(0,n.tZ)(l.Z,{preset:"timestamp",children:c})]}),(0,n.tZ)(a.gq,{children:(0,n.tZ)(o.z,{liveStream:t,trackingSurface:i,trigger:(0,n.tZ)("div",{children:(0,n.tZ)(r._,{size:"sm",trailingIcon:"plus",variant:"outline",children:"Add to calendar"})})})})]})}},17781:function(e,t,i){i.d(t,{E:()=>L});var n=i(16584),o=i(30396),r=i(20888),l=i(18582),a=i(9550),s=i(40281),d=i(33636),c=i(82661),u=i(61254),p=i(19081);let h=e=>{let{scheduledLiveStreams:t}=e;return(0,n.BX)(p.tu,{gap:40,children:[(0,n.tZ)(d.L,{children:"Upcoming livestreams"}),(0,n.tZ)(p.tu,{gap:24,children:t.map((e,t)=>(0,n.BX)(n.HY,{children:[0!==t&&(0,n.tZ)(u.iz,{}),(0,n.tZ)(c.I,{liveStream:e,trackingSurface:"section-page"})]}))})]})};var m=i(7409),g=i(99282),v=i(25380),Z=i(74626),f=i(95441),b=i(7882),w=i(70379),y=i(60308),_=i(21292);let C=e=>{let{pub:t,section:i,user:r,freeSignup:l,freeSignupEmail:a}=e,{iString:s}=(0,f.M1)(),{popToast:d}=(0,w.pm)(),[c,u]=(0,o.eJ)(!1),[h,C]=(0,o.eJ)(!1),B=!!r||!!a&&!!l,{refetch:k}=(0,b.ib)({pathname:"/api/v1/subscription/sections/email",auto:!1,method:"PATCH"}),{result:x,refetch:S}=(0,b.ib)({pathname:"/api/v1/subscription",auto:!1});(0,o.d4)(()=>{(async()=>{let e=(0,y.en2)(window.location.href);if((null==e?void 0:e.searchParams.get("subscribe"))==="true"&&B){await k({json:{[i.id]:{setting:"individual"}}});let e=new URL(window.location.href);e.searchParams.delete("subscribe"),window.history.replaceState({},"",e.toString())}B&&await S(),C(!0)})()},[B]),(0,o.d4)(()=>{(null==x?void 0:x.email_settings)&&u("individual"===x.email_settings[i.id])},[x,i.id]);let P=async()=>{if(!B){let e=(0,_.e)(t,{addBase:!0,sectionSlug:i.slug,next:(0,y.n1t)(window.location.href,{subscribe:!0})});window.location.href=e;return}let e=!c;await k({json:{[i.id]:{setting:e?"individual":"disabled"}}}).then(()=>{u(e),d(t=>(0,n.tZ)(w.FN,(0,g._)((0,m._)({},t),{Icon:v.Z,text:e?"Subscription updated!":"Unsubscribed!"})))})};return(0,n.tZ)(p.gq,{justifyContent:"end",children:(0,n.tZ)(Z._,{style:{visibility:h?"visible":"hidden"},variant:"tertiary",onClick:P,children:c?"".concat(s("Subscribed")," ✓"):"".concat(s("Subscribe")," +")})})};var B=i(50225),k=i(11268),x=i(98130),S=i(94778),P=i(98162),I=i(55480),X=i(33578),T=i(98422);let N={sectionImage:"sectionImage-AFt6TD",tabsContainer:"tabsContainer-P8p3c9"},L=e=>{let t,i,d,{freeSignup:c,freeSignupEmail:m,isPodcast:g,isTagPage:v=!1,newPosts:Z,pub:f,scheduledLiveStreams:b,section:w,tag:y,user:L,utm:q}=e,{isMobile:M}=(0,T.v9)(),[E,z]=(0,o.eJ)(null!=b?b:null),{ids:R}=(0,x.L)({pub:f}),{ids:A}=(0,S.c)({pub:f}),O=(0,_.f)({pub:f,section:w});if((0,o.d4)(()=>{let e=async()=>{z(await (0,P.zJ)())};O&&!E&&e()},[O,E]),!w&&!v&&!g)return console.warn("Needs to be a section, tag, or pub-level podcast"),null;let D=!!w&&A.includes(w.id),F=!!w&&R.includes(w.id);if(g){let e=w?(0,I.d_)({pub:f,section:w}):(0,I.jU)({pub:f});t=e.title,i=e.description,d=e.artUrl}else D?(t=null==w?void 0:w.name,i=null==w?void 0:w.description,d=null==w?void 0:w.logo_url):v?(t=(null==y?void 0:y.name)||"Page not found",i=null):(t=null==w?void 0:w.name,i=null==w?void 0:w.description);return(0,n.tZ)(l.q,{belowDescription:g?(0,n.tZ)(a.o,{pub:f,section:w,user:L}):D?(0,n.tZ)(k.b,{pub:f,section:w}):void 0,bodyWrapperVariant:"two-middle-columns",description:i,image:d?(0,n.tZ)(r.e,{className:N.sectionImage,imageIsFixedWidth:!1,maxWidth:540,src:d,useRetinaSizing:!0}):void 0,pageCTA:!w||v||g||D?void 0:(0,n.tZ)(C,{freeSignup:c,freeSignupEmail:m,pub:f,section:w,user:L}),title:t,children:(0,n.BX)(p.tu,{gap:40,children:[E&&E.length>0&&(0,n.BX)(n.HY,{children:[(0,n.tZ)(h,{scheduledLiveStreams:E}),(0,n.tZ)(u.iz,{})]}),(0,n.tZ)(X.O,{hideCommunity:!0,hideTop:v,isPodcast:g&&!w,newPosts:Z,postTagId:null==y?void 0:y.id,pub:f,renderLoading:()=>null,renderTabs:e=>{let{activeTabId:t,tabs:i,onClick:o}=e;return i.length<=1||g?null:(0,n.tZ)(p.tu,{alignItems:"center",className:N.tabsContainer,paddingBottom:M?40:64,children:(0,n.tZ)(B.w,{activeTabId:t,tabs:i,onClick:o})})},sectionId:null==w?void 0:w.id,source:v?"tag-archive":void 0,user:L,utm:q,children:e=>{let{posts:t}=e;return(0,n.tZ)(s.f,{isEvents:F,posts:t})}})]})})}},11268:function(e,t,i){i.d(t,{b:()=>p});var n=i(16584),o=i(7409),r=i(99282),l=i(64515);let a=e=>(0,n.tZ)(l.l,(0,r._)((0,o._)({},e),{name:"YoutubeIcon",svgParams:{height:24,width:24},children:(0,n.tZ)("path",{d:"M21.582 6.07467C21.352 5.21467 20.674 4.53667 19.814 4.30667C18.254 3.88867 12 3.88867 12 3.88867C12 3.88867 5.746 3.88867 4.186 4.30667C3.326 4.53667 2.648 5.21467 2.418 6.07467C2 7.63467 2 11.8887 2 11.8887C2 11.8887 2 16.1427 2.418 17.7027C2.648 18.5627 3.326 19.2407 4.186 19.4707C5.746 19.8887 12 19.8887 12 19.8887C12 19.8887 18.254 19.8887 19.814 19.4707C20.675 19.2407 21.352 18.5627 21.582 17.7027C22 16.1427 22 11.8887 22 11.8887C22 11.8887 22 7.63467 21.582 6.07467ZM10 15.3527V8.42467L16 11.8887L10 15.3527Z"})}));var s=i(7523),d=i(94778),c=i(24476),u=i(19081);let p=e=>{var t;let{pub:i,section:o}=e,{metadata:r}=(0,d.c)({pub:i}),l=null===(t=r[o.id])||void 0===t?void 0:t.youtubeUrl;return l?(0,n.BX)(u.gq,{alignItems:"center",as:"a",gap:8,href:l,rel:"noopener noreferrer",target:"_blank",children:[(0,n.tZ)(s.Z,{preset:"d1-sans-medium",children:"Watch on YouTube"}),(0,n.tZ)(a,{fill:c.t.black.hex,height:30,stroke:"none"})]}):null}},1056:function(e,t,i){i.d(t,{d:()=>a});var n=i(30396),o=i(24350),r=i.n(o),l=i(81977);let a=e=>{let{pub:t}=e,i=r()(t.contributors,"user_id"),{setting:o,save:a}=(0,l.m)({key:"about_us_author_ids",fallback:[]}),[s,d]=(0,n.eJ)(o),c=async()=>{await a({setting:s})};return{ids:s,onChange:e=>{let{ids:t}=e;d(t.filter(e=>i[e]))},onSave:c}}},87725:function(e,t,i){i.d(t,{F:()=>p});var n=i(7409),o=i(99282),r=i(30396),l=i(78718),a=i.n(l),s=i(81977),d=i(55480);let c={"Honestly with Bari Weiss":"darkGreen","The Witch Trials of J.K. Rowling":"mediumOrange","Raising Parents with Emily Oster":"brightBlue"},u=["mediumYellow","darkGreen","mediumRed","darkOrange","mediumPurple","mediumBlue"],p=e=>{let{pub:t}=e,i=(0,d.EP)(t),l=i.map(e=>{var t;return null!==(t=e.sectionId)&&void 0!==t?t:-1}),p=i.reduce((e,t,i)=>{var r,l,a;return(0,o._)((0,n._)({},e),{[null!==(r=t.sectionId)&&void 0!==r?r:-1]:{carouselColor:null!==(a=null!==(l=c[t.podcastTitle])&&void 0!==l?l:u[i%u.length])&&void 0!==a?a:"mediumRed"}})},{}),{setting:h,save:m}=(0,s.m)({key:"podcasts_metadata",fallback:{order:l,metadata:p}}),[g,v]=(0,r.eJ)(h.order),[Z,f]=(0,r.eJ)(h.metadata),b=async()=>{await m({setting:{order:g,metadata:a()(Z,g)}})};return{ids:g,metadata:Z,onChangeOrder:e=>{let{ids:t}=e;v(t)},onChangeMetadata:e=>{let{metadata:t}=e;f(t)},onSave:b}}},24476:function(e,t,i){i.d(t,{k:()=>n,t:()=>o});let n=["black","brightOrange","brightBlue","darkGreen","darkOrange","lightGray","mediumBlue","mediumGreen","mediumOrange","mediumPurple","mediumRed","mediumYellow","offWhite"],o={black:{hex:"#161613",invertTextColors:!0},brightOrange:{hex:"#f74701",invertTextColors:!1},brightBlue:{hex:"#0366F3",invertTextColors:!0},darkGreen:{hex:"#3A564B",invertTextColors:!0},darkOrange:{hex:"#d37735",invertTextColors:!1},lightGray:{hex:"#bebdb8",invertTextColors:!1},mediumBlue:{hex:"#005591",invertTextColors:!0},mediumGreen:{hex:"#2db750",invertTextColors:!0},mediumOrange:{hex:"#f69227",invertTextColors:!1},mediumPurple:{hex:"#5358C8",invertTextColors:!0},mediumRed:{hex:"#f2312c",invertTextColors:!0},mediumYellow:{hex:"#F3C82E",invertTextColors:!1},offWhite:{hex:"#f6f4ef",invertTextColors:!1}}},98162:function(e,t,i){i.d(t,{Fv:()=>r,Hm:()=>d,ab:()=>s,h0:()=>a,zJ:()=>c,zQ:()=>l});var n=i(80569),o=i.n(n);let r=async e=>{let{extraText:t,extraLink:i}=e;await o().put("/api/v1/publication_settings").send({homepage_message_text:t,homepage_message_link:i})},l=async e=>{let{slug:t}=e;try{var i;let e=await o().get("/api/v1/posts/".concat(t));return null!==(i=e.body)&&void 0!==i?i:null}catch(e){return null}},a=async e=>{let{postIds:t,pub:i}=e;await o().post("/api/v1/publication/".concat(i.id,"/pin")).send({post_ids:t})},s=async e=>{let{contentBlockId:t,contentBlockPins:i}=e;await o().post("/api/v1/content_block/".concat(t,"/pins")).send({pins:i})},d=async e=>{let{pub:t}=e;try{var i;let e=await o().get("/api/v1/live_streams/active/pub/".concat(t.id));return null!==(i=e.body.activeLiveStream)&&void 0!==i?i:null}catch(e){return null}},c=async()=>{try{var e;let t=await o().get("/api/v1/live_streams/scheduled");return null!==(e=t.body.scheduledLiveStreams)&&void 0!==e?e:[]}catch(e){return[]}}},39648:function(e,t,i){i.d(t,{Nx:()=>c,O4:()=>s,nA:()=>d});var n=i(16584),o=i(98661),r=i(42441),l=i.n(r),a=i(74312);function s(){return(0,o.useContext)(d)}let d=(0,o.createContext)({open:()=>void 0});function c(e){let{children:t,load:r,pub:s,enableShortcuts:c=!0}=e,[u,p]=(0,o.useState)(!1),[h,m]=(0,o.useState)(!1),[g,v]=(0,o.useState)(),[Z,f]=(0,o.useState)();(0,o.useEffect)(()=>{if(!r||!s)return;let e=()=>p(!0);if(c)return l().bind(["/","command+k"],e),()=>{l().unbind(["/"],e),l().unbind(["command+k"],e)}},[]);let b=(0,o.useMemo)(()=>({open:e=>{m(!!(null==e?void 0:e.postsOnly)),v(()=>null==e?void 0:e.onSelectResult),f(()=>null==e?void 0:e.onClose),p(!0)}}),[]);return r&&s?(0,n.BX)(d.Provider,{value:b,children:[t,(0,n.tZ)(a.cr,{module:"@/frontend/substack/search/PublicationSearch",resolve:e=>e.PublicationSearch,isOpen:u,postsOnly:h,pub:s,onClose:()=>{null==Z||Z(),p(!1)},onRequest:()=>Promise.all([i.e("546"),i.e("3057"),i.e("8842"),i.e("3280")]).then(i.bind(i,89724)),onSelectResult:g})]}):(0,n.tZ)(n.HY,{children:t})}},53030:function(e,t,i){i.d(t,{FI:()=>o,On:()=>r,md:()=>l});var n=i(30396);let o=e=>{var t,i;let o=null==e?void 0:null===(t=e.current)||void 0===t?void 0:t.player,[r,l]=(0,n.eJ)("number"==typeof(null==o?void 0:o.currentTime)?o.currentTime:0),[a,s]=(0,n.eJ)(!!o&&!o.paused);return(0,n.d4)(()=>{var t;let i=null===(t=e.current)||void 0===t?void 0:t.player;if(i){let e=e=>{"number"==typeof e.target.currentTime&&l(e.target.currentTime)},t=()=>s(!0),n=()=>s(!1),o=()=>s(!1);return i.addEventListener("timeupdate",e),i.addEventListener("play",t),i.addEventListener("pause",n),i.addEventListener("ended",o),i.paused||a||s(!0),()=>{i.removeEventListener("timeupdate",e),i.removeEventListener("play",t),i.removeEventListener("pause",n),i.removeEventListener("ended",o)}}},[null==e?void 0:null===(i=e.current)||void 0===i?void 0:i.player]),{currentTime:r,isPlaying:a}},r=e=>l(e.current),l=e=>{let t=null==e?void 0:e.player,[i,o]=(0,n.eJ)(!!t&&!t.paused);return(0,n.d4)(()=>{let t=null==e?void 0:e.player;if(t){let e=()=>o(!0),n=()=>o(!1),r=()=>o(!1);return t.addEventListener("play",e),t.addEventListener("pause",n),t.addEventListener("ended",r),t.paused||i||o(!0),()=>{t.removeEventListener("play",e),t.removeEventListener("pause",n),t.removeEventListener("ended",r)}}},[null==e?void 0:e.player]),i}},49526:function(e,t,i){i.d(t,{t:()=>s});var n=i(30396),o=i(84596),r=i.n(o),l=i(60308),a=i(26111);let s=e=>{let{alwaysPersistQuery:t,initialValue:i,key:o,type:s,isArray:d,disable:c}=e,u=(0,a.x)(o),p=i;u&&!c&&(p=d?u.split(",").map(e=>"number"===s?parseInt(e):e):"number"===s?parseInt(u):u);let[h,m]=(0,n.eJ)(p),g=h&&(h!==i||t)?r()(h).join(","):"";return(0,n.d4)(()=>{if(!c){if(g)window.history.replaceState({},"",(0,l.rhs)({[o]:g}));else{let e=new URL(document.location.href);e.searchParams.delete(o),window.history.replaceState({},"",e.toString())}}},[c,o,g]),[h,m]}},10047:function(e,t,i){i.d(t,{J:()=>o,M:()=>r});var n=i(30396);function o(){let e=e=>{var t,i;"https://embed.bsky.app"===e.origin?function(e){if(!e.data.id||!e.data.height)return;let t=document.querySelector('[data-bluesky-id="'.concat(e.data.id,'"]'));t&&(t.style.height="".concat(e.data.height,"px"))}(e):("3pc.supported"===e.data||"3pc.unsupported"===e.data)&&("3pc.supported"===e.data&&Array.from(document.getElementsByClassName("tiktok-wrap outer")).forEach(e=>{var t,i;let n=e.querySelector(".tiktok-iframe");if(!n)return;n.classList.add("visible"),null===(t=e.querySelector(".tiktok-wrap.static"))||void 0===t||t.classList.add("hidden");let o=e.querySelector(".fallback-failure");null==o||o.classList.add("no-border");try{let e=n.contentDocument||(null===(i=n.contentWindow)||void 0===i?void 0:i.document);(null==e?void 0:e.readyState)=="complete"&&(null==o||o.classList.add("visible"))}catch(e){}n.onload=()=>{null==o||o.classList.add("visible")},n.onerror=()=>{null==o||o.classList.add("visible")},n.onabort=()=>{null==o||o.classList.add("visible")}}),null===(i=Array.from(document.getElementsByClassName("third-party-cookie-check-iframe")))||void 0===i||null===(t=i.forEach)||void 0===t||t.call(i,e=>e.remove()))};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}}function r(){(0,n.d4)(o,[])}},13285:function(e,t,i){i.d(t,{S:()=>r});var n=i(49762),o=i(1835);function r(e){let{publicationSettings:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!0===(0,n.ZP)("gifts_from_substack_feature_available")&&(0,o.Gm)(e)&&!(null==t?void 0:t.gifts_from_substack_disabled)}},27041:function(e,t,i){i.d(t,{Z:()=>I});var n=i(27412),o=i(16584),r=i(6400),l=i(80569),a=i.n(l),s=i(35047),d=i(56219),c=i(47851),u=i(12980),p=i(49995),h=i(58319),m=i(40647),g=i(68833),v=i(49762),Z=i(98914),f=i(23372),b=i(30396),w=i(19081),y=i(9459),_=i(91432);let C=e=>{var t;let{post:i,pub:n,user:r,freeSignup:l}=e,a=i.section_id&&n.sections&&null!==(t=n.sections.find(e=>e.id===i.section_id))&&void 0!==t?t:null,s=(0,b.sO)(null);return(0,o.BX)(w.tu,{className:"post",paddingY:32,children:[(0,o.tZ)(d.mV,{allowEdit:!0,hideAudience:"page"===i.type,hideDate:"page"===i.type,isOnPostPage:!0,post:i,pub:n,showCommentRestack:!n.hide_post_restacks,showLabel:!0,showPhoto:!0,showShare:!0,showSubtitle:!0,showUpdatedIcons:!0,user:r}),i.videoUpload&&(0,o.tZ)(y.L,{contentType:"post",disableAutoPlay:!0,entityKey:String(i.id),entityType:"post",isFreeSubscribed:!!((null==r?void 0:r.is_free_subscribed)||l),isSubscribed:!!(null==r?void 0:r.is_subscribed),mediaUpload:i.videoUpload,post:i,pub:n,surface:"publication",variant:"inbox",videoPlayerRef:s,videoType:"post"}),i.podcastUpload&&!i.videoUpload&&(0,o.tZ)(_.lU,{isFreeSubscribed:!!((null==r?void 0:r.is_free_subscribed)||l),isSubscribed:!!(null==r?void 0:r.is_subscribed),post:i,pub:n,section:a,trackingProps:{surface:"media_feed",entityKey:i.id,entityType:"post",contentType:"post"},variant:"notes-full"})]})};var B=i(31377),k=i(60308),x=i(26111),S=i(69332),P=i(47929);class I extends r.Component{async componentDidMount(){this.triggerShareOnLoad(),await this.loadMore()}getBatchSize(){return 5}async loadMore(){this.state.hasMore&&await (0,Z.Se)(this,"loading",async e=>{let{hasMore:t,posts:i}=e;if(t){i=i||[];try{let e=(await a().get("/api/v1/posts").query({limit:this.getBatchSize(),offset:i.length})).body;i=i.concat(e),t=e.length>=this.getBatchSize(),this.makeSureIosCookiesArentBroken(e),this.setState({posts:i,hasMore:t})}catch(e){console.error(e)}return t}})&&this.loader&&this.loader.checkVisibility()}triggerShareOnLoad(){var e;"share"===(0,x.x)("action")&&(window.history.replaceState({},document.title,(0,k.rhs)({action:null})),this.setState({share_on_load:!0}),null===(e=this.shareDialog)||void 0===e||e.open())}makeSureIosCookiesArentBroken(e){if(!/iPad|iPhone|iPod/.test(navigator.userAgent)||this.props.user&&this.props.user.is_subscribed||!e||0===e.filter(e=>(0,B.isPaidAudience)(e.audience)&&!e.hidden).length)return;let t="__cookie_checked",i=(0,S.m)(window.location.search);i[t]||(i[t]="true",window.location.search="?".concat((0,k.Y$Q)(i)))}onChange(e){let{post:t}=e||{};if(t){var i;let e=(this.state.posts||[]).map(e=>e.id).indexOf(t&&t.id);-1!==e&&(null===(i=this.state.posts)||void 0===i?void 0:i[e])&&(this.state.posts[e]=t,this.setState({posts:this.state.posts}))}}render(e,t){let{user:i,pub:n,freeSignup:r,freeSignupEmail:l,preloadedPosts:a,hide_intro_popup:d,children:u,blurbs:p,launchWelcomePage:m,skipIntroPopupRender:g,activeLiveStream:v}=e,{posts:Z,hasMore:b,share_on_load:w}=t,y=[];for(let e of Z||a||[]){let t=y[y.length-1];e.hidden?Array.isArray(t)?t.push(e):y.push([e]):y.push(e)}return(0,o.BX)("div",{className:"classic-home-page",children:[!!(null==v?void 0:v.liveStream.id)&&(0,o.tZ)(f.Z,{activeLiveStream:v}),(0,o.tZ)(c.Z,{ref:this.assignShareDialog,user:i,pub:n}),g?null:(0,o.tZ)(s.ZP,{freeSignup:r,freeSignupEmail:l,user:i,post:null,publication:n,hidden:d||w,blurbs:p,launchWelcomePage:m}),(0,o.BX)("div",{className:"post-list",children:[0===y.length&&!b&&(0,o.tZ)("div",{className:"container-border coming-soon",children:(0,o.tZ)("div",{className:"container",children:(0,o.tZ)("p",{children:"Coming soon"})})}),y.map((e,t)=>Array.isArray(e)?this.renderHiddenPosts(e,t):this.renderPost(e)),b?(0,o.tZ)("div",{className:"post-loader",children:(0,o.tZ)("div",{className:"container",children:(0,o.tZ)(h.Z,{ref:this.assignLoader,noDedupe:!0,threshold:1280,onVisible:()=>this.loadMore(),children:(0,o.tZ)("p",{children:"Loading more posts…"})})})}):n.has_posts&&Z&&Z.length>0&&(0,o.tZ)("div",{className:"container",children:(0,o.tZ)("a",{className:"archive-link button invis",href:(0,k.nxG)(n),children:"View archive"})})]}),u]})}renderPost(e){return(0,o.tZ)("div",{className:"container-border post-list-post",children:(0,o.tZ)("div",{className:"container",children:"thread"===e.type?(0,o.tZ)(u.H,{post:e,user:this.props.user,pub:this.props.pub,freeSignup:this.props.freeSignup,freeSignupEmail:this.props.freeSignupEmail,invisible:!this.props.hide_intro_popup,showCta:!0,showReactions:!!this.likesEnabled}):"podcast"===e.type||"video"===e.type?(0,o.tZ)(C,{post:e,pub:this.props.pub,user:this.props.user,freeSignup:this.props.freeSignup}):(0,o.tZ)(d.SO,{post:e,user:this.props.user,freeSignup:this.props.freeSignup,freeSignupEmail:this.props.freeSignupEmail,pub:this.props.pub,invisible:!this.props.hide_intro_popup,truncateAt:1e4,truncateTo:8e3,onChange:e=>this.onChange(e),noTitleLink:!!this.props.disableInteractive,disableSubscribePrompt:!0})})})}renderHiddenPosts(e,t){let i,n;return 0===t?(i=e.slice(0,1),n=e.slice(1)):e.length<=3?(i=e,n=[]):(i=e.slice(0,2),n=e.slice(2)),(0,o.tZ)(X,{user:this.props.user,pub:this.props.pub,posts:i,collapsedPosts:n,onChange:e=>this.onChange(e)})}constructor(e,t){super(e,t),(0,n._)(this,"shareDialog",void 0),(0,n._)(this,"loader",void 0),(0,n._)(this,"assignShareDialog",e=>{this.shareDialog=e}),(0,n._)(this,"assignLoader",e=>{this.loader=e}),(0,n._)(this,"likesEnabled",(0,v.ZP)("like_posts_enabled")),this.state={posts:null,hasMore:!0,loading:!1},this.props.notify_user&&"undefined"!=typeof window&&(0,p.ZP)(this.props.notify_user)}}(0,n._)(I,"contextType",m.QA);class X extends r.Component{toggle(){this.state.showing?this.setState({showing:!1}):(this.state.toggled||(0,g.j)(g.FP.COLLAPSED_POSTS_SHOWN,{num_visible_posts:this.props.posts.length,num_collapsed_posts:this.props.collapsedPosts.length}),this.setState({showing:!0,toggled:!0}))}render(e,t){let{user:i,pub:n,posts:r,collapsedPosts:l,onChange:a}=e,{showing:s}=t;return(0,o.tZ)("div",{className:"container-border post-list-hidden-posts ".concat(s?"showing":""),children:(0,o.BX)("div",{className:"container",children:[r.map(e=>(0,o.tZ)(d.mV,{user:i,pub:n,post:e,onChange:a})),l.length>0&&(0,o.tZ)("div",{className:"collapse-toggle",onClick:()=>this.toggle(),children:s?"hide":"+".concat(l.length," more")}),l.map(e=>(0,o.tZ)(d.mV,{className:"collapsed",user:i,pub:n,post:e,utm_source:P.b3.home,onChange:a}))]})})}}},33578:function(e,t,i){i.d(t,{O:()=>H});var n=i(7409),o=i(99282),r=i(16584),l=i(71375),a=i(24840),s=i(27412),d=i(58865),c=i(6400),u=i(94184),p=i.n(u),h=i(80569),m=i.n(h),g=i(64343),v=i(58319),Z=i(95441),f=i(39648),b=i(40647),w=i(68833),y=i(98914),_=i(98012),C=i(60308),B=i(63651),k=i(84864);function x(){let e=(0,d._)(["Search ",""]);return x=function(){return e},e}class S extends c.Component{componentDidMount(){this.loadTab(this.state.tab.id)}componentWillUnmount(){"search"===this.state.tab.id&&this.searchInput&&this.searchInput.blur()}componentDidUpdate(e){(e.hideTop!==this.props.hideTop||e.newPosts!==this.props.newPosts)&&this.setState(this.getTabs())}getTabs(){var e,t,i;let n=[],{iString:o}=this.props,r={id:"new",title:o("Latest"),posts:this.props.newPosts,fullyLoaded:!!(this.props.maxPosts&&this.props.newPosts)};n.push(r),(!this.props.newPosts||this.props.newPosts.length>=this.getFetchLimit())&&(this.props.hideTop||n.push({id:"top",title:o("Top"),posts:this.props.topPosts,fullyLoaded:!!(this.props.maxPosts&&this.props.topPosts)}),(null===(e=this.props.pub)||void 0===e?void 0:e.community_enabled)&&(null===(t=this.props.pub)||void 0===t?void 0:t.has_community_content)&&!this.props.hideCommunity&&n.push({id:"community",title:o("Discussions"),posts:this.props.communityPosts,fullyLoaded:!!(this.props.maxPosts&&this.props.communityPosts)})),this.props.postId&&n.push({id:"related",title:o("Related"),posts:this.props.relatedPosts,fullyLoaded:!!this.props.relatedPosts}),n=this.props.sortTabs&&this.props.sortTabs(n)||n,"search"!==this.props.sort&&this.props.newPosts&&this.props.newPosts.length<this.getFetchLimit()||n.push({id:"search",title:o("Search"),posts:this.props.searchPosts,fullyLoaded:!!(this.props.maxPosts&&this.props.searchPosts),query:this.props.search||"",hidden:!0});let l=null!==(i=n.find(e=>e.id===this.props.sort)||this.props.search&&n.find(e=>"search"===e.id)||n[0])&&void 0!==i?i:r;return{tabs:n,tab:l}}getFetchLimit(){return this.props.maxPosts||12}render(e,t){var i,n;let{className:o,emptyMessage:l,filterPostsPredicate:a,hideSearchTab:s,isPodcast:d,maxPosts:c,pinnedPosts:u,pub:h,renderLoading:m,renderPosts:Z,renderTabs:w,renderSeeAll:y,sectionId:_,showMonthDividers:S,user:P,iString:X,iTemplate:T}=e,{tabs:N,tab:L}=t;l=l||X("No posts");let q=S&&(null==L?void 0:L.id)==="new",M=N.find(e=>"search"===e.id),E=N.find(e=>"community"===e.id),z=Array.isArray(L.posts)?L.posts.filter(e=>!(h&&"top"===L.id&&e.top_exclusions.includes(h.id))).filter(e=>null==h||!h.section||null==u||!u.length||!u.find(t=>t.id===e.id)).filter(e=>!k.hidePaidPostsFor.includes(null==h?void 0:h.subdomain)||"everyone"===e.audience||(null==P?void 0:P.is_subscribed)).filter(a||(()=>!0)):[];(null==h?void 0:h.section)&&(null==u?void 0:u.length)&&["new","top"].includes(null!==(i=L.id)&&void 0!==i?i:"")&&(z=[...u,...z]);let R=0===z.length,A=!z&&!L.loadingError,O=c?z.slice(0,c):z,D=Z?Z({posts:O,linkToComments:L===E,onClickPost:e=>{let{event:t,post:i,index:n,source:o}=e;return this.onPostClicked(t,i.id,n,o)},postGroups:q?I(O,h.language):null}):[],F=_&&null!==(n=null==h?void 0:h.sections.find(e=>e.id===_))&&void 0!==n?n:null,U=d?(0,B.QHt)({pub:h,section:F,params:{sort:L.id,search:L.query}}):(0,C.sai)(h,{section:F,params:{sort:L.id,search:L.query}}),H=y?y({url:U}):(0,r.BX)("a",{className:"portable-archive-all",href:U,native:!0,children:[X("See all")," ",(0,r.tZ)(g.Z,{height:12,width:12})]}),W=m?m():null;return(0,r.tZ)(b.QA.Consumer,{children:e=>{let{getConfigFor:t}=e;return(0,r.tZ)(f.nA.Consumer,{children:e=>{let{open:i}=e;return(0,r.BX)("div",{className:p()("portable-archive",o,{"empty-list":R}),children:[w&&w({activeTabId:L.id,isSearching:L===M,showSearch:!!(M&&!s),searchInputProps:{value:null==M?void 0:M.query,onKeyDown:this.onSearchKeyDown,onChange:e=>{"search"===this.state.tab.id&&this.loadTab("search",e)},onBlur:this.onSearchBlur},searchRef:e=>{this.searchInput=e},tabs:N.filter(e=>!e.hidden),onClick:e=>{this.loadTab(e)},onClickSearch:()=>{t("fallback_to_archive_search_on_section_pages")&&_?this.loadTab("search"):i()},onClickSearchClose:()=>{var e;this.loadTab(null===(e=N[0])||void 0===e?void 0:e.id)}}),(0,r.BX)("div",{className:"portable-archive-list",children:[L.loadingError?(0,r.tZ)("p",{className:"portable-archive-empty",children:X("Failed to load posts")}):0!==z.length||L.loading?(0,r.BX)(r.HY,{children:[D,!c&&!A&&!L.loading&&!L.fullyLoaded&&(0,r.tZ)(v.Z,{threshold:640,onVisible:()=>this.loadTab(L.id,L.query)})]}):(0,r.tZ)("p",{className:"portable-archive-empty",children:"search"!==L.id?l:L.query?X("No results"):T(x(),F?F.name:h?h.name:"")}),L.loading||A?W:c&&z.length>=c&&H]})]})}})}})}constructor(e,t){if(super(e,t),(0,s._)(this,"searchInput",void 0),(0,s._)(this,"onTabClick",e=>t=>{t.preventDefault(),this.loadTab(e)}),(0,s._)(this,"onSearchInput",e=>{"search"===this.state.tab.id&&this.loadTab("search",e.currentTarget.value)}),(0,s._)(this,"onSearchKeyDown",e=>{if("search"===this.state.tab.id&&"Escape"===e.key){var t,i,n;null===(i=e.target)||void 0===i||null===(t=i.blur)||void 0===t||t.call(i),this.loadTab(null===(n=this.state.tabs[0])||void 0===n?void 0:n.id)}}),(0,s._)(this,"onPostClicked",(e,t,i,n)=>{(0,w.j)(w.FP.ARCHIVE_PAGE_POST_CLICKED,{post_id:t,tab:this.state.tab.id,rank_in_feed:i,source:null!=n?n:this.props.source})}),(0,s._)(this,"onSearchBlur",e=>{if("search"===this.state.tab.id&&!e.target.value){var t;if(!this.state.tab.fullyLoaded){setTimeout(()=>{var e;null===(e=this.searchInput)||void 0===e||e.focus()},0);return}this.loadTab(null===(t=this.state.tabs[0])||void 0===t?void 0:t.id,"")}}),(0,s._)(this,"loadTab",async(e,t)=>{let i=this.state.tabs.find(t=>t.id===e);if(!i){console.error("couldnot find tab with id [".concat(e,"]"));return}let o=!1;if("search"===i.id&&"string"==typeof t&&i.query!==t&&(o=!0,i.query=t,i.posts=null,i.fullyLoaded=!1,i.loading=!1,i.loadingError=null),i.id!==this.state.tab.id?(this.setState({tab:i},()=>{"search"===i.id&&this.searchInput&&(this.searchInput.focus(),this.searchInput.select())}),this.props.stateInUrl&&"undefined"!=typeof window&&window.history.replaceState&&window.history.replaceState({},document.title,(0,C.rhs)({sort:i.id,search:i.query||null}))):o&&this.props.stateInUrl&&"undefined"!=typeof window&&window.history.replaceState&&window.history.replaceState({},document.title,(0,C.rhs)({search:i.query||null})),i.loading)return;if(i.fullyLoaded){this.props.onPostsLoaded&&this.props.onPostsLoaded({posts:i.posts});return}if("search"===i.id&&!i.query){i.posts=[],i.fullyLoaded=!0,this.setState({tabs:this.state.tabs});return}let r=(0,k.randomString)();if(i.loading=r,i.loadingError=null,this.setState({tabs:this.state.tabs}),"search"===i.id&&i.query&&(await new Promise(e=>setTimeout(e,300)),i.loading!==r))return;!this.state.tabs.find(e=>e.posts||e.fullyLoaded||e.loading||e.loadingError)&&this.props.delayFirstLoad&&await new Promise(e=>setTimeout(e,this.props.delayFirstLoad));let l=this.props.pub?"/api/v1/archive":this.props.profile?"/api/v1/profile-archive":"";try{let e,t;let o=this.props.maxPosts?2*this.props.maxPosts:this.getFetchLimit();if("related"===i.id)e=(await m().get("/api/v1/posts/".concat(this.props.postId,"/related")).query({limit:o,offset:(i.posts||[]).length})).body;else{let r=(0,n._)({type:this.props.isPodcast?"podcast":void 0,rss_episodes_only:!!this.props.isPodcast&&!this.props.sectionId||void 0},this.props.authorId&&{author_id:this.props.authorId},this.props.postTagId&&{post_tag_id:this.props.postTagId},this.props.sectionId&&{section_id:this.props.sectionId},this.props.profile&&{profile_user_id:this.props.profile.id});"new"===i.id&&this.props.includePins&&!i.posts&&(t=(await m().get(l).query((0,n._)({sort:"pinned",offset:0,limit:1},r))).body),e=(await m().get(l).query((0,n._)({sort:"search"===i.id?"new":i.id,search:"search"===i.id?i.query:"",offset:(i.posts||[]).length,limit:o},r))).body,e=[...t||[],...e.filter(e=>!(null==t?void 0:t.find(t=>t.id===e.id)))]}if(this.props.onPostsLoaded&&this.props.onPostsLoaded({posts:e}),i.loading!==r)return;i.posts=i.posts?i.posts.concat(e):e,i.fullyLoaded=e.length<o||!!(this.props.maxPosts&&i.posts&&i.posts.length>=this.props.maxPosts)}catch(e){console.error("Failed to load tab:",e),i.loadingError=e}i.loading=!1,this.setState({tabs:this.state.tabs.map(e=>e.id===i.id?i:e),tab:i})}),(0,s._)(this,"onChange",e=>{let{post:t}=e;t&&((0,y.nn)(this,e=>{let i=!1;for(let n of e.tabs.map(e=>e.posts).filter(e=>Array.isArray(e))){let e=null==n?void 0:n.findIndex(e=>e.id===t.id);-1!==e&&n&&(n[null!=e?e:""]=t,i=!0)}i&&this.setState({tabs:e.tabs})}),this.props.onChange&&this.props.onChange(t))}),!(this.props.pub||this.props.profile))throw Error("Archive must be loaded for a publication or a profile");this.loadTab=this.loadTab.bind(this),this.state=this.getTabs()}}let P=(0,Z.fz)(S),I=function(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",n=[];return e.forEach((e,o)=>{let r=(0,_.Z)(e.post_date).locale(i).format("MMMM YYYY");if(r!==t)0===o?n.push({label:"",posts:[e]}):n.push({label:r,posts:[e]}),t=r;else{let t=n[n.length-1];t&&t.posts.push(e)}}),n};var X=i(57391),T=i(56629),N=i(63391),L=i(98422),q=i(68648),M=i(29422),E=i(45262),z=i(15771),R=i(19081),A=i(40225),O=i(15186),D=i(58175),F=i(6070);let U={monthHeader:"monthHeader-nt8KgE"},H=e=>{let{authorId:t,children:i,communityPosts:s,delayFirstLoad:d,filterPostsPredicate:c,hideCommunity:u,hideTop:p,includePins:h,isBelowTheFold:m,isPodcast:g,maxPosts:v,newPosts:f,pinnedPosts:w,postTagId:y,pub:_,renderLoading:C,renderTabs:B,search:x,searchPosts:S,postId:I,sectionId:H,showMonthDividers:W,sort:J,sortTabs:Y,source:V,topPosts:j,user:G,utm:K,variant:Q="list",onPostsLoaded:$}=e,{iString:ee}=(0,Z.M1)(),{isMobile:et}=(0,L.v9)(),{getSettingFor:ei}=(0,T.So)(),en=(0,b.xR)(),eo=(0,k.ensureInList)(ei("post_preview_crop_gravity"),["center","auto"]),er=(0,F.HD)({pub:_}),{getExperimentVariant:el}=(0,X.jc)(),ea="treatment"===el("related_posts_web");return(0,r.tZ)(q.hV,{authorPagesEnabled:!!en.getConfigFor("enable_author_pages"),cropGravity:eo,highlightByline:!!en.getConfigFor("post_preview_highlight_byline"),pub:_,user:G,utm:K,children:(0,r.tZ)(P,{authorId:t,communityPosts:s,delayFirstLoad:d,filterPostsPredicate:c,hideCommunity:u,hideTop:p,includePins:h,isBelowTheFold:m,isPodcast:g,maxPosts:v,newPosts:f,pinnedPosts:w,postId:ea?I:void 0,postTagId:y,pub:_,renderLoading:null!=C?C:()=>(0,r.tZ)(M.b,{postCount:null!=v?v:7,variant:Q}),renderPosts:e=>{let{posts:t,linkToComments:n,onClickPost:o,postGroups:l}=e;return l?l.map(e=>{let{label:t,posts:l}=e;return(0,r.BX)(r.HY,{children:[t&&(0,r.BX)(r.HY,{children:[(0,r.tZ)(N.f,{paddingBottom:8,paddingTop:8}),(0,r.tZ)(D.xv.Meta,{as:"h3",className:U.monthHeader,color:"accent",paddingBottom:24,children:t})]}),i({posts:l,linkToComments:n,onClickPost:o})]})}):i({posts:t,linkToComments:n,onClickPost:o})},renderSeeAll:e=>{let{url:t}=e;return"grid-groups"===Q||er?null:(0,r.tZ)(E.B,{url:t})},renderTabs:null!=B?B:e=>{let{activeTabId:t,isSearching:i,tabs:s,searchInputProps:d,searchRef:c,showSearch:u,onClick:p,onClickSearch:h,onClickSearchClose:m}=e;return"grid-groups"===Q||er?null:i?(0,r.BX)(R.gq,{alignItems:"center",gap:12,justifyContent:"space-between",paddingBottom:16,paddingX:8*!et,children:[(0,r.tZ)(A.M,(0,o._)((0,n._)({},d),{ref:c,autoFocus:!0,flex:"grow",placeholder:ee("Search..."),showClear:!1})),(0,r.tZ)(z.hU,{priority:"tertiary",onClick:m,children:(0,r.tZ)(l.Z,{size:20})})]}):u||s.length>1?(0,r.BX)(R.gq,{alignItems:"center","aria-label":ee("Archive sort tabs"),gap:12,justifyContent:"space-between",paddingBottom:16,paddingX:8*!et,role:"navigation",children:[(0,r.tZ)(O.Z,{tabs:s.map(e=>({value:e.id,label:e.title})),value:t,onChange:p}),u&&(0,r.tZ)(z.hU,{priority:"tertiary",onClick:h,children:(0,r.tZ)(a.Z,{size:20})})]}):null},search:x,searchPosts:S,sectionId:H,showMonthDividers:W,sort:J,sortTabs:Y,source:V,stateInUrl:!0,topPosts:j,user:G,onPostsLoaded:$})})}},63391:function(e,t,i){i.d(t,{f:()=>l});var n=i(16584),o=i(38756),r=i(19081);let l=e=>{let{numColumns:t=4,paddingBottom:i=24,paddingTop:l=24}=e;return(0,n.tZ)(o.A,{variant:4===t?"full-width":3===t?"three-column-width":"two-column-width",children:(0,n.tZ)(r.tu,{paddingBottom:i,paddingTop:l,paddingX:8,children:(0,n.tZ)(r.hs,{borderBottom:"detail-themed"})})})}},13893:function(e,t,i){i.d(t,{U:()=>iG});var n=i(7409),o=i(99282),r=i(98848),l=i(16584),a=i(30396),s=i(39693),d=i.n(s),c=i(57557),u=i.n(c),p=i(49995),h=i(98422),m=i(98661),g=i(94184),v=i.n(g),Z=i(58865),f=i(71375),b=i(83034),w=i(51214),y=i(347),_=i(33665),C=i(75744),B=i(57391),k=i(95441),x=i(60807),S=i(68833),P=i(48980),I=i(98914),X=i(51450),T=i(94874),N=i(15771),L=i(19081),q=i(6490),M=i(38841),E=i(58175),z=i(91400),R=i(26111),A=i(63651),O=i(47929);let D={giftModal:"giftModal-CMnn5t",qrCode:"qrCode-MxgyfH",giftBackground:"giftBackground-I9xH3b",headerCloseButton:"headerCloseButton-m0sKZi",giftBackgroundHeader:"giftBackgroundHeader-tb4ks8",guestPassText:"guestPassText-_ibww7",emailInputWrapper:"emailInputWrapper-SzmWNd",emailInput:"emailInput-JqukPr",acceptButton:"acceptButton-TrYdu7",tos:"tos-RHY2Hj"};var F=i(37869);function U(){let e=(0,Z._)(["All of ","'s gifts have been claimed."]);return U=function(){return e},e}function H(){let e=(0,Z._)(["Get your free guest pass to ",""]);return H=function(){return e},e}function W(){let e=(0,Z._)(["My scene is on Substack and I want you in it. Get your first "," days free on me."]);return W=function(){return e},e}function J(){let e=(0,Z._)([""," gifted you "," free days of ","."]);return J=function(){return e},e}function Y(){let e=(0,Z._)(["Gift from ",""]);return Y=function(){return e},e}function V(){let e=(0,Z._)(["Gift from someone"]);return V=function(){return e},e}function j(){let e=(0,Z._)(["Gift from ",""]);return j=function(){return e},e}function G(){let e=(0,Z._)(["","-Day Guest Pass ("," value)"]);return G=function(){return e},e}function K(){let e=(0,Z._)(["","-Day Guest Pass"]);return K=function(){return e},e}function Q(){let e=(0,Z._)(["Accept your gift to get "," days of free access to exclusive posts, chats, videos, and more."]);return Q=function(){return e},e}function $(){let e=(0,Z._)(["Accept your gift to get "," days of free access to exclusive posts, chats, videos, and more."]);return $=function(){return e},e}function ee(){let e=(0,Z._)(["Accept ","'s gift"]);return ee=function(){return e},e}function et(){let e=(0,Z._)(["Accept gift"]);return et=function(){return e},e}function ei(){let e=(0,Z._)(["Accept ","'s gift"]);return ei=function(){return e},e}let en=e=>{var t,i,o;let{isOpen:r,onClose:s,pub:d,giftCard:c,abTestingId:u,variant:p}=e,{iString:h,iTemplate:m}=(0,k.M1)(),g=(0,z.XA)(),Z=(0,x.aF)(),{freeSignup:B,freeSignupEmail:en}=(0,a.qp)(X.p),[eo,er]=(0,a.eJ)((null==Z?void 0:Z.email)||en||""),[el,ea]=(0,a.eJ)(!1),[es,ed]=(0,a.eJ)(!1),[ec,eu]=(0,a.eJ)(null),[ep,eh]=(0,a.eJ)(null),em=(null==Z?void 0:Z.is_free_subscribed)||B,eg=d.author_photo_url||d.logo_url;if(null==c?void 0:c.expired)return(0,l.tZ)(q.u_,{isOpen:r,onClose:s,width:g?360:500,position:g?"bottom":"default",className:g?"":D.giftModal,children:(0,l.BX)(L.tu,{alignItems:"center",paddingTop:24,paddingX:24,gap:24*!em,paddingBottom:24*!em,children:[(0,l.tZ)(N.hU,{rounded:!0,onClick:s,"aria-label":h("Close"),priority:"tertiary",tabIndex:-1,style:{position:"absolute",top:"12px",right:"12px"},children:(0,l.tZ)(f.Z,{size:20})}),(0,l.BX)(L.tu,{alignItems:"center",gap:16,children:[eg&&(0,l.tZ)(T.qE,{size:80,photoUrl:eg}),(0,l.tZ)(L.tu,{alignItems:"center",gap:2,children:(0,l.tZ)(E.xv.B2,{textAlign:"center",translated:!0,children:"Sorry, this gift has already expired."})})]}),(0,l.BX)(L.tu,{textAlign:"center",alignItems:"center",paddingX:24,children:[(0,l.tZ)(_.Z,{pub:d,user:Z,freeSignup:B,freeSignupEmail:en,isStatic:!1,source:"viral-gift-fallback"}),!em&&(0,l.tZ)(C.fJ,{publication:d})]})]})});if(null==Z?void 0:Z.is_subscribed){let e=(0,A.W1P)(d,{params:{utm_source:O.b3.viralGiftModal,gift:!0}});return(0,l.tZ)(q.u_,{isOpen:r,onClose:s,width:g?360:500,position:g?"bottom":"default",className:g?"":D.giftModal,children:(0,l.tZ)(L.tu,{alignItems:"center",padding:24,gap:24,children:(0,l.BX)(L.tu,{alignItems:"center",gap:16,children:[eg&&(0,l.tZ)(T.qE,{size:80,photoUrl:eg}),(0,l.BX)(L.tu,{alignItems:"center",gap:2,children:[(0,l.BX)(E.xv.H4,{textAlign:"center",translated:!0,children:["Give a gift to ",I18N.p(d.name)]}),(0,l.BX)(E.xv.B3,{textAlign:"center",translated:!0,children:["You currently have an active paid subscription to ",I18N.p(d.name),", so you're not able to accept a gift. Would you like to give a gift instead?"]})]}),(0,l.tZ)(y.h,{children:(0,l.tZ)(N.zx,{href:e,localNavigation:!1,children:h("Give a gift")})})]})})})}if(!c||!(null==c?void 0:c.days)){if(null==c?void 0:c.gifter){let e=c.gifter.name||c.gifter.handle&&"@".concat(c.gifter.handle);return(0,l.tZ)(q.u_,{isOpen:r,onClose:s,width:g?360:500,position:g?"bottom":"default",className:g?"":D.giftModal,children:(0,l.BX)(L.tu,{alignItems:"center",paddingTop:24,paddingX:24,gap:24*!em,paddingBottom:24*!em,children:[(0,l.BX)(L.tu,{alignItems:"center",gap:16,children:[eg&&(0,l.tZ)(T.qE,{size:80,photoUrl:eg}),(0,l.BX)(L.tu,{alignItems:"center",gap:2,children:[(0,l.BX)(E.xv.H4,{textAlign:"center",translated:!0,children:["Subscribe to ",I18N.p(d.name)]}),(0,l.tZ)(E.xv.B3,{textAlign:"center",children:e?m(U(),e):h("All of your friend's gifts have been claimed.")})]})]}),(0,l.BX)(L.tu,{textAlign:"center",alignItems:"center",paddingX:24,children:[(0,l.tZ)(_.Z,{pub:d,user:Z,freeSignup:B,freeSignupEmail:en,isStatic:!1,source:"viral-gift-fallback"}),!em&&(0,l.tZ)(C.fJ,{publication:d})]})]})})}return null}let ev=c.gifter&&c.gifter.id!==d.author_id,eZ=(null===(t=c.gifter)||void 0===t?void 0:t.name)||(null===(i=c.gifter)||void 0===i?void 0:i.handle)&&"@".concat(null===(o=c.gifter)||void 0===o?void 0:o.handle),ef=async()=>{if(!eo){eu("Please enter your email");return}ed(!0);try{var e,t;(0,S.j)(S.FP.ACCEPT_GIFT_MODAL_CTA_CLICKED,{variant:p,gifter_user_id:null===(e=c.gifter)||void 0===e?void 0:e.id,has_sender_token:!!(0,R.x)(window._preloads.original_url,"senderToken")});let i=await (0,P.rd)("/api/v1/viral_gifts/create_for_email",{method:"POST",json:(0,n._)({email:eo},ev&&(0,R.x)(window._preloads.original_url,"senderToken")&&{senderToken:(0,R.x)(window._preloads.original_url,"senderToken")})}),o=null==i?void 0:null===(t=i.gift)||void 0===t?void 0:t.id;if(o)eh(o),ea(!0),eu(null),g&&setTimeout(()=>{window.location.href=(0,A.Hs2)({giftId:o}),s()},1e3);else throw Error()}catch(e){(0,I.zx)(e)?eu((0,I.zx)(e)):eu("Something went wrong. Please try again.")}ed(!1)},eb=el?h("Finish activating your guest pass in the Substack app"):ev?m(H(),d.name):"author_focused"===p?m(W(),c.days):m(J(),d.author_name,c.days,d.name),ew=(0,l.BX)(l.HY,{children:[ev?(0,l.tZ)(T.qE,{user:c.gifter,size:80}):"author_focused"===p&&d.author_photo_url?(0,l.tZ)(T.qE,{user:{photo_url:d.author_photo_url},size:80}):(0,l.tZ)(M.wk,{logoUrl:d.logo_url,size:64,radius:"sm"}),(0,l.tZ)(E.xv.H3,{textAlign:"center",fontWeight:"heavy",color:"white",paddingTop:12,children:ev?eZ?m(Y(),eZ):m(V()):"author_focused"===p?m(j(),d.author_name||d.name):d.name}),(0,l.tZ)(E.xv.B3,{className:D.guestPassText,children:c.value?m(G(),c.days,c.value):m(K(),c.days)})]});return(0,l.tZ)(q.u_,{isOpen:r,onClose:s,width:g?360:500,position:g?"bottom":"default",className:g?"":D.giftModal,children:(0,l.BX)(L.tu,{alignItems:"stretch",paddingBottom:48*!g,children:[!g&&(0,l.tZ)(L.tu,{className:v()(D.giftBackground,D.giftBackgroundHeader),children:(0,l.BX)(L.tu,{justifyContent:"center",alignItems:"center",gap:4,children:[ew,(0,l.tZ)(N.hU,{rounded:!0,onClick:s,"aria-label":h("Close"),priority:"tertiary",className:D.headerCloseButton,children:(0,l.tZ)(f.Z,{size:20})})]})}),(0,l.tZ)(L.tu,{alignItems:"stretch",maxWidth:g?void 0:400,style:{margin:"auto"},children:(0,l.BX)(L.tu,{paddingTop:24,paddingX:{mobile:24,desktop:0},paddingBottom:{mobile:24,desktop:0},gap:8,children:[g&&(0,l.tZ)(L.tu,{className:D.giftBackground,justifyContent:"center",alignItems:"center",gap:4,children:ew}),(0,l.tZ)(E.xv.H4,{weight:"semibold",fontStyle:"normal",textAlign:"center",children:eb}),(0,l.tZ)(E.xv.B3,{color:"secondary",align:"center",paddingBottom:16,children:g?em?h("Download the Substack app to claim your guest pass"):ev?m(Q(),c.days):h("Subscribe and download the Substack app to claim your guest pass"):el?h("Available for iOS and Android"):ev?m($(),c.days):h("Subscribe free to claim your guest pass")}),em||el?!g&&el&&ep?(0,l.tZ)(L.tu,{alignItems:"center",gap:16,children:(0,l.tZ)(L.hs,{className:D.qrCode,padding:20,children:(0,l.tZ)(b.AppStoreQrCode,{size:142,utm_campaign:"accept_gift",utm_source:"accept_gift_modal",abTestingId:u,openUrl:(0,A.Hs2)({giftId:ep})})})}):el?(0,l.BX)(L.gq,{gap:8,alignItems:"center",justifyContent:"center",children:[(0,l.tZ)(w.Z,{isStatic:!0,height:24,fill:"#187F22",stroke:"#187F22"}),(0,l.tZ)(E.xv.B3,{color:"secondary",align:"center",translated:!0,children:"Subscribed"})]}):(0,l.tZ)(y.h,{children:(0,l.tZ)(N.zx,{priority:"primary",onClick:ef,disabled:es,children:ev?eZ?m(ee(),eZ):m(et()):m(ei(),d.author_name)})}):(0,l.BX)(L.tu,{gap:24,className:D.emailInputWrapper,children:[(0,l.BX)(L.gq,{justifyContent:"center",alignItems:"center",gap:0,style:{borderRadius:8},children:[(0,l.tZ)("input",{className:v()("pencraft",F.Z.emailInput,D.emailInput),style:{border:"1px solid var(--color-utility-detail)"},type:"text",value:eo,onInput:e=>er(e.currentTarget.value),placeholder:h("Your email"),tabIndex:-1}),(0,l.tZ)(y.h,{children:(0,l.tZ)(N.zx,{disabled:es,className:D.acceptButton,priority:"primary",onClick:ef,children:h("Accept gift")})})]}),(0,l.tZ)(C.fJ,{className:D.tos,publication:d})]}),ec&&(0,l.tZ)(E.xv.B4,{align:"center",style:{color:"red"},children:ec})]})})]})})};var eo=i(31122),er=i(887),el=i(61264),ea=i(14773),es=i(17043);let ed=e=>{let{posts:t}=e,{isMobile:i,isTablet:r}=(0,h.v9)();return(0,l.BX)("div",{className:v()("container-d4zBPi",{"containerTablet-tpTBc6":r,"containerMobile-VpmHH6":i}),children:[(0,l.BX)(L.gq,{paddingLeft:20,position:"relative",children:[(0,l.tZ)("div",{className:"latestArrowEndContainer-gx613b",children:(0,l.tZ)("img",{className:"latestArrowEnd-kWO5qL",src:(0,es.zF)("".concat((0,ea.ZJ)(),"/img/thefp/more-arrow-end-3.svg"),430)})}),(0,l.tZ)("img",{className:"latestArrow-Z7Zn2b",src:(0,es.zF)("".concat((0,ea.ZJ)(),"/img/thefp/more-arrow.svg"),430)})]}),t.map((e,t)=>(0,l.tZ)(L.gq,(0,o._)((0,n._)({},i?{borderTop:0===t?void 0:"detail-themed"}:{borderLeft:"detail-themed"}),{paddingX:20,paddingY:i?16:24,children:(0,l.tZ)(el.X,{hideUfi:!0,post:e,variant:"mini"})})))]})};var ec=i(4767),eu=i(58023),ep=i(38756),eh=i(68648),em=i(74312);let eg={container:"container-8llGPE",editButtonContainer:"editButtonContainer-PKbNaQ"},ev=e=>{let{posts:t}=e,{isMobile:n,isTablet:o}=(0,h.v9)(),[r,s]=(0,a.eJ)(!1),{pub:d,user:c}=(0,eh.ZT)(),u=t.slice(6,6+(o?3:5)),p="top-layout-container";return n?(0,l.tZ)(ef,{posts:t}):(0,l.BX)(L.tu,{className:eg.container,gap:64,paddingBottom:o?40:64,children:[(null==c?void 0:c.is_admin)&&(0,l.tZ)("div",{className:eg.editButtonContainer,children:(0,l.tZ)(N.hU,{priority:"primary-mono",size:"sm",onClick:()=>{s(!0)},children:(0,l.tZ)(er.Z,{size:16})})}),(0,l.tZ)("div",{id:p,children:(0,l.tZ)(eZ,{posts:t})}),(0,l.tZ)(ed,{posts:u}),r&&(0,l.tZ)(em.cr,{module:"@/frontend/components/thefp/EditPinsModal",posts:t.slice(0,6),pub:d,renderPreview:e=>{let{posts:t}=e;return(0,l.tZ)(eZ,{posts:t})},resolve:e=>e.EditPinsForHomepageHeroModal,topLayoutContainerId:p,whileLoading:(0,l.tZ)("div",{}),onClose:()=>{s(!1)},onRequest:()=>i.e("9314").then(i.bind(i,91076))})]})},eZ=e=>{let{posts:t}=e,{isTablet:i,isDesktop:r}=(0,h.v9)(),a={align:"center"};return(0,l.BX)(ep.A,{hideVerticalDividers:!0,variant:"one-column-two-column-one-column",children:[t[0]&&(0,l.BX)(eu.Z,{children:[(0,l.tZ)(el.X,(0,o._)((0,n._)({},a),{align:"center",post:t[0],variant:"large"})),i&&(0,l.BX)(L.gq,{gap:40,children:[t[1]&&(0,l.tZ)(el.X,(0,o._)((0,n._)({},a),{hideImage:!0,post:t[1],variant:"square"})),t[3]&&(0,l.tZ)(el.X,(0,o._)((0,n._)({},a),{hideImage:!0,post:t[3],variant:"square"}))]})]}),i&&(0,l.BX)(eu.Z,{children:[t[2]&&(0,l.tZ)(el.X,(0,o._)((0,n._)({},a),{hideDescription:!0,post:t[2],variant:"square"})),t[4]&&(0,l.tZ)(el.X,(0,o._)((0,n._)({},a),{post:t[4],variant:"square"})),t[5]&&(0,l.tZ)(el.X,(0,o._)((0,n._)({},a),{post:t[5],variant:"square"}))]}),r&&(0,l.BX)(eu.Z,{paddingTop:40,children:[t[1]&&(0,l.tZ)(el.X,(0,o._)((0,n._)({},a),{hideDescription:!0,hideImage:!0,post:t[1],variant:"square"})),t[2]&&(0,l.tZ)(el.X,(0,o._)((0,n._)({},a),{hideDescription:!0,post:t[2],variant:"square"})),t[3]&&(0,l.tZ)(el.X,(0,o._)((0,n._)({},a),{hideImage:!0,post:t[3],variant:"square"}))]}),r&&(0,l.BX)(eu.Z,{paddingTop:40,children:[t[4]&&(0,l.tZ)(el.X,(0,o._)((0,n._)({},a),{post:t[4],variant:"square"})),t[5]&&(0,l.tZ)(el.X,(0,o._)((0,n._)({},a),{post:t[5],variant:"square"}))]})]})},ef=e=>{let{posts:t}=e,i=t.slice(6,11);return(0,l.BX)(L.tu,{gap:32,paddingBottom:64,children:[t[0]&&(0,l.tZ)(el.X,{align:"left",post:t[0],variant:"large"}),t[2]&&(0,l.tZ)(el.X,{post:t[2],variant:"square"}),(0,l.BX)(ec.E,{children:[t[1]&&(0,l.tZ)(el.X,{post:t[1],variant:"square"}),t[3]&&(0,l.tZ)(el.X,{post:t[3],variant:"square"}),t[4]&&(0,l.tZ)(el.X,{post:t[4],variant:"mini"}),t[5]&&(0,l.tZ)(el.X,{post:t[5],variant:"mini"})]}),(0,l.tZ)(ed,{posts:i})]})};var eb=i(56629),ew=i(40647);let ey="column-HNiwn6",e_=e=>{let{leftContent:t,rightContent:i,mobileContent:n}=e,{isMobile:o}=(0,h.v9)();return o&&n?n:(0,l.BX)("div",{className:"container-dOq2Em",children:[(0,l.tZ)("div",{className:v()(ey,"left-jXwsmK"),children:t}),(0,l.tZ)(L.gq,{borderRight:"detail",style:{margin:"8px 0"}}),(0,l.tZ)("div",{className:v()(ey,"right-koj6uE"),children:i})]})};var eC=i(76787),eB=i(15400),ek=i(62841);let ex=ek.zM.feature.postCount.desktop,eS=e=>{let{noFirstImage:t,posts:i,pub:r,user:a,utm:s,onChange:d}=e;return(0,l.tZ)(eB.B,(0,o._)((0,n._)({},{pub:r,user:a,utm:s,onChange:d}),{hideHorizontalDividers:!0,posts:i,variant:t?"two-three-two":"five-up"}))},eP=e=>(0,l.tZ)(eS,(0,o._)((0,n._)({},e),{noFirstImage:!0})),eI=e=>{let{children:t,href:i,testid:n,onClick:o}=e;return(0,l.tZ)(E.xv.Meta,{as:"a",className:"link-dTkJzr",color:"pub-primary-text","data-testid":n,href:i,native:!0,onClick:o?e=>{e.preventDefault(),o()}:void 0,children:t})};var eX=i(17836),eT=i(6070),eN=i(60308);let eL={pillarTitle:"pillarTitle-JAEuZo"},eq=e=>{let{isLatestPosts:t,pub:i}=e,{iString:n}=(0,k.M1)(),o=(0,eT.kb)({pub:i}),r=n(t?"Latest":"Most Popular");return(0,l.BX)(L.gq,{alignItems:"baseline",justifyContent:"space-between",paddingX:8,children:[o?(0,l.tZ)("div",{className:eL.pillarTitle,children:r}):(0,l.tZ)(eX.R,{children:r}),!t&&(0,l.tZ)(eI,{href:(0,eN.sai)(i,t?void 0:{params:{sort:"top"}}),children:n("View all")})]})};var eM=i(60885);let eE=e=>{let{noFirstImage:t,posts:i,replaceTopPostsWithLatest:n,topPosts:o}=e,{isTablet:r,isMobile:a}=(0,h.v9)(),{pub:s}=(0,eh.ZT)();if(a)return null;let d=t?5:3,c=n?i.slice(0,d):i,u=n?i.slice(d):o;return(0,l.BX)(ep.A,{showContentBelowOnMobile:!0,variant:"full-width-with-border-and-sidebar",children:[(0,l.tZ)(eB.B,{flex:"grow",hideHorizontalDividers:!0,posts:c,variant:t?"two-small-three-medium":"two-small-one-large"}),u&&(0,l.tZ)(eM.QI,{pub:s,showPubPins:!1,showSectionPins:!1,children:(0,l.BX)(L.tu,{gap:12,paddingTop:8,children:[(0,l.tZ)(eq,{isLatestPosts:n,pub:s}),(0,l.tZ)(eB.B,{hideHorizontalDividers:!0,posts:u.slice(0,r?3:6),variant:r?"mini-row":(0,eT.kb)({pub:s})?"one-column-list-flex":"one-column-list"})]})})]})},ez=e=>(0,l.tZ)(eE,(0,o._)((0,n._)({},e),{noFirstImage:!0}));var eR=i(61254);let eA=e=>{let{posts:t}=e;return t.length?(0,l.BX)(L.tu,{gap:12,children:[t[0]&&(0,l.tZ)(eC.G,{post:t[0],variant:"mobile-hero"}),t.length>1&&(0,l.BX)(L.tu,{paddingX:16,children:[(0,l.tZ)(eR.iz,{paddingY:4}),(0,l.tZ)(eB.B,{posts:t.slice(1),variant:"two-column-list"})]})]}):null},eO=e=>{let{isSmall:t,posts:i}=e;return i.length&&i[0]?(0,l.tZ)(ep.A,{variant:t?"three-column-width":"full-width",children:(0,l.tZ)(eC.G,{post:i[0],variant:t?"jumbo-small":"jumbo"})}):null},eD=e=>(0,l.tZ)(eO,(0,o._)((0,n._)({},e),{isSmall:!0}));var eF=i(74805),eU=i(70647),eH=i(51213);let eW={magaziney:eE,"magazine-5":eS,newspaper:eO,feature:e=>{let{posts:t}=e,{isTablet:i}=(0,h.v9)();return(0,l.tZ)(e_,{leftContent:t[0]?(0,l.tZ)(eC.G,{imageAspectRatio:"wide",post:t[0],variant:"large"}):(0,l.tZ)("div",{}),mobileContent:(0,l.tZ)(eB.B,{posts:t.slice(0,ex),variant:"two-column-list"}),rightContent:(0,l.tZ)(eB.B,{hideHorizontalDividers:!0,posts:t.slice(1,ex),variant:i?"one-column-list":"two-column-list"})})},podcast:e=>{var t,i,n;let{columns:o,hasMiniPostsRowUnderneath:r,heroAlignment:a,posts:s,showPodcastLinks:d,user:c}=e,{isMobile:u}=(0,h.v9)(),{pub:p}=(0,eh.ZT)(),m=p.podcast_description,g=p.podcast_art_url,v=p.podcast_title,Z=r?24:40;return u?(0,l.tZ)(L.tu,{paddingBottom:24,children:(0,l.tZ)(eH.W,{description:m,imageUrl:g,name:v,post:null!==(t=s[0])&&void 0!==t?t:null,pub:p,section:null,showPodcastLinks:d,user:c})}):"center"===a?(0,l.tZ)(L.tu,{paddingBottom:Z,children:(0,l.tZ)(eU.p,{description:m,imageUrl:g,name:v,post:null!==(i=s[0])&&void 0!==i?i:null,pub:p,section:null,showPodcastLinks:d,user:c})}):(0,l.tZ)(L.tu,{paddingBottom:Z,children:(0,l.tZ)(eF.a,{columns:o,description:m,imageUrl:g,name:v,post:null!==(n=s[0])&&void 0!==n?n:null,pub:p,section:null,showPodcastLinks:d,user:c})})}},eJ=e=>{var{firstPostMissingImage:t,bodyVariant:i,isMobile:o,variant:a}=e,s=(0,r._)(e,["firstPostMissingImage","bodyVariant","isMobile","variant"]);let d=eW[a],c={};return(o&&"podcast"!==a?d=eA:"newspaper"===a&&"list"===i?d=eD:"magaziney"===a&&t?d=ez:"magazine-5"===a&&t?d=eP:"podcast"===a&&(c.columns="list"===i?3:4),d)?(0,l.tZ)(d,(0,n._)({},s,c)):(console.error("Component not found, add one to HomeHero"),null)};var eY=i(33578),eV=i(7739),ej=i.n(eV),eG=i(89734),eK=i.n(eG),eQ=i(47976);let e$=e=>{let{homepageLinks:t,pub:i,renderGroup:n,renderLink:o}=e,r=ej()(t,"group"),a=eK()(Object.keys(r),e=>r[e][0].rank);return(0,l.tZ)(l.HY,{children:a.map(e=>(0,l.tZ)(e0,{group:e,items:r[e],newTab:!0,pub:i,renderGroup:n,renderLink:o}))})},e0=e=>{let{group:t,items:i,newTab:r,pub:a,renderGroup:s,renderLink:d}=e,c=[],u=null;r&&(u="_blank",c.push("noopener")),(!a||(null==a?void 0:a.no_follow))&&c.push("ugc nofollow");let p={rel:c.join(" "),target:u},h=(0,l.tZ)(l.HY,{children:i.map(e=>{let{title:t,url:i,subtitle:r,subtitleUrl:a,edit:s,className:c}=e;return d?d({title:t,url:i,subtitle:r,linkProps:p}):(0,l.BX)("div",{className:v()("home-right-col",c),children:[s?(0,l.BX)("div",{className:"home-right-col-editable",children:[(0,l.tZ)("a",{className:"home-right-col-title",href:i,native:!0,children:t}),(0,l.tZ)(N.hU,{href:s,priority:"quaternary",size:"sm",title:"edit",children:(0,l.tZ)(eQ.Z,{size:20})})]}):(0,l.tZ)("a",(0,o._)((0,n._)({className:"home-right-col-title",href:i,native:!0},p),{children:t})),r&&(0,l.tZ)("a",(0,o._)((0,n._)({className:"home-right-col-sub",href:a||i,native:!0},p),{children:r}))]})})});return s?s({title:t,links:h}):(0,l.BX)("div",{className:"home-right-group",children:[(0,l.tZ)("div",{className:"home-right-group-title",children:t}),h]})};var e1=i(71897),e4=i(71068),e2=i(65433);let e8=e=>{var{body:t,clampTitle:i,image:a,linkProps:s,pub:d,subtitle:c,title:u,url:p}=e,h=(0,r._)(e,["body","clampTitle","image","linkProps","pub","subtitle","title","url"]);let{size:m,lineHeight:g}=(0,e1.A)({preset:"sm",pub:d}),v="undefined"==typeof window,Z=(0,l.tZ)(e2.J,{hoverBackground:"light",padding:8,radius:"sm",children:(0,l.BX)(L.gq,(0,o._)((0,n._)({},h),{gap:16,children:[a&&(0,l.tZ)(e4.xu,{alignSelf:"start",children:a}),(0,l.BX)(L.tu,{alignSelf:"stretch",gap:8,justifyContent:"center",children:[(0,l.BX)(L.tu,{gap:2,style:{wordBreak:"break-word"},children:[(0,l.tZ)(E.xv,{clamp:i,color:"pub-primary-text",font:"pub-headings",style:{fontSize:m,lineHeight:"".concat(g,"px")},children:v?(0,l.tZ)("a",(0,o._)((0,n._)({},s),{href:p,style:{textDecoration:"none",display:"block"},children:u})):u}),c&&(0,l.tZ)(E.xv.B4,{clamp:3,color:"pub-secondary-text",size:12,children:c})]}),t&&(0,l.tZ)("div",{children:t})]})]}))});return v?Z:(0,l.tZ)("a",(0,o._)((0,n._)({},s),{href:p,style:{textDecoration:"none",display:"block"},children:Z}))},e6=e=>{let{linkProps:t,pub:i,subtitle:r,title:a,url:s}=e,{isMobile:d}=(0,h.v9)(),{size:c,lineHeight:u}=(0,e1.A)({preset:"sm",pub:i});return(0,l.tZ)("a",(0,o._)((0,n._)({className:"homepageLink-cE_DZ1",href:s},t),{children:(0,l.tZ)(L.tu,{gap:8,paddingX:8*!d,children:(0,l.BX)(L.tu,{style:{wordBreak:"break-word"},children:[(0,l.tZ)(E.xv,{className:"title-QddVTB",color:"pub-primary-text",font:"pub-body",style:{fontSize:c,lineHeight:"".concat(u,"px")},children:a}),r&&(0,l.tZ)(E.xv.B4,{clamp:3,color:"pub-secondary-text",size:12,children:r})]})})}))},e9=e=>{let{hideHeaderBorder:t}=e,{homepageLinks:i}=(0,a.qp)(X.p),{pub:n}=(0,eh.ZT)(),{isMobile:o}=(0,h.v9)();return i&&0!==i.length?(0,l.tZ)(L.tu,{"data-testid":"homepage-links",gap:24,children:(0,l.tZ)(e$,{homepageLinks:i,pub:n,renderGroup:e=>{let{title:i,links:n}=e;return(0,l.BX)(L.tu,{gap:16,children:[(0,l.tZ)(L.gq,{alignItems:"center",paddingX:8*!o,children:(0,l.tZ)(L.gq,{borderBottom:t?void 0:"detail-themed",flex:"grow",paddingBottom:t?void 0:8,children:(0,l.tZ)(eX.R,{children:i})})}),(0,l.tZ)(L.tu,{gap:12,children:n})]})},renderLink:e=>{let{linkProps:t,subtitle:i,title:o,url:r}=e;return(0,l.tZ)(e6,{linkProps:t,pub:n,subtitle:i,title:o,url:r})}})}):null},e5=()=>{let{iString:e}=(0,k.M1)();return(0,l.tZ)(e4.xu,{className:"container-bP27QM",flex:"grow",paddingX:16,paddingY:20,radius:"sm",children:(0,l.tZ)(E.xv.B4,{color:"pub-secondary-text",children:e("Coming soon")})})};var e3=i(79408);function e7(){let e=(0,Z._)(["View all ",""]);return e7=function(){return e},e}let te=e=>{let{showEmptyState:t,hideHeaderBorder:i}=e,{iString:r,iTemplate:s}=(0,k.M1)(),{numRecommendations:d,recommendations:c}=(0,a.qp)(X.p),{pub:u,user:p}=(0,eh.ZT)(),{isMobile:m}=(0,h.v9)();return c&&(0!==c.length||t)?(0,l.tZ)(e3.C,{numRecommendations:d,pub:u,recommendations:c,render:e=>{let{recommendations:t,canManage:n,manageUrl:o,hasMore:a,hasMoreUrl:c,recommendationsCount:u}=e;return(0,l.BX)(L.tu,{gap:16,children:[(0,l.tZ)(L.gq,{paddingX:8*!m,children:(0,l.BX)(L.gq,{alignItems:"baseline",borderBottom:i?void 0:"detail-themed",flex:"grow",justifyContent:"space-between",paddingBottom:i?void 0:8,children:[(0,l.tZ)(eX.R,{children:r("Recommendations")}),n?(0,l.tZ)(eI,{href:o,children:r("Manage")}):a?(0,l.tZ)(eI,{href:c,testid:"homepage-recommendations-view-all",children:s(e7(),null!=u?u:0)}):null]})}),(0,l.tZ)(L.tu,{"data-testid":"homepage-recommendations",gap:4,children:0===d?(0,l.tZ)(L.gq,{paddingX:8,children:(0,l.tZ)(e5,{})}):t})]})},renderRecommendation:e=>{let{url:t,onClick:i,pubAvatarProps:r,pubName:a,pubAuthor:s}=e;return(0,l.tZ)(e8,{"data-testid":"homepage-recommendation",image:(0,l.tZ)(M.jM,(0,o._)((0,n._)({},r),{size:40})),linkProps:{onClick:i,target:"_blank",rel:"noopener"},pub:u,subtitle:s,title:a,url:t})},user:p}):null},tt={container:"container-rEYFE5",pubLogo:"pubLogo-DpnXOb"},ti=()=>{let{freeSignup:e,freeSignupEmail:t}=(0,a.qp)(X.p),{pub:i,user:n}=(0,eh.ZT)(),{isMobile:o}=(0,h.v9)();return(0,l.BX)(L.tu,{className:tt.container,gap:24,paddingX:8*!o,children:[(0,l.BX)(L.tu,{gap:8,children:[i.logo_url&&(0,l.tZ)("img",{alt:i.name,className:tt.pubLogo,"data-testid":"homepage-sidebar-pub-logo",src:(0,eN.zF4)(i.logo_url,88)}),(0,l.BX)(L.tu,{gap:2,children:[(0,l.tZ)(eX.R,{children:i.name}),i.hero_text&&(0,l.tZ)(E.xv,{color:"pub-secondary-text",font:"text",lineHeight:20,size:12,children:i.hero_text})]})]}),(0,l.tZ)(_.Z,{align:"left",expectTruncation:!0,freeSignup:e,freeSignupEmail:t,isStatic:!1,pub:i,source:"magaziney-home-page",user:n})]})},tn=()=>{let{pub:e}=(0,eh.ZT)(),{isMobile:t}=(0,h.v9)();return(0,l.BX)(L.tu,{gap:40,children:[!t&&(0,l.tZ)(ti,{}),e.show_recs_on_homepage&&(0,l.tZ)(te,{}),(0,l.tZ)(e9,{})]})};var to=i(18446),tr=i.n(to),tl=i(64567),ta=i(80569),ts=i.n(ta),td=i(86603),tc=i(29422);let tu={homePageGroupsGrid:"homePageGroupsGrid-dfyTM6",emptyRowsView:"emptyRowsView-Yo2IhI",emptyGroupView:"emptyGroupView-kLS4e3",emptyContentIcon:"emptyContentIcon-mKbS2t"},tp=e=>"email_from_name"in e,th=e=>{var t;let[i,s]=(0,a.eJ)(null!==(t=e.postsByGroupId)&&void 0!==t?t:{}),[d,c]=(0,a.eJ)(!1),{posts:u,bodyPostGroups:p,hasEmptyGroupOptions:h,setHasInvalidGroupSelection:m}=e,g=(0,r._)(e,["posts","bodyPostGroups","hasEmptyGroupOptions","setHasInvalidGroupSelection"]);(0,a.d4)(()=>{let e=async e=>{let t=(0,n._)({},i);for(let i of e){let e={limit:6};if(tp(i)?e.section_id=i.id:e.post_tag_id=i.id,!t[i.id]){let{body:n}=await ts().get("/api/v1/archive").query(e);t[i.id]=n}}tr()(t,i)||(s(t),c(!1))};0===Object.keys(i).length&&p&&(null==p?void 0:p.length)>0&&(c(!0),e(p))},[p,s,i]);let v=(0,a.I4)(e=>{var t;let r=null!==(t=e.post_tag_id)&&void 0!==t?t:e.section_id;if(!r)throw Error("Must supply section_id or post_tag_id");(!i||!i[r])&&ts().get("/api/v1/archive").query((0,n._)({limit:3},e)).then(e=>{let{body:t}=e;s((0,o._)((0,n._)({},i),{[r]:t}))})},[i,s]),Z=(0,a.I4)(e=>{var t;return i&&(!i||0!==Object.keys(i).length)&&i[e]?null===(t=i[e])||void 0===t?void 0:t.slice(0,3):null},[i]);return h||!p||(null==p?void 0:p.length)===0?m?(m(!0),(0,l.tZ)(tm,{message:"No groups selected"})):(0,l.BX)(L.tu,{children:[(0,l.tZ)(tg,{pub:e.pub}),(0,l.tZ)(eB.B,(0,o._)((0,n._)({},g),{posts:u.slice(0,3),variant:"three-column-grid"}))]}):(0,l.BX)("div",{className:tu.homePageGroupsGrid,children:[p.map(t=>{let i=Z(t.id);return(0,l.BX)(L.tu,{paddingBottom:24,children:[(0,l.tZ)(tg,{pub:e.pub,row:t}),(0,l.tZ)(tv,(0,o._)((0,n._)({},g),{groupModel:t,loadingSync:d,posts:u,postsForId:i,setHasInvalidGroupSelection:m,onIntersectCallback:()=>{v(tp(t)?{section_id:t.id}:{post_tag_id:t.id})}}))]})}),p.length<3?(0,l.BX)(L.tu,{children:[(0,l.tZ)(tg,{pub:e.pub}),(0,l.tZ)(eB.B,(0,o._)((0,n._)({},g),{posts:u.slice(0,3),variant:"three-column-grid"}))]}):null]})},tm=e=>{let{groupModel:t,message:i}=e;return(0,l.tZ)(e4.xu,{paddingBottom:40,paddingTop:8,children:(0,l.BX)(L.tu,{alignItems:"center",className:v()(tu.homePageGroupsGrid,t?tu.emptyGroupView:tu.emptyRowsView),justifyContent:"center",children:[(0,l.tZ)(tl.Z,{className:tu.emptyContentIcon}),i&&(0,l.tZ)(E.xv.B4,{color:"pub-secondary-text",paddingTop:20,weight:"semibold",children:i}),t&&(0,l.BX)(E.xv.B4,{color:"pub-secondary-text",paddingTop:4,children:["Add posts to this ",tp(t)?"section":"tag"," to include it on your homepage."]})]})})},tg=e=>{var t;let{row:i,pub:n}=e,{isMobile:o}=(0,h.v9)(),r="/archive";return i&&(r=tp(i)?(0,A.Ucy)(n,{section:i}):(0,A.Mk9)(n,i)),(0,l.tZ)(L.tu,{paddingBottom:12,paddingX:8*!o,children:(0,l.BX)(L.gq,{alignItems:"center",justifyContent:"space-between",children:[(0,l.tZ)(E.xv.H2,{color:"pub-primary-text",font:"pub-headings",children:null!==(t=null==i?void 0:i.name)&&void 0!==t?t:"Recent posts"}),(0,l.tZ)(eI,{href:r,children:"See all"})]})})},tv=e=>{let{onIntersectCallback:t,groupModel:i,loadingSync:s,postsForId:d,setHasInvalidGroupSelection:c}=e,u=(0,r._)(e,["onIntersectCallback","groupModel","loadingSync","postsForId","setHasInvalidGroupSelection"]),[p,h]=(0,td.Z)();return((0,a.d4)(()=>{(null==h?void 0:h.isIntersecting)&&!s&&t()},[null==h?void 0:h.isIntersecting,t,s]),d)?0===d.length?c?(c(!0),(0,l.tZ)(tm,{groupModel:i})):(0,l.tZ)(eB.B,(0,o._)((0,n._)({},u),{posts:u.posts.slice(0,3),variant:"three-column-grid"})):(0,l.tZ)(eB.B,(0,o._)((0,n._)({},u),{posts:d,variant:"three-column-grid"})):(0,l.tZ)(tc.b,{ref:p,postCount:3,variant:"grid-groups"})};var tZ=i(12620),tf=i(84864);function tb(e){let{className:t=""}=e,{iString:i,language:r}=(0,k.M1)(),{freeSignup:s,freeSignupEmail:d}=(0,a.qp)(X.p),{pub:c,user:u}=(0,eh.ZT)();return(0,l.BX)("div",{className:v()("home-sitemap",t),children:[(0,l.tZ)("h4",{className:"home-sitemap-title",children:c.name}),s||u&&u.is_free_subscribed?!(u&&u.is_subscribed)&&c.plans?(0,l.tZ)("a",{className:"button primary home-sitemap-subscribe subscribe-btn",href:(0,eN.W1P)(c,{utm_source:O.b3.homeSitemap}),native:!0,children:(0,tf.getSubscribeText)(c,{language:r})}):null:(0,l.tZ)(e4.xu,{paddingTop:20,children:(0,l.tZ)(tZ.Z,{className:"home-sitemap-signup-form",freeSignup:s,freeSignupEmail:d,pub:c,source:"home-sitemap",user:u,onSuccess:e=>{e.body.prompt_to_login?setTimeout(()=>{document.location.href=(0,eN.n1t)("/account/login",{redirect:document.location.href,email:e.body.email})},30):c.plans?document.location.href=(0,eN.n1t)("/subscribe",(0,o._)((0,n._)({next:document.location.href,later:!0,just_signed_up:!0},e.body.subscription_id&&{subscription_id:e.body.subscription_id},e.body.referral_token&&{referral_token:e.body.referral_token}),{requires_confirmation:e.body.requires_confirmation?"true":""})):document.location.reload()},onConfirmationRequired:(null==c?void 0:c.payments_state)==="enabled"?()=>null:void 0})}),(0,l.BX)("div",{className:"home-sitemap-links",children:[(0,l.tZ)("a",{href:(0,eN.d6h)(c),native:!1,children:i("About")}),(0,l.tZ)("a",{href:(0,eN.nxG)(c),children:i("Archive")}),c.has_recommendations&&(0,l.tZ)("a",{href:(0,eN.kfT)(c),native:!0,children:i("Recommendations")}),c.can_have_sitemap&&(0,l.tZ)("a",{href:(0,eN.Xbg)(c),native:!0,children:i("Sitemap")})]})]})}let tw={grid:"full-width-with-sidebar","grid-groups":"full-width-with-sidebar",list:"three-column-width-with-sidebar"},ty={grid:"three-column-grid",list:"two-column-list"},t_={grid:"full-width","grid-groups":"full-width",list:"three-column-width"},tC=e=>{var{hideImagesFromList:t,posts:i,pub:a,showSiteMap:s,source:d,user:c,variant:u,bodyPostGroups:p,postsByGroupId:m}=e,g=(0,r._)(e,["hideImagesFromList","posts","pub","showSiteMap","source","user","variant","bodyPostGroups","postsByGroupId"]);let{isMobile:v,breakpoint:Z}=(0,h.v9)(),f=(0,ek.b8)()[u][Z],b="list"===u&&(t||i.slice(0,f).every(e=>!e.cover_image));return(0,l.BX)(eM.QI,{pub:a,showPubPins:!0,showSectionPins:!1,children:[i.length>0&&(0,l.BX)(ep.A,{showContentBelowOnMobile:!0,variant:tw[u],children:[(0,l.tZ)(eY.O,(0,o._)((0,n._)({},g),{maxPosts:f,newPosts:i,pub:a,user:c,variant:u,children:e=>{let{posts:t,linkToComments:i,onClickPost:r}=e,s={hideImages:b,linkToComments:i,posts:t,pub:a,source:d,user:c,onClickPost:r};return"grid-groups"===u?(0,l.tZ)(th,(0,o._)((0,n._)({},s),{bodyPostGroups:p,hasEmptyGroupOptions:g.hasEmptyGroupOptions,postsByGroupId:m,setHasInvalidGroupSelection:g.setHasInvalidGroupSelection})):(0,l.tZ)(eB.B,(0,o._)((0,n._)({},s),{variant:ty[u]}))}})),(0,l.tZ)(tn,{})]}),s&&(0,l.tZ)(ep.A,{variant:t_[u],children:(0,l.tZ)(L.tu,{paddingX:8*!v,children:(0,l.tZ)(tb,{})})})]})};var tB=i(44846);let tk=()=>(0,l.tZ)(e4.xu,{className:"container-eQ3i2p",paddingX:16,paddingY:48,radius:"sm",children:(0,l.tZ)(E.xv.B4,{align:"center",color:"pub-secondary-text",children:"No posts found"})});var tx=i(24840),tS=i(39648);let tP={pillarHeader:"pillarHeader-EpU7EL",pillarTitle:"pillarTitle-Eyi3Nu"},tI=e=>{var t;let{pub:i,showSearch:n,title:o,viewAllUrl:r}=e,a=(0,eT.kb)({pub:i}),{isMobile:s}=(0,h.v9)(),{iString:d}=(0,k.M1)(),{open:c}=(0,tS.O4)();return(0,l.BX)(L.gq,{alignItems:"center",borderBottom:a?"detail-themed":void 0,className:v()({[null!==(t=tP.pillarHeader)&&void 0!==t?t:""]:a}),justifyContent:"space-between",paddingBottom:s?12:16,paddingX:8*!s,children:[a?(0,l.tZ)("div",{className:tP.pillarTitle,children:o}):s?(0,l.tZ)(eX.R,{children:o}):(0,l.tZ)(E.xv.H3,{color:"pub-primary-text",font:"pub-headings",children:o}),r&&(0,l.BX)(L.gq,{alignItems:"center",gap:16,children:[n&&(0,l.tZ)(y.h,{children:(0,l.tZ)(N.hU,{priority:"tertiary",onClick:e=>{e.preventDefault(),c()},children:(0,l.tZ)(tx.Z,{size:20})})}),(0,l.tZ)(eI,{href:r,children:d("View all")})]})]})},tX=ek.zM.feature.postCount.desktop,tT=e=>{let{posts:t,pub:i,showEmptyState:n,showSearch:o,title:r,viewAllUrl:a}=e,{isTablet:s}=(0,h.v9)();return n||0!==t.length?(0,l.BX)(l.HY,{children:[r&&(0,l.tZ)(tI,{pub:i,showSearch:o,title:r,viewAllUrl:a}),t.length?(0,l.tZ)(e_,{leftContent:t[0]?(0,l.tZ)(eC.G,{imageAspectRatio:"wide",post:t[0],variant:"large"}):(0,l.tZ)("div",{}),mobileContent:(0,l.tZ)(eB.B,{posts:t.slice(0,tX),variant:"two-column-list"}),rightContent:(0,l.tZ)(eB.B,{hideHorizontalDividers:!0,posts:t.slice(1,tX),variant:s?"one-column-list":"two-column-list"})}):(0,l.tZ)(tk,{})]}):null};var tN=i(20435),tL=i(45262),tq=i(8400),tM=i.n(tq);let tE=e=>{let{posts:t,numColumns:i}=e,{isMobile:n}=(0,h.v9)(),o=t.every(e=>!e.cover_image),r=tM()(t,i);return(0,l.tZ)(L.tu,{gap:n?28:4,children:r.map(e=>(0,l.tZ)(L.gq,{className:"postRow-schahZ",children:e.map(e=>(0,l.tZ)("div",{className:v()("postContainer-okMiTM",{"postContainerTwoColumn-OPvMmL":2===i,"postContainerThreeColumn-W6tLrW":3===i,"postContainerFourColumn-WylYbU":4===i}),children:(0,l.tZ)(eC.G,{hideImage:o,post:e,variant:"square"})}))}))})};var tz=i(63391),tR=i(95561);let tA=e=>{var t;let{contributor:i,latestPost:n}=e;return n?(0,l.tZ)(e2.J,{hoverBackground:"light",href:n.canonical_url,padding:8,radius:"sm",children:(0,l.BX)(L.gq,{alignItems:"center",gap:16,children:[(0,l.BX)(L.tu,{flex:"grow",children:[(0,l.tZ)(E.xv.Meta,{color:"accent",children:i.name}),(0,l.tZ)(tR.F,{post:n,preset:"sm"})]}),(0,l.tZ)(L.hs,{flex:"auto",children:(0,l.tZ)(T.qE,{photoUrl:null!==(t=i.photo_url)&&void 0!==t?t:void 0,size:48})})]})}):null};var tO=i(12900);function tD(){let e=(0,Z._)(["Show less"]);return tD=function(){return e},e}function tF(){let e=(0,Z._)(["Show "," more"]);return tF=function(){return e},e}let tU=()=>{let{iString:e,iTemplate:t}=(0,k.M1)(),{contributors:i,latestPostByContributorId:n}=(0,a.qp)(X.p),[o,r]=(0,a.eJ)(!1);if(!i)return null;let s=i.filter(e=>e.name&&(null==n?void 0:n[e.id])),d=s.slice(0,10),c=s.slice(10);return(0,l.BX)(L.tu,{gap:16,children:[(0,l.tZ)(L.gq,{paddingX:8,children:(0,l.tZ)(eX.R,{children:e("The latest from")})}),(0,l.BX)(L.tu,{gap:4,children:[d.length?d.map(e=>(0,l.tZ)(tA,{contributor:e,latestPost:null==n?void 0:n[e.id]})):(0,l.tZ)(e5,{}),(0,l.tZ)(tO.H,{expanded:o,children:(0,l.tZ)(L.tu,{gap:4,children:c.map(e=>(0,l.tZ)(tA,{contributor:e,latestPost:null==n?void 0:n[e.id]}))})}),c.length>0&&(0,l.tZ)(L.gq,{paddingX:8,paddingY:4,children:(0,l.tZ)(eI,{onClick:()=>{r(!o)},children:o?t(tD()):t(tF(),c.length)})})]})]})},tH={logo:"logo-ulupBr","logo-64":"logo-64-VEaVRL","logo-72":"logo-72-fFbpYn","logo-auto":"logo-auto-l6jK_D",logoPlaceholder:"logoPlaceholder-RbJEuS"},tW=e=>{let{altText:t="Section logo",size:i=64,url:n,showPlaceholder:o}=e;return n?(0,l.tZ)("img",{alt:t,className:v()(tH.logo,{[tH["logo-64"]]:64===i,[tH["logo-72"]]:72===i,[tH["logo-auto"]]:"auto"===i}),src:(0,eN.zF4)(n,"auto"===i?200:2*i)}):o?(0,l.tZ)("div",{className:v()(tH.logo,tH.logoPlaceholder,{[tH["logo-64"]]:64===i,[tH["logo-72"]]:72===i,[tH["logo-auto"]]:"auto"===i})}):null},tJ=()=>{let{iString:e}=(0,k.M1)(),{pub:t}=(0,eh.ZT)(),i=t.sections.filter(e=>(0,tf.sectionIsSpecificallyMarkedAsNewsletter)({section:e,pub:t})||!e.is_podcast),n=i.some(e=>e.logo_url);return(0,l.BX)(L.tu,{gap:16,children:[(0,l.tZ)(L.gq,{paddingX:8,children:(0,l.tZ)(eX.R,{children:e("Newsletters")})}),(0,l.tZ)(L.tu,{gap:4,children:i.length?i.map(e=>(0,l.tZ)(e8,{image:e.logo_url||n?(0,l.tZ)(tW,{altText:"Logo for ".concat(e.name),showPlaceholder:!0,size:64,url:e.logo_url}):null,pub:t,subtitle:e.description,title:e.name,url:(0,A.Ucy)(t,{section:e,addBase:!0})})):(0,l.tZ)(e5,{})})]})};var tY=i(30998),tV=i.n(tY);function tj(){let e=(0,Z._)(["Logo for ",""]);return tj=function(){return e},e}let tG=e=>{let{latestPost:t,podcastArtUrl:i,podcastTitle:n,podcastUrl:o,showPlaceholder:r}=e,{iString:a,iTemplate:s}=(0,k.M1)();return(0,l.tZ)(e2.J,{hoverBackground:"light",href:t?t.canonical_url:o,padding:8,radius:"sm",children:(0,l.BX)(L.gq,{alignItems:"start",gap:16,children:[(i||r)&&(0,l.tZ)(L.hs,{flex:"auto",children:(0,l.tZ)(tW,{altText:s(tj(),n),showPlaceholder:!0,size:64,url:i})}),(0,l.BX)(L.tu,{flex:"grow",children:[(0,l.tZ)(E.xv.Meta,{color:"accent",children:n}),t?(0,l.tZ)(tR.F,{noIcons:!0,post:t,preset:"sm"}):(0,l.tZ)(E.xv.B4,{color:"pub-secondary-text",paddingTop:8,style:{fontStyle:"italic"},children:a("Coming soon")})]})]})})};var tK=i(1835);let tQ=()=>{let{iString:e}=(0,k.M1)(),{pub:t}=(0,eh.ZT)(),{latestPodcastPosts:i}=(0,a.qp)(X.p),n=eK()((0,tK.FV)(t),e=>{var i;return e.section_id?null!==(i=tV()(t.navigationBarItems,t=>t.section_id===e.section_id))&&void 0!==i?i:999:-1}),o=n.some(e=>e.podcast_art_url);return(0,l.BX)(L.tu,{gap:16,children:[(0,l.tZ)(L.gq,{paddingX:8,children:(0,l.tZ)(eX.R,{children:e("Podcasts")})}),(0,l.tZ)(L.tu,{gap:4,children:n.length?n.map(e=>{var t,n;let r=e.section_id?null!==(t=null==i?void 0:i.sectionPodcasts[e.section_id])&&void 0!==t?t:null:null!==(n=null==i?void 0:i.pubPodcast)&&void 0!==n?n:null;return(0,l.tZ)(tG,{latestPost:r,podcastArtUrl:e.podcast_art_url,podcastSubtitle:e.subtitle,podcastTitle:e.title,podcastUrl:e.url,showPlaceholder:o})}):(0,l.tZ)(e5,{})})]})},t$=()=>{let{iString:e}=(0,k.M1)(),{topPosts:t}=(0,a.qp)(X.p);return t?(0,l.BX)(L.tu,{gap:16,children:[(0,l.tZ)(eX.R,{children:e("Top posts")}),(0,l.tZ)(eB.B,{posts:t.slice(0,5),variant:"one-column-list"})]}):null},t0=e=>{let{ids:t}=e,i=d()(t.map(e=>"subscribe"===e?(0,l.tZ)(ti,{}):"recommendations"===e?(0,l.tZ)(te,{hideHeaderBorder:!0,showEmptyState:!0}):"links"===e?t1(e9,{hideHeaderBorder:!0}):"contributors"===e?(0,l.tZ)(tU,{}):"podcasts"===e?(0,l.tZ)(tQ,{}):"newsletters"===e?(0,l.tZ)(tJ,{}):"top-posts"===e?(0,l.tZ)(t$,{}):null));return(0,l.tZ)(L.tu,{children:i.map((e,t)=>(0,l.BX)(l.HY,{children:[e,t<i.length-1&&(0,l.tZ)(tz.f,{})]}))})},t1=(e,t)=>{let i=(0,l.tZ)(e,(0,n._)({},t));return"function"==typeof i.type&&null===i.type(t)?null:i},t4=e=>{let t,i,n,{numPosts:o,posts:r,pub:a,showEmptyState:s,showSearch:d,showSeeAllLink:c,sidebarLeft:u,sidebarRight:p,title:m,viewAllUrl:g}=e,{isDesktop:v,isTablet:Z}=(0,h.v9)();if(!s&&0===r.length)return null;let f=u&&u.length>0,b=p&&p.length>0;v?(t=f?(0,l.tZ)(t0,{ids:u}):void 0,i=b?(0,l.tZ)(t0,{ids:p}):void 0,n=4-+!!b-+!!f):Z?b?(i=(0,l.tZ)(t0,{ids:[...p,...null!=u?u:[]]}),n=2):f?(t=(0,l.tZ)(t0,{ids:u}),n=2):n=3:n=1;let w=(0,l.BX)(l.HY,{children:[m&&(0,l.tZ)(tI,{pub:a,showSearch:d,title:m,viewAllUrl:g}),r.length?(0,l.BX)(l.HY,{children:[(0,l.tZ)(tE,{numColumns:n,posts:r.slice(0,o)}),c&&g&&(0,l.tZ)(tL.B,{url:g})]}):(0,l.tZ)(tk,{})]});return(0,l.tZ)(tN.s,{leftContent:t,mainContent:w,rightContent:i,stretchToFullWidth:!0})},t2=e=>{let t,i,{numPosts:n,posts:o,pub:r,showEmptyState:a,showSearch:s,showSeeAllLink:d,sidebarLeft:c,sidebarRight:u,title:p,viewAllUrl:m}=e,{isTablet:g,isDesktop:v}=(0,h.v9)();if(!a&&0===o.length)return null;let Z=c&&c.length>0,f=u&&u.length>0,b=(0,l.BX)(l.HY,{children:[p&&(0,l.tZ)(tI,{pub:r,showSearch:s,title:p,viewAllUrl:m}),o.length?(0,l.BX)(l.HY,{children:[(0,l.tZ)(eB.B,{posts:o.slice(0,n),variant:"two-column-list"}),d&&m&&(0,l.tZ)(tL.B,{url:m})]}):(0,l.tZ)(tk,{})]});return v?(t=Z?(0,l.tZ)(t0,{ids:c}):void 0,i=f?(0,l.tZ)(t0,{ids:u}):void 0):g&&(f?i=(0,l.tZ)(t0,{ids:[...u,...null!=c?c:[]]}):Z&&(t=(0,l.tZ)(t0,{ids:c}))),(0,l.tZ)(tN.s,{leftContent:t,mainContent:b,rightContent:i})};var t8=i(24791);let t6={outerContainer:"outerContainer-cCKm5T",thebulwark:"thebulwark-dw_07J",innerContainer:"innerContainer-hMBAPa",logoContainer:"logoContainer-iUK1Lv",ctaContainer:"ctaContainer-WOl42W",message:"message-IKztq4"},t9=e=>{let{contentBlock:t}=e,{iString:i}=(0,k.M1)(),{freeSignup:n}=(0,a.qp)(X.p),{pub:o,user:r}=(0,eh.ZT)(),s=(0,ew.xR)(),d=(0,eb.So)(),{isMobile:c}=(0,h.v9)(),u=(0,eT.VL)({pub:o,includeTheRampart:!0}),p=n||(null==r?void 0:r.is_free_subscribed),m=null==r?void 0:r.is_pledged,g=!s.getConfigFor("pledges_disabled")&&!!d.getSettingFor("payment_pledges_enabled"),{cta:Z,message:f}=t5({contentBlock:t,freeSignup:n,pub:o,pubSettings:d,siteConfigs:s,user:r}),b=(0,A.W1P)(o,{params:{utm_source:O.b3.subscribeContentBlock,gift:!0,next:document.location.href}}),w=(0,A.W1P)(o,{addBase:!0,user:r,params:{utm_source:O.b3.subscribeContentBlock,simple:!0,next:document.location.href,referring_pub_ids:(0,R.x)("referring_pub_ids")}}),y=(0,A.yRy)({pub:o,user:r,params:{utm_source:O.b3.subscribeContentBlock,next:document.location.href}}),_=(0,A.sR2)({pub:o});return(0,l.tZ)("div",{className:v()(t6.outerContainer,{[t6.thebulwark]:u}),children:(0,l.tZ)(e4.xu,{className:t6.innerContainer,paddingY:u?40:c?40:48,children:(0,l.BX)(L.gq,{alignItems:"center",direction:c?"column":"row",gap:c?u?16:24:40,justifyContent:u?"space-between":"center",paddingX:8,children:[u&&(0,l.BX)(L.gq,{alignItems:"center",className:t6.logoContainer,gap:4,children:[(0,l.tZ)(M.jM,{pub:o,size:u||c?56:80}),u&&!c&&(0,l.tZ)(E.xv,{color:"pub-primary-text",font:"pub-headings",nowrap:!0,size:20,children:"The Bulwark +"})]}),f&&(0,l.tZ)(L.gq,{alignItems:"center",direction:c?"column":"row",gap:8,children:(0,l.tZ)(E.xv,{align:c||u?"center":"left",className:t6.message,color:"pub-primary-text",font:"pub-headings",lineHeight:30,size:u?20:24,children:(0,tf.preventOrphans)(f)})}),Z&&(0,l.tZ)(e4.xu,{className:t6.ctaContainer,flex:"auto",children:"subscribe"===Z||"upgrade"===Z?(0,l.tZ)(N.zx,{href:w,localNavigation:!1,priority:"primary",children:u?"Join Bulwark +":(0,tf.getSubscribeText)(o,{isFreeSubscribed:p,isPledged:m,pledgesEnabled:g})}):"upgrade_founding"===Z?(0,l.tZ)(N.zx,{href:y,localNavigation:!1,priority:"primary",children:i("Upgrade to founding")}):"pledge"===Z?(0,l.tZ)(N.zx,{href:w,localNavigation:!1,priority:"primary",children:i("Pledge your support")}):"gift"===Z?u?(0,l.tZ)(N.zx,{href:_,localNavigation:!1,priority:"primary",children:i("Gift a subscription")}):(0,l.tZ)(N.zx,{href:b,localNavigation:!1,priority:"primary",children:i("Gift a subscription")}):null})]})})})},t5=e=>{let{contentBlock:t,freeSignup:i,pub:n,pubSettings:o,siteConfigs:r,user:l}=e,a=i||(null==l?void 0:l.is_free_subscribed),s="enabled"===n.payments_state,d=!r.getConfigFor("pledges_disabled")&&!!o.getSettingFor("payment_pledges_enabled"),c=null==l?void 0:l.is_subscribed,u=null==l?void 0:l.is_founding,p=(0,t8.SY)(n);return{cta:a?s?c?!u&&p?"upgrade_founding":"gift":"upgrade":d?"pledge":null:"subscribe",message:u&&p?t.attrs.founding_member_message:c&&s?t.attrs.paid_subscriber_message:a?t.attrs.free_subscriber_message:t.attrs.non_subscriber_message}},t3=e=>{let{pub:t,user:i}=e,{freeSignup:n}=(0,a.qp)(X.p),o=(0,eb.So)(),r=(0,ew.xR)();return{canRender:e=>{let{contentBlock:l}=e,{cta:a,message:s}=t5({contentBlock:l,freeSignup:n,pub:t,pubSettings:o,siteConfigs:r,user:i});return!!(a||s)}}};var t7=i(1152),ie=i(58401);let it=e=>{let{posts:t,title:i,viewAllUrl:n}=e,{isMobile:o,isTablet:r}=(0,h.v9)();return o?(0,l.tZ)(ii,{posts:t,title:i,viewAllUrl:n}):(0,l.BX)(L.tu,{gap:40,children:[(0,l.tZ)(ie.l,{title:i,titlePreset:"st2"}),(0,l.BX)(L.tu,{gap:32,children:[t[0]&&(0,l.tZ)(el.X,{post:t[0],titlePreset:"h4-sans-condensed",variant:"content-block-listing"}),(0,l.tZ)(L.gq,{gap:40,children:t.slice(1,r?3:4).map(e=>(0,l.tZ)(L.tu,{borderTop:"detail-themed",flex:"grow",paddingTop:32,children:(0,l.tZ)(el.X,{post:e,variant:"mini"})}))})]})]})},ii=e=>{let{posts:t,title:i,viewAllUrl:n}=e;return(0,l.BX)(L.tu,{gap:20,children:[(0,l.tZ)(ie.l,{title:i,titlePreset:"st2",viewAllUrl:n}),(0,l.BX)(L.tu,{gap:32,children:[t[0]&&(0,l.tZ)(el.X,{align:"left",post:t[0],titlePreset:"h3-condensed",variant:"large"}),(0,l.tZ)(L.tu,{children:t.slice(1,4).map(e=>(0,l.tZ)(L.tu,{borderTop:"detail-themed",paddingY:16,children:(0,l.tZ)(el.X,{post:e,variant:"mini"})}))})]})]})};var io=i(56743),ir=i(2564),il=i(20888),ia=i(7523),is=i(87725),id=i(94778),ic=i(24476),iu=i(55480),ip=i(72019);let ih={container:"container-opjHc4",track:"track-bJrNCJ",panel:"panel-K8JY99",navButton:"navButton-hcrBJt",videoPanelContentDesktop:"videoPanelContentDesktop-ecA07Z",podcastPanelContentDesktop:"podcastPanelContentDesktop-NIL93C",videoPanelContentMobile:"videoPanelContentMobile-r5D1RZ",podcastPanelContentMobile:"podcastPanelContentMobile-En_Ak9",primaryButton:"primaryButton-AbjjpI",secondaryButton:"secondaryButton-GUipKK",podcastArt:"podcastArt-U81yKg"},im=e=>{var t,i,n,o,r,s,d,c,u,p,m,g;let{contentBlock:v}=e,{isMobile:Z}=(0,h.v9)(),{pub:f}=(0,eh.ZT)(),{sections:b,metadata:w}=(0,id.c)({pub:f}),{ids:y,metadata:_}=(0,is.F)({pub:f}),{latestPodcastPosts:C}=(0,a.qp)(X.p),[B,k]=(0,a.eJ)(2),[x,S]=(0,a.eJ)(!1),[P,I]=(0,a.eJ)(0),T=(0,a.sO)(null),N=(0,a.sO)(null),q=(0,a.sO)(null),M=(0,a.sO)(null),E=(null===(i=v.attrs)||void 0===i?void 0:null===(t=i.media_carousel)||void 0===t?void 0:t.variant)==="videos"?"videos":"podcasts",z=(0,iu.EP)(f).filter(e=>!!e.sectionId),R=eK()(z,e=>{var t;return y.indexOf(null!==(t=e.sectionId)&&void 0!==t?t:-1)}),A="podcasts"===E?R.length:b.length,O=[...R.slice(-2),...R,...R.slice(0,2)],D=[...b.slice(-2),...b,...b.slice(0,2)],F=()=>{k(e=>e+1)},U=()=>{k(e=>e-1)};return((0,a.d4)(()=>{1===B?setTimeout(()=>{S(!0),k(A+1),setTimeout(()=>{S(!1)},100)},300):B===A+2&&setTimeout(()=>{S(!0),k(2),setTimeout(()=>{S(!1)},100)},300)},[B,A]),0===A)?null:1===A?"podcasts"===E&&R[0]?(0,l.tZ)(iv,{colorString:null!==(s=null===(n=_[null!==(r=R[0].sectionId)&&void 0!==r?r:"pub"])||void 0===n?void 0:n.carouselColor)&&void 0!==s?s:"black",podcast:R[0],post:R[0].sectionId?null!==(d=null==C?void 0:null===(o=C.sectionPodcasts)||void 0===o?void 0:o[R[0].sectionId])&&void 0!==d?d:null:null!==(c=null==C?void 0:C.pubPodcast)&&void 0!==c?c:null}):"videos"===E&&b[0]?(0,l.tZ)(ig,{colorString:null!==(m=null===(u=w[b[0].id])||void 0===u?void 0:u.carouselColor)&&void 0!==m?m:"black",post:null!==(g=null==C?void 0:null===(p=C.sectionPodcasts)||void 0===p?void 0:p[b[0].id])&&void 0!==g?g:null,section:b[0]}):null:(0,l.BX)(L.tu,{gap:16,children:[Z&&(0,l.tZ)(ia.Z,{align:"center",preset:"st2",children:"podcasts"===E?"Listen to Our Latest":"Scroll Through Our Shows"}),(0,l.BX)(L.tu,{className:ih.container,children:[!Z&&(0,l.tZ)("div",{className:ih.navButton,role:"button",onClick:U,children:(0,l.tZ)(io.Z,{size:32,strokeWidth:1.5})}),(0,l.tZ)(L.gq,{className:ih.track,style:{transform:"translateX(calc(".concat(Z?32+64*B:80+160*B,"px - ").concat(100*B,"% + ").concat(P,"px))"),transition:x||0!==P?"none":Z?"transform 0.15s ease-out":"transform 0.3s ease-in-out"},onTouchEnd:Z?()=>{if(null===T.current||null===q.current||null===N.current||null===M.current){I(0);return}let e=q.current-T.current;Math.abs(e)>Math.abs(M.current-N.current)&&Math.abs(e)>50&&(e>0?U():F()),I(0)}:void 0,onTouchMove:Z?e=>{var t,i,n,o;if(q.current=null!==(n=null===(t=e.touches[0])||void 0===t?void 0:t.clientX)&&void 0!==n?n:null,M.current=null!==(o=null===(i=e.touches[0])||void 0===i?void 0:i.clientY)&&void 0!==o?o:null,null!==T.current&&null!==N.current&&null!==q.current&&null!==M.current){let t=q.current-T.current;Math.abs(t)>Math.abs(M.current-N.current)&&(e.preventDefault(),I(t))}}:void 0,onTouchStart:Z?e=>{var t,i,n,o;T.current=null!==(n=null===(t=e.touches[0])||void 0===t?void 0:t.clientX)&&void 0!==n?n:null,N.current=null!==(o=null===(i=e.touches[0])||void 0===i?void 0:i.clientY)&&void 0!==o?o:null,q.current=null,M.current=null,I(0)}:void 0,children:"podcasts"===E?O.map(e=>{var t,i,n,o,r,a;return(0,l.tZ)("div",{className:ih.panel,children:(0,l.tZ)(iv,{colorString:null!==(o=null===(t=_[null!==(n=e.sectionId)&&void 0!==n?n:-1])||void 0===t?void 0:t.carouselColor)&&void 0!==o?o:"black",podcast:e,post:e.sectionId?null!==(r=null==C?void 0:null===(i=C.sectionPodcasts)||void 0===i?void 0:i[e.sectionId])&&void 0!==r?r:null:null!==(a=null==C?void 0:C.pubPodcast)&&void 0!==a?a:null})})}):D.map(e=>{var t,i,n,o;return(0,l.tZ)("div",{className:ih.panel,children:(0,l.tZ)(ig,{colorString:null!==(n=null===(t=w[e.id])||void 0===t?void 0:t.carouselColor)&&void 0!==n?n:"black",post:null!==(o=null==C?void 0:null===(i=C.sectionPodcasts)||void 0===i?void 0:i[e.id])&&void 0!==o?o:null,section:e})})})}),!Z&&(0,l.tZ)("div",{className:ih.navButton,role:"button",onClick:F,children:(0,l.tZ)(ir.Z,{size:32,strokeWidth:1.5})})]})]})},ig=e=>{var t;let{colorString:i,post:n,section:o}=e,{pub:r}=(0,eh.ZT)(),{isMobile:a}=(0,h.v9)(),s=(0,A.Ucy)(r,{section:o}),d=null!==(t=ic.t[i])&&void 0!==t?t:ic.t.black,c=d.hex;return(0,l.tZ)(L.tu,{style:{backgroundColor:c,height:"100%"},children:a?(0,l.tZ)(L.tu,{alignItems:"center",className:ih.videoPanelContentMobile,paddingX:16,paddingY:24,children:(0,l.tZ)(ib,{image:n&&(0,l.tZ)(ip.P,{imageAspectRatio:16/9,imageWidth:1080,isBelowTheFold:!0,post:n}),isInverted:d.invertTextColors,post:n,sectionName:o.name,sectionOrPodcastUrl:s})}):(0,l.BX)(L.gq,{alignItems:"center",className:ih.videoPanelContentDesktop,paddingX:64,paddingY:32,children:[(0,l.tZ)(iZ,{isInverted:d.invertTextColors,isVideo:!0,post:n,sectionTitle:o.name,sectionUrl:s}),(0,l.tZ)(L.tu,{flex:"grow",paddingRight:8,children:n&&(0,l.tZ)(ip.P,{imageAspectRatio:16/9,imageWidth:1080,isBelowTheFold:!0,post:n})})]})})},iv=e=>{var t,i,n;let{colorString:o,podcast:r,post:a}=e,{isMobile:s}=(0,h.v9)(),{pub:d}=(0,eh.ZT)(),c=(0,eN.UVC)({pub:d,section:r.sectionId&&null!==(n=d.sections.find(e=>e.id===r.sectionId))&&void 0!==n?n:null}),u=null===(t=ic.t[o])||void 0===t?void 0:t.hex,p=null===(i=ic.t[o])||void 0===i?void 0:i.invertTextColors;return(0,l.tZ)(L.tu,{style:{backgroundColor:u,height:"100%"},children:s?(0,l.tZ)(L.tu,{alignItems:"center",className:ih.podcastPanelContentMobile,paddingX:16,paddingY:24,children:(0,l.tZ)(ib,{image:r.artUrl?(0,l.tZ)(il.e,{className:ih.podcastArt,maxWidth:360,src:r.artUrl}):null,isInverted:p,post:a,sectionName:r.podcastTitle,sectionOrPodcastUrl:c})}):(0,l.BX)(L.gq,{alignItems:"center",className:ih.podcastPanelContentDesktop,gap:40,justifyContent:"center",paddingX:64,paddingY:32,children:[r.artUrl&&(0,l.tZ)(il.e,{className:ih.podcastArt,maxWidth:300,src:r.artUrl}),(0,l.tZ)(iZ,{isInverted:p,isVideo:!1,post:a,sectionTitle:r.podcastTitle,sectionUrl:c})]})})},iZ=e=>{let{isInverted:t,isVideo:i,post:n,sectionTitle:o,sectionUrl:r}=e,a=t?"white":"primary";return(0,l.BX)(L.tu,{gap:24,paddingLeft:8,style:{width:426},children:[(0,l.tZ)(L.tu,{paddingBottom:8,style:{borderBottom:"1px solid ".concat(t?"white":"var(--color-fg-primary-themed)")},children:(0,l.tZ)(ia.Z,{color:a,preset:"h6-serif",children:o})}),(0,l.BX)(L.tu,{gap:24,children:[n&&(0,l.BX)(L.tu,{gap:12,children:[(0,l.tZ)(ia.Z,{clamp:2,color:a,preset:"h6-sans",children:n.title}),(0,l.tZ)(ia.Z,{clamp:3,color:a,preset:"d3-serif",children:n.description})]}),(0,l.BX)(L.gq,{alignItems:"center",gap:16,children:[n&&(0,l.tZ)(ia.Z,{as:"a",href:n.canonical_url,preset:"detail-large",children:(0,l.tZ)(L.gq,{className:ih.primaryButton,padding:16,children:i?"Watch now":"Listen now"})}),(0,l.tZ)(ia.Z,{as:"a",className:ih.secondaryButton,color:a,href:r,preset:"detail-large",children:"View all episodes"})]})]})]})},ib=e=>{let{image:t,isInverted:i,post:n,sectionName:o,sectionOrPodcastUrl:r}=e,a=i?"white":"primary";return(0,l.BX)(L.tu,{alignItems:"center",gap:16,children:[(0,l.tZ)(ia.Z,{color:a,preset:"h6-serif",children:o}),(0,l.BX)(L.tu,{gap:32,children:[n&&(0,l.BX)(L.tu,{alignItems:"center",gap:28,children:[t,(0,l.BX)(L.tu,{gap:8,children:[(0,l.tZ)(ia.Z,{align:"center",clamp:2,color:a,preset:"h4-sans-condensed",children:n.title}),(0,l.tZ)(ia.Z,{align:"center",clamp:3,color:a,preset:"d3-serif",children:n.description})]})]}),(0,l.BX)(L.tu,{alignItems:"center",gap:16,children:[n&&(0,l.tZ)(ia.Z,{as:"a",href:n.canonical_url,preset:"detail-large",children:(0,l.tZ)(L.gq,{className:ih.primaryButton,padding:16,children:"Watch now"})}),(0,l.tZ)(ia.Z,{as:"a",className:ih.secondaryButton,color:a,href:r,preset:"detail-large",children:"View all episodes"})]})]})]})},iw={container:"container-YOdLMp",podcastEpisodeContainer:"podcastEpisodeContainer-nd115M",plusThreeContainer:"plusThreeContainer-VOEUMx",miniPost:"miniPost-O80hP6"},iy=e=>{let{posts:t}=e,{latestPostFromSections:i}=(0,a.qp)(X.p),{isMobile:n}=(0,h.v9)(),{pub:o}=(0,eh.ZT)(),r=(0,eT.$H)({pub:o}),s=d()(r.map(e=>null==i?void 0:i[e]));return n?(0,l.tZ)(i_,{posts:t,sectionPosts:s}):(0,l.BX)("div",{className:iw.container,children:[(0,l.BX)(L.gq,{className:iw.podcastEpisodeContainer,gap:20,children:[t[0]&&(0,l.tZ)(el.X,{post:t[0],variant:"content-block-episode"}),(0,l.tZ)(L.tu,{children:(0,l.tZ)(eu.Z,{gap:24,children:s.map(e=>(0,l.tZ)(el.X,{hideUfi:!0,post:e,showStar:!0,variant:"mini"}))})})]}),(0,l.BX)("div",{className:iw.plusThreeContainer,children:[t[1]&&(0,l.tZ)(el.X,{post:t[1],titlePreset:"h6-sans",variant:"content-block-listing"}),(0,l.BX)(L.gq,{gap:40,children:[t[2]&&(0,l.tZ)("div",{className:iw.miniPost,children:(0,l.tZ)(el.X,{post:t[2],showDescription:!0,variant:"mini"})}),t[3]&&(0,l.tZ)("div",{className:iw.miniPost,children:(0,l.tZ)(el.X,{post:t[3],showDescription:!0,variant:"mini"})})]})]})]})},i_=e=>{let{posts:t,sectionPosts:i}=e;return(0,l.BX)(L.tu,{gap:32,children:[t[0]&&(0,l.tZ)(el.X,{post:t[0],variant:"content-block-episode"}),(0,l.tZ)(eu.Z,{gap:24,includeBottomDivider:!0,includeTopDivider:!0,children:i.map(e=>(0,l.tZ)(el.X,{post:e,showStar:!0,variant:"mini"}))}),t[1]&&(0,l.tZ)(el.X,{post:t[1],variant:"content-block-listing"}),(0,l.BX)(L.gq,{gap:24,children:[t[2]&&(0,l.tZ)(L.gq,{flex:"grow",children:(0,l.tZ)(el.X,{post:t[2],variant:"mini"})}),t[3]&&(0,l.tZ)(L.gq,{flex:"grow",children:(0,l.tZ)(el.X,{post:t[3],variant:"mini"})})]})]})},iC=e=>{let{posts:t}=e;return t[0]?(0,l.tZ)(L.tu,{className:"container-nYRgUV",children:(0,l.tZ)(el.X,{post:t[0],variant:"content-block-single-large"})}):null};var iB=i(71237),ik=i(74626);let ix=()=>{let{isMobile:e,isTablet:t}=(0,h.v9)(),{freeSignup:i,freeSignupEmail:n}=(0,a.qp)(X.p),{pub:o,user:r}=(0,eh.ZT)();return(0,l.BX)(L.tu,{alignItems:"center",className:"container-liQ2Vy",gap:24,justifyContent:"center",paddingX:t?16:40,style:{backgroundImage:"url(".concat((0,es.zF)("".concat((0,ea.ZJ)(),"/img/thefp/fp-subscribe-block-bg.jpg"),304),")"),backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundBlendMode:"multiply"},children:[(0,l.tZ)(ia.Z,{align:"center",color:"white",preset:e?"lg-preview-byline":"h6-sans",children:(null==r?void 0:r.is_subscribed)?(0,l.BX)(l.HY,{children:["Share ",(0,l.tZ)("em",{children:"The Free Press"})," with other free thinkers."]}):(null==r?void 0:r.is_free_subscribed)?"Become a Paid Subscriber to access our comments section, special columns, and more.":(0,l.BX)(l.HY,{children:["Sign up for your daily window into the world of ",(0,l.tZ)("em",{children:"The Free Press"}),"—and our take on the world at large"]})}),(0,l.tZ)("div",{children:(null==r?void 0:r.is_subscribed)?(0,l.tZ)(ik._,{href:(0,eN.W1P)(o,{utm_source:O.b3.subscribeContentBlock,gift:!0,next:document.location.href,addBase:!0}),native:!0,variant:"primary-accent",children:"Send Gift"}):(null==r?void 0:r.is_free_subscribed)?(0,l.tZ)(ik._,{href:(0,eN.W1P)(o,{utm_source:O.b3.freePressPromoBox,simple:!0,next:document.location.href,addBase:!0}),native:!0,variant:"primary-accent",children:"Upgrade"}):(0,l.tZ)(_.Z,{align:"left",expectTruncation:!0,freeSignup:i,freeSignupEmail:n,isStatic:!1,pub:o,source:"the-fp-subscribe-block",user:r})})]})};var iS=i(43905);let iP={container:"container-Q2UekY",containerMobile:"containerMobile-op5rRO",promoContainer:"promoContainer-M2SbsD",merchContainer:"merchContainer-rvwMsY",merchSocks:"merchSocks-lut01J",podcastImage:"podcastImage-tqEnIM"},iI=()=>{let{isMobile:e}=(0,h.v9)();return(0,l.BX)("div",{className:v()(iP.container,{[iP.containerMobile]:e}),children:[(0,l.tZ)(iX,{}),(0,l.tZ)(iT,{}),(0,l.tZ)(ix,{})]})},iX=()=>(0,l.tZ)("a",{className:v()(iP.promoContainer,iP.merchContainer),href:"https://shop.thefp.com/",rel:"noopener noreferrer",target:"_blank",children:(0,l.BX)(L.tu,{justifyContent:"space-between",padding:32,children:[(0,l.BX)(ia.Z,{color:"white",preset:"h5-serif",children:["Get (or give!) a",(0,l.tZ)("br",{}),"Free Press hat,",(0,l.tZ)("br",{}),"tote, or TGIF socks."]}),(0,l.BX)(L.gq,{alignItems:"center",gap:8,children:[(0,l.tZ)(ia.Z,{color:"white",preset:"detail-large",children:"Shop Merch"}),(0,l.tZ)(iB.Z,{color:"white",size:16})]}),(0,l.tZ)("img",{alt:"Socks",className:iP.merchSocks,src:(0,es.zF)("".concat((0,ea.ZJ)(),"/img/thefp/thefp-socks.png"))})]})}),iT=()=>{var e,t,i;let{isMobile:n,isDesktop:o}=(0,h.v9)(),{latestPodcastPosts:r}=(0,a.qp)(X.p),{pub:s}=(0,eh.ZT)(),d=null!==(e=s.sections.find(e=>"honestly"===e.slug))&&void 0!==e?e:null,{artUrl:c}=(0,iS.Mv)({pub:s,section:d}),u=(0,eN.UVC)({pub:s,section:d}),p=null!==(i=null==r?void 0:r.sectionPodcasts[null!==(t=null==d?void 0:d.id)&&void 0!==t?t:""])&&void 0!==i?i:null,m=(0,eN.uRy)(s,p,{noBase:!0});return(0,l.BX)(L.gq,{children:[c&&(0,l.tZ)("a",{href:u,children:(0,l.tZ)(il.e,{className:iP.podcastImage,loading:"lazy",maxWidth:440,src:c})}),(0,l.BX)(L.tu,{as:"a",flex:"grow",gap:o?40:16,href:null!=m?m:u,justifyContent:"center",paddingX:16,style:{backgroundColor:"#fa3409",borderLeft:"1px solid var(--web_bg_color)",textDecoration:"none"},children:[p&&(0,l.tZ)(ia.Z,{clamp:n?4:5,color:"white",preset:"h6-serif",children:p.title}),(0,l.BX)(L.gq,{alignItems:"center",gap:8,children:[(0,l.tZ)(ia.Z,{color:"white",preset:"detail-large",children:o?"Listen now":"Listen"}),(0,l.tZ)(iB.Z,{color:"white",size:16})]})]})]})},iN=e=>{var t,i,n,o;let{contentBlock:r,posts:a,pub:s,showEmptyState:d,showSearch:c=!1,showSeeAllLink:u,title:p,viewAllUrl:m}=e,{breakpoint:g}=(0,h.v9)(),v=(0,eT.HD)({pub:s});if("list"===r.block_type)return(0,l.tZ)(t2,{numPosts:null!==(t=r.num_posts)&&void 0!==t?t:ek.di.posts.default,posts:a,pub:s,showEmptyState:d,showSearch:c,showSeeAllLink:u,sidebarLeft:r.secondary_sidebar_modules,sidebarRight:r.primary_sidebar_modules,title:p,viewAllUrl:m});if("grid"===r.block_type){let e=(0,ek.eP)({contentBlock:r,breakpoint:g});return(0,l.tZ)(t4,{numPosts:e,posts:a,pub:s,showEmptyState:d,showSearch:c,showSeeAllLink:u,sidebarLeft:r.secondary_sidebar_modules,sidebarRight:r.primary_sidebar_modules,title:p,viewAllUrl:m})}return"feature"===r.block_type?v?(0,l.tZ)(t7.M,{posts:a,title:(null===(i=r.attrs.feature)||void 0===i?void 0:i.title)||p,variant:null!==(o=null===(n=r.attrs.feature)||void 0===n?void 0:n.variant)&&void 0!==o?o:"special-feature",viewAllUrl:m}):(0,l.tZ)(tT,{posts:a,pub:s,showEmptyState:d,showSearch:c,title:p,viewAllUrl:m}):"subscribe"===r.block_type?(0,l.tZ)(t9,{contentBlock:r}):"podcast_plus_three"===r.block_type?(0,l.tZ)(iy,{posts:a}):"subscribe_plus_five"===r.block_type?(0,l.tZ)(iI,{}):"single_post"===r.block_type?(0,l.tZ)(iC,{posts:a}):"half_feature"===r.block_type?(0,l.tZ)(it,{posts:a,title:p,viewAllUrl:m}):"media_carousel"===r.block_type?(0,l.tZ)(im,{contentBlock:r}):null},iL=()=>(0,l.tZ)(e4.xu,{paddingBottom:120,children:(0,l.tZ)(tN.s,{leftContent:(0,l.tZ)("div",{children:"\xa0"}),mainContent:(0,l.tZ)(tc.b,{animated:!1,postCount:4,variant:"list"}),rightContent:(0,l.tZ)("div",{children:"\xa0"})})}),iq={halfWidthContainer:"halfWidthContainer-OZxoCR",pillarContentBlocks:"pillarContentBlocks-pkmgrG",contentBlockContainer:"contentBlockContainer-BNIIae",contentBlockEditButton:"contentBlockEditButton-g_2FSh"},iM=["media_carousel","subscribe","subscribe_plus_five"],iE=e=>{var t,n;let{contentBlocks:o,postsBySectionId:r,postsByTagId:s,postsForContentBlockPins:d,recentPosts:c,showEmptyStates:u}=e,{isMobile:p,breakpoint:m}=(0,h.v9)(),{pub:g,user:Z}=(0,eh.ZT)(),f=(0,eT.kb)({pub:g}),b=(0,eT.HD)({pub:g}),{canRender:w}=t3({pub:g,user:Z}),[y,_]=(0,a.eJ)(null),C=!1,B=o.filter(e=>"latest"===e.post_source).length>1,k=o.filter(e=>"subscribe"!==e.block_type||w({contentBlock:e})),x=k.findIndex(e=>e.id===y),S=-1!==x?k[x]:null,P=(0,ek.ne)({contentBlocks:k,breakpoint:m,isTheFP:b,recentPosts:c,postsBySectionId:r,postsByTagId:s,postsForContentBlockPins:d});if(!k.length&&u)return(0,l.tZ)(iL,{});let I=iR({contentBlocks:k});return(0,l.BX)(L.tu,{paddingBottom:40,children:[I.map(e=>{var t,i;let{groupType:n,contentBlocks:o}=e;return(0,l.tZ)("div",{className:v()({[null!==(t=iq.halfWidthContainer)&&void 0!==t?t:""]:"half-width"===n&&!p,[null!==(i=iq.pillarContentBlocks)&&void 0!==i?i:""]:f}),children:o.map((e,t)=>{var i,n,o;let r=null!==(o=null===(i=P[e.id])||void 0===i?void 0:i.posts)&&void 0!==o?o:[],{title:a,viewAllUrl:s}=iz({contentBlock:e,hideRecentPostsTitle:B&&!b,pub:g}),d=!1,c=t<k.length-1?k[t+1]:null,h="subscribe"===e.block_type||(null==c?void 0:c.block_type)==="subscribe"||b||f,m=k.slice(t+1),v="latest"===e.post_source&&m.every(e=>"latest"!==e.post_source);return"latest"!==e.post_source||C||(d=!0,C=!0),(0,l.BX)(eM.QI,{pub:g,showPubPins:"latest"===e.post_source,showSectionPins:!1,children:[(0,l.BX)(L.tu,{className:iq.contentBlockContainer,id:"block-".concat(e.id),paddingBottom:b?p?64:80:0,style:{scrollMarginTop:48},children:[!iM.includes(e.block_type)&&b&&(null==Z?void 0:Z.is_admin)&&(0,l.tZ)("div",{className:iq.contentBlockEditButton,children:(0,l.tZ)(N.hU,{priority:"primary-mono",size:"sm",onClick:()=>{_(e.id)},children:(0,l.tZ)(er.Z,{size:16})})}),"media_carousel"===e.block_type&&(null==Z?void 0:Z.is_admin)&&(0,l.tZ)("div",{className:iq.contentBlockEditButton,children:(0,l.tZ)(tB.r,{pub:g,sectionType:(null===(n=e.attrs.media_carousel)||void 0===n?void 0:n.variant)==="videos"?"video":"podcast",user:Z})}),(0,l.tZ)(iN,{contentBlock:e,posts:r,pub:g,showEmptyState:u,showSearch:d,showSeeAllLink:v,title:a,viewAllUrl:s})]}),t<k.length-1&&!h&&(0,l.tZ)(tz.f,{})]})})})}),S&&b&&(0,l.tZ)(em.cr,{containerId:"block-".concat(S.id),contentBlock:S,module:"@/frontend/components/thefp/EditPinsModal",pinnedPosts:d,posts:null!==(n=null===(t=P[S.id])||void 0===t?void 0:t.postsWithoutPins)&&void 0!==n?n:[],renderPreview:e=>{let{posts:t}=e,{title:i}=iz({contentBlock:S,hideRecentPostsTitle:!1,pub:g});return(0,l.tZ)(iN,{contentBlock:S,posts:t,pub:g,showEmptyState:u,showSearch:!1,showSeeAllLink:!1,title:i})},resolve:e=>e.EditContentBlockPinsModal,whileLoading:(0,l.tZ)("div",{}),onClose:()=>{_(null)},onRequest:()=>i.e("9314").then(i.bind(i,91076))})]})},iz=e=>{let t,{contentBlock:i,hideRecentPostsTitle:n,pub:o}=e,r="";if("latest"===i.post_source)r=n?"":"Recent posts",t=(0,eN.nxG)(o);else if("section"===i.post_source&&i.section){let e=i.section;r=(null==e?void 0:e.name)||"",t=e?(0,A.Ucy)(o,{section:e}):null}else if("tag"===i.post_source&&i.postTag){let e=i.postTag;r=(null==e?void 0:e.name)||"",t=e?(0,A.Mk9)(o,e):null}return{title:r,viewAllUrl:t}},iR=e=>{let{contentBlocks:t}=e,i=[],n=[],o="full-width";for(let e of t)"half_feature"===e.block_type?"full-width"===o&&(n.length&&(i.push({groupType:"full-width",contentBlocks:n}),n=[]),o="half-width"):"half-width"===o&&(n.length&&(i.push({groupType:"half-width",contentBlocks:n}),n=[]),o="full-width"),n.push(e);return n.length&&i.push({groupType:o,contentBlocks:n}),i};var iA=i(26176);let iO=e=>{let{posts:t,pub:i,user:n,utm:o}=e,{isMobile:r}=(0,h.v9)();if(!t.length||!t[0])return null;let a=t[0],s=a.section_id?i.sections.find(e=>e.id===a.section_id):void 0,d=(0,t8.uo)({post:a,section:null!=s?s:null,pub:i});return(0,l.tZ)(L.tu,{cursor:"pointer",paddingX:16*!!r,onClick:()=>{let e=a.canonical_url;"video"===a.type?e=(0,eN.rhs)(a.canonical_url,{autoPlay:!0}):o&&(e=(0,eN.n1t)(a.canonical_url,{utm:o})),(0,I.uX)(e)},children:(0,l.tZ)(iA.Y,{columns:4,highlightPost:!0,isPodcast:!d,post:t[0],pub:i,section:s,user:null!=n?n:null})})};var iD=i(23372);let iF=e=>{let{columns:t=4,posts:i,pub:n}=e,{isMobile:o}=(0,h.v9)();return o?null:(0,l.tZ)(ep.A,{variant:3===t?"three-column-width":"full-width",children:(0,l.BX)(L.tu,{gap:12,children:[(0,l.tZ)(eq,{pub:n}),(0,l.tZ)(eB.B,{posts:i,variant:3===t?"three-column-mini-row":"mini-row"})]})})};var iU=i(98012);let iH={container:"container-LSZllu",bodyContainer:"bodyContainer-GD8kK4","container--empty":"container--empty-D_rgwk",liveStreamContainer:"liveStreamContainer-t0i18u"},iW=(0,m.memo)(e=>{var t,i,s;let{activeLiveStream:c,bodyPostGroups:u,freeSignup:p,freeSignupEmail:m,homepageData:g,pub:Z,showEmptyStates:f,showSiteMap:w,theme:_,user:C,utm:k,giftCard:x,abTestingId:T}=e,N=(0,r._)(e,["activeLiveStream","bodyPostGroups","freeSignup","freeSignupEmail","homepageData","pub","showEmptyStates","showSiteMap","theme","user","utm","giftCard","abTestingId"]),q=(0,a.Ye)(()=>(0,eT.HD)({pub:Z})&&g?d()(Object.values(g.contentBlockData.latestPostFromSections).map(e=>null==e?void 0:e.id)):[],[g,Z]),M=(0,a.Ye)(()=>{var e,t,i;let n=new Set([...(null!==(e=null==g?void 0:g.pinnedPosts)&&void 0!==e?e:[]).map(e=>e.id),...q]);return(null!==(t=null==g?void 0:g.pinnedPosts)&&void 0!==t?t:[]).concat((null!==(i=null==g?void 0:g.newPosts)&&void 0!==i?i:[]).filter(e=>!n.has(e.id)))},[null==g?void 0:g.newPosts,null==g?void 0:g.pinnedPosts,q]),[E,z]=(0,a.eJ)(c);(0,a.d4)(()=>{C||(0,P.rd)("/api/v1/live_streams/active/pub/".concat(Z.id)).then(e=>{let{activeLiveStream:t}=e;return z(t)})},[Z,C]);let{breakpoint:A,isMobile:D,isDesktop:F}=(0,h.v9)(),{getSettingFor:U}=(0,eb.So)(),H=(0,tf.ensureInList)(U("post_preview_crop_gravity"),["center","auto"]),W=(0,ew.xR)(),{open:J,modal:Y}=(0,b.useAppModal)({utm_campaign:(null==x?void 0:null===(t=x.gifter)||void 0===t?void 0:t.id)===Z.author_id?O.VX.viralGiftAppIncentiveFromPub:O.VX.viralGiftAppIncentive,utm_source:O.b3.substack,giftCard:x,pub:Z,abTestingId:T}),{open:V,modal:j}=function(e){let{pub:t,abTestingId:i,startingOpen:n,giftCard:o}=e,[r,s]=(0,a.eJ)(null!=n&&n),[d,c]=(0,a.eJ)(o),[u,p]=(0,a.eJ)("pub_focused"),{getExperimentVariant:h,exposeExperiment:m}=(0,B.jc)(),g=(0,a.I4)(e=>{c(e),s(!0),(0,S.j)(S.FP.ACCEPT_GIFT_MODAL_OPENED,{has_sender_token:!!(0,R.x)(window._preloads.original_url,"senderToken"),starting_open:n})},[]),v=(0,a.I4)(()=>{s(!1)},[]);return(0,a.d4)(()=>{if(r){m("accept_gift_modal_framing");let e=h("accept_gift_modal_framing");e&&p("author_focused"===e?"author_focused":"pub_focused")}},[r,m,h]),{open:g,modal:(0,l.tZ)(en,{isOpen:r,onClose:v,pub:t,giftCard:d,abTestingId:i,variant:u})}}({pub:Z,abTestingId:T,startingOpen:!!(0,R.x)("accepting_gift"),giftCard:x}),G=(0,eT.HD)({pub:Z}),K=(0,eT.kb)({pub:Z}),Q=K&&"magaziney"===_.home_hero;(0,a.d4)(()=>{(0,R.x)("accepting_gift")?((0,I.iO)("accepting_gift"),(0,I.iO)("senderToken"),V(x)):x&&Z&&(x.expired?V(x):J())},[]);let $=M[0],ee=(0,a.Ye)(()=>{var e;return null==g?void 0:null===(e=g.topPosts)||void 0===e?void 0:e.filter(e=>!$||e.id!==$.id)},[$,null==g?void 0:g.topPosts]);if(!g)return(0,l.tZ)(L.tu,{alignItems:"center",className:v()(iH.container,iH["container--empty"]),justifyContent:"center",children:(0,l.tZ)("div",{className:"more-loader"})});if(0===M.length)return(0,l.tZ)(iJ,{});let et=!(null===(i=M[0])||void 0===i?void 0:i.cover_image),{numPostsInHero:ei,effectiveHero:er}=iY({breakpoint:A,firstPostMissingImage:et,heroVariant:_.home_hero,numTotalPosts:M.length,pub:Z,replaceTopPostsWithLatestInHero:Q}),el="podcast"===er,ea=["newspaper","podcast"].includes(er)&&"list"===_.home_posts,es=0===ei||M.length>=ei||"custom"===_.home_posts,ed=es?M.slice(ei):M,ec=!!(es&&_.home_show_top_posts&&ee&&"magaziney"!==er&&!D),eu=es&&M.length>ei;return"custom"===_.home_posts&&(null==g?void 0:null===(s=g.contentBlockData.contentBlocks[0])||void 0===s?void 0:s.block_type)==="subscribe"&&(eu=!1),["feature-media","podcast"].includes(er)&&!ec&&(eu=!1),(G||K)&&(eu=!1),(0,l.tZ)(eh.hV,{authorPagesEnabled:!!W.getConfigFor("enable_author_pages"),cropGravity:H,highlightByline:!!W.getConfigFor("post_preview_highlight_byline"),pub:Z,showSectionOrTag:(0,eT.kb)({pub:Z}),user:C,utm:k,children:(0,l.tZ)(X.p.Provider,{value:{contributors:g.contentBlockData.contributors,freeSignup:p,freeSignupEmail:m,homepageLinks:g.homepageLinks,latestPodcastPosts:g.contentBlockData.latestPodcastPosts,latestPostByContributorId:g.contentBlockData.latestPostByContributorId,latestPostFromSections:g.contentBlockData.latestPostFromSections,numRecommendations:g.numRecommendations,recommendations:g.recommendations,topPosts:g.topPosts},children:(0,l.BX)(y.h,{children:[!G&&(null==E?void 0:E.liveStream.id)&&(0,iU.Z)(E.liveStream.started_streaming_at).isBefore((0,iU.Z)().subtract(1,"minute"))?E.liveStreamInformation.desktopPlaybackUrl&&"autoPlay"===U("live_stream_homepage_style")?(0,l.tZ)(L.tu,{alignItems:"center",paddingTop:24,children:(0,l.tZ)(e4.xu,{className:iH.liveStreamContainer,position:"relative",children:(0,l.tZ)(eo.Y,{activeLiveStream:E,fromPub:!0})})}):(0,l.tZ)(iD.Z,{activeLiveStream:E}):null,j,Y,(0,l.BX)(L.tu,{className:iH.container,paddingTop:el||G?0:16,children:[(0,l.tZ)(L.tu,{paddingTop:G?F?56:28:!es&&D?24:0,children:(0,l.BX)(L.tu,{children:[es&&(G?(0,l.tZ)(eM.QI,{pub:Z,showPubPins:!0,showSectionPins:!1,children:(0,l.tZ)(ev,{posts:M.slice(0,ei)})}):"feature-media"===er?(0,l.tZ)(L.tu,{paddingBottom:D||ec?24:40,paddingTop:D?16:8,children:(0,l.tZ)(iO,{posts:M,pub:Z,user:C,utm:k})}):(0,l.tZ)(eM.QI,{pub:Z,showPubPins:!0,showSectionPins:!1,children:(0,l.tZ)(eJ,{bodyVariant:_.home_posts,firstPostMissingImage:et,hasMiniPostsRowUnderneath:ec,heroAlignment:_.home_hero_alignment,isMobile:D,posts:M.slice(0,ei),replaceTopPostsWithLatest:Q,showPodcastLinks:_.home_hero_show_podcast_links,topPosts:ee,variant:er})})),ec&&ee&&!G&&(0,l.BX)(l.HY,{children:[!["feature-media","podcast"].includes(er)&&(0,l.tZ)(tz.f,{numColumns:ea?3:4,paddingBottom:20,paddingTop:20}),(0,l.tZ)(iF,{columns:ea?3:4,posts:ee,pub:Z})]})]})}),(0,l.BX)(L.tu,{className:iH.bodyContainer,id:"modular-home-posts",children:[eu&&(0,l.tZ)(tz.f,{numColumns:ea?3:4,paddingTop:ec?8:void 0}),(0,l.BX)("div",{id:"home-body",style:{scrollMarginTop:48,paddingTop:K?D?40:64:void 0},children:["custom"!==_.home_posts&&(0,l.tZ)(tC,(0,o._)((0,n._)({},N),{bodyPostGroups:u,hasEmptyGroupOptions:e.hasEmptyGroupOptions,hideImagesFromList:_.hide_images_from_list,posts:ed,postsByGroupId:g.postsByGroupId,pub:Z,showSiteMap:w,source:"".concat(_.home_hero,"-").concat(_.home_posts,"-home"),user:C,variant:_.home_posts})),"custom"===_.home_posts&&(0,l.tZ)(iE,{contentBlocks:g.contentBlockData.contentBlocks,postsBySectionId:g.contentBlockData.postsBySectionId,postsByTagId:g.contentBlockData.postsByTagId,postsForContentBlockPins:g.contentBlockData.postsForContentBlockPins,recentPosts:ed,showEmptyStates:f})]})]})]})]})})})}),iJ=()=>{let{iString:e}=(0,k.M1)();return(0,l.tZ)(L.tu,{alignItems:"center",className:v()(iH.container,iH["container--empty"]),justifyContent:"center",children:e("Coming Soon")})},iY=e=>{let{breakpoint:t,heroVariant:i,firstPostMissingImage:n,numTotalPosts:o,pub:r,replaceTopPostsWithLatestInHero:l}=e,a=ek.zM[i].postCount[t],s=i;return n&&["magaziney","magazine-5"].includes(i)&&["desktop","tablet"].includes(t)&&(a+=2),l&&"magaziney"===i&&(a+="tablet"===t?3:5),o<a&&(s="newspaper",a=1),(0,eT.HD)({pub:r})&&(a=11,"tablet"===t&&(a-=2)),{numPostsInHero:a,effectiveHero:s}};var iV=i(95050),ij=i(75801);let iG=e=>{var t,{blurbs:i,freeSignup:s,freeSignupEmail:c,hasEmptyGroupOptions:m,hide_intro_popup:g,homepageData:v,notify_user:Z,pub:f,referralCode:b,showEmptyStates:w,showWelcome:y,user:_,postTags:C,launchWelcomePage:B,skipIntroPopupRender:k}=e,x=(0,r._)(e,["blurbs","freeSignup","freeSignupEmail","hasEmptyGroupOptions","hide_intro_popup","homepageData","notify_user","pub","referralCode","showEmptyStates","showWelcome","user","postTags","launchWelcomePage","skipIntroPopupRender"]);let S=(0,h.qU)({preloadedHomepageData:v});(0,a.d4)(()=>{Z&&"undefined"!=typeof window&&(0,p.ZP)(Z)},[Z]);let P=!!((null==S?void 0:S.newPosts)&&(null==S?void 0:S.newPosts.length)>0),I=(0,a.Ye)(()=>{var e,t;return d()(null===(t=f.theme)||void 0===t?void 0:null===(e=t.body_post_groups)||void 0===e?void 0:e.map(e=>{var t,i,n,o,r;return e.tag_id?null!==(i=null!==(t=e.post_tag)&&void 0!==t?t:null==C?void 0:C.find(t=>t.id===e.tag_id))&&void 0!==i?i:null:e.section_id&&null!==(r=null!==(o=e.section)&&void 0!==o?o:null===(n=f.sections)||void 0===n?void 0:n.find(t=>t.id===e.section_id))&&void 0!==r?r:null}))},[C,f.sections,null===(t=f.theme)||void 0===t?void 0:t.body_post_groups]);return f.theme?(0,l.BX)("div",{className:"home-page home-page--modular",children:[(0,l.tZ)(iV.PageMetaData,{isHomepage:!0,pub:f}),(0,l.tZ)(iW,(0,o._)((0,n._)({},u()(x,"matches")),{bodyPostGroups:I,freeSignup:s,freeSignupEmail:c,hasEmptyGroupOptions:m,homepageData:S,pub:f,showEmptyStates:!!w,showSiteMap:P,theme:f.theme,user:_})),k?null:(0,l.tZ)(ij.L,{blurbs:i,freeSignup:s,freeSignupEmail:c,hide_intro_popup:g,launchWelcomePage:B,pub:f,referralCode:b,showWelcome:y,user:_})]}):null}},38756:function(e,t,i){i.d(t,{A:()=>s});var n=i(16584),o=i(94184),r=i.n(o),l=i(19081);let a={container:"container-k4OAt1","full-width":"full-width-zjiPxJ",fullWidth:"full-width-zjiPxJ","full-width-with-sidebar":"full-width-with-sidebar-epMpKX",fullWidthWithSidebar:"full-width-with-sidebar-epMpKX","show-below":"show-below-NE36A8",showBelow:"show-below-NE36A8","full-width-with-border-and-sidebar":"full-width-with-border-and-sidebar-aSAAEB",fullWidthWithBorderAndSidebar:"full-width-with-border-and-sidebar-aSAAEB","vertical-divider":"vertical-divider-Z42nad",verticalDivider:"vertical-divider-Z42nad","three-column-width":"three-column-width-gNtKSr",threeColumnWidth:"three-column-width-gNtKSr","three-column-width-with-sidebar":"three-column-width-with-sidebar-cRFEVE",threeColumnWidthWithSidebar:"three-column-width-with-sidebar-cRFEVE","two-column-width":"two-column-width-f6IAWT",twoColumnWidth:"two-column-width-f6IAWT","one-column-two-column":"one-column-two-column-dAuMkN",oneColumnTwoColumn:"one-column-two-column-dAuMkN","two-column-one-column-one-column":"two-column-one-column-one-column-GnEn49",twoColumnOneColumnOneColumn:"two-column-one-column-one-column-GnEn49","one-column-two-column-one-column":"one-column-two-column-one-column-g_nrA3",oneColumnTwoColumnOneColumn:"one-column-two-column-one-column-g_nrA3","one-column-one-column-two-column":"one-column-one-column-two-column-e79cH1",oneColumnOneColumnTwoColumn:"one-column-one-column-two-column-e79cH1"},s=e=>{let{children:t,hideVerticalDividers:i,showContentBelowOnMobile:o,stretchVertically:s,variant:d}=e,c=i?void 0:"detail-themed";return"none"===d?(0,n.tZ)("div",{children:t}):(0,n.tZ)("div",{style:s?{flexGrow:1,display:"flex",alignItems:"stretch"}:void 0,children:(0,n.BX)("div",{className:r()(a.container,a[d],{[a["show-below"]]:o}),children:[t,"full-width-with-border-and-sidebar"===d&&(0,n.tZ)(l.hs,{borderRight:c,className:a["vertical-divider"]}),["two-column-one-column-one-column","one-column-two-column-one-column","one-column-one-column-two-column"].includes(d)&&(0,n.BX)(n.HY,{children:[(0,n.tZ)(l.hs,{borderRight:c,className:a["vertical-divider"]}),(0,n.tZ)(l.hs,{borderRight:c,className:a["vertical-divider"]})]}),"one-column-two-column"===d&&(0,n.tZ)(l.hs,{borderRight:c,className:a["vertical-divider"]})]})})}},20435:function(e,t,i){i.d(t,{s:()=>d});var n=i(16584),o=i(94184),r=i.n(o),l=i(98422),a=i(71068);let s={outerContainer:"outerContainer-p1amnX",container:"container-uYF5Qm",column:"column-O67nhJ",column1:"column1-pd0Ws0",column2:"column2-jVKqxY",column3:"column3-Brgr2S",column4:"column4-Z0B2N_"},d=e=>{let{leftContent:t,mainContent:i,rightContent:o,stretchToFullWidth:d}=e,{isMobile:c,isTablet:u,isDesktop:p}=(0,l.v9)(),h=2;return d&&(p?h=4-+!!t-+!!o:u&&(h=3-(t||o?1:0))),c&&(h=1),(0,n.tZ)("div",{className:s.outerContainer,children:(0,n.BX)("div",{className:s.container,children:[t&&(0,n.tZ)(a.xu,{className:r()(s.column,s.column1),paddingTop:8,children:t}),(0,n.tZ)(a.xu,{className:r()(s.column,{[s.column2]:2===h,[s.column3]:3===h,[s.column4]:4===h}),children:i}),o&&(0,n.tZ)(a.xu,{className:r()(s.column,s.column1),paddingTop:8,children:o})]})})}},23372:function(e,t,i){i.d(t,{Z:()=>s});var n=i(16584),o=i(19081),r=i(58175),l=i(63651),a=i(47929);let s=e=>{let{activeLiveStream:t}=e;return(0,n.tZ)(o.gq,{className:"liveStreamBanner-Petbnm",justifyContent:"center",children:(0,n.tZ)("a",{href:(0,l.bHR)({liveStreamId:t.liveStream.id,utm_source:a.b3.web,utm_campaign:a.VX.liveStreamPubBanner}),style:{textDecoration:"none"},children:(0,n.BX)(o.gq,{alignItems:"center",gap:8,padding:12,paddingTop:{desktop:12,mobile:16},children:[(0,n.tZ)("div",{className:"liveBadge-f3ITqf",children:(0,n.tZ)(r.xv.B5,{color:"white",translated:!0,weight:"semibold",children:"Live"})}),(0,n.BX)(r.xv.B3,{color:"white",translated:!0,weight:"semibold",children:[(0,n.tZ)("span",{style:{textTransform:"uppercase"},children:"Live Video"}),": ",I18N.p(t.liveStream.title)]})]})})})}},10743:function(e,t,i){i.d(t,{x:()=>a});var n=i(16584),o=i(19081);let r=e=>{let{children:t,paddingTop:i,paddingBottom:r}=e;return(0,n.tZ)("div",{className:"container-FJSDzM",children:(0,n.tZ)(o.tu,{paddingBottom:r,paddingTop:i,paddingX:16,children:t})})};var l=i(98422);let a=e=>{let{children:t}=e,{isMobile:i}=(0,l.v9)();return(0,n.tZ)(o.tu,{bg:"secondary",className:"container-_aNEvf",paddingY:i?32:64,children:(0,n.tZ)(r,{children:t})})}},74805:function(e,t,i){i.d(t,{a:()=>u});var n=i(16584),o=i(20888),r=i(38756),l=i(10743),a=i(11353),s=i(71068),d=i(19081),c=i(58175);let u=e=>{let{columns:t,description:i,imageUrl:u,name:p,post:h,pub:m,section:g,showPodcastLinks:v,user:Z}=e,f=(0,s.oB)({radius:"lg",shadow:"xl"});return(0,n.tZ)(l.x,{children:(0,n.tZ)(r.A,{variant:4===t?"full-width-with-sidebar":"three-column-width",children:(0,n.BX)(d.gq,{alignItems:"center",gap:40,paddingX:8,children:[u&&(0,n.tZ)(o.e,{className:f,imageIsFixedWidth:!0,maxWidth:250,src:u,useRetinaSizing:!0}),(0,n.BX)(d.tu,{gap:16,children:[(0,n.BX)(d.tu,{gap:8,children:[(0,n.tZ)(c.xv.H2,{color:"pub-primary-text",font:"pub-headings",children:p}),(0,n.tZ)(c.xv.B2,{color:"pub-secondary-text",children:i})]}),v&&(0,n.tZ)(a.h,{post:h,pub:m,section:g,user:Z})]})]})})})}},70647:function(e,t,i){i.d(t,{p:()=>p});var n=i(16584),o=i(20888),r=i(98422),l=i(38756),a=i(10743),s=i(11353),d=i(71068),c=i(19081),u=i(58175);let p=e=>{let{description:t,imageUrl:i,name:p,post:h,pub:m,section:g,showPodcastLinks:v,user:Z}=e,{isMobile:f}=(0,r.v9)(),b=(0,d.oB)({radius:"sm",shadow:"lg"});return(0,n.tZ)(a.x,{children:(0,n.tZ)(l.A,{variant:"two-column-width",children:(0,n.BX)(c.tu,{alignItems:"center",gap:24,paddingX:8*!f,children:[i&&(0,n.tZ)(o.e,{className:b,imageIsFixedWidth:!0,maxWidth:100,src:i,useRetinaSizing:!0}),(0,n.BX)(c.tu,{gap:8,children:[(0,n.tZ)(u.xv.H2,{align:"center",color:"pub-primary-text",font:"pub-headings",children:p}),(0,n.tZ)(u.xv.B2,{align:"center",color:"pub-secondary-text",children:t})]}),v&&(0,n.tZ)(s.h,{align:"center",post:h,pub:m,section:g,user:Z})]})})})}},51213:function(e,t,i){i.d(t,{W:()=>c});var n=i(16584),o=i(20888),r=i(10743),l=i(11353),a=i(71068),s=i(19081),d=i(58175);let c=e=>{let{description:t,imageUrl:i,name:c,post:u,pub:p,section:h,showPodcastLinks:m,user:g}=e,v=(0,a.oB)({radius:"lg",shadow:"xl",width:160});return(0,n.tZ)(r.x,{children:(0,n.BX)(s.tu,{alignItems:"center",gap:24,children:[i&&(0,n.tZ)("div",{children:(0,n.tZ)(o.e,{className:v,imageIsFixedWidth:!0,maxWidth:160,src:i,useRetinaSizing:!0})}),(0,n.BX)(s.tu,{gap:16,children:[(0,n.BX)(s.tu,{gap:8,children:[(0,n.tZ)(d.xv.H2,{align:"center",color:"pub-primary-text",font:"pub-headings",children:c}),(0,n.tZ)(d.xv.B2,{align:"center",color:"pub-secondary-text",children:t})]}),m&&(0,n.tZ)(l.h,{limit:2,post:u,pub:p,section:h,stretch:!0,user:g})]})]})})}},11353:function(e,t,i){i.d(t,{h:()=>C});var n=i(7409),o=i(99282),r=i(98848),l=i(16584),a=i(98661),s=i(30396),d=i(86374),c=i(347),u=i(49995),p=i(95441),h=i(68833),m=i(55480),g=i(98914),v=i(15771),Z=i(19081),f=i(84747),b=i(74571),w=i(91668),y=i(43905),_=i(60308);let C=e=>{let{align:t="left",limit:i=4,post:n,pub:o,section:r,stretch:a,user:v}=e,{iString:C}=(0,p.M1)(),{feedUrl:k,isLoaded:x}=(0,b.fn)({pub:o,section:r,user:v}),[S,P]=(0,s.eJ)(!1),I=n?i-1:i,X=(0,y.a9)({pub:o,section:r,spotifySettings:(0,m.pp)({pub:o,section:null!=r?r:null})}),T=(0,y.bf)({feedUrl:k,isApple:(0,g.V5)()||(0,g.L)(),isMobile:!1,showLinks:X,userIsSubscribed:!!(null==v?void 0:v.is_subscribed)}),N=T.length+ +!!k>I;(0,s.d4)(()=>{x&&P(!0)},[x]);let L=()=>{(0,h.j)(h.FP.PODCAST_FEED_URL_COPIED,{feedUrl:k}),(0,u.ZP)("RSS feed URL copied"),(0,g.vQ)(k)},q=e=>{let{label:t,url:i}=e;return()=>{(0,h.j)(h.FP.PODCAST_APP_LINK_CLICK,{appName:t,feedUrl:k,url:i}),window.open(i,"_blank")}};return(0,l.tZ)(c.h,{children:(0,l.BX)(Z.gq,{gap:8,justifyContent:"center"===t?"center":void 0,opacity:100*!!S,wrap:"wrap",children:[n&&(0,l.BX)(B,{stretch:a,onClick:q({label:"Substack",url:(0,_.K8_)(o.subdomain,n.slug,{redirect:"app-marketing",source:"podcast-player-link"})}),children:[(0,l.tZ)(w.S,{platformKey:"substack"}),"Substack"]}),T.slice(0,I).map(e=>{let{label:t,platform:i,url:n}=e;return(0,l.BX)(B,{stretch:a,onClick:q({label:t,url:n}),children:[(0,l.tZ)(w.S,{platformKey:i}),t]})}),k&&!N&&(0,l.BX)(B,{stretch:a,onClick:L,children:[(0,l.tZ)(w.S,{platformKey:"rss"}),C("RSS feed")]}),N&&(0,l.BX)(f.M,{trigger:(0,l.BX)(B,{children:[C("More"),(0,l.tZ)(d.Z,{})]}),children:[T.slice(I).map(e=>{let{label:t,platform:i,url:n}=e;return(0,l.tZ)(f.u,{onClick:q({label:t,url:n}),children:(0,l.BX)(Z.gq,{alignItems:"center",gap:8,children:[(0,l.tZ)(w.S,{platformKey:i}),t]})})}),(0,l.tZ)(f.u,{onClick:L,children:(0,l.BX)(Z.gq,{alignItems:"center",gap:8,children:[(0,l.tZ)(w.S,{platformKey:"rss"}),C("RSS feed")]})})]})]})})},B=(0,a.forwardRef)((e,t)=>{var{children:i,stretch:a,onClick:s}=e,d=(0,r._)(e,["children","stretch","onClick"]);return(0,l.tZ)(v.zx,(0,o._)((0,n._)({ref:t},d,a?{flex:"grow",justifyContent:"center"}:null),{className:"podcast-player-button",priority:"secondary",onClick:s,children:i}))})},66500:function(e,t,i){i.d(t,{S:()=>c});var n=i(16584),o=i(38464),r=i(98961),l=i(19081),a=i(58175);let s={audio:o.Z,video:r.Z},d={audio:"Audio",video:"Video"},c=e=>{let{medium:t}=e,i=s[t];return(0,n.BX)(l.gq,{alignItems:"center",bg:"secondary",color:"pub-secondary-text",gap:4,paddingX:6,radius:"sm",children:[(0,n.tZ)(i,{size:12}),(0,n.tZ)(a.xv,{font:"text",lineHeight:20,size:12,weight:"semibold",children:d[t]})]})}},29422:function(e,t,i){i.d(t,{b:()=>u});var n=i(16584),o=i(98661),r=i(94184),l=i.n(r),a=i(33870),s=i(19081),d=i(17564);let c=(0,o.forwardRef)((e,t)=>{let{animated:i=!0,variant:o}=e;return["grid","grid-groups"].includes(o)?(0,n.BX)(s.tu,{ref:t,gap:12,children:[(0,n.tZ)(d.S,{animated:i,aspectRatio:a.Hw}),(0,n.BX)(s.tu,{gap:8,children:[(0,n.tZ)(d.S,{animated:i,height:24,width:"70%"}),(0,n.tZ)(d.S,{animated:i,height:20,width:"90%"}),(0,n.tZ)(d.S,{animated:i,height:20,width:"50%"})]})]}):"list"===o?(0,n.BX)(s.tu,{ref:t,gap:8,children:[(0,n.tZ)(d.S,{animated:i,height:28,width:"60%"}),(0,n.tZ)(d.S,{animated:i,height:24,width:"80%"}),(0,n.tZ)(d.S,{animated:i,height:20,width:"20%"})]}):null}),u=(0,o.forwardRef)((e,t)=>{let{animated:i=!0,postCount:o,variant:r}=e;return(0,n.tZ)("div",{ref:t,className:l()({"loadingContainerGrid-ydRZVl":["grid","grid-groups"].includes(r),"loadingContainerList-gZ_Mu2":"list"===r}),children:Array.from(Array(o)).map(()=>(0,n.tZ)(c,{animated:i,variant:r}))})})},45262:function(e,t,i){i.d(t,{B:()=>d});var n=i(16584),o=i(2564),r=i(95441),l=i(98422),a=i(15771),s=i(19081);let d=e=>{let{url:t}=e,{isMobile:i}=(0,l.v9)(),{iString:d}=(0,r.M1)();return(0,n.tZ)(s.gq,{paddingTop:16,paddingX:8*!i,children:(0,n.tZ)(a.zx,{"data-testid":"archive-view-all",href:t,priority:"secondary",trailing:(0,n.tZ)(o.Z,{size:20}),children:d("See all")})})}},15400:function(e,t,i){i.d(t,{B:()=>h});var n=i(7409),o=i(99282),r=i(98848),l=i(16584),a=i(94184),s=i.n(a),d=i(38756),c=i(76787),u=i(19081);let p={container:"container-O1YsI6",divider:"divider-QOeHtM",dividerVertical:"dividerVertical-pPOkXS","long-divider":"long-divider-CDn5cl",longDivider:"long-divider-CDn5cl","two-small-one-large":"two-small-one-large-QUGVE5",twoSmallOneLarge:"two-small-one-large-QUGVE5","two-column-grid":"two-column-grid-h3GUav",twoColumnGrid:"two-column-grid-h3GUav","three-column-grid":"three-column-grid-tc6QOt",threeColumnGrid:"three-column-grid-tc6QOt","four-column-grid":"four-column-grid-IPXx88",fourColumnGrid:"four-column-grid-IPXx88","one-column-list":"one-column-list-YqnT5h",oneColumnList:"one-column-list-YqnT5h","one-column-list-flex":"one-column-list-flex-kqNmJm",oneColumnListFlex:"one-column-list-flex-kqNmJm","large-listing-listing-column":"large-listing-listing-column-feCdFL",largeListingListingColumn:"large-listing-listing-column-feCdFL","square-square-column":"square-square-column-b5mOve",squareSquareColumn:"square-square-column-b5mOve","two-column-list":"two-column-list-BLHtzo",twoColumnList:"two-column-list-BLHtzo","two-column-list--with-dividers":"two-column-list--with-dividers-cHfR0M",twoColumnListWithDividers:"two-column-list--with-dividers-cHfR0M","five-up":"five-up-H_hegz",fiveUp:"five-up-H_hegz","vertical-divider":"vertical-divider-GcHWq8",verticalDivider:"vertical-divider-GcHWq8","mini-row":"mini-row-KFztmA",miniRow:"mini-row-KFztmA","three-column-mini-row":"three-column-mini-row-ep3LFs",threeColumnMiniRow:"three-column-mini-row-ep3LFs"},h=e=>{var t;let{flex:i,hideImages:o,hideHorizontalDividers:r,hideVerticalDividers:a,linkToComments:d,posts:h,source:f,variant:b,onClickPost:w}=e;if("two-three-two"===b)return(0,l.tZ)(g,(0,n._)({},e));if("two-small-three-medium"===b)return(0,l.tZ)(m,(0,n._)({},e));if(["mini-row","three-column-mini-row"].includes(b))return(0,l.tZ)(v,(0,n._)({},e));let y=a?void 0:"detail-themed",_=r?void 0:"detail-themed";return(0,l.tZ)("div",{style:"grow"===i?{flexGrow:1,display:"flex",alignItems:"stretch"}:void 0,children:(0,l.tZ)("div",{className:s()(p.container,p[b],{[null!==(t=p["two-column-list--with-dividers"])&&void 0!==t?t:""]:"two-column-list"===b&&!r}),children:h.map((e,t)=>(0,l.BX)(l.HY,{children:[t>0&&["one-column-list","two-column-list","two-column-grid","three-column-grid","four-column-grid","large-listing-listing-column"].includes(b)&&(0,l.tZ)(u.gq,{borderBottom:_,className:p.divider}),t%2==0&&t>0&&["two-column-grid"].includes(b)&&(0,l.tZ)(u.gq,{borderBottom:_,className:p["long-divider"]}),t%4==0&&t>0&&["four-column-grid"].includes(b)&&(0,l.tZ)(u.gq,{borderBottom:_,className:p["long-divider"]}),(0,l.tZ)(c.G,{hideImage:o,linkToComments:d,post:e,testid:["large-listing-listing-column","two-small-one-large"].includes(b)?"magazine-spot-".concat(t+1):void 0,variant:Z(b,t),onClick:w&&f?i=>{let{event:n}=i;w({event:n,post:e,index:t,source:f})}:void 0}),"five-up"===b&&t===h.length-1&&(0,l.BX)(l.HY,{children:[(0,l.tZ)(u.gq,{borderBottom:_,className:p.divider}),(0,l.tZ)(u.gq,{borderBottom:_,className:p.divider}),(0,l.tZ)(u.gq,{borderRight:y,className:p["vertical-divider"]}),(0,l.tZ)(u.gq,{borderRight:y,className:p["vertical-divider"]})]}),"two-small-one-large"===b&&t===h.length-1&&(0,l.BX)(l.HY,{children:[(0,l.tZ)(u.gq,{borderBottom:_,className:p.divider}),(0,l.tZ)(u.gq,{borderRight:y,className:p["vertical-divider"]})]}),"square-square-column"===b&&1===t&&(0,l.tZ)(u.gq,{borderBottom:_,className:p.divider})]}))})})},m=e=>{let{posts:t,hideVerticalDividers:i}=e,a=(0,r._)(e,["posts","hideVerticalDividers"]),s=t.slice(0,3),c=t.slice(3);return(0,l.BX)(d.A,{hideVerticalDividers:i,stretchVertically:!0,variant:"one-column-two-column",children:[(0,l.tZ)(h,(0,o._)((0,n._)({},a),{flex:"grow",hideImages:!0,posts:s,variant:"large-listing-listing-column"})),(0,l.tZ)(h,(0,o._)((0,n._)({},a),{flex:"grow",hideImages:!1,posts:c,variant:"square-square-column"}))]})},g=e=>{let{hideVerticalDividers:t,posts:i}=e,a=(0,r._)(e,["hideVerticalDividers","posts"]),s=i.slice(0,3),c=i.slice(3,5),u=i.slice(5);return(0,l.BX)(d.A,{hideVerticalDividers:t,variant:"one-column-two-column-one-column",children:[(0,l.tZ)(h,(0,o._)((0,n._)({},a),{flex:"grow",hideImages:!0,posts:s,variant:"large-listing-listing-column"})),(0,l.tZ)(h,(0,o._)((0,n._)({},a),{flex:"grow",hideImages:!1,posts:c,variant:"square-square-column"})),(0,l.tZ)(h,(0,o._)((0,n._)({},a),{flex:"grow",hideImages:!1,posts:u,variant:"square-square-column"}))]})},v=e=>{let{linkToComments:t,posts:i,source:n,variant:o,onClickPost:r}=e;return(0,l.tZ)("div",{children:(0,l.tZ)("div",{className:s()(p.container,p[o]),children:i.slice(0,"mini-row"===o?4:3).map((e,i)=>(0,l.BX)(l.HY,{children:[i>0&&(0,l.tZ)(u.gq,{alignItems:"center",className:s()(p.divider,p.dividerVertical),paddingY:8,children:(0,l.tZ)(u.gq,{borderLeft:"detail-themed"})}),(0,l.tZ)(c.G,{linkToComments:t,post:e,variant:Z(o,i),onClick:r&&n?t=>{let{event:o}=t;r({event:o,post:e,index:i,source:n})}:void 0})]}))})})},Z=(e,t)=>"square-square-column"===e?"square":"large-listing-listing-column"===e?0===t?"large":"listing":"two-small-one-large"===e?0===t?"large":"square":"two-column-list"===e?"listing":"five-up"===e?0===t?"large":"square":["mini-row","three-column-mini-row","one-column-list","one-column-list-flex"].includes(e)?"mini":"square"},15612:function(e,t,i){i.d(t,{t:()=>j});var n=i(7409),o=i(99282),r=i(16584),l=i(30396),a=i(347),s=i(17781),d=i(49995),c=i(55480),u=i(33578),p=i(20888),h=i(46234),m=i(98422),g=i(66500),v=i(19081),Z=i(58175),f=i(6070),b=i(47929);let w={logo:"logo-vqxCjr"},y=e=>{let{description:t,logoUrl:i,name:n,pub:o,section:l,user:a}=e,{isMobile:s}=(0,m.v9)(),d=(0,f.VL)({pub:o,includeTheRampart:!0});return(0,r.BX)(v.gq,{alignItems:"center",direction:s?"column":"row",gap:32,paddingBottom:24,paddingTop:16,paddingX:8*!s,children:[i&&(0,r.tZ)(p.e,{alt:n,className:w.logo,imageIsFixedWidth:!0,maxWidth:300,src:i,useRetinaSizing:!0}),(0,r.BX)(v.tu,{gap:16,children:[(0,r.BX)(v.tu,{children:[d&&(null==a?void 0:a.is_subscribed)&&(0,f.hx)({sectionId:null==l?void 0:l.id})&&(0,r.tZ)(Z.xv.Meta,{color:"accent",paddingBottom:8,children:"+ Member-Only"}),(0,r.tZ)(Z.xv.H1,{color:"pub-primary-text",font:"pub-headings",children:n}),d&&(0,r.tZ)(v.gq,{alignItems:"center",gap:8,paddingBottom:12,paddingTop:8,children:(0,f.rM)({sectionId:null==l?void 0:l.id}).map(e=>(0,r.tZ)(g.S,{medium:e}))}),t&&(0,r.tZ)(v.tu,{gap:8,children:t.split("\n").map(e=>(0,r.tZ)(Z.xv.B3,{color:"pub-secondary-text",children:e}))})]}),d&&(0,r.tZ)(h.B,{pub:o,section:l,trackingSource:b.b3.sectionPage,variant:(null==a?void 0:a.is_subscribed)?"default":"member-only"})]})]})};var _=i(95441),C=i(74571),B=i(85923),k=i(43905);let x=e=>{let{firstPodcastPost:t,pub:i,user:n,section:o=null}=e,{iString:l}=(0,_.M1)(),{isMobile:a}=(0,m.v9)(),{feedUrl:s}=(0,C.fn)({pub:i,user:n,section:o}),d=(0,k.a9)({pub:i,section:o,spotifySettings:(0,c.pp)({pub:i,section:null!=o?o:null})});return(0,r.tZ)(v.hs,{paddingX:8*!a,children:(0,r.tZ)(B.y,{description:l("Add this podcast to your player of choice:"),feedUrl:s,post:null!=t?t:null,pub:i,section:o,showLinks:d,user:n})})};var S=i(63391),P=i(95050),I=i(15400),X=i(30733),T=i(84864);let N=e=>{var t,i,n,o;let{newPosts:l,pinnedPosts:s,podcastSettings:d,pub:c,search:p,section:h,sort:g,user:v,utm:Z,welcomeAndShareElement:f}=e,{isMobile:b}=(0,m.v9)(),w=(0,T.sectionIsSpecificallyMarkedAsNewsletter)({pub:c,section:h});return(0,r.tZ)(a.h,{children:(0,r.BX)(X.N,{columns:3,children:[(0,r.tZ)(P.PageMetaData,{isPodcast:!0,pub:c,section:h}),(0,r.tZ)(y,{description:null!==(t=d.description)&&void 0!==t?t:"",logoUrl:(null==v?void 0:v.is_subscribed)&&null!==(i=d.paidEpisodeArtUrl)&&void 0!==i?i:d.artUrl,name:null!==(n=d.title)&&void 0!==n?n:"",pub:c,section:h,user:v}),!b&&(0,r.tZ)(S.f,{numColumns:4}),(0,r.BX)("div",{className:"bodyContainer-P2vZHh",children:[(0,r.tZ)(u.O,{isPodcast:!w,maxPosts:7,newPosts:l,pinnedPosts:s,pub:c,search:p,sectionId:null==h?void 0:h.id,sort:g,user:v,utm:Z,variant:"list",children:e=>{var t;let{posts:i,linkToComments:n,onClickPost:o}=e;return(0,r.tZ)(I.B,{hideImages:null===(t=c.theme)||void 0===t?void 0:t.hide_images_from_list,linkToComments:n,posts:i,variant:"two-column-list",onClickPost:o})}}),(0,r.tZ)(x,{firstPodcastPost:null!==(o=null==l?void 0:l.filter(e=>"podcast"===e.type)[0])&&void 0!==o?o:null,pub:c,section:h,user:v})]}),f]})})};var L=i(94184),q=i.n(L),M=i(38756),E=i(20435),z=i(71068);let R=e=>{var t;let{align:i,columns:n,description:o,imageUrl:l,name:a,pub:s}=e,{isMobile:d}=(0,m.v9)(),c=(0,z.oB)({radius:"md",width:80}),u=(0,r.BX)(v.tu,{paddingTop:16,children:[(0,r.BX)(v.tu,{alignItems:"center"===i?"center":void 0,gap:12,paddingX:8*!d,children:[l&&(0,r.tZ)(p.e,{className:c,imageIsFixedWidth:!0,maxWidth:80,src:l,useRetinaSizing:!0}),(0,r.tZ)(Z.xv.H1,{className:q()({[(t="pillarHeader-Bn88EX",void 0!==t)?t:""]:(0,f.kb)({pub:s})}),color:"pub-primary-text",font:"pub-headings",children:a}),(0,r.tZ)(Z.xv.B2,{align:i,color:"pub-secondary-text",children:o})]}),(0,r.tZ)(S.f,{paddingBottom:0,paddingTop:32})]});return 2===n?(0,r.tZ)(E.s,{mainContent:u}):(0,r.tZ)(M.A,{variant:"three-column-width",children:u})};var A=i(74805),O=i(70647),D=i(51213),F=i(26176),U=i(63651);let H=e=>{var t;let{columns:i,podcastSettings:n,firstPost:o,heroAlignment:l,pub:a,section:s,showPodcastLinks:d,user:c,utm:u,variant:p}=e,{isMobile:h}=(0,m.v9)(),g=null!==(t=n?n.description:null==s?void 0:s.description)&&void 0!==t?t:"",Z=n?n.artUrl:null==s?void 0:s.logo_url,f=n?n.title:null==s?void 0:s.name,b=(0,U.lsY)(Z);return"feature-media"===p&&2!==i?o?(0,r.tZ)(v.tu,{paddingTop:h?16:24,children:(0,r.tZ)(F.Y,{columns:i,hideLogo:!Z||b,isPodcast:!!n,post:o,pub:a,section:s,showPodcastLinks:d,user:null!=c?c:null,utm:u})}):null:"podcast"===p&&h?(0,r.tZ)(D.W,{description:g,imageUrl:Z,name:f,post:o,pub:a,section:null!=s?s:null,showPodcastLinks:d,user:c}):"podcast"===p&&"center"===l?(0,r.tZ)(O.p,{description:g,imageUrl:Z,name:f,post:o,pub:a,section:null!=s?s:null,showPodcastLinks:d,user:c}):"podcast"===p&&n?(0,r.tZ)(A.a,{columns:Math.max(i,3),description:g,imageUrl:Z,name:f,post:o,pub:a,section:null!=s?s:null,showPodcastLinks:d,user:c}):(0,r.tZ)(R,{align:l,columns:Math.min(i,3),description:g,imageUrl:b?null:Z,name:f,pub:a})};var W=i(68648),J=i(60885);let Y=e=>{let{columns:t,isPodcast:i,newPosts:n,pinnedPosts:o,pub:l,search:a,section:s,sort:d,user:c,utm:p,variant:h,onChangeFirstPost:m}=e,g=7;"grid"===h&&(4===t&&(g=8),3===t&&(g=9));let v=(0,r.tZ)(u.O,{includePins:!(i&&!s),isPodcast:i,maxPosts:g,newPosts:n,pinnedPosts:o,pub:l,search:a,sectionId:null==s?void 0:s.id,sort:d,user:c,utm:p,variant:h,onPostsLoaded:e=>{var t;let{posts:i}=e;m({post:null!==(t=i[0])&&void 0!==t?t:null})},children:e=>{var i;let{posts:n,linkToComments:o,onClickPost:a}=e;return(0,r.tZ)(J.QI,{pub:l,showPubPins:!1,showSectionPins:!0,children:(0,r.tZ)(I.B,{hideHorizontalDividers:"grid"===h,hideImages:null===(i=l.theme)||void 0===i?void 0:i.hide_images_from_list,linkToComments:o,posts:n,variant:function(e){let{columns:t,variant:i}=e;return"list"===i?"two-column-list":4===t?"four-column-grid":"three-column-grid"}({columns:t,variant:h}),onClickPost:a})})}});return"list"===h?(0,r.tZ)(E.s,{mainContent:v}):(0,r.tZ)(M.A,{variant:function(e){let{columns:t}=e;return 4===t?"full-width":"three-column-width"}({columns:t}),children:v})};var V=i(75801);let j=e=>{var t,i,u,p,h,g,Z,b,w,y,_,C;let{blurbs:B,freeSignup:k,freeSignupEmail:x,hide_intro_popup:S,isPodcast:I,newPostsForPubPodcast:T,notify_user:L,pageTheme:q,pub:M,referralCode:E,search:z,slug:R,sort:A,showWelcome:O,user:D,utm:F,launchWelcomePage:U,sectionPageData:J,skipIntroPopupRender:j}=e,{isMobile:K,isTablet:Q}=(0,m.v9)(),$=R?M.sections.find(e=>e.slug===R):void 0,ee=I&&!$,et=null!==(p=null!=q?q:ee?null===(t=M.pageThemes)||void 0===t?void 0:t.podcast:null==$?void 0:$.pageTheme)&&void 0!==p?p:null,ei=I&&!$?T:null==J?void 0:null===(i=J[null!==(h=null==$?void 0:$.id)&&void 0!==h?h:0])||void 0===i?void 0:i.newPosts,en=null==J?void 0:null===(u=J[null!==(g=null==$?void 0:$.id)&&void 0!==g?g:0])||void 0===u?void 0:u.pinnedPosts,eo=null!==(Z=[...null!=en?en:[],...null!=ei?ei:[]][0])&&void 0!==Z?Z:null,[er,el]=(0,l.eJ)(eo?{[$?$.id:"pubPodcast"]:eo}:{}),[ea,es]=(0,l.eJ)(!1),ed=null!==(b=er[$?$.id:"pubPodcast"])&&void 0!==b?b:null,ec=(0,l.I4)(e=>{let{post:t}=e;ed||(t?(el(e=>(0,o._)((0,n._)({},e),{[$?$.id:"pubPodcast"]:t})),es(!1)):es(!0))},[ed,$]);if((0,l.d4)(()=>{L&&"undefined"!=typeof window&&(0,d.ZP)(L)},[L]),!$&&!I)return console.warn("Should be either a section or podcast or both"),null;let eu=null;if((I||(null==$?void 0:$.is_podcast))&&(eu=$?(0,c.d_)({pub:M,section:$}):(0,c.jU)({pub:M})),(0,f.HD)({pub:M})&&(I||$))return(0,r.tZ)(s.E,{freeSignup:k,freeSignupEmail:x,isPodcast:!!I,newPosts:ei,pub:M,scheduledLiveStreams:null==J?void 0:null===(w=J[null!==(y=null==$?void 0:$.id)&&void 0!==y?y:0])||void 0===w?void 0:w.scheduledLiveStreams,section:null!=$?$:null,user:D,utm:F},null!==(_=null==$?void 0:$.id)&&void 0!==_?_:-1);let ep=(0,f.VL)({pub:M,includeTheRampart:!0})&&eu,eh=(0,r.tZ)(V.L,{blurbs:B,freeSignup:k,freeSignupEmail:x,hide_intro_popup:S,isPodcast:I,launchWelcomePage:U,pub:M,referralCode:E,showWelcome:O,user:D});if(ep&&eu&&$)return(0,r.tZ)(N,{newPosts:ei,pinnedPosts:en,podcastSettings:eu,pub:M,search:z,section:$,sort:A,user:D,utm:F,welcomeAndShareElement:j?null:eh});let em=et;em||(em=((null==$?void 0:$.is_podcast)||I)&&!ea?{hero_alignment:"left",page_hero:"feature-media",page_posts:"grid",show_podcast_links:!1}:{hero_alignment:"left",page_hero:"default",page_posts:"list",show_podcast_links:!1}),em.page_hero=G(em.page_hero);let eg=2,ev="grid"===em.page_posts?3:2;return"feature-media"===em.page_hero?"grid"===em.page_posts?eg=ev=Q?3:4:"list"===em.page_posts&&(eg=3,ev=2):eg=ev,(0,r.tZ)(W.hV,{pub:M,children:(0,r.tZ)(a.h,{children:(0,r.BX)(X.N,{columns:4,paddingTop:"podcast"===em.page_hero||"feature-media"===em.page_hero?0:void 0,children:[(0,r.tZ)(P.PageMetaData,{isPodcast:I,pub:M,section:$}),(0,r.tZ)(H,{columns:eg,firstPost:ed,heroAlignment:em.hero_alignment,podcastSettings:eu,pub:M,section:$,showPodcastLinks:em.show_podcast_links,user:D,utm:F,variant:em.page_hero}),(0,r.tZ)(v.tu,{opacity:"feature-media"!==em.page_hero||ed?100:0,paddingBottom:32,paddingTop:K?24:32,children:(0,r.tZ)(Y,{columns:ev,isPodcast:!!I,newPosts:ei,pinnedPosts:en,pub:M,search:z,section:$,sort:A,user:D,utm:F,variant:em.page_posts,onChangeFirstPost:ec},null!==(C=null==$?void 0:$.id)&&void 0!==C?C:-1)}),!j&&eh]})})})},G=e=>e?"podcast-with-post"===e?"podcast":e:"default"},75801:function(e,t,i){i.d(t,{L:()=>m});var n=i(16584),o=i(30396),r=i(35047),l=i(47851),a=i(36808);let s=["astralcodexten","thecoddlingmovie","bariweiss","theprepress"];var d=i(26111),c=i(84864);let u=e=>{let{pub:t,user:i,freeSignup:n}=e,o=new Date(Date.now()-864e5);if((0,d.x)("no_cover")||(0,d.x)("hide_intro_popup"))return!0;if((0,d.x)("showWelcome"))return!1;if("share"===(0,d.x)("action")||(0,d.x)("accepting_gift")||!t||s.includes(t.subdomain)||n||i&&(i.is_free_subscribed||i.is_subscribed||i.is_contributor))return!0;let r=a.get("intro_popup_last_hidden_at");return!!(r&&new Date(r)>=o||"undefined"!=typeof navigator&&(0,c.isSearchEngineCrawlerQuick)(navigator.userAgent))};var p=i(98914),h=i(60308);let m=e=>{let{blurbs:t,freeSignup:i,freeSignupEmail:a,hide_intro_popup:s,pub:c,referralCode:m,showWelcome:g,user:v,launchWelcomePage:Z}=e,f=(0,o.sO)(!1),b=(0,o.sO)(null),w=u({pub:c,user:v,freeSignup:i});return(0,o.d4)(()=>{"share"===(0,d.x)("action")&&(window.history.replaceState({},document.title,(0,h.rhs)({action:null})),f.current=!0),f.current&&b.current&&b.current.open(),"undefined"!=typeof window&&g&&(0,p.iO)("showWelcome")},[g]),(0,n.BX)(n.HY,{children:[(0,n.tZ)(l.Z,{ref:b,pub:c,user:v}),(0,n.tZ)(r.ZP,{blurbs:t,freeSignup:i,freeSignupEmail:a,hidden:s||f.current||w,launchWelcomePage:Z,publication:c,referralCode:m,showOnMount:g,user:v})]})}},71897:function(e,t,i){i.d(t,{A:()=>l});var n=i(7409);let o={sm:{size:15,lineHeight:20},md:{size:19,lineHeight:26},lg:{size:30,lineHeight:38},mobileMd:{size:17,lineHeight:24},mobileLg:{size:30,lineHeight:38}},r={sinocism:{sm:{size:13,lineHeight:20},md:{size:16,lineHeight:24},lg:{size:27,lineHeight:36},mobileMd:{size:16,lineHeight:24},mobileLg:{size:27,lineHeight:36}},thepillar:{sm:{size:16,lineHeight:20,fontFamily:"Georgia, serif"},md:{size:22,lineHeight:28,fontFamily:"Georgia, serif"},lg:{size:36,lineHeight:42,fontFamily:"Georgia, serif"},mobileMd:{size:20,lineHeight:26,fontFamily:"Georgia, serif"},mobileLg:{size:28,lineHeight:36,fontFamily:"Georgia, serif"}}},l=e=>{let{preset:t,pub:i}=e;return(i?(0,n._)({},o,r[i.subdomain]):o)[t]}},1152:function(e,t,i){i.d(t,{M:()=>b});var n=i(7409),o=i(99282),r=i(16584),l=i(94184),a=i.n(l),s=i(4767),d=i(58023),c=i(7523),u=i(49762),p=i(58401),h=i(98422),m=i(38756),g=i(61264),v=i(19081),Z=i(63651),f=i(16823);let b=e=>{let{posts:t,title:i,variant:l,viewAllUrl:a,headerVariant:s="align-left-with-see-all"}=e,d={posts:t,title:i,viewAllUrl:a,headerVariant:s};switch(l){case"special-feature":return(0,r.tZ)(w,(0,n._)({},d));case"large-in-middle":return(0,r.tZ)(C,(0,o._)((0,n._)({},d),{largeColumnPosition:"middle"}));case"large-on-left":return(0,r.tZ)(C,(0,o._)((0,n._)({},d),{largeColumnPosition:"left"}));case"large-on-right":return(0,r.tZ)(C,(0,o._)((0,n._)({},d),{largeColumnPosition:"right"}));default:return null}},w=e=>{let{posts:t,title:i}=e,{isMobile:n,isTablet:o,isDesktop:l}=(0,h.v9)();return n?(0,r.tZ)(y,{posts:t,title:i}):(0,r.BX)("div",{children:[(0,r.tZ)(_,{title:i}),(0,r.BX)(m.A,{hideVerticalDividers:!0,variant:"one-column-two-column-one-column",children:[t[0]&&(0,r.tZ)(g.X,{align:l?"center":"left",post:t[0],showImageLast:l,titlePreset:"h2-serif",variant:"large"}),(0,r.tZ)(d.Z,{paddingTop:64*!!l,children:t.slice(1,o?5:3).map(e=>(0,r.tZ)(g.X,{align:"center",hideDescription:!0,post:e,titlePreset:"h5-sans",variant:"square"}))}),l&&(0,r.tZ)(d.Z,{paddingTop:64,children:t.slice(3,5).map(e=>(0,r.tZ)(g.X,{align:"center",hideDescription:!0,post:e,titlePreset:"h5-sans",variant:"square"}))})]}),(0,r.tZ)("div",{className:f.Z.threeColumnContainer,children:t.slice(5,8).map(e=>(0,r.tZ)(v.tu,{borderTop:"detail-themed",paddingTop:24,children:(0,r.tZ)(g.X,{align:"center",hideDescription:!0,hideImage:!0,post:e,variant:"square"})}))})]})},y=e=>{let{title:t,posts:i}=e;return(0,r.BX)("div",{children:[(0,r.tZ)(_,{title:t}),(0,r.BX)(v.tu,{gap:32,children:[i[0]&&(0,r.tZ)(g.X,{align:"left",post:i[0],titlePreset:"h2-serif",variant:"large"}),(0,r.tZ)(s.E,{children:i.slice(1,5).map(e=>(0,r.tZ)(g.X,{hideDescription:!0,post:e,titlePreset:"h5-sans",variant:"square"}))}),(0,r.tZ)(d.Z,{gap:16,includeTopDivider:!0,children:i.slice(5,8).map(e=>(0,r.tZ)(g.X,{post:e,variant:"mini"}))})]})]})},_=e=>{let{title:t}=e,{isMobile:i}=(0,h.v9)(),n=(0,u.ZP)("thefp_enable_america_250"),o="America at 250"===t&&n;return(0,r.BX)(v.gq,{alignItems:"center",className:f.Z.specialFeatureHeaderContainer,gap:20,paddingBottom:i?28:56,children:[(0,r.tZ)("div",{className:o?a()(f.Z.thickRule,f.Z.a250Rule):f.Z.thickRule}),o?(0,r.tZ)("a",{className:f.Z.america250HomepageHeader,href:"/america250",children:(0,r.tZ)("img",{className:f.Z.a250Logo,src:(0,Z.zF4)("".concat((0,Z.ZJn)(),"/img/thefp/a250_homepage.png"),500,{quality:"auto:good",crop:"limit"}),width:446})}):(0,r.tZ)(c.Z,{color:"accent",preset:"st3",children:t}),(0,r.tZ)("div",{className:o?a()(f.Z.thickRule,f.Z.a250Rule):f.Z.thickRule})]})},C=e=>{let{largeColumnPosition:t,posts:i,title:n,viewAllUrl:o,headerVariant:l}=e,{isMobile:a,isTablet:s,isDesktop:c}=(0,h.v9)();return a?(0,r.tZ)(B,{headerVariant:l,posts:i,title:n,viewAllUrl:o}):(0,r.BX)(v.tu,{gap:28,children:[(0,r.tZ)(p.l,{title:n,titlePreset:"st2",variant:l,viewAllUrl:o}),(0,r.BX)(m.A,{hideVerticalDividers:!0,variant:{middle:"one-column-two-column-one-column",left:"two-column-one-column-one-column",right:"one-column-one-column-two-column"}[t],children:[i[0]&&(0,r.tZ)(g.X,{align:"left",post:i[0],titlePreset:"h3-condensed",variant:"large"}),(0,r.tZ)(d.Z,{paddingTop:40*!!c,children:i.slice(1,s?5:3).map(e=>(0,r.tZ)(g.X,{hideDescription:s,post:e,variant:"square"}))}),c&&(0,r.tZ)(d.Z,{paddingTop:40,children:i.slice(3,5).map(e=>(0,r.tZ)(g.X,{post:e,variant:"square"}))})]})]})},B=e=>{let{posts:t,title:i,viewAllUrl:n,headerVariant:o}=e;return(0,r.BX)(v.tu,{gap:20,children:[(0,r.tZ)(p.l,{title:i,titlePreset:"st2",variant:o,viewAllUrl:n}),(0,r.BX)(v.tu,{gap:32,children:[t[0]&&(0,r.tZ)(g.X,{align:"left",post:t[0],titlePreset:"h3-condensed",variant:"large"}),(0,r.tZ)(s.E,{children:t.slice(1,5).map(e=>(0,r.tZ)(g.X,{hideDescription:!0,post:e,variant:"square"}))})]})]})}},58401:function(e,t,i){i.d(t,{l:()=>p});var n=i(7409),o=i(98848),r=i(16584),l=i(74626),a=i(7523),s=i(95441),d=i(98422),c=i(19081),u=i(16823);let p=e=>{var{variant:t="align-left-with-see-all"}=e,i=(0,o._)(e,["variant"]);return"align-left-with-see-all"===t?(0,r.tZ)(h,(0,n._)({},i)):(0,r.tZ)(m,(0,n._)({},i))},h=e=>{let{titlePreset:t,title:i,viewAllUrl:n}=e,{iString:o}=(0,s.M1)(),{isMobile:p}=(0,d.v9)();return(0,r.BX)(c.gq,{alignItems:"baseline",flex:"grow",gap:16,position:"relative",children:[(0,r.tZ)(a.Z,{preset:t,children:i}),(0,r.BX)(c.gq,{alignItems:"end",flex:"grow",children:[(0,r.tZ)("div",{className:u.Z.mediumRule}),n&&(p?(0,r.tZ)(c.gq,{className:u.Z.headerButtonMobile,position:"absolute",children:(0,r.tZ)(l._,{href:n,size:"md",trailingIcon:"chevron-right",variant:"tertiary",children:o("See all")})}):(0,r.tZ)(l._,{href:n,trailingIcon:"chevron-right",children:o("See all")}))]})]})},m=e=>{let{titlePreset:t,title:i}=e;return(0,r.BX)(c.gq,{alignItems:"baseline",flex:"grow",gap:16,position:"relative",children:[(0,r.tZ)("div",{className:u.Z.mediumRule}),(0,r.tZ)(a.Z,{preset:t,children:i})]})}},51450:function(e,t,i){i.d(t,{p:()=>n});let n=(0,i(6400).createContext)({activeLiveStream:void 0,latestPostByContributorId:void 0,latestPodcastPosts:void 0,latestPostFromSections:void 0,contributors:void 0,freeSignup:void 0,freeSignupEmail:void 0,homepageLinks:void 0,numRecommendations:void 0,recommendations:void 0,topPosts:void 0})},68648:function(e,t,i){i.d(t,{ZT:()=>p,hV:()=>u,re:()=>c});var n=i(7409),o=i(99282),r=i(16584),l=i(6400),a=i(30396),s=i(14293),d=i.n(s);let c=(0,l.createContext)({authorPagesEnabled:!1,cropGravity:"center",disableInteractive:!1,hideUfi:!1,highlightByline:!1,linkToComments:!1,pub:null,modifiedPosts:{},showPinForPostIds:new Set,user:null,onChangePost:()=>void 0,onUnpinPost:()=>void 0}),u=e=>{let{actionsClassName:t,authorPagesEnabled:i,children:l,cropGravity:s,disableInteractive:u,hideUfi:p,highlightByline:h,linkToComments:m,postPreviewUrl:g,pub:v,showPinForPostIds:Z,showSectionOrTag:f,user:b,utm:w,onClickPost:y,onToggleMenu:_,onUnpinPost:C}=e,B=(0,a.qp)(c),[k,x]=(0,a.eJ)({});return(0,r.tZ)(c.Provider,{value:(0,o._)((0,n._)({},B,d()(t)?null:{actionsClassName:t},d()(i)?null:{authorPagesEnabled:i},d()(s)?null:{cropGravity:s},d()(u)?null:{disableInteractive:u},d()(p)?null:{hideUfi:p},d()(h)?null:{highlightByline:h},d()(m)?null:{linkToComments:m},d()(g)?null:{postPreviewUrl:g},d()(v)?null:{pub:v},d()(Z)?null:{showPinForPostIds:Z},d()(f)?null:{showSectionOrTag:f},d()(b)?null:{user:b},d()(w)?null:{utm:w},d()(y)?null:{onClickPost:y},d()(_)?null:{onToggleMenu:_},d()(C)?null:{onUnpinPost:C}),{modifiedPosts:k,onChangePost:e=>{let{post:t}=e;x(e=>(0,o._)((0,n._)({},e),{[t.id]:t}))}}),children:l})},p=()=>{let e=(0,a.qp)(c);if(!e.pub)throw Error("No pub provided to PostPreviewContext");return e}},76787:function(e,t,i){i.d(t,{G:()=>U});var n=i(7409),o=i(99282),r=i(98848),l=i(58865),a=i(16584),s=i(30396),d=i(94184),c=i.n(d),u=i(95441),p=i(98914),h=i(98422),m=i(68648),g=i(94442),v=i(19081),Z=i(84864);let f=e=>{let{justified:t,post:i}=e,{actionsClassName:n,pub:o,user:r,onChangePost:l,onToggleMenu:s}=(0,m.ZT)(),d="restack"===i.type;return d?null:(0,a.tZ)(v.tu,{className:n,children:(0,a.tZ)(g._2,{allowEdit:!d,editButtonIsLast:!0,hideComments:!(0,Z.showCommentsOnPost)({publication:o,post:i}),hideReactions:!o.community_enabled,hideShare:d,isStatic:!1,justified:t,labelStyle:"counts-or-none",position:"pub-preview",post:i,pub:o,showRestackButton:!0,style:"compressed",user:r,onChange:l,onToggleMenu:s})})};var b=i(31883),w=i(24664),y=i(58175),_=i(93903),C=i(6070);let B=e=>{let{align:t,clamp:i,lineHeight:n=20,maxLength:o=152,paddingBottom:r,post:l,size:s=14,textWrap:d}=e,{postPreviewUrl:c,pub:u}=(0,m.ZT)();return(0,a.tZ)(v.tu,{paddingBottom:r,children:(0,a.tZ)(y.xv,{align:t,as:"a",clamp:i,color:"primary",font:"text",href:c,lineHeight:n,size:s,style:(0,C.kb)({pub:u})?{fontFamily:"Georgia, serif"}:void 0,textWrap:d,children:(0,_.Z)((0,Z.truncateWords)(l.description,o))})})};var k=i(24350),x=i.n(k),S=i(20042),P=i(63651);let I=e=>{var t,i;let{paddingBottom:n,post:o}=e,{pub:r,showSectionOrTag:l}=(0,m.ZT)();if(!l)return null;let s=null,d=null;if(o.section_id){let e=r.sections.find(e=>e.id===o.section_id);e&&(s=e.name,d=(0,P.Ucy)(r,{section:e}))}else if(null===(t=o.postTags)||void 0===t?void 0:t.length){let e=x()(r.navigationBarItems.filter(e=>e.postTag).map(e=>e.postTag),"id"),t=null===(i=o.postTags)||void 0===i?void 0:i.find(t=>e[t.id]);t&&(s=t.name,d=(0,P.Mk9)(r,t))}return s&&d?(0,a.tZ)(v.hs,{paddingBottom:n,children:(0,a.tZ)(y.xv.Meta,{as:"a",color:"primary",href:d,onClick:e=>{e.stopPropagation(),e.preventDefault(),(0,S.route)(d)},children:s})}):null};var X=i(95561),T=i(33870),N=i(31377);let L={container:"container-m3tNBN",containerNoImage:"containerNoImage-bRvPTc",image:"image-e4U1t2",content:"content-jHL69Q"},q=e=>{let{isSmall:t,post:i}=e,{hideUfi:n}=(0,m.ZT)(),{isTablet:o}=(0,h.v9)(),r=!!(0,N.getCoverImageUrl)(i);return(0,a.BX)("div",{className:c()(L.container,{[L.containerNoImage]:!r}),children:[r&&(0,a.tZ)(w.X,{className:L.image,imageAspectRatio:t?T.Hw:T.YU,imageWidth:1280,isBelowTheFold:!1,playButtonSize:72,post:i,squareImageSize:"large"}),(0,a.BX)(v.tu,{alignItems:"center",className:L.content,justifyContent:"center",paddingBottom:64*!r,paddingTop:r?24:64,paddingX:r?32:64,children:[(0,a.tZ)(I,{paddingBottom:4,post:i}),(0,a.tZ)(X.F,{align:"center",clamp:3,paddingBottom:8,post:i,preset:o?"mobileLg":"lg",preventOrphans:!0}),(0,a.tZ)(B,{align:"center",clamp:3,lineHeight:24,paddingBottom:8,post:i,size:17}),(0,a.tZ)(b.vo,{post:i}),!n&&(0,a.tZ)(v.tu,{paddingTop:8,children:(0,a.tZ)(f,{post:i})})]})]})},M={image:"image-QTMr_S"},E={container:"container-Qnseki","container--no-image":"container--no-image-zKZVLo",image:"image-tkPTAj"};var z=i(68833),R=i(98750);let A={image:"image-vqosjM"},O={image:"image-Ac018u"};function D(){let e=(0,l._)(["Post preview for ",""]);return D=function(){return e},e}let F={jumbo:q,"jumbo-small":e=>(0,a.tZ)(q,(0,o._)((0,n._)({},e),{isSmall:!0})),large:e=>{let{align:t="center",hideImage:i,imageAspectRatio:n="standard",post:o}=e,{hideUfi:r,pub:l}=(0,m.ZT)();return(0,a.BX)(v.tu,{children:[!i&&(0,a.tZ)(w.X,{className:M.image,imageAspectRatio:"wide"===n?T.YU:T.Hw,imageWidth:1250,isBelowTheFold:!1,playButtonSize:72,post:o,squareImageSize:"large"}),(0,a.BX)(v.tu,{alignItems:"center"===t?"center":"start",flex:"grow",justifyContent:(0,C.kb)({pub:l})?"start":"center",paddingBottom:0,paddingTop:32,paddingX:16*("left"!==t),children:[(0,a.tZ)(I,{paddingBottom:4,post:o}),(0,a.tZ)(X.F,{align:t,clamp:4,paddingBottom:8,post:o,preset:"lg",preventOrphans:!0,textWrap:"balance"}),(0,a.tZ)(B,{align:t,clamp:2,lineHeight:(0,C.kb)({pub:l})?28:24,paddingBottom:8,post:o,size:(0,C.kb)({pub:l})?20:17,textWrap:"balance"}),(0,a.tZ)(b.vo,{post:o}),!r&&(0,a.tZ)(v.tu,{paddingTop:8,children:(0,a.tZ)(f,{post:o})})]})]})},listing:e=>{let{hideImage:t,post:i}=e,{hideUfi:n,pub:o}=(0,m.ZT)(),{isMobile:r}=(0,h.v9)(),l=!!o.community_enabled;return t&&!r&&(l=!1),(0,a.BX)("div",{className:c()(E.container,{[E["container--no-image"]]:t}),children:[(0,a.BX)(v.tu,{flex:"grow",gap:4,position:"relative",children:[(0,a.tZ)(I,{post:i}),(0,a.tZ)(X.F,{clamp:3,post:i,preset:r?"mobileMd":"md"}),!(0,C.kb)({pub:o})&&(0,a.tZ)(B,{clamp:2,lineHeight:t?24:20,post:i,size:15}),(0,a.tZ)(b.vo,{post:i}),!n&&(0,a.tZ)(f,{justified:l,post:i})]}),!t&&(i.cover_image?(0,a.tZ)("div",{children:(0,a.tZ)(w.X,{className:E.image,imageAspectRatio:r?1:T.Hw,imageWidth:r?150:320,isBelowTheFold:!0,playButtonSize:r?32:40,post:i,squareImageSize:"small"})}):(0,a.tZ)("div",{}))]})},mini:e=>{let{post:t}=e,{hideUfi:i,pub:n}=(0,m.ZT)(),o=!!n.community_enabled;return(0,a.BX)(v.tu,{gap:4,children:[(0,a.BX)(v.gq,{gap:12,children:[(0,a.BX)(v.tu,{flex:"grow",gap:4,children:[(0,a.tZ)(I,{post:t}),(0,a.tZ)(X.F,{clamp:2,post:t,preset:"sm"}),(0,a.tZ)(b.vo,{clamp:1,post:t})]}),(0,a.tZ)(w.X,{className:"image-tBOtsv",hidePlaceholder:!0,hideTimestamp:!0,imageAspectRatio:1,imageWidth:150,isBelowTheFold:!1,playButtonSize:32,post:t})]}),!i&&(0,a.tZ)(f,{justified:o,post:t})]})},"mini-episode":e=>{let{post:t}=e,i=(0,s.sO)(null);return(0,R.UM)(i,()=>{(0,z.j)(z.FP.RECENT_EPISODE_ITEM_SEEN,{post_id:t.id})}),(0,a.BX)(v.gq,{ref:i,gap:16,children:[(0,a.tZ)(w.X,{className:"image-UySkN_",hidePlaceholder:!0,hideTimestamp:!0,imageAspectRatio:1,imageWidth:150,isBelowTheFold:!1,playButtonSize:32,post:t}),(0,a.BX)(v.tu,{flex:"grow",children:[(0,a.tZ)(X.F,{clamp:2,paddingBottom:4,post:t,preset:"sm"}),(0,a.tZ)(b.vo,{clamp:1,post:t})]})]})},"mobile-hero":e=>{let{hidePlaceholder:t,post:i}=e,{hideUfi:n,pub:o}=(0,m.ZT)(),r=!!o.community_enabled;return(0,a.BX)(v.tu,{children:[i.cover_image&&(0,a.tZ)(w.X,{className:A.image,hidePlaceholder:t,imageAspectRatio:T.YU,imageWidth:1250,isBelowTheFold:!1,playButtonSize:72,post:i,squareImageSize:"large"}),(0,a.BX)(v.tu,{flex:"grow",justifyContent:"center",paddingTop:16,paddingX:16,children:[(0,a.tZ)(I,{paddingBottom:4,post:i}),(0,a.BX)(v.tu,{gap:8,paddingBottom:12,children:[(0,a.tZ)(X.F,{clamp:3,post:i,preset:"mobileLg",preventOrphans:!0}),(0,a.tZ)(B,{clamp:3,lineHeight:20,post:i,size:15}),(0,a.tZ)(b.vo,{post:i})]}),!n&&(0,a.tZ)(f,{justified:r,post:i})]})]})},square:e=>{let{hideDescription:t,hideImage:i,post:n}=e,{hideUfi:o,pub:r}=(0,m.ZT)(),l=!!r.community_enabled,s=t||(0,C.kb)({pub:r});return(0,a.BX)(v.tu,{gap:12,children:[!i&&(0,a.tZ)(w.X,{className:c()(O.image),imageAspectRatio:T.Hw,imageWidth:600,isBelowTheFold:!0,playButtonSize:56,post:n,squareImageSize:"medium"}),(0,a.BX)(v.tu,{flex:"grow",gap:4,children:[(0,a.tZ)(I,{post:n}),(0,a.tZ)(X.F,{clamp:3,post:n,preset:"md"}),!s&&(0,a.tZ)(B,{clamp:1,post:n}),(0,a.tZ)(b.vo,{post:n}),!o&&(0,a.tZ)(f,{justified:l,post:n})]})]})}},U=e=>{var t,{linkToComments:i,post:l,testid:d,variant:g,onClick:Z}=e,f=(0,r._)(e,["linkToComments","post","testid","variant","onClick"]);let{iTemplate:b}=(0,u.M1)(),{isMobile:w}=(0,h.v9)(),{disableInteractive:y,pub:_,modifiedPosts:B,utm:k}=(0,m.ZT)(),x=null!==(t=B[l.id])&&void 0!==t?t:l,[S,P]=(0,s.eJ)(!1),[I,X]=(0,s.eJ)(!1),N=(0,s.I4)(e=>{let{active:t}=e;P(!!t)},[]),L=F[g];if(!L)return console.warn("PostPreview: ".concat(g," not implemented")),null;let q=(0,T.zV)({linkToComments:!!i,post:x,pub:_,utm:k});return(0,a.tZ)(m.hV,{actionsClassName:c()("actions-YFg47u",{"actions--menu-open-bDkeVH":S||I}),hideUfi:(0,C.kb)({pub:_}),postPreviewUrl:q,onToggleMenu:N,children:(0,a.tZ)(T.em.Provider,{value:{setIsOnboarding:X},children:(0,a.tZ)(v.tu,{"aria-label":b(D(),x.title),className:c()("container-H2dyKk",{"container--menu-open-RRT2Fw":S}),"data-testid":d,padding:8*!w,position:"relative",radius:"sm",role:"article",onClick:e=>{Z&&Z({event:e,post:x}),y||(0,p.uX)(q,{event:e})},children:(0,a.tZ)(L,(0,o._)((0,n._)({},f),{post:x}))})})})}},31883:function(e,t,i){i.d(t,{wz:()=>S,vo:()=>k});var n=i(7409),o=i(99282),r=i(58865),l=i(16584),a=i(24350),s=i.n(a),d=i(78526),c=i(7703),u=i(94442),p=i(85685),h=i(95441),m=i(40647),g=i(68648),v=i(60885),Z=i(58175),f=i(98012),b=i(6070),w=i(31377),y=i(60308),_=i(84864);let C={date:"date-rtYe1v",icon:"icon-cvHqCn",link:"link-HFGLqU",notLink:"notLink-oAjaXn",dividerChar:"dividerChar-SbAJEi"};function B(){let e=(0,r._)(["Published on ",""]);return B=function(){return e},e}let k=e=>{let{clamp:t,post:i}=e,{iTemplate:n}=(0,h.M1)(),{getPubPinInfo:o,getSectionPinInfo:r}=(0,v.DE)(),{highlightByline:a,pub:s,user:u}=(0,g.ZT)(),{showPin:p}=o({post:i}),{showPin:m}=r({post:i}),f=(p||m)&&(!(0,b.kb)({pub:s})||!!(null==u?void 0:u.is_contributor)),y=(0,w.isPaidAudience)(i.audience)&&!(0,b.lp)({post:i})&&!(0,b.kb)({pub:s}),k=(0,_.getBylineUsers)(i);return(0,l.BX)(Z.xv.Meta,{clamp:t,color:"pub-secondary-text",display:"inline",children:[f&&(0,l.tZ)("div",{className:C.icon,children:(0,l.tZ)(d.Z,{size:12})}),y&&(0,l.tZ)("div",{className:C.icon,children:(0,l.tZ)(c.Z,{audience:i.audience,size:12})}),i.restacked_pub_name?(0,l.BX)(l.HY,{children:[(0,l.tZ)("span",{children:n(B(),i.restacked_pub_name)}),"\xa0",(0,l.tZ)("span",{className:C.dividerChar,children:"•"}),"\xa0"]}):null,(0,l.tZ)(S,{post:i}),"restack"!==i.type&&k.length>0&&s.bylines_enabled&&(0,l.BX)(l.HY,{children:["\xa0",(0,l.tZ)("span",{className:C.dividerChar,children:"•"}),"\xa0",(0,l.tZ)(Z.xv,{as:"span",color:a?"accent":void 0,children:(0,l.tZ)(x,{clamp:t,post:i,pub:s})})]})]})},x=e=>{let{post:t,clamp:i,pub:r}=e,a=(0,_.getBylineUsers)(t),{getConfigFor:d}=(0,m.xR)(),c=!!d("enable_author_pages"),u=s()(r.contributors,"user_id"),h=e=>{let t=c?(0,y.rfk)({userId:e.id,pub:r}):null;return t?{href:t,onClick:e=>e.stopPropagation()}:c?{href:void 0,onClick:void 0}:{href:(0,y.LwU)(e,r),onClick:e=>e.stopPropagation()}},g=e=>{var t,i,n;return null!==(n=null!==(i=null===(t=u[e.id])||void 0===t?void 0:t.name)&&void 0!==i?i:e.name)&&void 0!==n?n:""};return(0,l.tZ)(l.HY,{children:(0,_.oxfordComma)(a.map(e=>i?(0,l.tZ)("a",(0,o._)((0,n._)({className:C.link},h(e)),{children:g(e)})):(0,l.tZ)(p.ProfileHoverCard,{disabled:c,subject:e,utmSource:"byline",children:h(e).href?(0,l.tZ)("a",(0,o._)((0,n._)({className:C.link},h(e)),{children:g(e)})):(0,l.tZ)("span",{className:C.notLink,children:g(e)})})),{noBreakSpace:!0})})},S=e=>{let{customFormat:t="MM.DD.YY",post:i}=e,{language:n}=(0,h.M1)(),{pub:o}=(0,g.ZT)();return(0,l.tZ)("time",{className:C.date,dateTime:(0,f.Z)(i.post_date).toISOString(),children:(0,b.HD)({pub:o})?(0,f.Z)(i.post_date).format(t):(0,b.kb)({pub:o})?(0,f.Z)(i.post_date).format("MMMM D, YYYY"):(0,u.fh)({post:i,showDatetime:!1,language:n})})}},24664:function(e,t,i){i.d(t,{X:()=>_});var n=i(16584),o=i(30396),r=i(94184),l=i.n(r),a=i(38464),s=i(98961),d=i(20888),c=i(40647),u=i(98422),p=i(68648),h=i(93029),m=i(53394),g=i(70717),v=i(19081),Z=i(18618),f=i(74571),b=i(31377),w=i(60308);let y={container:"container-XxSyR3",image:"image-nBNbRY","image-square-legacy":"image-square-legacy-jBVF2K",imageSquareLegacy:"image-square-legacy-jBVF2K",containerSquare:"containerSquare-M6P7XI","inner-wrapper":"inner-wrapper-ymo6T9",innerWrapper:"inner-wrapper-ymo6T9","inner-wrapper-small":"inner-wrapper-small-h1CnSS",innerWrapperSmall:"inner-wrapper-small-h1CnSS","inner-wrapper-medium":"inner-wrapper-medium-JvLb2H",innerWrapperMedium:"inner-wrapper-medium-JvLb2H","inner-wrapper-large":"inner-wrapper-large-ffUJx1",innerWrapperLarge:"inner-wrapper-large-ffUJx1","image-square":"image-square-b7oiFr",imageSquare:"image-square-b7oiFr","image-square-small":"image-square-small-v9eiR2",imageSquareSmall:"image-square-small-v9eiR2","image-square-medium":"image-square-medium-Z6HNx5",imageSquareMedium:"image-square-medium-Z6HNx5","image-square-large":"image-square-large-dp7_L9",imageSquareLarge:"image-square-large-dp7_L9"},_=e=>{var t,i,r,_,B;let{className:k,disableVideoHover:x,hidePlaceholder:S,hideTimestamp:P,imageAspectRatio:I,imageWidth:X,isBelowTheFold:T,playButtonSize:N,post:L,squareImageSize:q}=e,{cropGravity:M,pub:E}=(0,p.ZT)(),{getConfigFor:z}=(0,c.xR)(),{isMobile:R}=(0,u.v9)(),A=z("show_entire_square_image"),O=(0,o.sO)(null),[D]=(0,f.i5)(O),F=D&&!x,U=!!L.videoUpload,H=!!(!U&&"podcast"===L.type),W=(0,b.getCoverImageUrl)(L);!W&&((null===(_=L.videoUpload)||void 0===_?void 0:_.thumbnail_id)?W=(0,w.kOB)(L.videoUpload):(null===(B=L.podcastUpload)||void 0===B?void 0:B.thumbnail_id)&&(W=(0,w.kOB)(L.podcastUpload,{post:L})));let J=X<=640;if(!W&&S)return null;let Y=X||I?I:1.32,V=X||336,j=!!W&&L.cover_image_is_square&&A,G=j&&!!q&&(!R||"small"!==q),K=T?"lazy":void 0,Q=(0,b.getDurationForPostPreview)({post:L}),$=!!(null===(t=L.videoUpload)||void 0===t?void 0:t.live_stream_id);return G?(0,n.tZ)(C,{aspectRatio:Y,className:k,imageUrl:W,loading:K,size:q,width:V}):(0,n.BX)("div",{ref:O,className:l()(k,y.container,{"post-preview-cover-image-container--empty":!W}),style:"aspect-ratio: ".concat(Y),children:[(U||H)&&null!==N&&(0,n.tZ)(v.gq,{alignItems:"center",inset:0,justifyContent:"center",opacity:U&&F?0:100,position:"absolute",style:{transition:"opacity ".concat(J?"var(--animation-timing-fast)":"var(--animation-timing-slow)"," var(--animation-smooth)")},children:(0,n.tZ)(Z.fI,{isPlaying:!1,size:N})}),U&&(J?(0,n.tZ)(h.Z,{aspectRatio:(null===(i=L.videoUpload)||void 0===i?void 0:i.width)&&(null===(r=L.videoUpload)||void 0===r?void 0:r.height)?L.videoUpload.width/L.videoUpload.height:Y,containerRef:O,post:L,size:X>320?"large":"medium"}):(0,n.tZ)(m.Z,{isHovered:F,post:L,pub:E})),W?(0,n.tZ)(d.e,{alt:"",className:l()(y.image,{[y["image-square-legacy"]]:j}),imageProps:Y?{height:Math.round(V/Y),smartCrop:!0,gravity:$?"auto":M}:{},imageSizingCss:"(min-width:768px) 50vw, 100vw",loading:K,maxWidth:V,src:W,style:{aspectRatio:"".concat(Y)}}):null,!!Q&&!P&&(0,n.tZ)(g.w,{duration:Q,icon:H?(0,n.tZ)(a.Z,{color:"white",size:12}):(0,n.tZ)(s.Z,{color:"white",size:14})})]})},C=e=>{let{aspectRatio:t,className:i,imageUrl:o,width:r,loading:a,size:s}=e;return(0,n.tZ)("div",{className:l()(i,y.container,y.containerSquare),style:"aspect-ratio: ".concat(t),children:(0,n.tZ)("div",{className:l()(y["inner-wrapper"],y["inner-wrapper-".concat(s)]),children:(0,n.tZ)(d.e,{alt:"",className:l()(y.image,y["image-square"],y["image-square-".concat(s)]),imageProps:{height:r,smartCrop:!0,gravity:"center"},loading:a,maxWidth:r,src:o})})})}},26176:function(e,t,i){i.d(t,{Y:()=>P});var n=i(16584),o=i(6400),r=i(30396),l=i(98961),a=i(38464),s=i(67749),d=i(94442),c=i(95441),u=i(98914),p=i(98422),h=i(38756),m=i(11353),g=i(24664),v=i(33870),Z=i(71068),f=i(15771),b=i(19081),w=i(58175),y=i(18618),_=i(3486),C=i(43905),B=i(31377),k=i(84864);let x={container:"container-pFhu3n",containerNoImage:"containerNoImage-W5VZl3",videoLayer:"videoLayer-gwRrVN",contentLayer:"contentLayer-OGm4Y9",content:"content-iO1vNE",imageContainer:"imageContainer-ddA7f9",image:"image-deX_la",flippedImageContainer:"flippedImageContainer-rBB6TZ",flippedImage:"flippedImage-rChY0M",blurOverlay:"blurOverlay-xN2HYo",darkOverlay:"darkOverlay-jsLZzF",postTitleMobile:"postTitleMobile-ut7sIL"},S=(0,Z.E7)({position:"absolute",inset:0,radius:"sm",pointerEvents:"none"}),P=e=>{let{columns:t,hideLogo:i,highlightPost:o=!1,isPodcast:l,post:a,pub:s,section:c,showPodcastLinks:Z,user:f,utm:y}=e,k=(0,r.sO)(null),{isMobile:P}=(0,p.v9)(),T=(0,B.getDurationForPostPreview)({post:a}),{title:N,description:L}=(0,C.Mv)({pub:s,podcastUpload:a.podcastUpload,section:null!=c?c:null}),q=o?a.title:N,M=o?a.subtitle:L,E=e=>{let t=(0,v.zV)({linkToComments:!1,post:a,pub:s,utm:y});(0,u.uX)(t,{event:e})};return P?(0,n.BX)(b.tu,{gap:12,children:[(0,n.tZ)(b.tu,{onClick:E,children:(0,n.BX)(b.gq,{ref:k,flex:"fill",position:"relative",style:{minHeight:400},children:[(0,n.BX)(b.gq,{className:x.videoLayer,direction:"column",position:"absolute",radius:"sm",children:[(0,n.tZ)(b.gq,{flex:"grow",position:"relative",style:{width:"100%"},children:(0,n.tZ)(g.X,{className:x.image,hideTimestamp:!0,imageAspectRatio:16/9,imageWidth:1280,isBelowTheFold:!1,playButtonSize:null,post:a,presenceRef:k,squareImageSize:"large"})}),(0,n.tZ)(b.gq,{className:x.flippedImageContainer,flex:"grow",overflow:"hidden",position:"relative",children:(0,n.tZ)(g.X,{className:x.flippedImage,hideTimestamp:!0,imageAspectRatio:16/9,imageWidth:1280,isBelowTheFold:!1,playButtonSize:null,post:a,presenceRef:k,squareImageSize:"large"})}),(0,n.tZ)(S,{className:x.darkOverlay}),(0,n.tZ)(b.gq,{className:x.blurOverlay,inset:0,overflow:"hidden",pointerEvents:"none",position:"absolute",radius:"sm"})]}),(0,n.tZ)(b.gq,{className:x.contentLayer,pointerEvents:"none",position:"absolute",children:(0,n.tZ)(b.gq,{flex:"grow",children:(0,n.BX)(b.tu,{gap:16,padding:16,paddingBottom:24,children:[!i&&!o&&(0,n.tZ)(_.p,{post:a,pub:s,section:null!=c?c:null,size:48,useSection:!l}),(0,n.BX)(b.tu,{gap:8,children:[(0,n.tZ)(w.xv.H4,{color:"white",font:"pub-headings",children:q}),(0,n.tZ)(w.xv.B4,{clamp:2,className:x.descriptionMobile,color:"white",children:M}),(0,n.tZ)(b.gq,{flex:"grow"})]}),a.videoUpload||a.podcastUpload||a.podcast_url?(0,n.tZ)(I,{duration:T,highlightPost:o,post:a}):(0,n.tZ)(X,{highlightPost:o,post:a})]})})})]})}),Z&&l&&(0,n.tZ)(m.h,{limit:2,post:a,pub:s,section:null!=c?c:null,stretch:!0,user:f})]}):(0,n.tZ)(h.A,{variant:4===t?"full-width":"three-column-width",children:(0,n.BX)(b.tu,{gap:12,children:[(0,n.tZ)(b.tu,{paddingX:8,onClick:E,children:(0,n.BX)(b.gq,{ref:k,flex:"fill",position:"relative",style:{minHeight:400},children:[(0,n.tZ)(b.gq,{position:"absolute",style:{bottom:16,right:16,zIndex:1},children:(0,n.tZ)(d._2,{allowEdit:!0,hideComments:!0,hideFeedRestackButton:!0,hideReactions:!0,hideSavePost:!0,hideShare:!0,isStatic:!1,labelStyle:"counts-or-none",post:a,pub:s,style:"compressed",user:f,onChange:()=>void 0})}),(0,n.BX)(b.gq,{position:"absolute",radius:"sm",style:{width:"100%",height:"100%"},children:[(0,n.tZ)(b.gq,{flex:"grow",position:"relative",children:(0,n.tZ)(b.gq,{className:x.flippedImageContainer,flex:"grow",overflow:"hidden",position:"relative",children:(0,n.tZ)(g.X,{className:x.flippedImage,disableVideoHover:!0,hideTimestamp:!0,imageAspectRatio:16/9,imageWidth:1280,isBelowTheFold:!1,playButtonSize:null,post:a,presenceRef:k,squareImageSize:"large"})})}),(0,n.tZ)(b.gq,{className:x.imageContainer,position:"relative",children:(0,n.tZ)(g.X,{className:x.image,hideTimestamp:!0,imageAspectRatio:16/9,imageWidth:1280,isBelowTheFold:!1,playButtonSize:null,post:a,presenceRef:k,squareImageSize:"large"})}),(0,n.tZ)(S,{className:x.darkOverlay}),(0,n.tZ)(b.gq,{className:x.blurOverlay,inset:0,overflow:"hidden",pointerEvents:"none",position:"absolute",radius:"sm"})]}),(0,n.BX)(b.gq,{pointerEvents:"none",position:"absolute",style:{width:"100%",height:"100%"},children:[(0,n.tZ)(b.gq,{flex:"grow",children:(0,n.tZ)(b.tu,{justifyContent:i||o?"end":"center",padding:48,children:(0,n.BX)(b.tu,{gap:24,children:[!i&&!o&&(0,n.tZ)(_.p,{post:a,pub:s,section:null!=c?c:null,size:76,useSection:!l}),(0,n.BX)(b.tu,{gap:8,children:[(0,n.tZ)(w.xv.H2,{clamp:3,color:"white",font:"pub-headings",children:q}),(0,n.tZ)(w.xv.B4,{clamp:3,color:"white",children:M}),(0,n.tZ)(b.gq,{flex:"grow"})]}),a.videoUpload||a.podcastUpload||a.podcast_url?(0,n.tZ)(I,{duration:T,highlightPost:o,post:a}):(0,n.tZ)(X,{highlightPost:o,post:a})]})})}),(0,n.tZ)(b.gq,{flex:"grow",pointerEvents:"none"})]})]})}),Z&&l&&(0,n.tZ)(b.tu,{paddingX:8,children:(0,n.tZ)(m.h,{post:a,pub:s,section:null!=c?c:null,stretch:!0,user:f})})]})})},I=e=>{let{duration:t,highlightPost:i,post:r}=e,{iString:s}=(0,c.M1)(),{isMobile:d}=(0,p.v9)();return(0,n.BX)(b.gq,{alignItems:"center",gap:d?16:24,pointerEvents:"auto",children:[(0,n.tZ)(b.gq,{flex:"auto",children:(0,n.tZ)(y.fI,{isPlaying:!1,size:d?56:72})}),(0,n.tZ)(b.gq,{alignItems:"center",children:(0,n.BX)(b.tu,{children:[(0,n.BX)(b.gq,{alignItems:"center",gap:4,children:[(0,n.tZ)(b.gq,{gap:4,width:16,children:r.videoUpload?(0,n.tZ)(l.Z,{color:"white",size:14}):(0,n.tZ)(a.Z,{color:"white",size:14})}),(0,n.tZ)(w.xv.Meta,{color:"white",children:s("LATEST")}),t>0&&(0,n.BX)(o.Fragment,{children:[(0,n.tZ)(w.xv.Meta,{color:"white",children:"\xb7"}),(0,n.tZ)(w.xv.Meta,{color:"white",children:(0,k.secondsToHHMMSS)(t)})]})]}),!i&&(0,n.tZ)(w.xv.Meta,{color:"white",children:r.title})]})})]})},X=e=>{let{highlightPost:t,post:i}=e,{iString:o}=(0,c.M1)();return(0,n.BX)(b.gq,{alignItems:"center",gap:16,pointerEvents:"auto",children:[(0,n.tZ)(f.hU,{rounded:!0,size:"md",children:(0,n.tZ)(s.Z,{size:20})}),(0,n.BX)(b.tu,{children:[(0,n.tZ)(w.xv.Meta,{color:"white",children:o(t?"READ THE LATEST":"LATEST")}),!t&&(0,n.tZ)(w.xv.B2,{clamp:1,color:"white",weight:"semibold",children:i.title})]})]})}},97505:function(e,t,i){i.d(t,{Z:()=>d});var n=i(16584),o=i(30396),r=i(60807),l=i(33870),a=i(74312),s=i(41233);let d=e=>{let{displaySignInModal:t,onCloseSignInModal:d,isStatic:c,entry:u}=e,{setIsOnboarding:p}=(0,o.qp)(l.em),h=(0,o.sO)(null),{user:m,setUser:g}=(0,r.SE)();return c?null:(0,n.BX)(n.HY,{children:[(0,n.tZ)(s.fA,{isOpen:!!t,onCancel:d,onSignup:()=>{var e;d(),null===(e=h.current)||void 0===e||e.open()},onSuccess:()=>{document.location.reload()},onUserCreated:e=>{var t;d(),g(e),null===(t=h.current)||void 0===t||t.open()}}),(0,n.tZ)(a.W,{entry:u||"post-preview",innerRef:h,module:"@/frontend/reader/onboarding",noCloseButton:!!m,noExit:!!m,resolve:e=>e.ReaderOnboardingModal,skipRedirectOnExit:!0,user:m,onBeforeOpen:()=>{p&&p(!0)},onClose:()=>{m&&document.location.reload()},onRequest:()=>Promise.all([i.e("2897"),i.e("1484"),i.e("744"),i.e("9543")]).then(i.bind(i,78118))})]})}},95561:function(e,t,i){i.d(t,{F:()=>m});var n=i(7409),o=i(99282),r=i(16584),l=i(34293),a=i(71897),s=i(68648),d=i(19081),c=i(58175),u=i(6070),p=i(84864);let h={icon:"icon-cUpv7d"},m=e=>{let{align:t,clamp:i,maxLength:m=140,noIcons:g,paddingBottom:v,post:Z,preset:f,preventOrphans:b,textWrap:w}=e,{linkToComments:y,postPreviewUrl:_,pub:C}=(0,s.ZT)(),{lineHeight:B,size:k,fontFamily:x}=(0,a.A)({preset:f,pub:C}),S=(0,u.kb)({pub:C}),P=k>=28;return(0,r.tZ)(d.tu,{paddingBottom:v,children:(0,r.BX)(c.xv,(0,o._)((0,n._)({},_?{as:"a",href:_}:null),{align:t,clamp:S?void 0:i,color:"pub-primary-text","data-testid":"post-preview-title",font:"pub-headings",style:{fontSize:k,lineHeight:"".concat(B,"px"),fontFamily:x},textWrap:w,children:["thread"===Z.type&&!g&&(0,r.tZ)(l.Z,{className:h.icon,height:P?26:17}),y&&"thread"!==Z.type&&"Comments on: ",b?(0,p.preventOrphans)((0,p.truncateWords)(Z.title,m)):(0,p.truncateWords)(Z.title,m)]}))})}},53394:function(e,t,i){i.d(t,{Z:()=>m});var n=i(16584),o=i(30396),r=i(94184),l=i.n(r),a=i(10844),s=i(89919),d=i(12281),c=i(14952),u=i(15771),p=i(19081),h=i(85131);let m=e=>{let{isHovered:t,post:i}=e,[r,m]=(0,o.eJ)(!0),[g,v]=(0,o.eJ)(!1),Z=(0,o.sO)(null),f=(0,c.Ij)();(0,o.d4)(()=>{var e,i,n,o,l,a,s,d,c,u;let p=()=>v(!0);return null===(i=Z.current)||void 0===i||null===(e=i.player)||void 0===e||e.addEventListener("loadedmetadata",p),t?(null===(l=Z.current)||void 0===l||null===(o=l.player)||void 0===o||null===(n=o.play)||void 0===n||n.call(o),(null===(a=Z.current)||void 0===a?void 0:a.player)&&(Z.current.player.volume=+!r)):(null===(c=Z.current)||void 0===c||null===(d=c.player)||void 0===d||null===(s=d.pause)||void 0===s||s.call(d),(null===(u=Z.current)||void 0===u?void 0:u.player)&&(Z.current.player.volume=0)),()=>{var e,t;null===(t=Z.current)||void 0===t||null===(e=t.player)||void 0===e||e.removeEventListener("loadedmetadata",p)}},[t]);let b=e=>{var t;e.stopPropagation(),m(!r),(null===(t=Z.current)||void 0===t?void 0:t.player)&&(Z.current.player.volume=+!!r)};return f&&i.videoUpload&&t?(0,n.tZ)("div",{className:l()(h.Z.gifPreview,{[h.Z.visible]:g}),children:(0,n.BX)(p.gq,{alignItems:"center",justifyContent:"center",position:"relative",style:{width:"100%",height:"100%"},children:[(0,n.tZ)(d.Z,{ref:Z,autoPlay:!0,className:h.Z.videoPlayerWrapper,contentType:"post",entityKey:i.id,entityType:"post",mediaUpload:i.videoUpload,noControls:!0,noPreview:!0,pub:f,surface:"publication",videoClassName:h.Z.videoClassName,videoPlayerClassName:h.Z.videoPlayerClassName,videoType:"post-preview"}),(0,n.tZ)(p.gq,{padding:12,position:"absolute",style:{top:0,right:0},children:(0,n.tZ)(u.GI,{onClick:e=>b(e),children:r?(0,n.tZ)(a.Z,{size:20}):(0,n.tZ)(s.Z,{size:20})})})]})}):null}},17258:function(e,t,i){i.d(t,{p:()=>m});var n=i(7409),o=i(99282),r=i(16584),l=i(94184),a=i.n(l),s=i(24350),d=i.n(s),c=i(40647),u=i(60308),p=i(84864);let h={container:"container-Mw45dL",containerSingleLine:"containerSingleLine-xWghSN",link:"link-iknc0_",notLink:"notLink-U0WbwD"},m=e=>{let{post:t,clamp:i,pub:l}=e,s=(0,p.getBylineUsers)(t),{getConfigFor:m}=(0,c.xR)(),g=!!m("enable_author_pages"),v=d()(l.contributors,"user_id"),Z=e=>{let t=g?(0,u.rfk)({userId:e.id,pub:l}):null;return t?{href:t,onClick:e=>e.stopPropagation()}:g?{href:void 0,onClick:void 0}:{href:(0,u.LwU)(e,l),onClick:e=>e.stopPropagation()}},f=e=>{var t,i,n;return null!==(n=null!==(i=null===(t=v[e.id])||void 0===t?void 0:t.name)&&void 0!==i?i:e.name)&&void 0!==n?n:""};return(0,r.tZ)("div",{className:a()(h.container,{[h.containerSingleLine]:1===i}),children:(0,p.oxfordComma)(s.map(e=>Z(e).href?(0,r.tZ)("a",(0,o._)((0,n._)({className:h.link},Z(e)),{children:f(e)})):(0,r.tZ)("span",{className:h.notLink,children:f(e)})),{noBreakSpace:!0})})}},61264:function(e,t,i){i.d(t,{X:()=>R});var n=i(7409),o=i(99282),r=i(98848),l=i(16584),a=i(94184),s=i.n(a),d=i(78526),c=i(29162),u=i(98914),p=i(68648),h=i(49259),m=i(98422),g=i(72019),v=i(7523),Z=i(19081),f=i(93903),b=i(84864);let w=e=>{let{align:t="left",clamp:i,color:n,paddingBottom:o,post:r,preset:a}=e,{postPreviewUrl:s}=(0,p.ZT)();return(0,l.tZ)(Z.tu,{paddingBottom:o,children:(0,l.tZ)(v.Z,{align:t,as:"a",clamp:i,color:n,href:s,preset:a,wrap:"center"===t?"balance":"pretty",children:(0,f.Z)((0,b.truncateWords)(r.subtitle,152))})})},y=e=>{var{align:t="left",clamp:i,color:a,paddingBottom:d,post:c,preset:u}=e,h=(0,r._)(e,["align","clamp","color","paddingBottom","post","preset"]);let{postPreviewUrl:m}=(0,p.ZT)();return(0,l.tZ)(Z.tu,{paddingBottom:d,children:(0,l.tZ)(v.Z,(0,o._)((0,n._)({},h,m?{as:"a",href:m}:null),{align:t,clamp:i,className:s()("post-preview-title","title-vqpS7B",{"hoverColor-w9y2tS":"white"!==a}),color:a,preset:u,wrap:"center"===t?"balance":"pretty",children:(0,b.preventOrphans)((0,b.truncateWords)(c.title,140))}))})};var _=i(42312);let C=e=>{let{post:t}=e,{pub:i,user:n,onChangePost:o}=(0,p.ZT)(),r=(0,b.showCommentsOnPost)({publication:i,post:t}),a=i.community_enabled,s=!!(null==n?void 0:n.is_contributor);return"restack"===t.type?null:(0,l.BX)(Z.gq,{alignItems:"center",gap:6,children:[r&&(0,l.tZ)(_.Ck,{post:t,pub:i,size:"small"}),a&&(0,l.tZ)(_.gV,{post:t,pub:i,size:"small",user:n,onChange:o}),s&&(0,l.tZ)(_.ND,{context:"post-preview",post:t,pub:i,user:n})]})};var B=i(31883),k=i(17258);let x=e=>{let{align:t="left",color:i,paddingBottom:n,post:o,preset:r}=e,{pub:a}=(0,p.ZT)();return(0,l.tZ)(Z.tu,{paddingBottom:n,children:(0,l.BX)(v.Z,{align:t,color:null!=i?i:"sm-preview-byline"===r?"accent":void 0,preset:r,children:[(0,l.tZ)(k.p,{post:o,pub:a})," — ",(0,l.tZ)(B.wz,{post:o})]})})};var S=i(33870);let P={image:"image-EaGmDd"},I=e=>{let{align:t,hideDescription:i,hideImage:n,post:o,titlePreset:r}=e;return(0,l.BX)(Z.tu,{children:[!n&&(0,l.tZ)(g.P,{className:P.image,imageAspectRatio:S.YU,imageWidth:600,isBelowTheFold:!0,post:o}),(0,l.BX)(Z.tu,{gap:4,paddingTop:8*!n,children:[(0,l.tZ)(y,{align:t,post:o,preset:null!=r?r:n?"h5-serif":"h7-serif"}),!i&&(0,l.tZ)(w,{align:t,clamp:3,post:o,preset:"d4-serif"}),(0,l.tZ)(Z.tu,{alignItems:"center"===t?"center":"start",paddingY:4,children:(0,l.tZ)(C,{post:o})}),(0,l.tZ)(x,{align:t,post:o,preset:"sm-preview-byline"})]})]})},X={image140:"image140-mQ92WN",image220:"image220-p05U5w"};var T=i(62372);let N=e=>{let{post:t}=e;return(0,l.BX)(Z.tu,{alignItems:"center",children:[(0,l.tZ)(Z.tu,{alignSelf:"stretch",paddingBottom:32,children:(0,l.tZ)(g.P,{imageAspectRatio:4/3,imageWidth:700,isBelowTheFold:!0,post:t})}),(0,l.tZ)(y,{align:"center",color:"white",paddingBottom:32,post:t,preset:"h2-serif"}),(0,l.tZ)(w,{align:"center",color:"white",paddingBottom:32,post:t,preset:"d1-sans-medium"}),(0,l.tZ)(x,{color:"white",post:t,preset:"lg-preview-byline"})]})},L={image:"image-v6H72k"};var q=i(60308),M=i(14773);let E={container:"container-r9Uobv",pinContainer:"pinContainer-waOJ8r",unpinIcon:"unpinIcon-vVpw5q",pinIcon:"pinIcon-Ad2m5R"},z={archive:e=>{let{forceShowPlayButton:t,post:i}=e,{isMobile:n}=(0,m.v9)();return(0,l.BX)(Z.gq,{gap:n?24:40,children:[(0,l.tZ)(Z.tu,{flex:"auto",children:(0,l.tZ)(g.P,{className:"image-YTYBVT",forceShowPlayButton:t,imageAspectRatio:1,imageWidth:150,isBelowTheFold:!0,post:i})}),(0,l.BX)(Z.tu,{gap:8*!n,overflow:"hidden",children:[(0,l.tZ)(y,{post:i,preset:"h5-serif"}),(0,l.tZ)(Z.tu,{flex:n?void 0:"grow",paddingBottom:16*!!n,children:(0,l.tZ)(w,{clamp:3,post:i,preset:"d3-serif"})}),(0,l.tZ)(h.z,{post:i})]})]})},"content-block-episode":e=>{let{post:t}=e,{isMobile:i}=(0,m.v9)();return i?(0,l.tZ)(I,{align:"left",post:t,titlePreset:"h4-sans-condensed"}):(0,l.BX)(Z.gq,{gap:20,children:[(0,l.tZ)(g.P,{className:"image-Vu2JCA",imageAspectRatio:22/31,imageWidth:440,isBelowTheFold:!0,post:t}),(0,l.BX)(Z.tu,{flex:"grow",gap:8,children:[(0,l.tZ)(y,{post:t,preset:"h4-sans-condensed"}),(0,l.BX)(Z.tu,{gap:8,children:[(0,l.tZ)(w,{clamp:3,post:t,preset:"d4-serif"}),(0,l.tZ)(C,{post:t}),(0,l.tZ)(x,{post:t,preset:"sm-preview-byline"})]})]})]})},"content-block-listing":e=>{let{post:t,titlePreset:i="h6-sans"}=e,n="h4-sans-condensed"===i;return(0,l.BX)(Z.gq,{gap:20,children:[(0,l.tZ)(Z.tu,{flex:"auto",children:(0,l.tZ)(g.P,{className:n?X.image220:X.image140,imageAspectRatio:1,imageWidth:300,isBelowTheFold:!0,post:t})}),(0,l.BX)(Z.tu,{gap:n?8:4,children:[(0,l.tZ)(y,{post:t,preset:i}),(0,l.BX)(Z.tu,{gap:8,children:[(0,l.tZ)(w,{clamp:3,post:t,preset:"d4-serif"}),(0,l.tZ)(C,{post:t}),(0,l.tZ)(x,{post:t,preset:"sm-preview-byline"})]})]})]})},"content-block-single-large":e=>{let{post:t}=e,{isMobile:i}=(0,m.v9)(),[r,a]=(0,T.XI)();return i?(0,l.tZ)(N,{post:t}):(0,l.BX)(Z.gq,{alignItems:"center",gap:40,children:[(0,l.BX)(Z.tu,{alignItems:"center",flex:"grow",children:[(0,l.tZ)(x,{color:"white",paddingBottom:56,post:t,preset:"lg-preview-byline"}),(0,l.tZ)(y,(0,o._)((0,n._)({},a),{align:"center",color:"white",paddingBottom:40,post:t,preset:"h2-serif"})),(0,l.tZ)(Z.tu,{width:360,children:(0,l.tZ)(w,{align:"center",color:"white",post:t,preset:"d1-sans-medium"})})]}),(0,l.tZ)(Z.tu,{flex:"grow",children:(0,l.BX)(Z.tu,(0,o._)((0,n._)({},a),{className:"imageContainer-LhpEMl",position:"relative",children:[(0,l.tZ)(g.P,{imageAspectRatio:4/3,imageWidth:700,isBelowTheFold:!0,post:t}),(0,l.tZ)(Z.gq,{className:"imageContainerOverlay-L73_9b",inset:0,position:"absolute",style:{opacity:+!!r}})]}))})]})},"event-page":e=>{let{post:t}=e;return(0,l.BX)(Z.tu,{gap:20,children:[(0,l.tZ)(y,{post:t,preset:"h4-sans-regular"}),(0,l.tZ)(g.P,{className:"image-J1_9gh",imageAspectRatio:16/9,imageWidth:660,isBelowTheFold:!0,post:t})]})},large:e=>{let{align:t="center",hideImage:i,imageAspectRatio:n="standard",post:o,showImageLast:r,titlePreset:a="h3-compressed"}=e,{isMobile:s}=(0,m.v9)(),d=!i&&(0,l.tZ)(g.P,{className:L.image,imageAspectRatio:"wide"===n?S.YU:S.Hw,imageWidth:1250,isBelowTheFold:!1,post:o});return(0,l.BX)(Z.tu,{children:[!r&&d,(0,l.BX)(Z.tu,{alignItems:"center"===t?"center":"start",justifyContent:"center",paddingBottom:8*!!r,paddingTop:r?0:s?16:32,paddingX:16*("left"!==t),children:[(0,l.tZ)(y,{align:t,paddingBottom:8,post:o,preset:a}),r&&(0,l.tZ)(Z.tu,{alignSelf:"stretch",paddingBottom:8,children:d}),(0,l.BX)(Z.tu,{alignItems:"center"===t?"center":"start",gap:s?8:12,children:[(0,l.tZ)(w,{align:t,post:o,preset:"d2-serif"}),(0,l.tZ)(C,{post:o}),(0,l.tZ)(x,{align:t,post:o,preset:"lg-preview-byline"})]})]})]})},mini:e=>{let{clampTitle:t,hideUfi:i,post:n,showDescription:o,showStar:r}=e;return(0,l.BX)(Z.gq,{alignItems:"start",gap:16,children:[r&&(0,l.tZ)("img",{alt:"star",height:24,src:(0,q.zF4)("".concat((0,M.ZJ)(),"/img/thefp/thefp-star.svg")),width:24}),(0,l.BX)(Z.tu,{gap:4,children:[(0,l.tZ)(y,{clamp:t,post:n,preset:"h6-serif"}),o&&(0,l.tZ)(w,{clamp:3,post:n,preset:"d4-serif"}),!i&&(0,l.tZ)(Z.tu,{paddingY:4,children:(0,l.tZ)(C,{post:n})}),(0,l.tZ)(x,{post:n,preset:"sm-preview-byline"})]})]})},square:I},R=e=>{var t,i,a,{linkToComments:h,post:m,testid:g,variant:v,onClick:f}=e,b=(0,r._)(e,["linkToComments","post","testid","variant","onClick"]);let{cropGravity:w,disableInteractive:y,pub:_,modifiedPosts:C,showPinForPostIds:B,utm:k,onClickPost:x,onUnpinPost:P}=(0,p.ZT)(),I=null!==(i=C[m.id])&&void 0!==i?i:m,X=!!(null==B?void 0:B.has(I.id)),T=null!==(a=null===(t=I.postTheme)||void 0===t?void 0:t.post_preview_crop_gravity)&&void 0!==a?a:w,N=z[v];if(!N)return console.warn("PostPreview: ".concat(v," not implemented")),null;let L=(0,S.zV)({linkToComments:!!h,post:I,pub:_,utm:k});return(0,l.tZ)(p.hV,{cropGravity:T,linkToComments:h,postPreviewUrl:L,children:(0,l.BX)(Z.tu,{className:s()(E.container,"post-preview-container"),"data-testid":g,position:"relative",radius:"sm",onClick:e=>{f&&f({event:e,post:I}),x&&x({event:e,post:I}),y||(0,u.uX)(L,{event:e})},children:[(0,l.tZ)(N,(0,o._)((0,n._)({},b),{post:I})),X&&(0,l.BX)(Z.gq,{bg:"white",className:E.pinContainer,padding:8,position:"absolute",radius:"xs",onClick:e=>{e.stopPropagation(),P({postId:I.id})},children:[(0,l.tZ)(d.Z,{className:E.pinIcon,size:20}),(0,l.tZ)(c.Z,{className:E.unpinIcon,size:20})]})]})})}},72019:function(e,t,i){i.d(t,{P:()=>b});var n=i(16584),o=i(30396),r=i(94184),l=i.n(r),a=i(82016),s=i(1055),d=i(20888),c=i(98422),u=i(68648),p=i(93029),h=i(53394),m=i(19081),g=i(74571),v=i(31377),Z=i(60308);let f={container:"container-XQwt8c",fpPodcastOverlay:"fpPodcastOverlay-F_ObU8",fpPodcastOverlayHover:"fpPodcastOverlayHover-j8gEjt",image:"image-wHmpR_",redPlayContainer:"redPlayContainer-gIeqLa"},b=e=>{var t,i,r,b,w,y;let{className:_,disableVideoHover:C,disableVideoHoverFade:B,forceShowPlayButton:k,hidePlaceholder:x,imageAspectRatio:S,imageWidth:P,isBelowTheFold:I,post:X,videoPlayIconVariant:T="default"}=e,{cropGravity:N,pub:L}=(0,u.ZT)(),{isMobile:q}=(0,c.v9)(),M=(0,o.sO)(null),[E]=(0,g.i5)(M),z=!!X.videoUpload,R=!!(!z&&"podcast"===X.type),A=(0,v.getCoverImageUrl)(X);!A&&((null===(b=X.videoUpload)||void 0===b?void 0:b.thumbnail_id)?A=(0,Z.kOB)(X.videoUpload):(null===(w=X.podcastUpload)||void 0===w?void 0:w.thumbnail_id)&&(A=(0,Z.kOB)(X.podcastUpload,{post:X})));let O=P<=640;if(!A&&x)return null;let D=P||S?S:1.32,F=P||336,U=!!(null===(t=X.videoUpload)||void 0===t?void 0:t.live_stream_id);return(0,n.BX)("div",{ref:M,className:l()(_,f.container,"post-preview-image",{"post-preview-cover-image-container--empty":!A}),style:"aspect-ratio: ".concat(D),children:[(R||z||k)&&(0,n.tZ)(m.gq,{alignItems:"center",className:l()(f.fpPodcastOverlay,{[null!==(y=f.fpPodcastOverlayHover)&&void 0!==y?y:""]:!B}),inset:0,justifyContent:"center",position:"absolute",children:"default"===T?(0,n.tZ)(a.Z,{fill:"white",height:36,stroke:"none"}):(0,n.tZ)("div",{className:f.redPlayContainer,children:(0,n.tZ)(s.Z,{fill:"white",height:q?12:20,stroke:"none"})})}),z&&(O?(0,n.tZ)(p.Z,{aspectRatio:(null===(i=X.videoUpload)||void 0===i?void 0:i.width)&&(null===(r=X.videoUpload)||void 0===r?void 0:r.height)?X.videoUpload.width/X.videoUpload.height:D,containerRef:M,post:X,size:P>320?"large":"medium"}):(0,n.tZ)(h.Z,{isHovered:E&&!C,post:X,pub:L})),A?(0,n.tZ)(d.e,{alt:"",className:f.image,imageProps:D?{height:Math.round(F/D),smartCrop:!0,gravity:U?"auto":N}:{},imageSizingCss:"(min-width:768px) 50vw, 100vw",loading:I?"lazy":void 0,maxWidth:F,src:A,style:{aspectRatio:"".concat(D)}}):null]})}},33870:function(e,t,i){i.d(t,{Hw:()=>a,YU:()=>s,em:()=>l,zV:()=>d});var n=i(6400),o=i(60308),r=i(60836);let l=(0,n.createContext)({setIsOnboarding:null}),a=1.5,s=16/9,d=e=>{let{linkToComments:t,post:i,pub:n,utm:l}=e;return t?(0,r.uR)(n,i,{comments:!0,urlParams:{utm:l}}):"video"===i.type?(0,o.rhs)(i.canonical_url,{autoPlay:!0,utm:l}):l?(0,o.n1t)(i.canonical_url,{utm:l}):i.canonical_url}},17836:function(e,t,i){i.d(t,{R:()=>r});var n=i(16584),o=i(58175);let r=e=>{let{align:t,children:i}=e;return(0,n.tZ)(o.xv.B2,{align:t,color:"pub-primary-text",font:"pub-headings",weight:"bold",children:i})}},17540:function(e,t,i){i.d(t,{Ct:()=>f,PZ:()=>k,w:()=>I,zY:()=>S});var n=i(7409),o=i(99282),r=i(98848),l=i(16584),a=i(94184),s=i.n(a),d=i(12706),c=i(53957),u=i(20144),p=i(19081),h=i(38841),m=i(58175),g=i(71460),v=i(75031),Z=i(66327);let f=e=>{let t;var{content:i,children:o}=e,a=(0,r._)(e,["content","children"]);return t=i?"number"==typeof i?(0,l.tZ)(C,(0,n._)({number:i},a)):"string"==typeof i?(0,l.tZ)(_,(0,n._)({text:i},a)):(0,l.tZ)(B,(0,n._)({icon:i},a)):(0,l.tZ)(y,(0,n._)({},a)),(0,l.tZ)(b,{badge:t,children:o})},b=e=>{let{children:t,badge:i}=e;return(0,l.BX)(p.hs,{position:"relative",className:v.Z.container,children:[t,i]})},w=e=>{let{priority:t="primary",theme:i="accent",placement:n="top-right",shape:o="circle",radius:r="full",className:a,children:d,style:c}=e;return(0,l.tZ)(p.hs,{alignItems:"center",justifyContent:"center",position:"absolute",userSelect:"none",sizing:"border-box",radius:r,className:s()(v.Z.badge,v.Z["placement_".concat(n)],v.Z["shape_".concat(o)],Z.Z["theme_".concat(i)],Z.Z["priority_".concat(t)],a),style:c,children:d})},y=e=>{var{className:t}=e,i=(0,r._)(e,["className"]);return(0,l.tZ)(w,(0,o._)((0,n._)({},i),{className:s()(v.Z.dot,t)}))},_=e=>{var{text:t,className:i}=e,a=(0,r._)(e,["text","className"]);let d=1===t.length;return(0,l.tZ)(w,(0,o._)((0,n._)({},a),{className:s()(v.Z.text,d&&v.Z.singleElement,i),children:(0,l.tZ)(m.xv.Meta,{as:"span",color:"inherit",children:t})}))},C=e=>{var{number:t,className:i}=e,a=(0,r._)(e,["number","className"]);let d=1===t.toString().length;return(0,l.tZ)(w,(0,o._)((0,n._)({},a),{className:s()(v.Z.text,d&&v.Z.singleElement,i),children:(0,l.tZ)(m.xv.Meta,{as:"span",color:"inherit",children:t})}))},B=e=>{var{icon:t,fillIcon:i,className:a,style:d}=e,c=(0,r._)(e,["icon","fillIcon","className","style"]);return(0,l.tZ)(w,(0,o._)((0,n._)({},c),{className:s()(v.Z.singleElement,i&&v.Z.fillIcon,a),style:d,children:t}))},k=e=>{var{children:t,placement:i="bottom-right",tier:o}=e,a=(0,r._)(e,["children","placement","tier"]);let s=(0,l.tZ)(x,(0,n._)({placement:i,tier:o},a));return o?(0,l.tZ)(b,{badge:s,children:t}):(0,l.tZ)(l.HY,{children:t})},x=e=>{var{userId:t,tier:i,className:a}=e,d=(0,r._)(e,["userId","tier","className"]);return(0,l.tZ)(w,(0,o._)((0,n._)({},d),{className:s()(v.Z.singleElement,v.Z.empty,a),children:(0,l.tZ)(g.UserBadge,{tier:i,userId:t,size:"sm"})}))},S=e=>{var{children:t,placement:i="bottom-right"}=e,o=(0,r._)(e,["children","placement"]);let a=(0,l.tZ)(P,(0,n._)({placement:i},o));return(0,l.tZ)(b,{badge:a,children:t})},P=e=>{var{tier:t,fgOverride:i,bgOverride:o}=e,a=(0,r._)(e,["tier","fgOverride","bgOverride"]);return"author"===t?(0,l.tZ)(B,(0,n._)({theme:"accent",fillIcon:!0,icon:(0,l.tZ)(u.Z,{size:12}),style:(0,n._)({},o&&{"--color-tag-bg":o}||{},i&&{"--color-tag-fg":i}||{})},a)):"founding"===t?(0,l.tZ)(B,(0,n._)({theme:"default",priority:"secondary",icon:(0,l.tZ)(d.Z,{size:12})},a)):"paid"===t?(0,l.tZ)(B,(0,n._)({theme:"default",priority:"secondary",icon:(0,l.tZ)(c.Z,{size:12})},a)):null},I=e=>{var{pub:t,children:i,placement:o="bottom-right"}=e,a=(0,r._)(e,["pub","children","placement"]);let s=(0,l.tZ)(X,(0,n._)({pub:t,placement:o},a));return t?(0,l.tZ)(b,{badge:s,children:i}):(0,l.tZ)(l.HY,{children:i})},X=e=>{var{pub:t,className:i}=e,a=(0,r._)(e,["pub","className"]);return(0,l.tZ)(w,(0,o._)((0,n._)({},a),{radius:"xs",className:s()(v.Z.singleElement,v.Z.empty,i),children:(0,l.tZ)(h.wk,{pub:t,size:16,radius:"xs"})}))}},1844:function(e,t,i){i.d(t,{p6:()=>s,y:()=>d});var n=i(7409),o=i(98848),r=i(16584),l=i(98661),a=i(58175);let s=(0,l.forwardRef)((e,t)=>{var{className:i}=e,l=(0,o._)(e,["className"]);return(0,r.tZ)(a.xv.B4,(0,n._)({as:"span",color:"secondary",ref:t,className:i},l))}),d=(0,l.forwardRef)((e,t)=>{var{className:i}=e,l=(0,o._)(e,["className"]);return(0,r.tZ)(a.xv.B4,(0,n._)({as:"span",color:"error",ref:t,className:i},l))})},3570:function(e,t,i){i.d(t,{N:()=>y});var n=i(7409),o=i(99282),r=i(16584),l=i(27506),a=i(50676),s=i(78493),d=i(58017),c=i(94184),u=i.n(c),p=i(25380),h=i(98661),m=i(86374),g=i(30428),v=i(76720),Z=i(80026),f=i(58175),b=i(36938),w=i(68686);function y(e){let{options:t,value:i,onChange:c,className:p,placeholder:y,max:B,showButton:k=!1}=e,x=(0,h.useRef)(null),[S,P]=(0,h.useState)(""),[I,X]=(0,h.useState)(!1),{refs:T,floatingStyles:N,context:L}=(0,l.YF)({placement:"bottom-start",strategy:"fixed",open:I,onOpenChange:X,whileElementsMounted:a.Me,middleware:[(0,s.cv)(4),(0,s.RR)(),(0,s.dp)({padding:0,elementContext:"floating",altBoundary:!1,rootBoundary:"viewport",apply(e){let{elements:t,rects:i}=e;Object.assign(t.floating.style,{minWidth:"".concat(i.reference.width,"px")})}})]}),q=(0,l.KK)(L),{getReferenceProps:M,getFloatingProps:E}=(0,l.NI)([q]),z=new Map(t.map(e=>[e.value,e.label])),R=new Set(i),A=null!=B&&i.length>=B,O=S.trim()?t.filter(e=>e.label.toLowerCase().includes(S.trim().toLowerCase())):t,D=e=>{var t;c(i.filter(t=>e!==t)),null===(t=x.current)||void 0===t||t.focus()},F=i.length>0;return(0,r.tZ)(d.h,{multiple:!0,value:i,onChange:e=>{(null==B||!(e.length>B))&&(c(e),P(""))},children:(0,r.BX)(Z.X2,{className:p,position:"relative",children:[(0,r.BX)(Z.X2,(0,o._)((0,n._)({ref:T.setReference},M()),{flex:"auto",alignItems:"center",className:u()(b.Z.inputBox,w.Z.input,w.Z.inputText,F&&b.Z.hasChips),onClick:()=>{var e;null===(e=x.current)||void 0===e||e.focus()},children:[i.map(e=>(0,r.tZ)(C,{children:(0,r.tZ)(v.A,{onClick:()=>D(e),trailing:(0,r.tZ)(g.Z,{color:"var(--color-fg-tertiary)"}),children:z.get(e)})},String(e))),(0,r.tZ)(d.h.Input,{ref:x,className:b.Z.input,onChange:e=>P(e.currentTarget.value),onKeyDown:e=>{"Backspace"===e.key&&""===S&&i.length>0&&(e.preventDefault(),c(i.slice(0,-1)))},value:S,placeholder:F?void 0:y}),k&&(0,r.tZ)(d.h.Button,{className:b.Z.button,children:(0,r.tZ)(m.Z,{})})]})),I&&(0,r.tZ)(d.h.Options,(0,o._)((0,n._)({ref:T.setFloating,style:N},E()),{static:!0,className:u()(b.Z.options,0===O.length&&b.Z.empty),children:O.map(e=>{let t=A&&!R.has(e.value),i=R.has(e.value);return(0,r.BX)(d.h.Option,{className:b.Z.option,value:e.value,disabled:t,children:[(0,r.tZ)(f.xv.B3,{color:t?"secondary":"primary",children:e.label}),i&&(0,r.tZ)(_,{})]},String(e.value))})}))]})})}let _=()=>(0,r.tZ)(Z.M5,{className:b.Z.check,position:"absolute",children:(0,r.tZ)(p.Z,{size:20,stroke:"var(--color-link-fg)"})}),C=(0,Z.zo)({display:"flex",alignItems:"center",maxHeight:20})},64300:function(e,t,i){i.d(t,{g:()=>u,y:()=>p});var n=i(7409),o=i(99282),r=i(98848),l=i(16584),a=i(94184),s=i.n(a),d=i(98661),c=i(68686);let u=(0,d.forwardRef)((e,t)=>{var{className:i,error:a=!1,rows:d=4,maxlength:u}=e,p=(0,r._)(e,["className","error","rows","maxlength"]);return(0,l.tZ)("textarea",(0,o._)((0,n._)((0,o._)((0,n._)({},p),{rows:d}),void 0!==u?{maxlength:u}:{}),{className:s()("pencraft",i,c.Z.textarea,c.Z.inputText,a&&c.Z.error,p.disabled&&c.Z.disabled,p.readOnly&&c.Z.readOnly),ref:t}))});function p(e){let{value:t,onChange:i}=e,[n,o]=(0,d.useState)(t||"");return(0,d.useEffect)(()=>{t!==n&&o(null!=t?t:"")},[t]),{value:n,setValue:o,handleChange:e=>{o(e.currentTarget.value),null==i||i(e)}}}},17391:function(e,t,i){i.d(t,{j:()=>a});var n=i(16584),o=i(82402),r=i(19081),l=i(58175);let a=e=>{let{contentBelow:t,details:i,disabled:a,label:s,name:d,paddingBottom:c,paddingTop:u,testid:p,track:h,value:m,onChange:g,usePublicationTheme:v}=e;return(0,n.BX)(r.gq,{as:"label",gap:8,cursor:"pointer",paddingBottom:c,paddingTop:u,children:[(0,n.tZ)(o.X,{checked:m,name:null!=d?d:p,"data-track-input":h,disabled:a,size:"sm",onChange:g}),(0,n.BX)(r.tu,{flex:"grow",children:[(0,n.tZ)(l.xv.B4,{as:"span",color:a?v?"pub-secondary-text":"secondary":v?"pub-primary-text":"primary",children:s}),i&&(0,n.tZ)(l.xv.B5,{color:v?"pub-secondary-text":"secondary",children:i}),t]})]})}},65433:function(e,t,i){i.d(t,{J:()=>p});var n=i(7409),o=i(99282),r=i(98848),l=i(16584),a=i(98661),s=i(94184),d=i.n(s),c=i(71068);let u={container:"container-xlqXTa",containerHoverLight:"containerHoverLight-pv1hHj"},p=(0,a.forwardRef)((e,t)=>{var{children:i,className:a,disable:s,href:p,hoverBackground:h,onClick:m}=e,g=(0,r._)(e,["children","className","disable","href","hoverBackground","onClick"]);let v=s?void 0:m,Z="undefined"==typeof window?void 0:p;return(0,l.tZ)(c.xu,(0,o._)((0,n._)({},g,Z?{as:"a",href:Z}:{}),{ref:t,className:d()(a,!s&&u.container,{[u.containerHoverLight]:"light"===h&&!s}),role:v?"button":void 0,onClick:v,children:i}))})},14944:function(e,t,i){i.d(t,{B:()=>c});var n=i(16584),o=i(6400),r=i(98661),l=i(19081),a=i(1844),s=i(68709),d=i(51776);let c=e=>{let{className:t,children:i,detail:l,label:a,alignment:s="vertical",error:d=!1}=e;return(0,n.tZ)("vertical"===s?u:p,{className:t,detail:l,error:d,label:a,children:r.Children.map(i,e=>(0,r.isValidElement)(e)?(0,o.cloneElement)(e,{error:d}):e)})},u=e=>{let{children:t,className:i,detail:o,error:r,label:l}=e;return(0,n.BX)(d.fv,{className:i,children:[(0,n.tZ)(s.__,{weight:"semibold",color:r?"error":"primary",children:l}),t,o?(0,n.tZ)(a.p6,{children:o}):r?(0,n.tZ)(a.y,{children:r}):null]})},p=e=>{let{children:t,className:i,detail:o,error:r,label:c}=e;return(0,n.BX)(l.gq,{className:i,justifyContent:"space-between",alignItems:"start",gap:12,children:[(0,n.BX)(d.fv,{children:[c&&(0,n.tZ)(s.__,{children:c}),o&&(0,n.tZ)(a.p6,{children:o}),r&&(0,n.tZ)(a.y,{children:r})]}),t]})}},4135:function(e,t,i){i.d(t,{T:()=>r});var n=i(68833),o=i(60308);let r=e=>{let{feedUrl:t,pub:i,post:r}=e;(0,n.j)(n.FP.PODCAST_APP_LINK_CLICK,{appName:"Substack App",feedUrl:t}),document.location.href=(0,o.K8_)(null==i?void 0:i.subdomain,null==r?void 0:r.slug,{redirect:"app-marketing",source:"podcast-dropdown"})}},37759:function(e,t,i){i.d(t,{C:()=>d,R:()=>c});var n=i(7409),o=i(99282),r=i(30396),l=i(7882),a=i(63018);let s="/api/v1/messages/suggestions/search";function d(){let[e,t]=(0,r.eJ)(""),i=(0,a._I)(s,{query:{query:e},deps:[e]}),d=(0,l.Kt)(e=>{t(e)},100,[]);return(0,o._)((0,n._)({},i),{query:e,handleSearch:d})}function c(){(0,a.OV)(s,{query:{query:""},deps:[""]})}},91668:function(e,t,i){i.d(t,{S:()=>d});var n=i(16584),o=i(94184),r=i.n(o),l=i(67358);let a={emailIcon:"emailIcon-VHOnI0","icon-20":"icon-20-rna120","icon-40":"icon-40-EI6f0n"},s={apple_podcasts:"/img/shows_app_icons/apple_podcasts.svg?v=1",overcast:"/img/shows_app_icons/overcast.svg?v=1",pocket_casts:"/img/shows_app_icons/pocket_casts.svg?v=1",rss:"/img/shows_app_icons/rss.svg?v=1",spotify:"/img/shows_app_icons/spotify.svg?v=1",spotify_for_paid_users:"/img/shows_app_icons/spotify.svg?v=1",spotify_open_access:"/img/shows_app_icons/spotify.svg?v=1",substack:"/img/shows_app_icons/substack.svg?v=1",youtube:"/img/shows_app_icons/youtube.svg?v=1",youtube_music:"/img/shows_app_icons/youtube_music.svg?v=1"},d=e=>{let{platformKey:t,size:i=20}=e;return"email"===t?(0,n.tZ)(l.Z,{className:r()(a.emailIcon,{[a["icon-20"]]:20===i,[a["icon-40"]]:40===i})}):(0,n.tZ)("img",{className:r()({[a["icon-20"]]:20===i,[a["icon-40"]]:40===i}),src:s[t]})}},85923:function(e,t,i){i.d(t,{y:()=>b});var n=i(16584),o=i(30396),r=i(94184),l=i.n(r),a=i(80569),s=i.n(a),d=i(49995),c=i(95441),u=i(68833),p=i(98914),h=i(17836),m=i(19081),g=i(58175),v=i(4135),Z=i(91668),f=i(43905);let b=e=>{let{description:t,feedUrl:i,pub:o,post:r,section:l,showLinks:a,user:s}=e,{iString:d}=(0,c.M1)();return(0,n.BX)(m.tu,{gap:t?8:16,"data-testid":"shows-listen-on",role:"region","aria-label":d("Listen on"),"aria-hidden":!0,children:[(0,n.tZ)(h.R,{children:d("Listen on")}),t&&(0,n.tZ)(g.xv.B3,{color:"pub-secondary-text",paddingBottom:8,children:t}),(0,n.BX)(m.gq,{gap:8,wrap:"wrap",children:[r&&(0,n.tZ)(w,{platformKey:"substack",label:d("Substack App"),onClick:()=>{(0,v.T)({feedUrl:i,pub:o,post:r})}}),(0,f.U6)({feedUrl:i,isApple:(0,p.V5)(),isMobile:!1,showLinks:a,user:s,render:e=>{let{label:t,key:i,onClick:o}=e;return(0,n.tZ)(w,{label:t,platformKey:i,onClick:o})}}),(null==s?void 0:s.is_subscribed)&&(0,n.tZ)(y,{section:l})]})]})},w=e=>{let{disabled:t,label:i,platformKey:o,onClick:r}=e;return(0,n.BX)(m.gq,{alignItems:"center",bg:"secondary",className:l()("listen-on-item-yiZDJR",{"listen-on-item--disabled-S4EzSi":t}),gap:8,paddingX:12,radius:"sm",onClick:t?void 0:r,children:[(0,n.tZ)(m.hs,{opacity:t?40:100,children:(0,n.tZ)(Z.S,{platformKey:o})}),(0,n.tZ)(g.xv.B4,{weight:"semibold",color:"pub-secondary-text",opacity:t?80:100,nowrap:!0,children:i})]})},y=e=>{let{section:t}=e,{iString:i}=(0,c.M1)(),[r,l]=(0,o.eJ)(!1),a=async()=>{try{(0,u.j)(u.FP.PODCAST_EMAIL_LINK_CLICKED),await s().post("/api/v1/subscription/send_podcast_email").send({section_id:null==t?void 0:t.id}),(0,d.ZP)(i("Email sent")),l(!0)}catch(e){(null==e?void 0:e.status)===429?((0,d.ZP)(i("Email already sent")),l(!0)):(0,d.ZP)(i("Something went wrong sending email"))}};return(0,n.tZ)(w,{disabled:r,label:r?i("Email sent"):i("Email mobile setup link"),platformKey:"email",onClick:()=>{a()}})}},38501:function(e,t,i){i.d(t,{o:()=>tN});var n=i(7409),o=i(99282),r=i(16584),l=i(98661),a=i(30396),s=i(80569),d=i.n(s),c=i(61649),u=i(89074),p=i(56219),h=i(90311),m=i(94442),g=i(11183),v=i(24658),Z=i(40647),f=i(60807),b=i(57952),w=i(53030),y=i(68833),_=i(55480),C=i(98914),B=i(98422),k=i(19081);let x={backdrop:"backdrop-_YQndu",backdropHidden:"backdropHidden-pg_NJc",backdropVisible:"backdropVisible-eL7zZp"},S=e=>{let{visible:t,className:i,style:n={}}=e,[o,l]=(0,a.eJ)(!1),[s,d]=(0,a.eJ)(t);return((0,a.d4)(()=>{t?(d(!0),requestAnimationFrame(()=>{requestAnimationFrame(()=>{l(!0)})})):l(!1)},[t]),(0,a.d4)(()=>{t&&d(!0)},[t]),s)?(0,r.tZ)("div",{className:"".concat(x.backdrop," ").concat(o?x.backdropVisible:x.backdropHidden," ").concat(i),onTransitionEnd:function(){t||d(!1)},style:n}):null};var P=i(74571),I=i(94184),X=i.n(I),T=i(91432),N=i(6070);let L=e=>{let{audioPlayerRef:t,hasPaywall:i,feedUrl:n,isPrivateFeed:o,isServingFreePodcastUrl:l,post:a,pub:s,section:d,user:c,onChange:u,onCommentsClick:p,freeSignup:h,reaction_token:g}=e,{isMobile:v}=(0,B.v9)(),Z=(0,N.HD)({pub:s});return(0,r.tZ)("div",{className:X()("player-wrapper-outer-eAOhcD",{"playerWrapperOuterFP-bKWoVB":Z}),children:(0,r.tZ)("div",{className:X()("player-wrapper-inner-KUdif0",{"playerWrapperInnerFP-Cm0O_q":Z}),children:(0,r.tZ)(T.Fb,{audioPlayerRef:t,explicitHeight:Z?340:void 0,feedUrl:n,hasPaywall:i,isPrivateFeed:o,isServingFreePodcastUrl:l,post:a,pub:s,radius:Z&&v?"none":void 0,section:d,user:c,freeSignup:h,ufiComponent:Z?null:(0,r.tZ)(m._2,{isStatic:!1,labelStyle:"counts-or-none",position:"shows-episode-player",post:a,pub:s,style:"large-on-dark",user:c,onChange:u,onCommentsClick:p}),reaction_token:g})})})};var q=i(3862),M=i(347),E=i(74626),z=i(9550),R=i(49259),A=i(7523),O=i(11268),D=i(68648),F=i(61254),U=i(58175),H=i(62686),W=i(97742),J=i(95441),Y=i(15771),V=i(6490),j=i(63474),G=i(70379),K=i(4135),Q=i(91668),$=i(43905),ee=i(81821);let et=e=>{let{feedUrl:t,isStandaloneVideo:i,eligibleForPodcast:n,post:o,pub:a,showLinks:s,user:d,onTranscriptClick:c}=e,{iString:u}=(0,J.M1)(),[p,h]=(0,l.useState)(!1);return(0,r.BX)(r.HY,{children:[(0,r.BX)(k.gq,{gap:8,overflowX:"auto",className:"horizontalScrolling-CUpSMl",children:[(0,r.tZ)(Y.zx,{leading:(0,r.tZ)(W.Z,{height:18,style:{stroke:"none"}}),priority:"secondary",onClick:()=>(0,K.T)({feedUrl:t,pub:a,post:o}),children:u("Open in app")}),c&&(0,r.tZ)(Y.zx,{leading:(0,r.tZ)(H.Z,{size:20}),priority:"secondary",onClick:c,children:u("Transcript")}),!i&&n&&(0,r.tZ)(Y.zx,{priority:"secondary",onClick:()=>{h(!0)},children:u("Listen via...")})]}),(0,r.tZ)(ei,{isModalOpen:p,setIsModalOpen:h,feedUrl:t,showLinks:s,user:d})]})},ei=e=>{let{isModalOpen:t,setIsModalOpen:i,feedUrl:l,showLinks:a,user:s}=e,{iString:d}=(0,J.M1)(),c=(0,G.pm)();return(0,r.BX)(V.u_,{isOpen:t,onClose:()=>i(!1),children:[(0,r.tZ)(V.xB,{title:d("Listen via..."),description:d("Select your favorite podcast app from the list below."),showClose:!0,showDivider:!0,onClose:()=>i(!1)}),(0,r.tZ)(V.fe,{children:(0,r.tZ)(k.tu,{gap:20,children:a&&(0,$.U6)({feedUrl:l,isApple:(0,ee.s)(),isMobile:!0,showLinks:a,user:s,render:e=>{let{key:t,label:i,url:n,onClick:o}=e;return(0,r.tZ)(en,{platformKey:t,label:i,url:n,onClick:o})}})})}),(0,r.tZ)(V.mz,{direction:"column",secondaryButton:(0,r.tZ)(Y.zx,{priority:"secondary",onClick:()=>{c.popToast(e=>(0,r.tZ)(G.FN,(0,o._)((0,n._)({},e),{text:d("Copied link to clipboard")}))),(0,C.vQ)(l)},children:d("Copy RSS feed URL")})})]})},en=e=>{let{platformKey:t,label:i,url:n,onClick:o}=e;return(0,r.tZ)(j.A0,{href:n,children:(0,r.BX)(k.gq,{alignItems:"center",gap:12,onClick:o,children:[(0,r.tZ)(Q.S,{platformKey:t,size:40}),(0,r.tZ)(U.xv.B3,{weight:"bold",children:i})]})})};var eo=i(60308),er=i(63651);let el=e=>{let{feedUrl:t,isStandaloneVideo:i,eligibleForPodcast:n,post:o,pub:l,magicToken:a,section:s,showLinks:d,user:c,onChange:u,onCommentsClick:p,onToggleRestackModal:h,onTranscriptClick:g}=e,{isMobile:v}=(0,B.v9)();return(0,N.HD)({pub:l})?(0,r.tZ)(ea,{post:o,pub:l,section:s,user:c}):(0,r.tZ)(M.h,{children:(0,r.BX)(k.tu,{gap:16,children:[v&&(0,r.tZ)(et,{feedUrl:t,isStandaloneVideo:i,eligibleForPodcast:n,post:o,pub:l,showLinks:d,user:c,onTranscriptClick:g}),(0,r.BX)(k.tu,{gap:8,children:[(0,r.tZ)(U.xv.H2,{color:"pub-primary-text",font:"pub-headings",children:o.title}),o.subtitle&&(0,r.tZ)(U.xv.B2,{color:"pub-secondary-text",font:"pub-headings",weight:"regular",children:o.subtitle})]}),(0,r.tZ)(q.E,{variant:"shows",post:o,pub:l}),!v&&(0,r.tZ)(m.Mp,{hideBottomBorder:!0,post:o,pub:l,user:c,onChange:u,postReactionToken:a,onCommentsClick:p,onToggleRestackModal:h,onTranscriptClick:g})]})})},ea=e=>{let{post:t,pub:i,section:n,user:o}=e,{isMobile:l}=(0,B.v9)(),a=(0,eo.UVC)({pub:i,section:n}),s=!!t.videoUpload;return(0,r.tZ)(D.hV,{pub:i,children:(0,r.tZ)(M.h,{children:(0,r.BX)(k.tu,{gap:24,children:[(0,r.BX)(k.tu,{gap:12,children:[(0,r.BX)(k.tu,{gap:8,children:[(0,r.tZ)(A.Z,{preset:"h4-serif",children:t.title}),(0,r.tZ)(R.z,{post:t})]}),t.subtitle&&(0,r.tZ)(A.Z,{preset:"d3-serif",children:t.subtitle})]}),!s&&(0,r.BX)(k.hs,{alignItems:l?"start":"center",direction:l?"column":"row",gap:24,justifyContent:"space-between",children:[(0,r.tZ)(z.o,{pub:i,section:n,user:o}),(0,r.tZ)(E._,{href:a,variant:"tertiary",size:"md",trailingIcon:"chevron-right",children:"View all episodes"})]}),s&&n&&(0,N.HD)({pub:i})&&(0,r.BX)(k.hs,{direction:l?"column":"row",justifyContent:"space-between",children:[(0,r.tZ)(O.b,{pub:i,section:n}),(0,r.tZ)(E._,{href:(0,er.Ucy)(i,{section:n}),variant:"tertiary",size:"md",trailingIcon:"chevron-right",children:"View all episodes"})]}),(0,r.tZ)(F.iz,{})]})})})};var es=i(17836),ed=i(94874),ec=i(17540);let eu=e=>{let{bylines:t,variant:i}=e;return(0,r.tZ)(k.hs,(0,o._)((0,n._)({},"shows"===i?{direction:"row",gap:12,wrap:"wrap"}:{direction:"column",gap:24}),{children:t.map(e=>(0,r.BX)(k.gq,{alignItems:"center",gap:8,children:[(0,r.tZ)(ec.PZ,{tier:e.bestseller_tier,children:(0,r.tZ)(ed.xV,{user:e,utmSource:"author-byline-face-podcast",size:32})}),(0,r.BX)(k.tu,{children:[(0,r.tZ)(U.xv.B4,{color:"pub-primary-text",children:e.name}),e.primaryPublicationName&&(e.primaryPublicationUrl?(0,r.BX)(U.xv.B4,{color:"pub-secondary-text",translated:!0,children:["Writes"," ",(0,r.tZ)("a",{style:{textDecoration:"none"},href:e.primaryPublicationUrl,children:I18N.p(e.primaryPublicationName)})," ",(0,r.tZ)("a",{href:"".concat(e.primaryPublicationUrl,"/subscribe"),children:"Subscribe"})]}):(0,r.BX)(U.xv.B4,{color:"pub-secondary-text",translated:!0,children:["Writes ",I18N.p(e.primaryPublicationName)]}))]})]}))}))},ep=e=>{let{bylines:t,isStandaloneVideo:i,eligibleForPodcast:n}=e,{iString:o}=(0,J.M1)();return(0,r.BX)(k.tu,{gap:16,"aria-label":"Appears in episode",role:"region",children:[(0,r.tZ)(es.R,{children:o(i||!n?"Authors":"Appears in episode")}),(0,r.tZ)(eu,{bylines:t,variant:"shows"})]})};var eh=i(33665),em=i(66500),eg=i(3486);let ev={container:"container-MuztBl","subscribe-container":"subscribe-container-_pmqCv",description:"description-ij0plp"},eZ=e=>{let{post:t,pub:i,section:n,user:o,isStandaloneVideo:l}=e,{title:a,description:s,url:d}=(0,$.Mv)({pub:i,section:n,useSection:l});return(0,r.BX)(k.tu,{border:"detail-themed",className:ev.container,gap:24,paddingX:16,paddingY:24,radius:"md",shadow:"lg",onClick:()=>{window.location.href=d},children:[(0,r.BX)(k.tu,{gap:8,alignItems:"center",children:[(0,r.tZ)(eg.p,{post:t,pub:i,section:n,useSection:l}),a&&(0,r.tZ)(es.R,{align:"center",children:a}),(0,N.VL)({pub:i,includeTheRampart:!0})&&(0,r.tZ)(k.gq,{alignItems:"center",gap:8,children:(0,N.rM)({sectionId:null==n?void 0:n.id}).map(e=>(0,r.tZ)(em.S,{medium:e}))}),s&&(0,r.BX)(k.tu,{gap:8,children:[s.split("\n").map(e=>(0,r.tZ)(U.xv.B4,{className:ev.description,color:"pub-secondary-text",align:"center",children:e})),(0,r.tZ)("span",{hidden:!0,"data-testid":"podcast-description",children:s})]})]}),!(null==o?void 0:o.is_subscribed)&&(0,r.tZ)("div",{className:ev["subscribe-container"],onClick:e=>{e.stopPropagation()},children:(0,r.tZ)(eh.Z,{expectTruncation:!0,pub:i,source:"episode-page-sidebar",user:o})})]})};var ef=i(85923),eb=i(76787);let ew=e=>{let{isStandaloneVideo:t,pub:i,recentEpisodes:n,user:o}=e,{iString:l}=(0,J.M1)(),{isMobile:a}=(0,B.v9)();return(0,r.tZ)(D.hV,{pub:i,user:o,children:(0,r.BX)(k.tu,{gap:a?12:8,"aria-label":l("Recent episodes"),role:"region",children:[(0,r.tZ)(es.R,{children:l(t?"Recent Posts":"Recent Episodes")}),(0,r.tZ)(k.tu,{gap:12,style:{margin:a?void 0:"0 -8px"},"aria-label":l("Recent episodes"),role:"region",children:n.map(e=>(0,r.tZ)(eb.G,{post:e,variant:"mini-episode",onClick:()=>{(0,y.j)(y.FP.RECENT_EPISODE_ITEM_CLICKED,{post_id:e.id})}}))})]})})};var ey=i(84864);let e_=e=>{var t;let{feedUrl:i,isStandaloneVideo:o,eligibleForPodcast:l,post:s,pub:c,recentEpisodes:u,section:p,showLinks:h,user:m}=e,{iString:g}=(0,J.M1)(),{isMobile:v}=(0,B.v9)(),[Z,f]=(0,a.eJ)(u),b=(0,a.Ye)(()=>{var e;return null!==(e=null==Z?void 0:Z.filter(e=>e.id!==s.id))&&void 0!==e?e:null},[Z,s.id]),w=(0,ey.getBylineUsers)(s).sort((e,t)=>e.id===c.author_id?-1:t.id===c.author_id?1:e.is_guest&&!t.is_guest?-1:!e.is_guest&&t.is_guest?1:(e.name||"").localeCompare(t.name||""));return(0,a.d4)(()=>{let e=async()=>{var e,t;f(null!==(t=(await d().get("/api/v1/recent_posts").query((0,n._)({rss_episodes_only:!(null===(e=s.podcastFields)||void 0===e?void 0:e.hide_from_feed)},(null==p?void 0:p.id)?{section_id:p.id}:{}))).body)&&void 0!==t?t:[])};u||e()},[s.id,null===(t=s.podcastFields)||void 0===t?void 0:t.hide_from_feed,u,c.id,null==p?void 0:p.id]),(0,r.BX)(k.tu,{gap:32,"aria-label":g("Sidebar content"),role:"complementary",children:[!v&&(0,r.tZ)(eZ,{post:s,pub:c,section:p,user:m,isStandaloneVideo:o}),(0,r.BX)(k.tu,{gap:32,children:[!v&&!o&&l&&(0,r.tZ)(ef.y,{feedUrl:i,showLinks:h,post:s,pub:c,section:p,user:m}),!v&&c.bylines_enabled&&w.length>0&&(0,r.tZ)(ep,{bylines:w,isStandaloneVideo:o,eligibleForPodcast:l}),b&&b.length>0&&(0,r.tZ)(ew,{isStandaloneVideo:o,pub:c,recentEpisodes:b,user:m})]})]})};var eC=i(6400),eB=i(89111),ek=i(16378),ex=i(71375),eS=i(72508),eP=i(62718),eI=i(71068);let eX={"transcription-chunk":"transcription-chunk-YeZNdv",transcriptionWords:"transcriptionWords-u5CRAD","transcription-chunk--active":"transcription-chunk--active-HnAU7N","transcription-timestamp":"transcription-timestamp-mDeQkH","transcription-text-align-left":"transcription-text-align-left-V7cht2","transcription-full-body-container":"transcription-full-body-container-LXFSNv",sticky:"sticky-zutBDd"},eT=e=>{let{activeRowIndex:t,isPlaying:i,postId:n,row:o,rowIndex:l,showSpeaker:s,speakerName:d,words:c,onPause:u,onPlay:p}=e,{searchTerm:h,focusedItemStart:m}=(0,b.pH)(),g=(0,a.sO)(null),v=h&&o.text.toLowerCase().includes(h.toLowerCase());(0,a.d4)(()=>{if(m&&g.current&&o.start===m){var e;null===(e=g.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center"})}},[m,o.start]);let Z=()=>v?(0,r.tZ)(eP.J,{isFocused:o.start===m,searchTerm:h,rowIndex:l,text:o.text.trim()}):(0,r.tZ)(eI.xu,{display:"inline",className:eX.transcriptionWords,lineHeight:20,radius:"sm","data-chunk-index":l,children:((null==c?void 0:c.length)?c.map(e=>e.word).join(" "):o.text).trim()});return(0,r.tZ)("div",{ref:g,children:(0,r.tZ)(eS.sZ,{onPlay:p,onPause:u,postId:n,isActiveRow:t==l,isPlaying:i,row:o,rowIndex:l,className:eX["transcription-chunk"],activeClassName:eX["transcription-chunk--active"],children:d&&s?(0,r.BX)(k.tu,{paddingTop:2,children:[(0,r.BX)(k.gq,{alignItems:"baseline",gap:12,children:[(0,r.tZ)(U.xv.B4,{className:X()(eX["transcription-timestamp"],eX["transcription-text-align-left"]),color:"pub-secondary-text",children:d?(0,ey.secondsToHHMMSS)(o.start):""}),(0,r.tZ)(U.xv.Meta,{padding:2,paddingTop:4,color:"accent",weight:"semibold",children:d})]}),(0,r.BX)(k.gq,{alignItems:"baseline",gap:12,"data-chunk-index":l,children:[(0,r.tZ)(U.xv.B4,{className:X()(eX["transcription-timestamp"],eX["transcription-text-align-left"]),color:"pub-secondary-text",children:d?"":(0,ey.secondsToHHMMSS)(o.start)}),(0,r.tZ)(eI.xu,{display:"inline",className:eX.transcriptionWords,lineHeight:20,padding:2,radius:"sm","data-chunk-index":l,children:Z()})]})]}):(0,r.BX)(k.gq,{alignItems:"baseline",gap:12,"data-chunk-index":l,children:[(0,r.tZ)(U.xv.B4,{className:X()(eX["transcription-timestamp"],eX["transcription-text-align-left"]),color:"pub-secondary-text",children:d?"":(0,ey.secondsToHHMMSS)(o.start)}),(0,r.tZ)(eI.xu,{display:"inline",className:eX.transcriptionWords,padding:2,radius:"sm","data-chunk-index":l,children:Z()})]})})},l)},eN=e=>{let{post:t,playerRef:i,transcription:l,fullWidth:s,onClose:d,onExpand:c,onCollapse:u}=e,{isMobile:p}=(0,B.v9)(),[h,m]=(0,a.eJ)(0),g=(0,a.sO)(null),[v,Z]=(0,a.eJ)(!1),[f,w]=(0,a.eJ)(0),{searchTerm:y}=(0,b.pH)(),_=()=>{if(g.current){let e=g.current.getBoundingClientRect().top,t=window.scrollY||window.scrollY;t>f&&e<=0?Z(!0):t<=f&&Z(!1)}};return(0,a.d4)(()=>{let e=g.current,t=()=>{e&&!v&&w(e.offsetTop)};t();let i=new ResizeObserver(t);return e&&i.observe(e),window.addEventListener("scroll",_),()=>{e&&i.unobserve(e),window.removeEventListener("scroll",_)}},[v]),(0,r.tZ)(M.h,{children:(0,r.BX)(k.tu,{gap:24,flex:"grow",children:[(0,r.BX)(k.gq,{gap:8,alignItems:"center",children:[(0,r.tZ)(k.gq,{flex:"grow",ref:g,className:v?eX.sticky:"",display:!y&&v?"none":void 0,children:(0,r.tZ)(k.gq,{paddingLeft:p&&v?8:0,children:(0,r.tZ)(b.Rq,{postId:t.id,closeAlwaysVisible:!1})})}),!p&&(0,r.BX)(eC.Fragment,{children:[!s&&(0,r.tZ)(Y.hU,{onClick:c,children:(0,r.tZ)(eB.Z,{})}),s&&(0,r.tZ)(Y.hU,{onClick:u,children:(0,r.tZ)(ek.Z,{})})]}),(0,r.tZ)(Y.hU,{onClick:d,children:(0,r.tZ)(ex.Z,{})})]}),(0,r.tZ)("div",{className:eX["transcription-full-body-container"],children:(0,r.tZ)(eS.ZP,{player:i,postId:t.id,renderTranscriptionChunk:e=>(0,r.tZ)(eT,(0,o._)((0,n._)({},e),{activeRowIndex:h,postId:t.id})),transcription:l,onUpdateActiveRowIndex:m})})]})})};var eL=i(27412),eq=i(98848),eM=i(10120),eE=i(12281),ez=i(46543),eR=i(59488);let eA=e=>{let{key:t,initialValue:i}=e,[n,o]=(0,a.eJ)(i);return(0,a.d4)(()=>{let e=localStorage.getItem(t);e&&o("true"===e)},[t]),[n,e=>{o(e),e?localStorage.setItem(t,"true"):localStorage.removeItem(t)}]};var eO=i(49526),eD=i(8746),eF=i(18618),eU=i(86657),eH=i(20888),eW=i(4158),eJ=i(70958),eY=i(61527);let eV=e=>{var t,i,n,o;let{alternateAudioSource:l,audioPlayerRef:s,hideControls:d,isIdle:c,post:u,pub:p,showPaywall:h,onFinishAudio:m,onSetAudioIsPlaying:g}=e,{iString:v}=(0,J.M1)(),{isMobile:Z}=(0,B.v9)(),f=(0,w.On)(s),b=u.section_id&&null!==(t=p.sections.find(e=>e.id===u.section_id))&&void 0!==t?t:null,{artUrl:y}=b?(0,_.d_)({pub:p,section:b}):(0,_.jU)({pub:p}),C=b?null!==(i=b.podcastPalette)&&void 0!==i?i:null:null!==(n=p.podcastPalette)&&void 0!==n?n:null,x=["extra_audio_preview","alternate_audio_preview"].includes(l.type);return(0,a.d4)(()=>{g(f)},[f,g]),(0,r.tZ)(eU.Z,{ref:s,src:l.url,updateOnEveryFrame:(null!==(o=u.podcast_duration)&&void 0!==o?o:0)<300,onFinishAudio:m,trackingProps:{contentType:"post",entityKey:u.id,entityType:"post",surface:"post"},render:e=>{let{duration:t,isPlaying:i,togglePlayback:n}=e,o=e=>e.stopPropagation();return(0,r.BX)(k.tu,{alignItems:"center",bg:"primary",flex:"grow",justifyContent:"center",position:"relative",overflow:Z?"auto":"hidden",onClick:()=>{n()},children:[(0,r.tZ)(eW.z,{backgroundUrl:y,blurAmount:40,isBlurred:!0,palette:C,radius:"none"}),(0,r.tZ)(k.gq,{className:"darkenBottom-zaTJyO",position:"absolute",inset:0}),(0,r.BX)(k.gq,{position:"relative",children:[y&&!h&&(0,r.tZ)(eH.e,{imageIsFixedWidth:!0,maxWidth:Z?160:340,radius:"md",src:y,useRetinaSizing:!0}),(0,r.tZ)(k.gq,{alignItems:"center",inset:0,justifyContent:"center",position:"absolute",children:(0,r.tZ)(k.gq,{onClick:o,opacity:100*!d,children:(0,r.tZ)(eF.fI,{isPlaying:null!=i&&i,size:Z?56:72,onTogglePlayback:n})})})]}),(0,r.tZ)(k.gq,{onClick:o,children:(0,r.tZ)(eY.Vo,{disableShortcuts:!0,disableTooltips:!0,duration:t,handle:null,isActive:(!i||!c)&&!h,isAudio:!0,isFocused:!1,post:u,pub:p,mediaUpload:null,mediaRef:s,showPaywall:!1})}),x&&(0,r.tZ)(k.gq,{position:"absolute",style:{top:12,left:12},children:(0,r.tZ)(eJ.l,{avoidBackgroundBlur:!0,children:v("Preview")})})]})}})};var ej=i(28226),eG=i(98961),eK=i(38464),eQ=i(87077);let e$={unselectedButton:"unselectedButton-LnSrSa"},e0="switcher-audio-button",e1=e=>{let{selected:t,sourceType:i,onSelect:n}=e,{iString:o}=(0,J.M1)(),{isMobile:l}=(0,B.v9)(),a={alternate_audio_preview:o("Switch to audio"),alternate_full_audio:o("Switch to audio"),extra_audio_preview:o("Switch to the audio preview"),free_podcast_url:o("Switch to the full ad-supported audio")}[i];return(0,r.BX)(k.tu,{bg:"glass-inverted-medium",gap:4*!l,padding:4,pointerEvents:l?"none":"auto",radius:"full",children:[(0,r.tZ)(eQ.u,{disabled:l,preferPlacement:"right-center",text:o("Switch to video"),children:(0,r.tZ)(Y.GI,{className:X()({[e$.unselectedButton]:"video"!==t}),rounded:!0,size:l?"sm":"md",onClick:()=>{null==n||n("video")},children:(0,r.tZ)(eG.Z,{size:l?18:20})})}),(0,r.tZ)(k.gq,{position:"relative",className:e$.audioButtonContainer,children:(0,r.tZ)(eQ.u,{disabled:l,preferPlacement:"right-center",text:a,children:(0,r.tZ)(Y.GI,{id:e0,className:X()({[e$.unselectedButton]:"audio"!==t}),rounded:!0,size:l?"sm":"md",onClick:()=>{null==n||n("audio")},children:(0,r.tZ)(eK.Z,{size:l?16:18})})})})]})},e4=(0,eC.createContext)({containerRef:{current:null},clearSelection:()=>void 0,finishedSelection:null,isSelecting:!1,selectionBegin:null,selectionFinish:null,selectionRef:{current:null}}),e2=e=>{let{children:t}=e,i=(0,a.sO)(null),n=(0,a.sO)(null),[o,l]=(0,a.eJ)(!1),[s,d]=(0,a.eJ)(!1),[c,u]=(0,a.eJ)(null),[p,h]=(0,a.eJ)(null),m=c&&p&&(p.rowIndex<c.rowIndex||p.rowIndex===c.rowIndex&&p.wordIndex<c.wordIndex),g=m?p:c,v=m?c:p,Z=(0,a.Ye)(()=>s&&g&&v?{begin:g,finish:v}:null,[g,v,s]);(0,a.d4)(()=>{if(!i.current)return;let e=i.current,t=e=>{s&&(d(!1),l(!1),u(null),h(null));let t=Number(e.target.dataset.rowIndex),i=Number(e.target.dataset.wordIndex);isNaN(t)||isNaN(i)||u({rowIndex:t,wordIndex:i})},n=e=>{if(!c||s)return;o||l(!0);let t=e.target.dataset;if("true"===t.inBetween){let e=Number(t.prevRowIndex),i=Number(t.prevWordIndex),n=Number(t.nextRowIndex),o=Number(t.nextWordIndex);if(isNaN(e)||isNaN(i)||isNaN(n)||isNaN(o))return;c.rowIndex<e||c.rowIndex===e&&c.wordIndex<i?h({rowIndex:e,wordIndex:i}):h({rowIndex:n,wordIndex:o});return}let i=Number(t.rowIndex),n=Number(t.wordIndex);isNaN(i)||isNaN(n)||h({rowIndex:i,wordIndex:n})},r=()=>{d(!0)};return e.addEventListener("mousedown",t),e.addEventListener("mousemove",n),e.addEventListener("mouseup",r),()=>{e.removeEventListener("mousedown",t),e.removeEventListener("mousemove",n),e.removeEventListener("mouseup",r)}},[i,s,o,c]);let f=(0,a.I4)(()=>{d(!1),l(!1),u(null),h(null);let e=window.getSelection();e&&(e.removeAllRanges?e.removeAllRanges():e.empty&&e.empty())},[]);return(0,r.tZ)(e4.Provider,{value:{clearSelection:f,finishedSelection:Z,isSelecting:o,containerRef:i,selectionBegin:g,selectionFinish:v,selectionRef:n},children:t})},e8=()=>(0,a.qp)(e4);var e6=i(74691),e9=i.n(e6),e5=i(14293),e3=i.n(e5),e7=i(23493),te=i.n(e7),tt=i(37513),ti=i(42861),tn=i(29032),to=i(33224),tr=i(57649),tl=i(1864),ta=i(18029),ts=i.n(ta),td=i(40423),tc=i(93370);let tu={textContainerFadedShows:"textContainerFadedShows-pHGywl",hideSelectionBackground:"hideSelectionBackground-vjEoVj",word:"word-IefdhU",wordSelectedShows:"wordSelectedShows-Tf85j5",textHidden:"textHidden-zukLlK",searchResult:"searchResult-cbPSuC",isFocused:"isFocused-wy1BKg"},tp=(0,l.memo)(e=>{var t,i;let{clipWordEnd:l,clipWordStart:s,isFinishedSelecting:d,focusedItemStart:c,isClipping:u,isFaded:p,isFirstInSelection:h,isMeasuring:m,isScrolling:g,isSelecting:v,listContainerRef:Z,postId:f,rowIndex:b,rows:w,searchTerm:_,selectedWordEnd:C,selectionRef:B,selectedWordStart:x,speakerMap:S,onClickRow:P,onCreateClip:I}=e,T=(0,a.sO)(null),N=w[b];N||console.error("Transcript row at index ".concat(b," is missing"));let L=0===b?null:w[b-1],q=b===w.length-1?null:w[b+1],M=0===b?null:w[b-1],E=(!M||M.speaker!==N.speaker)&&N.speaker?null!==(t=S[N.speaker])&&void 0!==t?t:function(e){if(!e)return"Unknown Speaker";let t=e.split("_"),i=parseInt(t[1]);return"".concat(ts()(t[0])," ").concat(i+1)}(N.speaker):null,z=_&&N.text.toLowerCase().includes(_.toLowerCase()),R=L?{"data-in-between":!0,"data-prev-row-index":b-1,"data-prev-word-index":L.words.length-1,"data-next-row-index":b,"data-next-word-index":0}:{},A=q?{"data-in-between":!0,"data-prev-row-index":b,"data-prev-word-index":N.words.length-1,"data-next-row-index":b+1,"data-next-word-index":0}:{};return(0,r.BX)(k.gq,{alignItems:"start",gap:12,paddingX:16,"data-transcript-row-index":b,onClick:()=>{var e;(null===(e=window.getSelection())||void 0===e||!e.toString())&&P&&f&&((0,y.j)(y.FP.TRANSCRIPTION_TIMESTAMP_CLICKED,{post_id:f,timestamp:(0,tc.DL)(N.start)}),P({rowIndex:b}))},style:m?{overflowY:"scroll"}:void 0,children:[(0,r.tZ)(k.gq,{bg:"glass-inverted-medium",paddingX:4,radius:"sm",userSelect:"none",children:(0,r.tZ)(U.xv.Meta,{color:"white",lineHeight:20,children:(0,ey.secondsToHHMMSS)(N.start)})}),(0,r.BX)(k.tu,{flex:"grow",gap:2,children:[E&&(0,r.tZ)(U.xv.Meta,(0,o._)((0,n._)({color:"white",opacity:60,userSelect:"none",weight:"semibold"},R),{children:E})),(0,r.BX)(k.tu,{position:"relative",children:[z&&(0,r.tZ)(th,{isFocused:N.start===c,searchTerm:_,text:N.text.trim()}),(0,r.BX)(k.tu,{ref:T,position:"relative",children:[(0,r.tZ)(U.xv.B3,(0,o._)((0,n._)({className:X()(tu.hideSelectionBackground,{[null!==(i=tu.textContainerFadedShows)&&void 0!==i?i:"undefined"]:p}),cursor:"pointer",lineHeight:20,paddingBottom:12},A),{children:!N.words.length||g&&!u&&e3()(x)&&e3()(C)?N.text:N.words.map((e,t)=>{var i;let n=!e3()(x)&&!e3()(C)&&t>=x&&t<=C,o=h&&t===x,a=u&&!v&&!e3()(l)&&!e3()(s)&&t>=s&&t<=l;return(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{ref:o?B:null,className:X()(tu.word,{[null!==(i=tu.wordSelectedShows)&&void 0!==i?i:"undefined"]:a||n}),"data-row-index":b,"data-word-index":t,children:e.word})," "]})})})),h&&d&&I&&Z&&!u&&(0,r.tZ)(tg,{firstWordRef:B,listContainerRef:Z,rowElemRef:T,children:(0,r.tZ)(tv,{onClick:I})})]})]})]})]})}),th=e=>{let{searchTerm:t,isFocused:i,text:n}=e,o=RegExp("(".concat(t,")"),"gi"),l=n.split(o);return(0,r.tZ)(U.xv.B3,{className:tu.textHidden,position:"absolute",inset:0,children:l.map(e=>{var t;return e.match(o)?(0,r.tZ)("span",{className:X()(tu.searchResult,{[null!==(t=tu.isFocused)&&void 0!==t?t:"undefined"]:i}),children:e}):(0,r.tZ)("span",{children:e})})})},tm=(0,l.memo)(e=>{let{style:t,index:i,data:n,isScrolling:o}=e,{activeRowIndex:l,listContainerRef:a,postId:s,rows:d,speakerMap:u,onClickRow:p,onCreateClip:h}=n,{finishedSelection:m,isSelecting:g,selectionBegin:v,selectionFinish:Z,selectionRef:f}=e8(),{searchTerm:w,focusedItemStart:y}=(0,b.pH)(),{clipTimes:_,isClipping:C}=(0,c.Sr)(),B=d[i];B||console.error("Transcript row at index ".concat(i," is missing"));let k=!!(v&&v.rowIndex===i),x=null,S=null;if(v&&Z){let e=i===v.rowIndex&&i===Z.rowIndex,t=i===v.rowIndex,n=i===Z.rowIndex,o=i>v.rowIndex&&i<Z.rowIndex;e?(x=v.wordIndex,S=Z.wordIndex):t?(x=v.wordIndex,S=B.words.length-1):n?(x=0,S=Z.wordIndex):o&&(x=0,S=B.words.length-1)}let P=null,I=null;if(C&&_)for(let e=0;e<B.words.length;e++){let t=B.words[e];!e3()(t)&&t.end>_.start&&t.start<_.end&&(null===P&&(P=e),I=e)}return(0,r.tZ)("div",{className:tu.hideSelectionBackground,style:t,children:(0,r.tZ)(tp,{clipWordStart:P,clipWordEnd:I,focusedItemStart:y,isClipping:C,isFaded:!C&&"number"==typeof l&&l!==i,isFinishedSelecting:!!m,isFirstInSelection:k,isScrolling:o,isSelecting:g,listContainerRef:a,postId:s,rows:d,rowIndex:i,searchTerm:w,selectionRef:f,selectedWordStart:x,selectedWordEnd:S,speakerMap:u,onClickRow:p,onCreateClip:h})})},tl.wy),tg=e=>{let{children:t,firstWordRef:i,listContainerRef:n,rowElemRef:o}=e;if(!(null==i?void 0:i.current)||!o.current||!n.current)return null;let l=i.current.offsetTop,{top:a}=o.current.getBoundingClientRect(),{top:s,height:d}=n.current.getBoundingClientRect(),c=e9()(l-8,s-a+8+32,s+d-a-8);return(0,r.tZ)(k.tu,{position:"absolute",style:{top:c,left:"45%",transform:"translate(-50%, -100%)"},onClick:tZ,onMouseDown:tZ,onMouseMove:tZ,onMouseUp:tZ,userSelect:"none",zIndex:1,children:t})},tv=e=>{let{onClick:t}=e,{iString:i}=(0,J.M1)();return(0,r.tZ)(Y.zx,{leading:(0,r.tZ)(td.Z,{size:16}),priority:"secondary",onClick:t,children:i("Create clip")})},tZ=e=>{e.stopPropagation()},tf=e=>{let{activeRowIndex:t,height:i,id:n,listContainerRef:o,listRef:l,postId:s,rows:d,speakerMap:c,width:u,onClickRow:p,onCreateClip:h,onScroll:m}=e,[g,v]=(0,a.eJ)(null);(0,a.bt)(()=>{if(g||!u)return;let e=document.createElement("div");e.style.position="absolute",e.style.top="0",e.style.width="".concat(u,"px"),e.style.pointerEvents="none",e.style.visibility="hidden",v(e),document.body.appendChild(e)},[g,u]);let Z=(0,a.I4)(e=>g?(g.innerHTML=(0,tr.Dq)((0,r.tZ)(tp,{isMeasuring:!0,isScrolling:!1,rows:d,rowIndex:e,selectedWordEnd:null,selectedWordStart:null,speakerMap:c})),g.clientHeight||0):0,[g,d,c]),f=(0,a.Ye)(()=>({activeRowIndex:t,listContainerRef:o,postId:s,rows:d,speakerMap:c,onClickRow:p,onCreateClip:h}),[t,o,s,d,c,p,h]);return g?(0,r.tZ)("div",{id:n,children:(0,r.tZ)(tl.S_,{ref:l,itemCount:d.length,itemSize:Z,height:i,width:u,itemData:f,outerElementType:tb,useIsScrolling:!0,onScroll:m,children:tm})}):null},tb=(0,l.forwardRef)((e,t)=>{var{style:i}=e,l=(0,eq._)(e,["style"]);return(0,r.tZ)("div",(0,n._)({ref:t,style:(0,o._)((0,n._)({},i),{overflowY:"scroll"})},l))});var tw=i(61468);let ty="video-transcription",t_=e=>{let{isClipping:t,playerRef:i,postId:o,transcription:s,onClose:d}=e,{iString:u}=(0,J.M1)(),{clipTimes:p,virtualizedListRef:h,onStartClipping:m}=(0,c.Sr)(),g=(0,a.sO)(null),{containerRef:v,finishedSelection:Z,clearSelection:f,isSelecting:_}=e8(),{rows:C,speakerMap:B}=(0,P.Oi)({transcription:s,processAlignedRows:tw.Ap}),{isPlaying:x,currentTime:S}=(0,w.FI)(i),{setItems:I,focusedItemStart:X,searchTerm:T}=(0,b.pH)(),[N,L]=(0,a.eJ)(null),[q,M]=(0,a.eJ)(!1),{width:E,height:z}=(0,eD.y)({containerRef:g}),[R,A]=(0,a.eJ)("in-view"),[O,D]=(0,a.eJ)("in-view"),[F,H]=(0,a.eJ)("in-view"),W=!!(null==T?void 0:T.trim()),V=x&&!W&&!t&&!Z,j=p&&tC(C,p.start),G=p&&tC(C,p.end);(0,l.useEffect)(()=>{I(C)},[C,I]),(0,l.useEffect)(()=>{var e,t,n,o;!_||(null===(t=i.current)||void 0===t?void 0:null===(e=t.player)||void 0===e?void 0:e.paused)||null===(o=i.current)||void 0===o||null===(n=o.player)||void 0===n||n.pause()},[_,i]),(0,l.useEffect)(()=>{if(q)return;let e=C.findIndex(e=>e.start<=S&&e.end>S);-1!==e&&e!==N&&L(e)},[N,S,q,C]),(0,l.useEffect)(()=>{if(!W||!(null==h?void 0:h.current))return;let e=C.findIndex(e=>e.start===X);h.current.scrollToItem(e,"start")},[X,W,C,h]),(0,l.useEffect)(()=>{var e,t;if(!V||!(null==h?void 0:h.current))return;let i=document.querySelector("#".concat(ty,' [data-transcript-row-index="').concat(N,'"]'));if(!i)return;let n=i.parentElement,o=document.querySelector("#".concat(ty," > div")),r=null!==(e=null==o?void 0:o.children[0])&&void 0!==e?e:null;if(!o||!n||!r)return;let l=r.offsetHeight-o.offsetHeight,a=parseInt(null!==(t=n.style.top.split("px")[0])&&void 0!==t?t:""),s=o.scrollTop,d=e9()(a-32,0,l);(0,to.ld)({virtualizedListRef:h,start:s,end:d,duration:300})},[N,V,h]);let K=(0,a.I4)(te()(()=>{if("number"!=typeof N)return;if(document.querySelector("#".concat(ty,' [data-transcript-row-index="').concat(N,'"]'))){A("in-view");return}let e=document.querySelector("#".concat(ty," [data-transcript-row-index]"));e&&A(((null==e?void 0:e.dataset.transcriptRowIndex)?parseInt(e.dataset.transcriptRowIndex):-1)>N?"is-before":"is-after")},100),[N]),Q=(0,a.I4)(te()(()=>{if(e3()(j)||e3()(G))return;let e=document.querySelector("#".concat(ty,' [data-transcript-row-index="').concat(j,'"]')),t=document.querySelector("#".concat(ty,' [data-transcript-row-index="').concat(G,'"]')),i=document.querySelector("#".concat(ty," [data-transcript-row-index]"));if(!i)return;let n=(null==i?void 0:i.dataset.transcriptRowIndex)?parseInt(i.dataset.transcriptRowIndex):-1;if(e||t||n>j&&n<G){D("in-view");return}D(n>j?"is-before":"is-after")},100),[G,j]),$=(0,a.I4)(te()(()=>{if(!Z)return;let e=Z.begin.rowIndex;if(document.querySelector("#".concat(ty,' [data-transcript-row-index="').concat(e,'"]'))){H("in-view");return}let t=document.querySelector("#".concat(ty," [data-transcript-row-index]"));t&&H(((null==t?void 0:t.dataset.transcriptRowIndex)?parseInt(t.dataset.transcriptRowIndex):-1)>e?"is-before":"is-after")}),[Z]),ee=(0,a.I4)(e=>{let{scrollUpdateWasRequested:i}=e;i||(Z?$():t?Q():K())},[Z,t,K,Q,$]);(0,l.useEffect)(()=>{x&&K()},[x,K]),(0,l.useEffect)(()=>{if(!p||!(null==h?void 0:h.current))return;let e=tC(C,p.start);h.current.scrollToItem(Math.max(e,0),"smart"),D("in-view")},[p,C,Q,h]);let et=(0,a.I4)(()=>{(null==h?void 0:h.current)&&(h.current.scrollToItem(N,"start"),A("in-view"))},[N,h]),ei=(0,a.I4)(()=>{(null==h?void 0:h.current)&&(h.current.scrollToItem(j,"start"),D("in-view"))},[j,h]),en=(0,a.I4)(()=>{if(!Z||!C)return;let{start:e,end:t}=(0,to.up)({finishedSelection:Z,transcriptionRows:C});f(),(0,y.j)(y.FP.MEDIA_CLIP_BUTTON_CLICKED,{button:"create",source:"post transcript"}),m({start:e,end:t,source:"side-by-side-transcript",title:null})},[f,Z,m,C]);(0,l.useEffect)(()=>{Z&&(t?en():$())},[Z,en,t,$]);let eo=(0,a.I4)(async e=>{var n;let{rowIndex:o}=e;if(null===(n=i.current)||void 0===n?void 0:n.player){if(t){let e=C[o];m({start:e.start,end:e.end,source:"side-by-side-transcript",title:null});return}if(x&&o===N){i.current.player.pause();return}i.current.player.currentTime=C[o].start,L(o),M(!0),await i.current.player.play(),M(!1)}},[N,t,x,m,i,C]);return(0,r.tZ)(tn.C,{children:(0,r.BX)(k.tu,{inset:0,position:"absolute",style:{backgroundColor:"#161718"},children:[(0,r.BX)(k.gq,{alignItems:"center",justifyContent:"space-between",padding:16,children:[(0,r.tZ)(U.xv.B2,{color:"primary",weight:"semibold",children:u(t?"Create clip":"Transcript")}),d&&(0,r.tZ)(Y.hU,{priority:"secondary",size:"sm",onClick:d,children:(0,r.tZ)(ex.Z,{size:20})})]}),(0,r.tZ)(k.gq,{paddingX:16,paddingBottom:16,onKeyDown:e=>{e.stopPropagation()},children:(0,r.tZ)(b.Rq,{postId:o,closeAlwaysVisible:!1})}),(0,r.BX)(k.tu,{ref:g,flex:"grow",position:"relative",children:[(0,r.tZ)(k.tu,{ref:v,position:"absolute",inset:0,children:!!E&&(0,r.tZ)(tf,{activeRowIndex:x?N:null,height:z,id:ty,listContainerRef:g,listRef:h,postId:o,rows:C,speakerMap:B,width:E,onClickRow:eo,onCreateClip:en,onScroll:ee})}),V&&"in-view"!==R&&(0,r.tZ)(k.tu,{position:"absolute",style:(0,n._)({left:16,right:16},"is-before"===R?{top:0}:{bottom:16}),children:(0,r.tZ)(Y.zx,{leading:"is-before"===R?(0,r.tZ)(tt.Z,{size:16}):(0,r.tZ)(ti.Z,{size:16}),priority:"secondary",onClick:et,children:u("Back to current time")})}),t&&!_&&"in-view"!==O&&(0,r.tZ)(k.tu,{position:"absolute",style:(0,n._)({left:16,right:16},"is-before"===O?{top:0}:{bottom:16}),children:(0,r.tZ)(Y.zx,{leading:"is-before"===O?(0,r.tZ)(tt.Z,{size:16}):(0,r.tZ)(ti.Z,{size:16}),priority:"secondary",onClick:ei,children:u("Back to clipped segment")})}),Z&&"in-view"!==F&&!t&&(0,r.tZ)(k.gq,{position:"absolute",justifyContent:"center",style:(0,n._)({left:0,right:0},"is-before"===F?{top:0}:{bottom:16}),children:(0,r.tZ)(tv,{onClick:en})})]})]})})},tC=(e,t)=>{for(let i=0;i<e.length;i++){if(e[i].start<=t&&e[i].end>=t)return i;if(t<e[i].start)return i>0?i-1:0}return e.length-1},tB={container:"container-dlhqPD","video-wrapper":"video-wrapper-lforaE","video-full-screen":"video-full-screen-K4tmIj","preview-label-container":"preview-label-container-RuWmAN",sidebar:"sidebar-NzGH2W","sidebar-right":"sidebar-right-ktL8if","sidebar-left":"sidebar-left-K3vrOP","sidebar--hidden":"sidebar--hidden-xMFnhp","sidebar-icons":"sidebar-icons-YDR6ix",postPreview:"postPreview-mgizmD"};class tk extends eE.Z{constructor(...e){super(...e),(0,eL._)(this,"playbackEnabled",()=>!!this.props.showPreview)}}let tx=e=>{var t,i,s,d,u,p,h,g,v,Z,{alternateAudioSource:f,audioIsPlaying:w,audioPlayerHasMounted:_,audioPlayerRef:C,containerRef:x,disableShortcuts:S,hasPaywall:I,isIdle:T,isPostPreview:L,mediaUpload:q,post:M,pub:E,selectedMedium:z,showAudioPaywall:R,showVideoPaywall:A,style:O,transcription:D,user:F,videoIsPlaying:U,videoPlayerRef:H,onChange:W,onCommentsClick:Y,onFinishAudio:V,onSelectMedium:j,onSetAudioIsPlaying:G}=e,K=(0,eq._)(e,["alternateAudioSource","audioIsPlaying","audioPlayerHasMounted","audioPlayerRef","containerRef","disableShortcuts","hasPaywall","isIdle","isPostPreview","mediaUpload","post","pub","selectedMedium","showAudioPaywall","showVideoPaywall","style","transcription","user","videoIsPlaying","videoPlayerRef","onChange","onCommentsClick","onFinishAudio","onSelectMedium","onSetAudioIsPlaying"]);let{iString:Q}=(0,J.M1)(),$=(0,N.HD)({pub:E}),{isClipping:ee,onCancelClipping:et}=(0,c.Sr)(),[ei,en]=(0,a.eJ)(!1),eo=(0,eM.r)(),er=(0,a.sO)(null),{width:el}=(0,eD.y)({containerRef:er}),[ea,es]=(0,a.eJ)(eo.active&&"undefined"!=typeof window?window.innerWidth:null!==(p=null===(t=er.current)||void 0===t?void 0:t.offsetWidth)&&void 0!==p?p:1100),[ed,ec]=eA({key:"video_player:show_transcript",initialValue:!1}),eu=(ed||ee)&&!!D,{isMobile:ep}=(0,B.v9)(),eh=(0,P.Ml)(x),em=(null!==(h=q.preview_duration)&&void 0!==h?h:0)>0,[eg,ev]=(0,a.eJ)(!1),eZ=eu?(ea-360-36)/ea:1;return(0,l.useEffect)(()=>{ee&&(0,y.j)(y.FP.MEDIA_CLIP_CREATE_MODAL_OPENED,{video_upload_id:q.id,post_id:null==M?void 0:M.id,is_post_editor:!1,source:"create"})},[ee,q.id,null==M?void 0:M.id]),(0,l.useEffect)(()=>{eo.active&&"undefined"!=typeof window?setTimeout(()=>{es(window.innerWidth)},10):es(null!=el?el:1100)},[eo.active,el]),(0,r.BX)("div",{ref:er,className:X()(tB["video-wrapper"],{[tB["video-full-screen"]]:eo.active}),style:O,children:[(0,r.BX)("div",{style:{visibility:"audio"===z?"hidden":void 0},children:[(0,r.tZ)(eM.I,{handle:eo,children:(0,r.BX)(k.gq,{justifyContent:"center",position:"relative",overflow:ee?"visible":"hidden",style:{width:"100%",height:"100%",backgroundColor:"#000"},children:[(0,r.tZ)(k.gq,{flex:"grow",position:"relative",style:{transform:"scale(".concat(eZ,")"),transformOrigin:"0 50%",transition:"transform 0.15s ease-in-out",zIndex:ee?1:void 0},children:(0,r.tZ)(tk,(0,o._)((0,n._)({},K),{ref:H,doNotResetOnEnd:!0,hidePlayButton:A,isClipping:ee,mediaUpload:q,podcastUpload:M.podcastUpload,showPreview:!I||em,noControls:!0,noKeyboardShortcuts:!0,post:M,pub:E,renderPlayButton:()=>(0,r.tZ)(eF.fI,{isPlaying:!1,size:ep?56:72}),usePreview:I&&em,videoType:"post",onAutoplayMuted:()=>ev(!0)}))}),(0,r.tZ)(k.gq,{position:"absolute",style:{left:0,right:0,bottom:0,width:"".concat(100*eZ,"%"),transition:"width 0.15s ease-in-out"},children:(0,r.tZ)(eY.Vo,{disableShortcuts:S,handle:eo,hasPaywall:I,hasTranscript:!!D,hideNextVideoButton:L||$,isActive:null!==(g=ei||!T||ee)&&void 0!==g&&g,isFocused:eh,mediaRef:H,mediaUpload:q,podcastUpload:null!==(v=null===(i=M.videoUpload)||void 0===i?void 0:i.extractedAudio)&&void 0!==v?v:M.podcastUpload,post:M,pub:E,showPaywall:A,showTranscript:eu,onShareMenuClose:()=>en(!1),onShareMenuOpen:()=>en(!0),onToggleShowTranscript:()=>{ec(!eu)},autoPlayMuted:eg})}),D&&(0,r.tZ)(k.gq,{color:"white",opacity:100*!!eu,overflow:"auto",pointerEvents:eu?"auto":"none",position:"absolute",style:{top:0,bottom:0,right:0,transform:eu?"translateX(0)":"translateX(20%)",transition:eu?"transform 0.1s ease-in-out 0.05s, opacity 0.1s ease-in-out 0.05s":"transform 0.15s ease-in-out, opacity 0.15s ease-in-out",width:360,zIndex:ee?1:void 0},children:(0,r.tZ)(b._F,{children:(0,r.tZ)(e2,{children:(0,r.tZ)(t_,{isClipping:null!=ee&&ee,playerRef:H,postId:M.id,transcription:D,onClose:()=>{if(ee){var e;(0,y.j)(y.FP.VIDEO_CLIP_CREATE_MODAL_CLOSED,{post_id:M.id}),U&&(null===(e=H.current)||void 0===e?void 0:e.player)&&H.current.player.pause(),et()}else ec(!1)}})})})})]})}),em&&I&&!A&&(0,r.tZ)("div",{className:tB["preview-label-container"],children:(0,r.tZ)(eJ.l,{children:Q("Preview")})}),(null===(s=H.current)||void 0===s?void 0:s.player)&&(0,r.tZ)(ez.i,{containerRef:x,post:M,pub:E,visible:ee,videoPlayerRef:H,videoUpload:q})]}),("audio"===z||_)&&f&&(0,r.tZ)(k.hs,{inset:0,position:"absolute",style:{visibility:"audio"!==z?"hidden":void 0},children:(0,r.tZ)(eV,{alternateAudioSource:f,audioPlayerRef:C,isIdle:T,hideControls:(U||w)&&T,post:M,pub:E,showPaywall:R,onFinishAudio:V,onSetAudioIsPlaying:G})}),!ep&&!A&&!L&&!$&&(0,r.tZ)("div",{className:X()(tB.sidebar,tB["sidebar-right"],{[tB["sidebar--hidden"]]:(U||w)&&T}),children:(0,r.tZ)(k.hs,{className:X()(tB["sidebar-icons"]),bg:"glass-inverted-thick",paddingX:8,paddingY:16,children:(0,r.tZ)(m._2,{hideSavePost:!0,initialShareTimestamp:null!==(Z=null===(u=H.current)||void 0===u?void 0:null===(d=u.player)||void 0===d?void 0:d.currentTime)&&void 0!==Z?Z:0,isStatic:!1,labelStyle:"counts-or-none",position:"shows-episode-player",post:M,pub:E,showClipping:!!M.videoUpload,style:"large-on-dark",user:F,onChange:W,onCommentsClick:Y})})}),f&&!$&&(0,r.tZ)("div",{className:X()(tB.sidebar,tB["sidebar-left"],{[tB["sidebar--hidden"]]:(U||w)&&T}),style:{zIndex:A?1:void 0},children:(0,r.tZ)(e1,{selected:z,sourceType:f.type,onSelect:j})})]})},tS=e=>{var t,i;let{audioPlayerRef:s,hasPaywall:d,isPostPreview:c,mediaUpload:u,post:p,pub:h,user:m,videoIsPlaying:g,videoPlayerRef:v,onFinishVideo:Z,freeSignup:f,reaction_token:b}=e,w=(0,eq._)(e,["audioPlayerRef","hasPaywall","isPostPreview","mediaUpload","post","pub","user","videoIsPlaying","videoPlayerRef","onFinishVideo","freeSignup","reaction_token"]),{isMobile:_}=(0,B.v9)(),{iString:C}=(0,J.M1)(),x=(0,N.HD)({pub:h}),S=(0,$.wq)({post:p,pub:h,user:m}),[P,I]=(0,a.eJ)(!1),[T,L]=(0,a.eJ)(!1),[q,M]=(0,a.eJ)(!1),E=(null!==(i=u.preview_duration)&&void 0!==i?i:0)>0,z=!!S&&!E&&d,[R,A]=(0,eO.t)({initialValue:z?"audio":"video",key:"initial_medium",type:"string",isArray:!1,disable:!S}),[O,D]=(0,a.eJ)(z),F=(0,a.sO)(null),{isIdle:U}=(0,eR.c)({idleAfter:2e3,element:F.current}),H="video"===R&&d&&(!E||T),W="audio"===R&&d&&P&&!!S&&"free_podcast_url"!==S.type,Y=!_;(0,l.useEffect)(()=>{var e;let t=null===(e=v.current)||void 0===e?void 0:e.player;if(t&&!_){let e=()=>{t.paused?t.play():t.pause()};return t.addEventListener("click",e),()=>{t.removeEventListener("click",e)}}},[_,v,null===(t=v.current)||void 0===t?void 0:t.player]);let V=e=>{var t,i;if(e===R)return;let n=(e,t)=>5>Math.abs(e-t),o=null===(t=v.current)||void 0===t?void 0:t.player,r=null===(i=s.current)||void 0===i?void 0:i.player;"audio"===e&&(null==o?void 0:o.currentTime)&&r?o.currentTime>0&&n(r.duration,o.duration)&&(r.currentTime=o.currentTime,o.paused||r.play()):"video"===e&&(null==r?void 0:r.currentTime)&&o&&r.currentTime>0&&n(r.duration,o.duration)&&(o.currentTime=r.currentTime,r.paused||o.play()),g&&(null==o||o.pause()),"video"===e&&r&&r.pause(),T&&(L(!1),o&&(o.currentTime=0)),"audio"!==e||O||D(!0),(0,y.j)(y.FP.AUDIO_VIDEO_SWITCHER_CLICKED,{post_id:p.id,selected:e}),A(e)},j=()=>{I(!0)};return(0,r.BX)("div",{className:X()(tB.container,{[tB.postPreview]:c}),ref:F,children:[Y?(0,r.tZ)(tx,(0,o._)((0,n._)({},e),{alternateAudioSource:S,audioIsPlaying:q,audioPlayerHasMounted:O,audioPlayerRef:s,containerRef:F,isIdle:U,selectedMedium:R,showAudioPaywall:W,showVideoPaywall:H,videoIsPlaying:g,onFinishAudio:j,onFinishVideo:()=>{if((null==S?void 0:S.type)==="free_podcast_url"){var e,t;null===(t=document.getElementById(e0))||void 0===t||null===(e=t.parentNode)||void 0===e||e.dispatchEvent(new Event("mouseenter"))}L(!0)},onSelectMedium:V,onSetAudioIsPlaying:M})):(0,r.BX)("div",{className:X()(tB["video-wrapper"]),children:[(0,r.tZ)(tk,(0,o._)((0,n._)({},w),{ref:v,doNotResetOnEnd:!0,hidePlayButton:H,mediaUpload:u,podcastUpload:p.podcastUpload,showPreview:!d||E,noControls:H&&!d,post:p,pub:h,renderPlayButton:()=>(0,r.tZ)(eF.fI,{isPlaying:!1,size:_?56:72}),usePreview:d&&E,onFinishVideo:Z,style:{visibility:"audio"===R?"hidden":void 0}})),E&&d&&!H&&"video"===R&&(0,r.tZ)("div",{className:tB["preview-label-container"],children:(0,r.tZ)(eJ.l,{children:C("Preview")})}),("audio"===R||O)&&S&&(0,r.tZ)(k.gq,{position:"absolute",inset:0,style:{visibility:"audio"===R?"visible":"hidden"},children:(0,r.tZ)(eV,{alternateAudioSource:S,audioPlayerRef:s,hideControls:!1,isIdle:U,post:p,pub:h,showPaywall:W,onFinishAudio:j,onSetAudioIsPlaying:M})}),S&&!x&&(0,r.tZ)(k.gq,{position:"absolute",padding:12,onClick:()=>{V("audio"===R?"video":"audio")},style:{top:"50%",left:0,transform:"translateY(-50%)",visibility:"video"===R&&g&&U?"hidden":"visible"},children:(0,r.tZ)(e1,{selected:R,sourceType:S.type,onSelect:null})})]}),H&&(0,r.tZ)(ej.Y,{disableButtons:c,isFreeSubscribed:!!((null==m?void 0:m.is_free_subscribed)||f),medium:"video",post:p,pub:h,variant:"dialog",onRestart:E?()=>{var e;(null===(e=v.current)||void 0===e?void 0:e.player)&&(L(!1),v.current.player.currentTime=0,v.current.player.play())}:void 0,magicToken:b}),W&&(0,r.tZ)(ej.Y,{disableButtons:c,isFreeSubscribed:!!((null==m?void 0:m.is_free_subscribed)||f),medium:"audio",post:p,pub:h,variant:"dialog",onRestart:()=>{var e;(null===(e=s.current)||void 0===e?void 0:e.player)&&(I(!1),s.current.player.currentTime=0,s.current.player.play())},magicToken:b})]})};var tP=i(24791),tI=i(69332);let tX={"main-content-and-sidebar":"main-content-and-sidebar-fw1PHW",mainContentFP:"mainContentFP-GnDHcW","main-content":"main-content-qKkUCg","main-content-full-width":"main-content-full-width-eYkBTb",postContentWrapper:"postContentWrapper-MYe7fH",sidebar:"sidebar-RUDMha"},tT=(0,l.forwardRef)((e,t)=>{var i;let{isServingFreePodcastUrl:l,paywall:s,post:x,pub:I,reaction_token:X,recentEpisodes:T,showComments:q,user:M,videoPlayerRef:E,onChange:z,freeSignup:R}=e,{getConfigFor:A}=(0,Z.xR)(),O=(0,f.Fl)().autoPlayVideo,{isMobile:D}=(0,B.v9)(),[F,U]=(0,a.eJ)(null),[H,W]=(0,a.eJ)(null),[J,Y]=(0,a.eJ)(!1),[V,j]=(0,a.eJ)(!1),[G,K]=(0,a.eJ)(!1),Q=(0,a.sO)(null),{isClipping:ee,onStartClipping:et}=(0,c.Sr)(),ei=(0,tP.LH)(x),en=(null==ei?void 0:ei.approved_at)&&!s,{isPlaying:eo}=(0,w.FI)(E),er=(0,N.HD)({pub:I}),ea=e=>{(0,y.j)(y.FP.TRANSCRIPTION_TOGGLED,{state:e?"expanded":"collapsed",post_id:x.id,transcript_as_content:!0}),Y(e)};(0,a.d4)(()=>{("undefined"!=typeof window?(0,tI.m)(window.location.href):{}).clippingMode&&(setTimeout(()=>{et({source:"query-param",title:null})},10),(0,C.iO)("clippingMode"))},[et]);let es=x.section_id&&null!==(i=I.sections.find(e=>e.id===x.section_id))&&void 0!==i?i:null,{feedUrl:ed,isPrivateFeed:ec}=(0,P.fn)({pub:I,magicToken:X,user:null!=M?M:null,section:es}),eu=(0,$.a9)({pub:I,section:es,spotifySettings:(0,_.pp)({pub:I,section:es})}),ep=(0,tP.uo)({post:x,section:es,pub:I}),eh=(0,tP.dC)({post:x,section:es,pub:I}),em=!!F&&F.length>0,eg=e=>{e.preventDefault(),(0,y.j)(y.FP.COMMENTS_CLICKED,{post_id:x.id});let t=document.getElementById($.nK);t&&t.scrollIntoView({behavior:"smooth"})};(0,a.d4)(()=>{(async()=>{let e=await d().get("/api/v1/post/".concat(x.id,"/facepile"));U(e.body.reactors),W(e.body.restackers)})()},[x.id]);let ev=!1;return"undefined"!=typeof window&&(ev=new URLSearchParams(window.location.search).has("postPreview")),(0,r.tZ)(p.SO,(0,o._)((0,n._)({},e),{ref:t,isShowsPost:!0,renderContent:e=>{let{comments:t,crossPostInfo:i,postContent:n}=e;return(0,r.BX)("div",{children:[(0,r.tZ)(S,{visible:ee,style:{zIndex:1}}),x.videoUpload?(0,r.tZ)(tS,{audioPlayerRef:Q,autoPlay:O,disableShortcuts:G||ee,duration:x.videoUpload.duration,hasPaywall:null!=s&&s,isClipping:ee,isPostPreview:ev,mediaUpload:x.videoUpload,post:x,pub:I,freeSignup:R,reaction_token:X,restorePlaybackLocation:!ev,transcription:en?ei:null,user:null!=M?M:null,videoIsPlaying:eo,videoPlayerRef:E,onChange:z,onCommentsClick:eg,surface:"post",entityKey:x.id,entityType:"post",contentType:"post"}):(0,r.tZ)(L,{audioPlayerRef:Q,feedUrl:ed,hasPaywall:null!=s&&s,isPrivateFeed:ec,isServingFreePodcastUrl:l,post:x,pub:I,section:es,user:null!=M?M:null,freeSignup:R,onChange:z,onCommentsClick:eg,reaction_token:X}),(0,r.BX)("div",{className:er?tX.mainContentFP:tX["main-content-and-sidebar"],children:[(0,r.BX)("div",{className:er?"":V?tX["main-content-full-width"]:tX["main-content"],children:[!J&&(0,r.BX)(k.tu,{gap:32,children:[(0,r.BX)(k.tu,{gap:16,children:[(0,r.tZ)(el,{feedUrl:ed,isStandaloneVideo:ep,eligibleForPodcast:eh,magicToken:X,post:x,pub:I,section:es,showLinks:eu,user:null!=M?M:null,onChange:z,onCommentsClick:eg,onToggleRestackModal:K,onTranscriptClick:en?()=>{ea(!0)}:void 0}),er&&(0,r.tZ)(v.R,{post:x,pub:I,user:null!=M?M:null,variant:"shows-post"})]}),i&&(0,r.tZ)(u.F,{crossPostInfo:i,postType:x.type}),(0,r.BX)("div",{className:tX.postContentWrapper,children:[n,er?(0,r.tZ)(k.tu,{paddingTop:40,paddingBottom:20,children:(0,r.tZ)(g.I,{post:x,pub:I,user:M})}):A("like_posts_enabled")&&I.community_enabled&&em&&!s&&(0,r.tZ)(k.hs,{borderTop:"detail-themed",paddingY:16,children:(0,r.tZ)(h.fB,{post:x,pub:I,user:M,reactors:F,secondaryFaces:H})}),!s&&q&&t]})]}),J&&en&&(0,r.tZ)(k.gq,{paddingTop:V?32:void 0,children:(0,r.tZ)(b._F,{children:(0,r.tZ)(eN,{fullWidth:V,playerRef:x.videoUpload?E:Q,post:x,transcription:ei,onClose:()=>{ea(!1),j(!1)},onCollapse:()=>j(!1),onExpand:()=>j(!0)})})})]}),!V&&!er&&(0,r.tZ)(k.tu,{className:tX.sidebar,borderLeft:D?void 0:"detail-themed",children:(0,r.tZ)(e_,{feedUrl:ed,isStandaloneVideo:ep,eligibleForPodcast:eh,post:x,pub:I,recentEpisodes:null!=T?T:null,section:es,showLinks:eu,user:null!=M?M:null})})]}),D&&!er&&(0,r.tZ)(m.mt,{allowEdit:null==M?void 0:M.is_contributor,hideComments:!q,isStatic:!1,post:x,postReactionToken:X,pub:I,user:M,onCommentsClick:eg,onChange:z})]})}}))}),tN=(0,l.forwardRef)((e,t)=>{let i=(0,a.sO)(null),l=(0,a.sO)(null);return(0,r.tZ)(c.BY,{postId:e.post.id,videoPlayerRef:i,virtualizedListRef:l,children:(0,r.tZ)(tT,(0,o._)((0,n._)({},e),{ref:t,videoPlayerRef:i}))})})},74571:function(e,t,i){i.d(t,{Kr:()=>Z,LW:()=>y,Ml:()=>b,Oi:()=>w,fn:()=>g,i5:()=>v,lg:()=>f});var n=i(7409),o=i(99282),r=i(30396),l=i(39693),a=i.n(l),s=i(7654),d=i.n(s),c=i(44908),u=i.n(c),p=i(80569),h=i.n(p),m=i(60308);let g=e=>{let{pub:t,magicToken:i,section:l,user:a}=e,[s,d]=(0,r.eJ)((0,m.fw6)({pub:(0,o._)((0,n._)({},t),{section:l}),token:i})),[c,u]=(0,r.eJ)(!1),p=!a||!a.is_subscribed&&!a.is_free_subscribed,[g,v]=(0,r.eJ)(p);return(0,r.d4)(()=>{!p&&(async()=>{try{var e;let t=await h().get("/api/v1/subscription/podcast_rss_url").query({token:i,section_id:null!==(e=null==l?void 0:l.id)&&void 0!==e?e:null});t.body.podcast_rss_url&&(d(t.body.podcast_rss_url),u(!0)),v(!0)}catch(e){v(!0)}})()},[i,l,p]),{feedUrl:s,isPrivateFeed:c,isLoaded:g}},v=e=>{let[t,i]=(0,r.eJ)(!1),n=()=>{i(!0)},o=()=>{i(!1)};return(0,r.d4)(()=>{let t=e.current;if(t)return t.addEventListener("mouseenter",n),t.addEventListener("mouseleave",o),()=>{t.removeEventListener("mouseenter",n),t.removeEventListener("mouseleave",o)}},[e]),[t]},Z=(e,t,i)=>{(0,r.d4)(()=>{let n=e.toLocaleLowerCase(),o=e=>{if(!i)return;e.preventDefault();let o=e.key.toLocaleLowerCase();if(o===n||e.ctrlKey&&"ctrl+shift+".concat(o)===n||e.ctrlKey&&"ctrl+".concat(o)===n||e.shiftKey&&"shift+".concat(o)===n){t();return}};return window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)}},[e,t,i])},f=e=>{let[t,i]=(0,r.eJ)(null);return(0,r.d4)(()=>{let t=async e=>{let{body:{src:t}}=await h().get("/api/v1/video/upload/".concat(e,"/storyboard"));i((await h().get(t)).body)};(null==e?void 0:e.id)&&t(e.id)},[e]),t},b=e=>{let[t,i]=(0,r.eJ)(!1),n=e=>{i(e)},o=t=>{e.current&&e.current.contains(t.target)?n(!0):n(!1)};return(0,r.d4)(()=>(document.addEventListener("click",o),()=>{document.removeEventListener("click",o)}),[]),t},w=e=>{let{transcription:t,processAlignedRows:i}=e,[n,o]=(0,r.eJ)(!1),[l,s]=(0,r.eJ)([]),[d,c]=(0,r.eJ)([]),[p,m]=(0,r.eJ)({});return(0,r.d4)(()=>{(async()=>{if(!t.cdn_url)return;o(!0);let e=await h().get(t.cdn_url);if(!e.text){o(!1);return}let n=JSON.parse(e.text);i?s(i({rows:n})):s(n);let r=a()(u()(n.map(e=>{var t;return null!==(t=e.speaker)&&void 0!==t?t:""}))).sort();r.length&&c(r),t.speaker_map&&Object.values(t.speaker_map).length&&m(t.speaker_map)})()},[t.cdn_url,t.cdn_unaligned_url,t.speaker_map,i]),{loading:n,rows:l,speakers:d,speakerMap:p}},y=e=>{let{containerRef:t,playerRef:i,disable:n}=e,o=(0,r.sO)(null),l=(0,r.sO)(null),[a,s]=(0,r.eJ)();return(0,r.d4)(()=>{let e=()=>{!n&&setTimeout(()=>{var e,t,i;let n=window.getSelection();if(!n||0===n.rangeCount||n.isCollapsed||!l.current){s(void 0),l.current=null,o.current=null;return}let r=n.focusNode,a=parseInt(null==r?void 0:null===(t=r.parentNode)||void 0===t?void 0:null===(e=t.dataset)||void 0===e?void 0:e.chunkIndex),c=n.focusOffset;d()(a)||(o.current={rowIndex:a,offset:c,text:null!==(i=null==r?void 0:r.textContent)&&void 0!==i?i:""}),s(n)},0)},i=null,r=0,a=e=>{var t,i,n,o;let r=e.srcElement,a=parseInt(null!==(o=null===(t=r.dataset)||void 0===t?void 0:t.chunkIndex)&&void 0!==o?o:null===(n=r.parentNode)||void 0===n?void 0:null===(i=n.dataset)||void 0===i?void 0:i.chunkIndex);setTimeout(()=>{let e=window.getSelection(),t=null==e?void 0:e.anchorOffset;"number"!=typeof t||d()(a)||(l.current={rowIndex:a,offset:t,text:r.textContent})},0)},c=()=>{!(r>5)&&((i=t.current)?(i.addEventListener("mouseup",e),i.addEventListener("selectstart",a)):(r+=1,setTimeout(()=>{c()},50)))};return c(),()=>{null==i||i.removeEventListener("mouseup",e),null==i||i.removeEventListener("selectstart",a)}},[t,n,i]),{clearSelection:(0,r.I4)(()=>{a&&(a.removeAllRanges?a.removeAllRanges():a.empty&&a.empty()),s(void 0),l.current=null,o.current=null},[a]),selection:a,selectStartRef:l,selectEndRef:o}}},79582:function(e,t,i){i.d(t,{x:()=>o});var n=i(31377);let o=(e,t,i,o,r)=>!(!r&&!(null==e?void 0:e.has_publication)||o.invite_only||(0,n.isPaidAudience)(i.audience))&&!!t.enable_restacking},21292:function(e,t,i){i.d(t,{e:()=>l,f:()=>r});var n=i(6070),o=i(60308);let r=e=>{let{pub:t,section:i}=e;return(0,n.HD)({pub:t})&&!!i&&"the-free-press-live"===i.slug},l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,o.uXE)({for_pub:e.subdomain,justTrying:!0,redirect:(0,o.W1P)(e,t)})}}}]);