"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["1484"],{37358:function(e,t,n){n.d(t,{Z:()=>o});var i=n(7409),r=n(99282),a=n(16584),l=n(64515);let o=e=>(0,a.tZ)(l.l,(0,r._)((0,i._)({},e),{name:"InvertedWarningIcon",svgParams:{height:18,width:18},children:(0,a.tZ)("path",{d:"M9.00033 0.666992C4.39783 0.666992 0.666992 4.39783 0.666992 9.00033C0.666992 13.6028 4.39783 17.3337 9.00033 17.3337C13.6028 17.3337 17.3337 13.6028 17.3337 9.00033C17.3337 4.39783 13.6028 0.666992 9.00033 0.666992ZM9.00033 2.33366C12.682 2.33366 15.667 5.31866 15.667 9.00033C15.667 12.682 12.682 15.667 9.00033 15.667C5.31866 15.667 2.33366 12.682 2.33366 9.00033C2.33366 5.31866 5.31866 2.33366 9.00033 2.33366ZM8.16699 4.83366V9.83366H9.83366V4.83366H8.16699ZM8.16699 11.5003V13.167H9.83366V11.5003H8.16699Z"})}))},55438:function(e,t,n){n.d(t,{Z:()=>d});var i=n(7409),r=n(99282),a=n(98848),l=n(16584),o=n(64515),s=n(90406);let d=e=>{var{svgParams:t}=e,n=(0,a._)(e,["svgParams"]);return(0,l.BX)(o.l,(0,r._)((0,i._)({},n),{name:"SubstackIcon",svgParams:(0,i._)({height:1e3,width:1e3,fill:s.Hu,stroke:"none"},t),children:[(0,l.tZ)("path",{d:"M764.166 348.371H236.319V419.402H764.166V348.371Z"}),(0,l.tZ)("path",{d:"M236.319 483.752V813.999L500.231 666.512L764.19 813.999V483.752H236.319Z"}),(0,l.tZ)("path",{d:"M764.166 213H236.319V284.019H764.166V213Z"})]}))}},4564:function(e,t,n){n.d(t,{r:()=>y});var i=n(58865),r=n(16584),a=n(30396),l=n(80569),o=n.n(l),s=n(57391),d=n(95441),c=n(68833),u=n(7882),h=n(15771),p=n(19081),g=n(98248),m=n(58175),b=n(98750),E=n(82402),_=n(38841),v=n(60308),R=n(47929);let I=e=>{let{pubs:t,selected:n,setSelected:i,onRecommendationsFirstVisible:a}=e,l=e=>{let t=!1;n.includes(e)?i(n.filter(t=>t!==e)):(i([...n,e]),t=!0),(0,c.j)(c.FP.READER_ONBOARDING_RECOMMENDED_PUB_TOGGLED,{surface:"reader_onboarding",publication_id:e,added:t})};return(0,r.BX)(p.tu,{padding:8,style:{marginBottom:"20px"},children:[(0,r.tZ)(p.gq,{alignItems:"center",justifyContent:"end",children:(0,r.tZ)(m.xv.Meta,{onClick:()=>{(0,c.j)(c.FP.ALL_ONBOARDING_PUBLICATIONS_TOGGLED,{surface:"reader_onboarding",action:n.length<t.length?"select_all":"unselect_all",pubIds:t.map(e=>{let{id:t}=e;return t})}),n.length<t.length?i(t.map(e=>{let{id:t}=e;return t})):i([])},padding:4,cursor:"pointer",children:n.length<t.length?"Select all":"Unselect all"})}),(0,r.tZ)(p.tu,{divider:"detail",style:{overflow:"auto",height:"50vh",paddingBottom:20,paddingRight:8},children:t.map((e,t)=>(0,r.tZ)(S,{pub:e,index:t,selected:n.includes(e.id),toggleSelected:()=>l(e.id),onRecommendationsFirstVisible:a},e.id))})]})},S=e=>{let{pub:t,selected:n,index:i,toggleSelected:l,onRecommendationsFirstVisible:o}=e,s=(0,a.sO)(null);(0,b.UM)(s,()=>{o&&o(t,i)},{threshold:.5});let d=t.subdomain?"".concat((0,v.SVA)({subdomain:t.subdomain}),"/?utm_source=").concat(R.b3.homepageReaderOnboarding):void 0;return(0,r.BX)(p.gq,{ref:s,alignItems:"start",justifyContent:"space-between",paddingY:12,children:[(0,r.BX)(p.gq,{alignItems:"start",justifyContent:"start",gap:8,children:[(0,r.tZ)(_.jM,{logoUrl:t.imageUrl,publicationName:t.name,pub:t,href:d}),(0,r.BX)(p.tu,{justifyContent:"start",alignItems:"start",gap:4,children:[(0,r.BX)(p.tu,{alignItems:"start",justifyContent:"center",children:[(0,r.tZ)(m.xv.H4,{children:t.name}),(0,r.tZ)(m.xv.B4,{color:"pub-secondary-text",children:t.subtitle})]}),t.description&&(0,r.tZ)(m.xv.B4,{color:"pub-secondary-text",textAlign:"left",children:t.description})]})]}),(0,r.tZ)(E.X,{checked:n,onChange:l,size:"md"})]})};var N=n(94827),B=n(76560),Z=n(54093);let A={contentContainer:"contentContainer-A4QvRn"};function P(){let e=(0,i._)(["Select "," more to continue"]);return P=function(){return e},e}let f=e=>{var t,n,i,r,a;let l=[],o=new Set,s=null==e?void 0:null===(t=e.collections.find(e=>(null==e?void 0:e.title)==="\uD83D\uDC64️ For you"))||void 0===t?void 0:t.publications;if(s&&(l=s.slice(0,Z.p)).forEach(e=>o.add(e.id)),l.length<Z.p){let t=(null==e?void 0:null===(n=e.collections)||void 0===n?void 0:n.length)||0;if(t>=3){let t=0;for(;l.length<Z.p;){let n=!1;for(let r=0;r<3;r++){let a=null==e?void 0:e.collections[r],s=null==a?void 0:null===(i=a.publications)||void 0===i?void 0:i[t];if(s&&!o.has(s.id)&&(l.push(s),n=!0,o.add(s.id),l.length>=Z.p))break}if(!n)break;t++}}else{let n=0;for(;l.length<Z.p;){let i=Math.floor(n/t),s=null==e?void 0:null===(r=e.collections)||void 0===r?void 0:r[n%t],d=null==s?void 0:null===(a=s.publications)||void 0===a?void 0:a[i];if(!d)break;!o.has(d.id)&&(l.push(d),o.add(d.id),n++)}}}return l},y=e=>{let{onCategoriesFinalized:t=null,setStep:n,handleError:i,pub:l=null,entry:b,user:E,setPreviousStepData:_,canBeSkipped:v=!1}=e,{iString:R,iPlural:S,iTemplate:Z}=(0,d.M1)(),{getExperimentVariant:y,exposeExperiment:C}=(0,s.jc)(),O=y("web_reader_onboarding_min_3_categories");C("web_reader_onboarding_min_3_categories");let[T,D]=(0,a.eJ)([]),[U,k]=(0,a.eJ)([]),[G,L]=(0,a.eJ)(!1),[x,w]=(0,a.eJ)([]),[X,F]=(0,a.eJ)(!1),{result:j,isLoading:H}=(0,u.ib)({pathname:"/api/v1/categories/recommended",auto:!0}),{result:M,isLoading:z,refetch:V}=(0,u.ib)({pathname:"/api/v1/onboarding/recommended",auto:!1});(0,a.d4)(()=>{(0,c.j)(c.FP.READER_ONBOARDING_CATEGORIES_SCREEN_SHOWN,{entry:b,hasSelectedCategories:G})},[b,G]),(0,a.d4)(()=>{if(G&&M&&!z){let e=f(M);0===e.length&&(0,c.j)(c.FP.READER_ONBOARDING_CATEGORIES_ERROR,{entry:b,error:"No recommendations found"}),k(e),e.some(e=>737237===e.id)&&w([737237])}},[M,z,G,b]);let W=null==j?void 0:j.categories,J=async()=>{try{let e={categoryIds:JSON.stringify(T)};await V({query:e})}catch(e){i(e,{ignore:!0}),n(B.c.PROFILE);return}for(let e of((0,c.j)(c.FP.READER_ONBOARDING_CATEGORIES_FINALIZED,{entry:b,numberOfCategories:T.length}),T))(0,c.j)(c.FP.READER_ONBOARDING_CATEGORY_REQUESTED,{entry:b,categoryId:e});L(!0),null==t||t()},K=async()=>{let e=E?E.profile_set_up_at?E.has_publication?B.c.APP_UPSELL:B.c.START_WRITING:B.c.PROFILE:B.c.SIGNUP;if(x.length>0)try{F(!0),(0,c.j)(c.FP.READER_ONBOARDING_BULK_SUBSCRIBE_SELECTED_IN_UI,{entry:b,numberOfSubscriptions:x.length,recommendationsFrom:"model"}),E?(await o().post("/api/v1/bulk_signup").send({publications:x,source:"reader2-onboarding-modal"}),(0,c.j)(c.FP.READER_ONBOARDING_BULK_SUBSCRIBED,{entry:b,numberOfSubscriptions:x.length,recommendationsFrom:"model"})):_(B.c.CATEGORIES,{publications:x,selectedCategoryIds:T}),n(e)}catch(e){(0,c.j)(c.FP.READER_ONBOARDING_CATEGORIES_ERROR,{entry:b,error:e}),i(e,{ignore:!1})}else E?(0,c.j)(c.FP.READER_ONBOARDING_BULK_SUBSCRIBE_SKIPPED,{entry:b,recommendationsFrom:"model"}):_(B.c.CATEGORIES,{publications:[],selectedCategoryIds:T}),n(e)},Y="treatment"===O&&T.length<3;return G||0!==U.length?(0,r.BX)(p.tu,{children:[(0,r.BX)(p.tu,{children:[(0,r.tZ)(m.xv.H2,{translated:!0,children:"Creators you may like"}),(0,r.tZ)(m.xv.B2,{color:"pub-secondary-text",translated:!0,children:"We found some writers based on your interests."})]}),z?(0,r.tZ)(g.$j,{}):(0,r.tZ)(I,{pubs:U,selected:x,setSelected:w,onRecommendationsFirstVisible:(e,t)=>{(0,c.j)(c.FP.READER_ONBOARDING_PUB_RECOMMENDED,{entry:b,publication_id:e.id,suggestion_rank:t,recommendationFrom:"model"})}}),(0,r.BX)(p.tu,{children:[v&&(0,r.tZ)(h.zx,{className:"primary",onClick:()=>{(0,c.j)(c.FP.READER_ONBOARDING_BULK_SUBSCRIBE_SKIPPED,{entry:b,recommendationsFrom:"model"}),n(B.c.APP_UPSELL)},disabled:X,children:R("Skip for now")}),(0,r.BX)(h.zx,{className:"primary",onClick:K,disabled:X,children:[x.length>0&&S("Subscribe and continue","Subscribe to %1 and continue",x.length),0===x.length&&R("Continue without subscribing")]})]})]}):(0,r.BX)(p.tu,{className:"categories-step",gap:2,children:[(0,r.BX)(p.tu,{children:[l?(0,r.BX)(p.tu,{children:[(0,r.tZ)(m.xv.H3,{translated:!0,children:"You're subscribed!"}),(0,r.tZ)(m.xv.B2,{color:"pub-secondary-text",translated:!0,children:"Now dive into your interests"})]}):(0,r.tZ)(m.xv.H3,{translated:!0,children:"Dive into your interests"}),(0,r.tZ)(m.xv.B2,{color:"pub-secondary-text",translated:!0,children:"We'll recommend top publications based on the topics you select."})]}),H?(0,r.tZ)(g.$j,{}):W?(0,r.tZ)(p.tu,{className:A.contentContainer,children:(0,r.tZ)(N.Rj,{hasFeatured:!1,categories:W,categoryIds:T,onCategoryClicked:e=>{let{categoryId:t}=e;if(T.includes(t)){var n;let e=null==W?void 0:null===(n=W.find(e=>(null==e?void 0:e.id)===t))||void 0===n?void 0:n.subcategories;D(T.filter(n=>n!==t&&!(null==e?void 0:e.some(e=>e.id===n))))}else D([...T,t])},ranking:"all",defaultExpanded:!0})}):(0,r.tZ)(p.tu,{className:A.contentContainer,children:(0,r.tZ)(m.xv.B2,{translated:!0,children:"Something went wrong."})}),(0,r.tZ)(h.zx,{className:"primary",onClick:J,disabled:Y,children:"treatment"!==O?R("Continue"):T.length<3?Z(P(),3-T.length):R("Continue")})]})}},341:function(e,t,n){n.d(t,{Z:()=>p});var i=n(16584),r=n(30396),a=n(83034),l=n(57391),o=n(68833),s=n(15771),d=n(19081),c=n(58175),u=n(81821),h=n(47929);function p(e){let{onComplete:t}=e,{getExperimentVariant:n}=(0,l.jc)();(0,r.d4)(()=>(0,o.j)(o.FP.READER_ONBOARDING_APP_UPSELL_SHOWN),[]);let p=(0,u.tq)()&&"treatment_no_skip"===n("reader_onboarding_app_first");return(0,i.BX)(d.tu,{paddingTop:24,gap:12,children:[(0,i.tZ)(c.xv.H1,{weight:"heavy",children:"Download the Substack app"}),(0,i.tZ)(c.xv.B3,{children:"Get the best reading experience on Android and iOS."}),(0,i.tZ)(a.AppInstallContent,{utm_campaign:h.VX.readerOnboarding,utm_source:h.b3.substack}),!p&&(0,i.tZ)("div",{className:"modal-ctas",children:(0,i.tZ)(s.zx,{priority:"primary",onClick:t,children:"Continue"})})]})}},57601:function(e,t,n){n.d(t,{Z:()=>I});var i=n(16584),r=n(30396),a=n(94184),l=n.n(a),o=n(23279),s=n.n(o),d=n(80569),c=n.n(d),u=n(29493),h=n(37358),p=n(51214),g=n(68833),m=n(15771),b=n(19081),E=n(58175),_=n(76560),v=n(84864);let R={right:"right-XckP6Z",liveUpdatingInput:"liveUpdatingInput-AypZsP",invalid:"invalid-mVGeLg",narrower:"narrower-nMJULR",autoMargins:"autoMargins-UJ_Q1X",mobileAwareWidth:"mobileAwareWidth-lMCXnu",borderedBox:"borderedBox-PucNvX",errorText:"errorText-XpsJyQ",aTag:"aTag-yo_zoZ"},I=e=>{let{user:t,setStep:n,entry:a,setPreviousStepData:o}=e,d=(0,r.sO)(null),I=(0,r.sO)(null),[S,N]=(0,r.eJ)(""),[B,Z]=(0,r.eJ)([]),[A,P]=(0,r.eJ)(!1),[f,y]=(0,r.eJ)(!1),[C,O]=(0,r.eJ)(!1);(0,r.d4)(()=>{let e=async()=>{try{let e=await c().get("/api/v1/publication/suggestion");e.body.subdomain&&(P(!0),N(e.body.subdomain))}catch(e){console.error("Failed to get subdomain suggestion:",e)}};f||(y(!0),(0,g.j)(g.FP.READER_ONBOARDING_CREATE_PUBLICATION_STEP_STARTED,{entry:a}),e(),y(!1))},[f,y,a]);let T=s()(e=>{D(e)},500),D=async e=>{let t=e.target.value;if(N(t),0===t.length){Z([]);return}try{(await c().get("/api/v1/check_subdomain",{subdomain:t})).body.available?(P(!0),Z([])):(P(!1),Z([{msg:"This URL is taken. Try another."}]))}catch(t){var n,i;let e=[];null===(i=t.response.body)||void 0===i||null===(n=i.errors)||void 0===n||n.forEach(n=>{(!(t.response.body.errors.length>1)||"Please enter a valid web URL (letters and numbers only)"!==n.msg)&&e.push(n)}),P(!1),Z(e)}},U=async()=>{var e,i,r,l,s;try{let r=(await c().post("/api/v1/publication").send({name:"".concat((0,v.guessFirstName)(null!==(i=null==t?void 0:t.name)&&void 0!==i?i:null)||"My"," Publication"),subdomain:S,hero_text:"Welcome to my publication",tos:!0,captcha_response:C&&(null==I?void 0:null===(e=I.current)||void 0===e?void 0:e.getResponse())})).body;o(_.c.CREATE_PUBLICATION,{createdPub:r}),n(_.c.CREATE_PUBLICATION_SUCCESS)}catch(t){if((0,g.j)(g.FP.READER_ONBOARDING_CREATE_PUBLICATION_STEP_ERROR,{entry:a,message:t.toString()}),401===t.response.statusCode){O(!0),P(!1),Z([]);return}let e=[];null===(l=t.response.body)||void 0===l||null===(r=l.errors)||void 0===r||r.forEach(n=>{(!(t.response.body.errors.length>1)||"Please enter a valid web URL (letters and numbers only)"!==n.msg)&&e.push(n)}),(null===(s=t.response.body)||void 0===s?void 0:s.error)&&e.push({msg:t.response.body.error}),P(!1),Z(e)}};return(0,i.BX)(b.tu,{gap:32,paddingTop:48,className:R.mobileAwareWidth,children:[(0,i.tZ)(E.xv.H1,{children:"Create your publication"}),(0,i.BX)(b.tu,{className:R.borderedBox,gap:56,paddingTop:56,paddingBottom:32,paddingX:{mobile:12,desktop:48},radius:"md",children:[(0,i.BX)(b.tu,{gap:16,children:[(0,i.tZ)(E.xv.B3,{align:"left",weight:"bold",children:"Publication URL"}),(0,i.BX)(b.gq,{gap:12,alignItems:"center",children:[(0,i.tZ)("input",{ref:d,type:"text",name:"subdomain",id:"subdomain",onInput:e=>{T(e)},value:S,className:l()(R.liveUpdatingInput,{["".concat(R.invalid)]:B.length})}),(0,i.tZ)(E.xv.B3,{children:".substack.com"}),(0,i.tZ)(b.hs,{className:R.right,children:A&&!B.length?(0,i.tZ)(p.Z,{isStatic:!0,height:18,fill:"#4c3",stroke:"#4c3"}):(0,i.tZ)(h.Z,{height:16,width:16,fill:"#D72B2B",stroke:"#D72B2B",strokeWidth:0})})]}),C&&(0,i.tZ)(u.Z,{ref:I}),(B.length>0||C)&&(0,i.BX)(b.tu,{gap:8,children:[B.map(e=>(0,i.tZ)(E.xv.B4,{className:R.errorText,align:"left",children:e.msg})),C&&(0,i.tZ)(E.xv.B4,{className:R.errorText,align:"left",children:"Please complete the captcha to continue"})]})]}),(0,i.tZ)(b.tu,{gap:24,children:(0,i.tZ)(m.zx,{size:"lg",onClick:U,disabled:B.length>0,children:"Continue"})})]}),(0,i.tZ)(b.hs,{className:R.autoMargins,alignItems:"center",children:(0,i.BX)(E.xv.B4,{color:"secondary",className:R.narrower,children:["By signing up, you agree to"," ",(0,i.tZ)("a",{className:R.aTag,href:"https://substack.com/pa",target:"_blank",rel:"noopener",children:"our publisher agreement"}),","," ",(0,i.tZ)("a",{className:R.aTag,href:"https://substack.com/ccpa#personal-data-collected",target:"_blank",rel:"noopener",children:"information collection notice"}),", and"," ",(0,i.tZ)("a",{className:R.aTag,href:"https://substack.com/privacy",target:"_blank",rel:"noopener",children:"privacy policy"})]})})]})}},64799:function(e,t,n){n.d(t,{Z:()=>u});var i=n(16584),r=n(30396),a=n(68833),l=n(15771),o=n(19081),s=n(58175),d=n(76560),c=n(60308);let u=e=>{let{setStep:t,entry:n,previousStepData:u}=e;return(0,r.d4)(()=>{(0,a.j)(a.FP.READER_ONBOARDING_CREATE_PUBLICATION_SUCCESS_STEP_STARTED,{entry:n})}),(0,i.BX)(o.tu,{gap:48,paddingBottom:120,alignItems:"center",children:[(0,i.tZ)("img",{className:"image-OdneRK",src:(0,c.zF4)("/img/reader_onboarding/car.png",264)}),(0,i.BX)(o.tu,{gap:4,children:[(0,i.tZ)(s.xv.H1,{children:"Success!"}),(0,i.tZ)(s.xv.B3,{children:"You're all set! Head over to your dashboard and tell the world about your Susbtack"})]}),(0,i.BX)(o.tu,{className:"buttonGroup-HpHxnd",gap:4,children:[(0,i.tZ)(l.zx,{size:"lg",onClick:()=>{window.location.href=(0,c.QK7)(u[d.c.CREATE_PUBLICATION].createdPub,{addBase:!0})},children:"Visit writer dashboard"}),(0,i.tZ)(l.zx,{size:"lg",priority:"secondary",onClick:()=>{(0,a.j)(a.FP.READER_ONBOARDING_CREATE_PUBLICATION_SUCCESS_STEP_SKIPPED,{entry:n}),t(d.c.APP_UPSELL)},children:"Visit later"})]})]})}},14861:function(e,t,n){n.d(t,{Z:()=>l});var i=n(16584),r=n(55438),a=n(15771);let l=e=>{let{close:t}=e;return(0,i.BX)("div",{className:"welcome-step",children:[(0,i.BX)("div",{className:"headings",children:[(0,i.tZ)(r.Z,{className:"substack",width:72,height:72}),(0,i.tZ)("h3",{children:"Something went wrong"}),(0,i.tZ)("p",{children:"We're sorry for the inconvenience."})]}),(0,i.tZ)("div",{className:"spacer"}),(0,i.tZ)("div",{className:"spacer"}),(0,i.tZ)("div",{className:"modal-ctas",children:(0,i.tZ)(a.zx,{priority:"secondary",onClick:t,children:"Close"})})]})}},45930:function(e,t,n){n.d(t,{Z:()=>b});var i=n(7409),r=n(99282),a=n(16584),l=n(30396),o=n(94184),s=n.n(o),d=n(80569),c=n.n(d),u=n(42493),h=n(60807),p=n(68833),g=n(48980),m=n(76560);let b=e=>{let{setStep:t,handleError:n,user:o,entry:d,followUserIds:b,redirectAfterProfile:E=!1,barebones:_=!1}=e,[v,R]=(0,l.eJ)(null),[I,S]=(0,l.eJ)(!1),N=o?o.id:null,{setUser:B}=(0,h.SE)();(0,l.d4)(()=>{(async()=>{if(null==b?void 0:b.length)try{await (0,g.rd)("/api/v1/feed/bulk-follow",{method:"POST",json:{surface:"post-follow-referrer-prompt",userIds:b}})}catch(e){console.error("could not bulk-follow",e)}})()},[b]),(0,l.d4)(()=>{(0,p.j)(p.FP.READER_ONBOARDING_PROFILE_SETUP_STARTED,{entry:d});let e=async()=>{try{var e;let t=(await c().get("/api/v1/user/".concat(N,"/profile/edit"))).body;t&&!t.profile_set_up_at&&(null===(e=t.subscriptions)||void 0===e?void 0:e.length)>0&&(t.subscriptions=t.subscriptions.map(e=>(0,r._)((0,i._)({},e),{visibility:"public"}))),R(t)}catch(e){n(e,{ignore:!0}),t(m.c.APP_UPSELL)}};N&&e()},[n,t,N,d]);let Z=!!(null==v?void 0:v.profile_set_up_at);return(0,a.BX)(a.HY,{children:[(0,a.BX)("div",{className:s()("profile-step",{hidden:!I}),children:[(0,a.tZ)("h3",{children:"Subscriptions displayed on profile"}),(0,a.tZ)("p",{children:"Subscriptions appear on your profile by default, but you can choose to hide some or all of them"}),(0,a.tZ)(u.FQ,{profile:v,onFinalizeVisibility:()=>S(!1),onSetVisibility:e=>{if(!v){console.warn("No profile, cannot set visibility");return}R((0,r._)((0,i._)({},v),{subscriptions:[...v.subscriptions.map(t=>{let n=e[t.publication.id];return n?(0,r._)((0,i._)({},t),{visibility:n}):t})]}))},source:"homepage-reader-onboarding"})]}),(0,a.BX)("div",{className:s()("profile-step",{hidden:I}),children:[(0,a.tZ)("h3",{children:"Tell us about yourself"}),(0,a.tZ)("p",{children:"Add your name, a profile picture, and a bit more about who you are."}),(0,a.tZ)(u._0,{pageTitle:"",user:o,freeSignup:!0,freeSignupEmail:null,needsPhoto:!1,optionalPhoto:!0,isPostInvite:!1,primaryEligiblePublications:[],onSuccess:e=>{let n=null==e?void 0:e.body;n&&B(n),E?t(m.c.EXIT):t(m.c.APP_UPSELL)},onEditReadVisibility:()=>{S(!0),(0,p.j)(p.FP.READER_ONBOARDING_PROFILE_SETUP_SKIPPED,{entry:d})},numVisibleSubscriptions:(null==v?void 0:v.subscriptions.filter(e=>{let{visibility:t}=e;return"public"===t}).length)||0,numSubscriptions:(null==v?void 0:v.subscriptions.length)||0,complete:!0,text:"Continue",profileExists:Z,prepareData:e=>(e.reads_visibility=(null==v?void 0:v.subscriptions.map(e=>{let{id:t,visibility:n}=e;return{id:t,visibility:n}}))||[],e),barebones:_})]})]})}},48450:function(e,t,n){n.d(t,{Z:()=>I});var i=n(16584),r=n(30396),a=n(94184),l=n.n(a),o=n(80569),s=n.n(o),d=n(20253),c=n(55438),u=n(60807),h=n(35702),p=n(68833),g=n(82402),m=n(19081),b=n(58175),E=n(91021),_=n(76560),v=n(60308),R=n(6911);function I(e){var t,n,a,o,c;let{user:I,setStep:N,entry:B,previousStepData:Z,prefilledEmail:A,skipCategories:P=!1}=e,{setUser:f}=(0,u.SE)(),[y,C]=(0,r.eJ)(null!=A?A:""),[O,T]=(0,r.eJ)(!1),[D,U]=(0,r.eJ)(!1);(0,r.d4)(()=>{I&&!Z[_.c.CATEGORIES]&&N(_.c.CATEGORIES)},[I,N,Z]);let[k,G]=(0,r.eJ)(!1),L=async e=>{if(e.body.userExists){T(!0);return}if(e.body.emailConfirmationRequired){U(!0);return}if((0,p.j)(p.FP.READER_ONBOARDING_SIGNUP_SUCCEEDED,{entry:B}),I||((0,h.a)({user:e.body.user}),f(e.body.user)),Z[_.c.CATEGORIES]){var t;e.body.userExists?N(_.c.APP_UPSELL):N(_.c.PROFILE);let n=null===(t=Z[_.c.CATEGORIES])||void 0===t?void 0:t.publications;(null==n?void 0:n.length)?(await s().post("/api/v1/bulk_signup").send({publications:n,source:"".concat(B,"-reader-onboarding"),email:y}),(0,p.j)(p.FP.READER_ONBOARDING_BULK_SUBSCRIBED,{entry:B,numberOfSubscriptions:n.length,recommendationsFrom:"categories"})):(0,p.j)(p.FP.READER_ONBOARDING_BULK_SUBSCRIBE_SKIPPED,{entry:B,recommendationsFrom:"categories"})}else P?N(_.c.PROFILE):N(_.c.CATEGORIES)};if(D)return(0,i.BX)(m.tu,{className:"signup-step",children:[(0,i.tZ)(S,{title:"Verify your email address"}),(0,i.BX)(b.xv.B3,{children:["We just sent an email to ",(0,i.tZ)("strong",{children:y}),". Please check your inbox before continuing."]}),(0,i.tZ)(m.hs,{flex:"grow"}),(0,i.tZ)("div",{className:"modal-ctas",children:(0,i.tZ)(E.A,{onClick:e=>{e.preventDefault(),U(!1)},children:(0,i.tZ)(b.xv,{as:"span",decoration:"hover-underline",children:"Or edit your email address or try again."})})})]});let x=null!==(o=null===(t=Z[_.c.CATEGORIES])||void 0===t?void 0:t.publications)&&void 0!==o?o:[],w=null!==(c=null===(n=Z[_.c.CATEGORIES])||void 0===n?void 0:n.selectedCategoryIds)&&void 0!==c?c:[];return(0,i.BX)("div",{className:"signup-step",children:[(0,i.tZ)(S,{title:"Sign up to subscribe",subtitle:"Substack is the home for great writing."}),(0,i.BX)(d.ZP,{method:"post",action:"/api/v1/reader/signup/just_email",loading:!1,autoLock:!0,onSuccess:L,children:[(0,i.tZ)("input",{type:"hidden",name:"publicationIds",value:x.join(",")}),(0,i.tZ)("input",{type:"hidden",name:"selectedCategoryIds",value:w.join(",")}),(0,i.BX)("p",{children:[(0,i.tZ)("label",{for:"email",children:"Your email address"}),(0,i.tZ)("input",{type:"email",name:"email","aria-label":"Email",value:y,tabIndex:0,onInput:e=>{C(e.target.value)},onChange:e=>{C(e.target.value)}}),O&&(0,i.BX)("div",{className:"error",children:["This email is already registered with Substack. Please"," ",(0,i.tZ)("a",{native:!0,href:(0,v.Zdb)(),children:"sign in to continue"}),"."]}),D&&(0,i.tZ)("div",{className:"error",children:"We have sent you a confirmation email. Please check your inbox before continuing."})]}),(0,i.tZ)("div",{id:"error-container"}),(0,i.BX)(m.tu,{gap:16,children:[(0,i.BX)(m.gq,{as:"label",gap:8,className:"checkboxLabel-gCoESV",children:[(0,i.tZ)(g.X,{checked:k,onChange:e=>{G(e)},size:"sm"}),(0,i.tZ)(m.tu,{flex:"grow",children:(0,i.BX)(b.xv.B3,{as:"span",textAlign:"left",children:["I agree to Substack’s"," ",(0,i.tZ)("a",{href:(0,R._Q)(),target:"_blank",children:"Terms of Use"})," ","and acknowledge its"," ",(0,i.tZ)("a",{href:(0,R.WF)(),target:"_blank",children:"Information Collection Notice"})," ","and"," ",(0,i.tZ)("a",{href:(0,R.Zz)(),target:"_blank",children:"Privacy Policy"})]})})]}),(0,i.tZ)("button",{className:l()("button primary",{disabled:!k},"noMargin-hNmNqv"),type:"submit",disabled:!k,children:Z[_.c.CATEGORIES]&&(null===(a=Z[_.c.CATEGORIES])||void 0===a?void 0:a.publications.length)?"Subscribe and join Substack":"Get started"}),(0,i.BX)(b.xv.B3,{children:["Already have a Substack account?"," ",(0,i.tZ)("a",{native:!0,href:(0,v.Zdb)(),children:"Sign in"})]})]})]})]})}function S(e){let{title:t,subtitle:n}=e;return(0,i.BX)("div",{className:"headings",children:[(0,i.tZ)(c.Z,{className:"substack",width:68,height:68}),(0,i.tZ)("h3",{children:t}),n&&(0,i.tZ)("p",{children:n})]})}},7759:function(e,t,n){n.d(t,{Z:()=>u});var i=n(16584),r=n(30396),a=n(68833),l=n(15771),o=n(19081),s=n(58175),d=n(76560),c=n(60308);let u=e=>{let{setStep:t,entry:n}=e;return(0,r.d4)(()=>{(0,a.j)(a.FP.READER_ONBOARDING_START_WRITING_STEP_STARTED,{entry:n})}),(0,i.BX)(o.tu,{alignItems:"center",gap:48,paddingBottom:120,children:[(0,i.tZ)("img",{className:"image-eElYa7",src:(0,c.zF4)("/img/reader_onboarding/jobpage_penholder.png",150)}),(0,i.BX)(o.tu,{gap:4,children:[(0,i.tZ)(s.xv.H1,{children:"Want to start writing on Substack?"}),(0,i.tZ)(s.xv.B3,{color:"secondary",children:"Write posts, grow your audience, and make money on Substack"})]}),(0,i.BX)(o.tu,{className:"buttonGroup-BqeO0U",gap:4,children:[(0,i.tZ)(l.zx,{size:"lg",onClick:()=>t(d.c.CREATE_PUBLICATION),children:"Create my publication"}),(0,i.tZ)(l.zx,{size:"lg",priority:"secondary",onClick:()=>{(0,a.j)(a.FP.READER_ONBOARDING_START_WRITING_STEP_SKIPPED,{entry:n}),t(d.c.APP_UPSELL)},children:"Skip for now"})]})]})}},29191:function(e,t,n){n.d(t,{Z:()=>s});var i=n(16584),r=n(55438),a=n(68833),l=n(15771),o=n(76560);let s=e=>{let{pub:t=null,profile:n,entry:s,setStep:d}=e;return(0,i.BX)("div",{className:"welcome-step",children:[(0,i.BX)("div",{className:"headings",children:[(0,i.tZ)(r.Z,{className:"substack",width:68,height:68}),(0,i.tZ)("h3",{children:"You're all set up"}),(0,i.BX)("p",{children:["You will now start receiving new posts from"," ",n?(0,i.BX)(i.HY,{children:[(0,i.tZ)("b",{children:n.name})," and the other writers"]}):t?(0,i.BX)(i.HY,{children:[(0,i.tZ)("b",{children:t.name})," and the other publications"]}):"the publications"," ","you subscribed to. Happy reading!"]})]}),(0,i.tZ)("div",{className:"spacer"}),(0,i.tZ)("div",{className:"spacer"}),(0,i.tZ)("div",{className:"modal-ctas",children:(0,i.BX)(l.zx,{priority:"primary",onClick:()=>{(0,a.j)(a.FP.READER_ONBOARDING_START_READING_CLICKED,{entry:s}),d(o.c.EXIT)},children:["Start reading",n?" ".concat(n.name):t?" ".concat(t.name):""]})})]})}},76560:function(e,t,n){n.d(t,{c:()=>i});let i={SIGNUP:"SIGNUP",PUB_LANDING:"PUB_LANDING",PUB_SIGNUP:"PUB_SIGNUP",CATEGORIES:"CATEGORIES",CATEGORIES_SUGGESTIONS:"CATEGORIES_SUGGESTIONS",PROFILE:"PROFILE",START_WRITING:"START_WRITING",CREATE_PUBLICATION:"CREATE_PUBLICATION",CREATE_PUBLICATION_SUCCESS:"CREATE_PUBLICATION_SUCCESS",WELCOME:"WELCOME",ERROR:"ERROR",EXIT:"EXIT",APP_UPSELL:"APP_UPSELL"}},54093:function(e,t,n){n.d(t,{p:()=>i});let i=7}}]);