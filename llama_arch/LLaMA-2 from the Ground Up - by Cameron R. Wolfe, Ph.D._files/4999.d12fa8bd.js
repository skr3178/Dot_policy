"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["4999"],{22233:function(e,t,i){i.d(t,{Z:()=>n});let n=2787!=i.j?{icon:"icon-JCPlCw",toggleSetting:"toggleSetting-UDN_Qn",transcriptionPlayer:"transcriptionPlayer-eiECcl",hidePlayer:"hidePlayer-TfzId9",nonActiveText:"nonActiveText-JfTKb8",transcriptionChunk:"transcriptionChunk-bCQeJ2",editableChunk:"editableChunk-k4Fatu",startTime:"startTime-tjpyBE",text:"text-Ou5QC2",activeStartTime:"activeStartTime-ozZC_j",chunkWithSpeaker:"chunkWithSpeaker-iYPDkU",speaker:"speaker-GFTaOB",transcription:"transcription-hfRyWl",popover:"popover-tZdxdX",divider:"divider-ah0vWs",resultsValue:"resultsValue-uYlTxH",searchResult:"searchResult-_1_8Y9",isFocused:"isFocused-CIwNEb",searchForm:"searchForm-gEUJ79"}:null},15080:function(e,t,i){i.d(t,{Z:()=>n});let n=/^(3154|6909)$/.test(i.j)?{hasModal:"hasModal-bDnxNx",navItem:"navItem-LMkXsF",badge:"badge-WykKuV",navIcon:"navIcon-sYXN0z",dot:"dot-ffIU60",avatarActive:"avatarActive-DjlCWB",cta:"cta-p8wRyT",topNavContainer:"topNavContainer-_wO01o",topNav:"topNav-EFUPwm",searchInputContainer:"searchInputContainer-YrIW3p",kbd:"kbd-mlElYU",searchInput:"searchInput-dNEweF",sideNav:"sideNav-HN09Ay",profileSideNavContainer:"profileSideNavContainer-gREEbF",mobileNavContainer:"mobileNavContainer-rNnT3V",mobileNav:"mobileNav-enP9Hr",profileMenu:"profileMenu-dZh1Pk",startCta:"startCta-OwOerA",navCta:"navCta-KJigQ3",activeAvatar:"activeAvatar-zQSKs5",floatingCta:"floatingCta-RHNVs3",login:"login-y2i9b8",isLocked:"isLocked-eKFaD1",menuIcon:"menuIcon-xyWkqY",qrContainer:"qrContainer-mA2zEX",qrCode:"qrCode-FK0ZxH",modalViewer:"modalViewer-xO_gxg",active:"active-uB0ZZs","mobile-nav-on-island":"mobile-nav-on-island-kO5i22",mobileNavOnIsland:"mobile-nav-on-island-kO5i22","reader2-mobile-nav-icon":"reader2-mobile-nav-icon-ka9qcp",reader2MobileNavIcon:"reader2-mobile-nav-icon-ka9qcp",logo:"logo-DQBU5j"}:null},42909:function(e,t,i){i.d(t,{S$:()=>y,Su:()=>g,_e:()=>Z});var n=i(16584),o=i(6400),r=i(30396),s=i(53836),a=i.n(s),l=i(97742);i(70522);var c=i(57391),d=i(95441),u=i(68833);i(62981);var p=i(98914);i(15771),i(19081),i(58175);var h=i(66611),m=i(60308);if(/^(3154|6909)$/.test(i.j))var v=i(26111);if(i(63651),/^(3154|6909)$/.test(i.j))var b=i(81821);if(/^(3154|6909)$/.test(i.j))var _=i(47929);let f=(0,o.createContext)({hidden:!1});function g(){let{setHidden:e}=(0,r.qp)(f);return()=>null==e?void 0:e(!0)}function Z(e){let{children:t}=e,[i,o]=(0,r.eJ)(!1);return(0,n.tZ)(f.Provider,{value:{hidden:i,setHidden:o},children:t})}function y(e){let{post:t,subdomain:i,readerInstalled:o,isContributor:s}=e,l=(0,b.s)()?"ios":(0,b.Dt)()?"android":null,{iString:h}=(0,d.M1)(),{hidden:g}=(0,r.qp)(f),{exposeExperiment:Z,getExperimentVariant:y}=(0,c.jc)(),k=g||!l;if((0,r.d4)(()=>{k||!o||s||t.is_draft||(0,v.x)("triedRedirect")||(0,p.AE)()?k||Z("app_install_prompts"):(0,p.uX)((0,m.K8_)(i,t.slug,{params:{utm_medium:_.lP.web,utm_campaign:_.VX.postsOpenInApp,utm_source:_.b3.postBanner}}))},[]),k)return null;let N=y("app_install_prompts")||"none";if(!["our_banner","native_banner_if_supported"].includes(N))return null;let x=h("Read in the Substack app");"podcast"==t.type?x=h("Listen in the Substack app"):"video"==t.type&&(x=h("Watch in the Substack app"));let T=(0,m.K8_)(i,t.slug,{redirect:"app-store",source:_.b3.postBanner});return(0,b.IT)()&&"native_banner_if_supported"===N?(0,n.BX)(n.HY,{children:[(0,n.tZ)(a(),{meta:[{name:"apple-itunes-app",content:"app-id=1581650857, app-argument=".concat(T)}]}),(0,n.tZ)(w,{surface:"post",bannerType:"safari-native-app-banner"})]}):(0,n.BX)(P,{className:"app-banner-post",children:[(0,n.tZ)(w,{surface:"post"}),(0,n.tZ)(C,{}),(0,n.tZ)(S,{children:(0,n.tZ)("div",{children:x})}),(0,n.tZ)("a",{className:"app-banner-cta",href:T,onClick:()=>{(0,u.j)(u.FP.APP_BANNER_TAPPED,{surface:"post",type:"header"})},children:h("Open app")})]})}function w(e){let{surface:t,bannerType:i}=e;return(0,r.d4)(()=>{(0,u.j)(u.FP.APP_BANNER_VIEWED,{surface:t,bannerType:i})},[]),null}let P=(0,h.L)("app-banner"),S=(0,h.L)("app-banner-text");function C(){return(0,n.tZ)("div",{className:"app-banner-icon",children:(0,n.tZ)(l.Z,{height:16})})}},72508:function(e,t,i){i.d(t,{ZP:()=>M,ml:()=>z,sZ:()=>W});var n=i(7409),o=i(99282),r=i(16584),s=i(30396),a=i(94184),l=i.n(a),c=i(74691),d=i.n(c),u=i(18029),p=i.n(u),h=i(44908),m=i.n(h),v=i(40423),b=i(96862),_=i(3039),f=i(19298),g=i(80569),Z=i.n(g),y=i(61649),w=i(29032),P=i(93678),S=i(44881),C=i(95441),k=i(57952),N=i(96904),x=i(53030),T=i(68833),E=i(33224),R=i(71068),I=i(19081),B=i(58175),O=i(17564),D=i(74571),A=i(61468),j=i(84864),L=i(93370),X=i(24271),U=i(63523);function M(e){var t,i;let{disableSelection:a,player:l,postId:c,renderTranscriptionChunk:u,transcription:p,onUpdateActiveRowIndex:h}=e,{iString:v}=(0,C.M1)(),{onStartClipping:b}=(0,y.Sr)(),_=(0,s.sO)(null),{selection:f,clearSelection:g,selectEndRef:w,selectStartRef:P}=(0,D.LW)({containerRef:_,disable:null!=a&&a,playerRef:l}),[R,O]=(0,s.eJ)(!0),[j,L]=(0,s.eJ)(),[X,M]=(0,s.eJ)(["nick","mills"]),[z,W]=(0,s.eJ)({}),[$,Y]=(0,s.eJ)(!1),[G,q]=(0,s.eJ)(!1),[J,K]=(0,s.eJ)(),{currentTime:Q,isPlaying:ee}=(0,x.FI)(l),et=z?Object.values(z).filter(e=>e):[],ei=!!((null==X?void 0:X.length)&&et.length),{setItems:en}=(0,k.pH)(),eo=null==j?void 0:j.findIndex(e=>e.start<=Q&&e.end>Q);if((0,s.d4)(()=>{h&&void 0!==eo&&-1!==eo&&h(eo)},[eo,h]),(0,s.d4)(()=>{O(!0),p.cdn_url&&Z().get(p.cdn_url).then(e=>{if(!e.text)return;let t=JSON.parse(e.text),i=(0,A.Ap)({rows:t});L(i),en(i);let n=m()(i.map(e=>{var t;return null!==(t=e.speaker)&&void 0!==t?t:""})).filter(e=>e).sort();n.length&&M(n)}).finally(()=>{O(!1)}),p.speaker_map&&Object.values(p.speaker_map).length&&W(p.speaker_map)},[null==j?void 0:j.length,en,p.cdn_url,p.cdn_unaligned_url,p.speaker_map]),R)return(0,r.tZ)(H,{});if(!(null==j?void 0:j.length))return(0,r.tZ)("div",{className:U.Z.transcriptionStatus,children:(0,r.tZ)(B.xv.Meta,{children:v((null==p?void 0:p.status)==="in_progress"?"Transcription in progress...":"No transcript...")})});let er=(null==l?void 0:null===(i=l.current)||void 0===i?void 0:null===(t=i.player)||void 0===t?void 0:t.tagName)==="VIDEO",es=er?"videogram":"audiogram";return(0,r.BX)(I.tu,{ref:_,children:[f&&(0,r.tZ)(F,{isVideo:er,selection:f,onSelect:er?()=>{if(!f||!j||!P.current||!w.current)return;let e=P.current,t=w.current;(e.rowIndex>t.rowIndex||e.rowIndex===t.rowIndex&&e.offset>t.offset)&&([e,t]=[t,e]);let i=(0,E.xm)({startRow:j[e.rowIndex],endRow:j[t.rowIndex],startOffset:e.offset,endOffset:t.offset,startNodeText:e.text,endNodeText:t.text});g(),b((0,o._)((0,n._)({},i),{source:"transcription",title:null}))}:function(){if(f&&w.current&&P.current&&j){let e=(0,n._)({},P.current),t=(0,n._)({},w.current),[i,o]=(0,E.lF)({selectStart:e,selectEnd:t,alignedRows:j});i>o&&([i,o]=[o,i]),Y(!0),Z().post("/api/v1/audiogram").send({post_id:c,start_idx:i,end_idx:o,use_draft:!1}).then(e=>{var t,i;(null===(t=e.body)||void 0===t?void 0:t.data)&&(K(e.body.data),g(),(null==l?void 0:null===(i=l.current)||void 0===i?void 0:i.player)&&l.current.player.pause())}).finally(()=>Y(!1))}}}),u&&j.map((e,t)=>{var i;return u({isPlaying:ee,row:e,rowIndex:t,words:e.words,showSpeaker:(0===t?void 0:null===(i=j[t-1])||void 0===i?void 0:i.speaker)!==e.speaker,speakerName:ei&&e.speaker?z[e.speaker]:void 0,onPause:()=>{var e;(null==l?void 0:null===(e=l.current)||void 0===e?void 0:e.player)&&l.current.player.pause()},onPlay:()=>{var t;(null==l?void 0:null===(t=l.current)||void 0===t?void 0:t.player)&&(l.current.player.currentTime=e.start+1e-4,l.current.player.play())}})}),!u&&j.map((e,t)=>(0,r.tZ)(V,{idx:t,row:e,rows:j,speakerName:ei&&e.speaker?z[e.speaker]:void 0,onReassign:()=>q(!0),currentTime:Q,isPlaying:ee,isSelected:!!(f&&w.current&&P.current&&t===d()(t,Math.min(P.current.rowIndex,w.current.rowIndex),Math.max(P.current.rowIndex,w.current.rowIndex))),onClick:()=>{g()},onPause:()=>{var e;(null==l?void 0:null===(e=l.current)||void 0===e?void 0:e.player)&&l.current.player.pause()},onPlay:()=>{var t;(null==l?void 0:null===(t=l.current)||void 0===t?void 0:t.player)&&(l.current.player.currentTime=e.start+1e-4,l.current.player.play())}},t)),(0,r.tZ)(N.G,{isOpen:!!($||J),onClose:()=>K(void 0),isGenerating:$,finishedGram:J,noun:es,postId:c,onDownload:function(e){return(0,T.j)(T.FP.AUDIOGRAM_DOWNLOAD_CLICKED,{post_id:c,audiogram_id:null==J?void 0:J.id,media_upload_id:p.media_upload_id}),fetch(e,{method:"GET"}).then(e=>e.blob()).then(e=>{var t;let i=null==J?void 0:null===(t=J.video_url)||void 0===t?void 0:t.split("/").pop(),n=null==i?void 0:i.match(/^([^-]+-[^_]+)_/),o=(null==n?void 0:n[1])||"",r=URL.createObjectURL(e),s=document.createElement("a");s.href=r,s.download="substack-".concat(es,"-").concat(c,"-").concat(o,".mp4"),document.body.appendChild(s),s.click(),URL.revokeObjectURL(r),s.remove()})}}),(0,r.tZ)(S.O,{isOpen:X&&!!X.length&&!!G,onClose:()=>q(!1),speakers:X,speakerMap:z,onChangeSpeakerMap:W,postId:c})]})}function F(e){var t,i;let{isVideo:n,selection:o,onSelect:s}=e,{iString:a}=(0,C.M1)(),c=null===(i=o.anchorNode)||void 0===i?void 0:null===(t=i.parentElement)||void 0===t?void 0:t.getBoundingClientRect();return c?(0,r.tZ)(w.C,{children:(0,r.tZ)(I.tu,{style:{top:(0,j.isTouchDevice)()?Math.max(c.y,0)+c.height+12:Math.max(c.bottom,0)+12,left:c.x+c.width/2,transform:"translateX(-50%)",pointerEvents:"auto",maxWidth:240},justifyContent:"center",outline:"detail",shadow:"md",radius:"md",className:l()(X.Z.popover,X.Z.mounted),padding:4,gap:4,children:n?(0,r.BX)(P.O7,{onClick:s,children:[(0,r.tZ)(v.Z,{color:"var(--color-utility-white)",size:20}),(0,r.tZ)(B.xv.B4,{color:"white",weight:"medium",children:a("Create clip")})]}):(0,r.BX)(P.O7,{onClick:s,children:[(0,r.tZ)(b.Z,{color:"var(--color-utility-white)",size:20}),(0,r.tZ)(B.xv.B4,{color:"white",weight:"medium",children:a("Make audiogram")})]})})}):null}function H(){return(0,r.BX)(r.HY,{children:[(0,r.tZ)(O.S,{width:"80%",height:"24px",className:U.Z.loadingSilhouette}),(0,r.tZ)(O.S,{width:"34%",height:"24px",className:U.Z.loadingSilhouette}),(0,r.tZ)(O.S,{width:"75%",height:"24px",className:U.Z.loadingSilhouette}),(0,r.tZ)(O.S,{width:"100%",height:"24px",className:U.Z.loadingSilhouette}),(0,r.tZ)(O.S,{width:"68%",height:"24px",className:U.Z.loadingSilhouette})]})}function z(e){if(!e)return"Unknown Speaker";let t=e.split("_"),i=parseInt(t[1]);return"".concat(p()(t[0])," ").concat(i+1)}function V(e){let{row:t,currentTime:i,onPlay:a,isPlaying:c,onPause:d,isSelected:u,onClick:p,idx:h,rows:m,onReassign:v,speakerName:b}=e,[g,Z]=(0,s.eJ)(!1),y=(0,s.sO)(null),w=t.start<=i&&t.end>=i,P=t.words.map(e=>e.start<=i&&e.end>=i?(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{className:U.Z.activeWord,children:e.word})," "]}):"".concat(e.word," "));P.length||(P=t.text.split(" ").map(e=>(0,r.BX)("span",{children:[e," "]})));let S=null;if(t.speaker&&b){var C;let e=0===h?void 0:null===(C=m[h-1])||void 0===C?void 0:C.speaker;t.speaker!==e&&(S=(0,r.tZ)("div",{className:U.Z.speakerText,onClick:v,children:b}))}return(0,r.BX)("div",{ref:y,onClick:p,onMouseEnter:()=>Z(!0),onMouseLeave:()=>Z(!1),style:{display:"flex",width:"100%",alignItems:"center"},children:[c&&(!g||w)?(0,r.tZ)(f.Z,{onClick:d,size:24,className:U.Z.playCircle,style:(0,o._)((0,n._)({},g&&{color:"var(--color-accent-themed)"}),{visibility:w||g?"visible":"hidden"})}):(0,r.tZ)(_.Z,{onClick:a,size:24,className:U.Z.playCircle,style:(0,o._)((0,n._)({},g&&{color:"var(--color-accent-themed)"}),{visibility:w||g?"visible":"hidden"})}),(0,r.BX)("div",{className:l()(U.Z.transcriptionChunk,{[U.Z.activeRow]:w||u,[U.Z.hoverChunk]:g}),"data-chunk-index":h,children:[(0,r.tZ)("div",{className:l()(U.Z.rowIndicator,{[U.Z.hoverRow]:g})}),(0,r.BX)("div",{style:{display:"flex",flexDirection:"column",flex:1,padding:"5px 0"},children:[S,(0,r.tZ)("div",{className:U.Z.rowText,"data-chunk-index":h,children:P})]})]})]})}let W=e=>{let{isActiveRow:t,isPlaying:i,row:n,rowIndex:o,onPause:s,onPlay:a,postId:c,children:d,className:u,activeClassName:p,editable:h}=e,m=t&&i;return(0,r.tZ)(R.xu,{id:"transcription-".concat(o),paddingRight:16,className:l()(u,{[null!=p?p:""]:m}),onClick:()=>{var e;(null===(e=window.getSelection())||void 0===e||!e.toString())&&!h&&((0,T.j)(T.FP.TRANSCRIPTION_TIMESTAMP_CLICKED,{post_id:c,timestamp:(0,L.DL)(n.start)}),m?s():a())},children:d})}},2689:function(e,t,i){if(i.d(t,{Z:()=>l}),/^(3154|6909)$/.test(i.j))var n=i(7409);if(/^(3154|6909)$/.test(i.j))var o=i(99282);if(/^(3154|6909)$/.test(i.j))var r=i(98848);var s=i(16584),a=i(64515);let l=/^(3154|6909)$/.test(i.j)?e=>{var{size:t=20,fill:i="var(--color-fg-primary)"}=e,l=(0,r._)(e,["size","fill"]);return(0,s.tZ)(a.l,(0,o._)((0,n._)({},l),{name:"PauseIconFilled",svgParams:{viewBox:"0 0 20 20"},width:t,height:t,fill:i,children:(0,s.tZ)("path",{stroke:"none",d:"M5.29883 17.9082H7.52539C8.375 17.9082 8.82422 17.459 8.82422 16.5996V3.29883C8.82422 2.41016 8.375 2 7.52539 2H5.29883C4.44922 2 4 2.44922 4 3.29883V16.5996C4 17.459 4.44922 17.9082 5.29883 17.9082ZM12.3984 17.9082H14.6152C15.4746 17.9082 15.9141 17.459 15.9141 16.5996V3.29883C15.9141 2.41016 15.4746 2 14.6152 2H12.3984C11.5391 2 11.0898 2.44922 11.0898 3.29883V16.5996C11.0898 17.459 11.5391 17.9082 12.3984 17.9082Z"})}))}:null},56219:function(e,t,i){i.d(t,{Rs:()=>eY,SO:()=>eF,_q:()=>eV,a7:()=>eq,eu:()=>eX,lO:()=>eL,mV:()=>eW,nM:()=>ez,sY:()=>eJ,xw:()=>eU});var n=i(27412),o=i(7409),r=i(99282),s=i(58865),a=i(16584),l=i(6400),c=i(30396),d=i(94184),u=i.n(d),p=i(59543),h=i(80569),m=i.n(h),v=i(60826),b=i(7464),_=i(84844),f=i(84892),g=i(9573),Z=i(89074),y=i(59708),w=i(92828),P=i(75021),S=i(18787),C=i(90311),k=i(17350),N=i(16944),x=i(94442),T=i(3862),E=i(21316),R=i(85685),I=i(11712),B=i(94594),O=i(47851),D=i(33665),A=i(90156),j=i(72392),L=i(16506),X=i(85721),U=i(89276),M=i(25956),F=i(79160),H=i(70522),z=i(58319),V=i(57391),W=i(37168),$=i(95441),Y=i(30372),G=i(56629),q=i(68833),J=i(48980),K=i(49762),Q=i(27036),ee=i(98914),et=i(29927),ei=i(15771),en=i(61254),eo=i(19081),er=i(1844),es=i(58175),ea=i(70379),el=i(71460),ec=i(23776),ed=i(57641),eu=i(24791),ep=i(6070),eh=i(67914),em=i(60308),ev=i(26111),eb=i(63651),e_=i(81821),ef=i(84864),eg=i(47929),eZ=i(59961);function ey(){let e=(0,s._)(["The full video is for subscribers in the "," plan"]);return ey=function(){return e},e}function ew(){let e=(0,s._)(["The full video is for subscribers in the Founding Member plan"]);return ew=function(){return e},e}function eP(){let e=(0,s._)(["The full video is for paid subscribers"]);return eP=function(){return e},e}function eS(){let e=(0,s._)(["This email is for subscribers in the "," plan"]);return eS=function(){return e},e}function eC(){let e=(0,s._)(["This email is for subscribers in the Founding Member plan"]);return eC=function(){return e},e}function ek(){let e=(0,s._)(["This email is for paid subscribers"]);return ek=function(){return e},e}function eN(){let e=(0,s._)(["Continue reading this post for free, courtesy of ","."]);return eN=function(){return e},e}function ex(){let e=(0,s._)(["This post is for subscribers in the "," plan"]);return ex=function(){return e},e}function eT(){let e=(0,s._)(["This post is for subscribers in the Founding Member plan"]);return eT=function(){return e},e}function eE(){let e=(0,s._)(["This post is for paid subscribers"]);return eE=function(){return e},e}function eR(){let e=(0,s._)(["Subscribe to "," to continue reading"]);return eR=function(){return e},e}function eI(){let e=(0,s._)(["Visit the author’s Substack to subscribe and read more."]);return eI=function(){return e},e}function eB(){let e=(0,s._)(["Visit ",""]);return eB=function(){return e},e}function eO(){let e=(0,s._)(["Support ",""]);return eO=function(){return e},e}function eD(){let e=(0,s._)(["Subscribe to ",""]);return eD=function(){return e},e}function eA(){let e=(0,s._)(["By ",""]);return eA=function(){return e},e}function ej(){let e=(0,s._)(["Subscribe to ",""]);return ej=function(){return e},e}let eL="focus-comment-input",eX=(e,t)=>!!e&&!e.invite_only&&!!t&&t.has_publication&&!t.is_admin&&!t.is_contributor&&!t.is_public_admin&&(0,Q.P)(t,e),eU=(e,t,i,n)=>"enabled"===e.payments_state?!(null==t?void 0:t.is_subscribed):(null==t?void 0:t.is_free_subscribed)&&"disabled"===e.payments_state&&!e.invite_only?!n&&i&&!(null==t?void 0:t.is_pledged):!(null==t?void 0:t.is_free_subscribed);class eM extends l.Component{async loadReactors(){let e=await m().get("/api/v1/post/".concat(this.props.post.id,"/facepile"));this.setState({reactors:e.body.reactors,restackers:e.body.restackers})}async componentDidMount(){var e;this.props.paywall&&!this.props.postPreview&&(0,q.j)(q.FP.POST_PAYWALL_SHOWN,{post_id:this.props.post.id,post_audience:this.props.post.audience,post_type:this.props.post.type,user:this.props.user}),this._triggerShare=()=>this.triggerShare(),null===(e=this.containerRef.current)||void 0===e||e.addEventListener("share-post",this._triggerShare),this.props.post&&this.loadReactors(),.001>Math.random()&&(0,q.K8)({post:this.props.post});let t=(0,ev.x)("subscribe_prompt");t&&("paid"===t?this.props.popToast(e=>(0,a.tZ)(ea.FN,(0,r._)((0,o._)({},e),{text:"Subscription purchased for ".concat(this.props.pub.name)}))):this.props.popToast(e=>(0,a.tZ)(ea.FN,(0,r._)((0,o._)({},e),{text:"Subscribed to ".concat(this.props.pub.name)}))));let i=null;0x9f7afc3===this.props.post.id&&alert("userAgent: ".concat(navigator.userAgent)),(0,e_.tq)({checkFirst4:!0})&&(/Instagram/i.test(navigator.userAgent)?i="instagram":/(Messenger|FBAN|FBAV|FB_IAB)/i.test(navigator.userAgent)?i="facebook":/LinkedIn/i.test(navigator.userAgent)&&(i="linkedin")),i?this.setWebviewModalState(i):this.setPostPromptState()}componentWillUnmount(){if(this._triggerShare){var e;null===(e=this.containerRef.current)||void 0===e||e.removeEventListener("share-post",this._triggerShare)}this.props.stopInterval&&this.props.stopInterval()}isGiftPostEligible(){var e,t;let{getSettingFor:i,post:n,pub:o,referringUser:r,user:s}=this.props;return i("paywall_unlock_tokens")&&"only_paid"===n.audience&&n.teaser_post_eligible&&(!s||!s.is_subscribed)&&(0,e_.tq)({checkFirst4:!0})&&(null==r?void 0:null===(t=r.subscriptions)||void 0===t?void 0:null===(e=t.find(e=>e.publication_id===o.id))||void 0===e?void 0:e.membership_state)==="subscribed"}async setWebviewModalState(e){this.setState({showWebViewModal:{action:"facebook"===e?"read":"follow",platform:e}})}async setPostPromptState(){var e;let{post:t,disableSubscribePrompt:i,readerIsSearchCrawler:n,pub:o,user:r,readerInstalledAt:s,referringUser:a,forceFollowPrompt:l}=this.props,c="newsletter"===t.type&&!0===this.props.getSettingFor("enable_post_page_conversion")&&!i&&!(0,ee.AE)()&&!n,d=!1;if(null===(e=document)||void 0===e?void 0:e.referrer)try{let e=new URL(document.referrer);d=!!e.hostname.match(/(^|\.)substack\.com$/)||e.hostname===window.location.hostname}catch(e){}let u=!1,p=this.props.skipFollowPrompt;this.isGiftPostEligible()&&["treatment_more_gifty","treatment_popover_gifty"].includes(this.context.getExperimentVariant("gift_post_unlocks_recipient_2"))&&(u=!0,p=!0);let h=!1;if(l)h=!0;else if(!ef.PUB_IDS_TO_NOT_SHOW_FOLLOW_PROMPT_ON.includes(o.id)&&!p&&c&&a&&a.name&&a.id!==(null==r?void 0:r.id)&&o.author_id!==a.id&&o.contributors.every(e=>e.user_id!==a.id)){let e=[];if(r)try{e=await (0,J.rd)("/api/v1/feed/following")}catch(e){console.warn("Failed to fetch following state",e)}h=!e.includes(a.id)}let m=c&&!u&&!h&&!this.props.paywall&&!this.props.freeSignup&&!r,v=!u&&!["video","podcast"].includes(t.type)&&!n&&(0,e_.tq)({checkFirst4:!0})&&!s&&!d,b=!1;v&&!m&&(this.context.exposeExperiment("app_install_prompts"),"drawer"===this.context.getExperimentVariant("app_install_prompts")&&(b=!0,h=!1)),this.setState({shouldShowGiftPostPrompt:u,shouldShowFollowPrompt:h,shouldShowSubscribePrompt:m,appUpsellEligible:v,mountAppUpsellFooter:b})}triggerShare(){var e,t;let{fromEmail:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i?null===(e=this.shareDialogRef.current)||void 0===e||e.fromEmail():null===(t=this.shareDialogRef.current)||void 0===t||t.open()}onBottomReached(e){this.state.bottomReached||this.props.postPreview||(this.setState({bottomReached:!0}),(0,q.xG)({post:this.props.post,hasPaywall:e,surface:"publication",trackerUuid:this.props.getCurrentUuid()}))}shouldShowUFI(){let{fromPostPage:e,user:t,pub:i,getSettingFor:n}=this.props,{canShowSubscribeFooterAfterPost:o}=this.state;return!!e&&!!o&&eU(i,t,!!n("payment_pledges_enabled"),this.shouldShowRecommendCta)}shouldTrackPaywallPostSeen(){if("undefined"==typeof window)return!1;let e=document.createElement("div"),t=this.props.post.body_html;e.innerHTML=t;let i=this.props.pub.post_preview_limit||ef.DEFAULT_PREVIEW_LIMIT,n="",o=!1;for(let t=e.childNodes.length-1;t>=0;t--){let r=e.childNodes[t];if(r&&(n+=r.textContent).length>i){o=!0;break}}return o}render(e,t){var i,n,s,l,c,d,h,m;let v,{user:_,pub:g,post:N,freeSignup:T,freeSignupEmail:E,isServingFreePodcastUrl:R,isShowsPost:D,isTheFreePressTheme:M,reaction_token:H,invisible:V,paywall:W,onChange:$,hideTitle:Y,noTitleLink:G,showComments:J,fromPostPage:Q,freeTrialCoupon:ee,showRestackModal:et,stripe_publishable_key:en,crossPostInfo:er,iString:es,iTemplate:el,themeVariables:ed,referringUser:eh,renderComments:em,renderContent:ev,getSettingFor:ef,startInterval:eg,forceFollowPrompt:eR}=e,{showTranscription:eI,truncated:eB,autoPlayVoiceOver:eO,reactors:eD,restackers:eA,shouldShowFollowPrompt:ej,shouldShowSubscribePrompt:eL,shouldShowGiftPostPrompt:eX,appUpsellEligible:eU,mountAppUpsellFooter:eM,showWebViewModal:eF}=t;if(N.is_geoblocked)return(0,a.tZ)(eK,{});let eV=(0,ep.HD)({pub:g}),eY=!!this.context.getConfigFor("like_posts_enabled"),eJ=(0,y.N1)(null!==(l=eB||N.body_html)&&void 0!==l?l:"",eV?"h1, h2, h3":"h1, h2, h3, h4"),eQ=!W||W&&this.shouldTrackPaywallPostSeen();eg&&eQ&&eg({postId:this.props.post.id,containerElementRef:this.containerRef,elementIsStatic:!0});let e0="video"===N.type&&!W&&(null===(i=N.videoUpload)||void 0===i?void 0:i.transcription),e1=this.shouldShowUFI()&&!(0,ep.HD)({pub:g}),e9=eq(N),e4=!!eD&&eD.length>0,e8=!!(ef("paywall_unlock_tokens")&&"only_paid"===N.audience&&N.teaser_post_eligible),e2=e8&&!(null==_?void 0:_.is_subscribed)&&((null==_?void 0:_.is_free_subscribed)||T)&&!(null==_?void 0:_.has_redeemed_post_unlock_token),e6=(0,e_.tq)({checkFirst4:!0});e8&&this.isGiftPostEligible()&&(this.context.exposeExperiment("gift_post_unlocks_recipient_2"),["treatment_more_gifty","treatment_popover_gifty"].includes(this.context.getExperimentVariant("gift_post_unlocks_recipient_2"))&&(e2=!0,v=this.context.getExperimentVariant("gift_post_unlocks_recipient_2")));let e5="";e5="video"===N.type?"founding"===N.audience&&(0,eu.H$)(g)?el(ey(),null!==(c=(0,eu.H$)(g))&&void 0!==c?c:""):el("founding"===N.audience?ew():eP()):"adhoc_email"===N.type?"founding"===N.audience&&(0,eu.H$)(g)?el(eS(),null!==(d=(0,eu.H$)(g))&&void 0!==d?d:""):el("founding"===N.audience?eC():ek()):e2?e6?es("Continue reading this post for free in the Substack app"):el(eN(),g.author_name||g.name):"founding"===N.audience&&(0,eu.H$)(g)?el(ex(),null!==(h=(0,eu.H$)(g))&&void 0!==h?h:""):el("founding"===N.audience?eT():eE());let e3=(0,a.BX)(U.j,{disabled:!M,post:N,isShowsPost:D,children:[(0,a.tZ)("div",{className:"available-content",children:eI?(0,a.tZ)("div",{className:"container tw-py-12",children:(0,a.tZ)(ec.Z,{post:N,pub:g,user:_,playerRef:this.videoPlayer})}):(0,a.tZ)(I.Z,{html:eB||N.body_html||null,pub:g,trackSelection:!0,post:N,themeVariables:ed,canRestackImage:this.context.getConfigFor("restack_with_image"),user:_,freeSignup:T,freeSignupEmail:E,paywall:W,showing_behind_paywall:!!N.post_paywall_content_for_google})}),N.post_paywall_content_for_google&&(0,a.tZ)("div",{className:"paywall-content",children:(0,a.tZ)(I.Z,{html:N.post_paywall_content_for_google,pub:g,trackSelection:!1,post:N,user:_,freeSignup:T,freeSignupEmail:E,paywall:W})}),!V&&eQ&&(0,a.tZ)(z.Z,{onVisible:()=>this.onBottomReached(!!W)})]}),e7=(0,ep.kb)({pub:g}),te=eV?(0,a.tZ)(L.Z,{post:N,user:_,pub:g,freeSignupEmail:E}):(0,a.tZ)(S.f1,(0,o._)({user:_,freeSignupEmail:E,freeSignup:T,publication:g,post:N,coupon:!0===this.props.paywall&&this.props.pub.paywall_free_trial_enabled?ee:null,showPostUnlockPrompt:!!e2,magicToken:H,giftingUser:eh,treatmentVariantForGiftPostPaywall:v,onPostUnlockError:()=>this.props.popToast(e=>(0,a.tZ)(ea.FN,(0,r._)((0,o._)({},e),{text:es("Teaser posts are not currently available for this content")})))},Object.assign({title:e5,reauthenticationTitle:es("To read this, please re-authenticate.")},W)));return(0,a.BX)("article",{className:u()("typography ".concat(N.type,"-post post"),{"tw-p-0":"podcast"===N.type,"shows-post":D,"full-width-image-header":(null===(n=N.postTheme)||void 0===n?void 0:n.header_variant)==="full-width-image",[null!==(m=eZ.Z.bottomWithTos)&&void 0!==m?m:"undefined"]:g.has_custom_tos}),ref:this.containerRef,children:[(null==_?void 0:_.is_contributor)&&(null==N?void 0:N.id)&&(null==N?void 0:N.type)==="page"&&(0,a.tZ)(ei.zx,{priority:"secondary",href:(0,eb.ANx)(g,N.id,{params:{back:document.location.href}}),localNavigation:!1,leading:(0,a.tZ)(p.Z,{size:20}),children:es("Edit")}),(0,a.tZ)(eG,{post:N,user:_,onChange:$}),(0,a.tZ)(O.Z,{ref:this.shareDialogRef,user:_,pub:g,post:N,reaction_token:H,source:"email-share"}),eX&&(0,a.tZ)(P.f,{user:_,post:N,pub:g,referringUser:eh,freeSignupEmail:E,variant:this.context.getExperimentVariant("gift_post_unlocks_recipient_2")}),ej&&(0,a.tZ)(w.yi,{pub:g,post:N,referringUser:eh,freeSignupEmail:E,forceFollowPrompt:eR,surface:"post-follow-referrer-prompt"}),eL&&(0,a.tZ)(A.H,{pub:g,post:N,stripe_publishable_key:en,sharer:eh,appUpsellEligible:!!eU}),eM&&(0,a.tZ)(b.m,{pub:g,slug:N.slug}),eF&&(0,a.tZ)(b.p,{pub:g,slug:N.slug,action:eF.action,platform:eF.platform}),ev?(0,a.BX)(a.HY,{children:[!V&&(0,a.tZ)(z.Z,{onVisible:()=>{this.onTopReached(!!W)}}),ev({comments:em?em():null,crossPostInfo:er,postContent:(0,a.BX)(a.HY,{children:[e3,!!(W&&!N.post_paywall_content_for_google&&!R)&&te]})})]}):(0,a.BX)(a.HY,{children:[(0,a.tZ)(eW,{user:null!=_?_:null,pub:g,post:N,isOnPostPage:!0,reaction_token:H,allowEdit:!0,showShare:!0,showSubtitle:!0,showPhoto:!0,showCommentRestack:!g.hide_post_restacks,hideTitle:!!Y,noTitleLink:!!G,onChange:$,hideDate:"page"===N.type,hideAudience:"page"===N.type,showReactions:eY,showComments:!!J,showLabel:!0,showUpdatedIcons:!0,fromPostPage:!!Q,onClickCommentButton:this.onCommentButtonClicked,reactors:eD,showRestackModal:!!et,showTranscriptionButton:!!e0,onTranscriptionClick:this.onTranscriptionClick,autoPlayVoiceOver:eO}),!V&&eQ&&(0,a.tZ)(z.Z,{onVisible:()=>this.onTopReached(!!W)}),(N.has_voiceover||!!N.voiceoverUpload)&&!M&&(0,a.tZ)(f.KH,{pub:g,post:N,mediaUploadId:N.voiceover_upload_id,duration:null===(s=N.voiceoverUpload)||void 0===s?void 0:s.duration,autoPlay:eO,href:N.canonical_url,isPaywalled:!N.voiceover_upload_id}),!N.voiceoverUpload&&eO&&e9&&(0,a.tZ)(F.r,{postId:N.id,onClose:()=>{(0,q.j)(q.FP.LISTEN_TO_THIS_POST_MODAL_DISMISSED,{post_id:N.id}),this.setState({autoPlayVoiceOver:!1})}}),er?(0,a.tZ)(Z.F,{postType:N.type,crossPostInfo:er}):null,(0,a.BX)("div",{children:[eJ&&eV&&(0,a.tZ)(X.T,{toc:eJ,title:N.title,commentCount:N.comment_count,wordCount:N.wordcount}),eJ&&!eV&&(0,a.tZ)(j.o,{toc:eJ,position:"fixed"}),e3,W&&!N.post_paywall_content_for_google?(0,a.BX)(a.HY,{children:[te,(0,a.tZ)(k.i,{post:N})]}):eB?(0,a.tZ)("p",{children:(0,a.BX)(ei.zx,{className:"expander",onClick:()=>this.setState({truncated:null}),children:["+ ",es("show full post")]})}):!["page"].includes(null==N?void 0:N.type)&&(0,a.BX)(a.HY,{children:[e1&&(0,a.tZ)(ez,{pub:g,post:N,user:_,freeSignup:!!T,freeSignupEmail:E}),!e1&&this.shouldShowRecommendCta&&(0,a.tZ)(B.o,{pub:g}),er&&("only_paid"===N.audience||"founding"===N.audience)&&(0,a.tZ)(eH,{pub:g}),(0,K.ZP)("like_posts_enabled")&&g.community_enabled&&e4&&!M&&(0,a.tZ)(eo.X2,{borderTop:"detail-themed",paddingY:16,children:(0,a.tZ)(C.fB,{post:N,pub:g,user:_,reactors:eD,secondaryFaces:eA})}),!M&&(0,a.tZ)("div",{className:"post-footer",children:(0,a.tZ)(x.Mp,{post:N,pub:g,user:_,onChange:$,postReactionToken:H})}),(0,a.tZ)(k.i,{post:N})]}),N.show_guest_bios&&"podcast"!==N.type&&!eV&&!e7&&(0,a.tZ)(e$,{user:_,pub:g,post:N})]})]})]})}constructor(e,t){var i,o;super(e,t),(0,n._)(this,"containerRef",void 0),(0,n._)(this,"shareDialogRef",void 0),(0,n._)(this,"podcastCommentInput",void 0),(0,n._)(this,"podcastPlayer",void 0),(0,n._)(this,"videoPlayer",void 0),(0,n._)(this,"shouldShowRecommendCta",void 0),(0,n._)(this,"_triggerShare",void 0),(0,n._)(this,"onTopReached",e=>{this.state.topReached||this.props.postPreview||(this.setState({topReached:!0}),(0,q.jJ)({post:this.props.post,hasPaywall:e,surface:"publication",markRead:!!this.props.user&&!this.props.noPageView,user:this.props.user,trackerUuid:this.props.getCurrentUuid()}))}),(0,n._)(this,"onTranscriptionClick",()=>{this.setState(e=>({showTranscription:!e.showTranscription}))}),(0,n._)(this,"onCommentButtonClicked",e=>{this.props.showComments&&!this.props.post.comment_count&&(e.stopPropagation(),e.preventDefault(),document.dispatchEvent(new CustomEvent(eL)))});let r={showTranscription:!1,autoPlay:!1,autoPlayVoiceOver:!1,commentSort:null!==(o=e.post.default_comment_sort)&&void 0!==o?o:"best_first",loadedWithHeaderLink:"undefined"!=typeof window&&(null===(i=window.location.hash)||void 0===i?void 0:i.startsWith("#".concat(encodeURIComponent("\xa7")))),reactors:null,feedUrl:null,shouldShowSubscribePrompt:!1,shouldShowFollowPrompt:!1};e.paywall||e.post.hidden||!e.post.body_html||(r.canShowSubscribeFooterAfterPost=eY(e.post.body_html),r.truncated=e.truncateAt?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;if("undefined"==typeof window)return null;let n=document.createElement("div");if(n.innerHTML=e,null===n.textContent||n.textContent.length<t||n.childNodes.length<=1)return null;do n.removeChild(n.lastChild);while(n.childNodes.length>1&&n.textContent.length>i);return n.innerHTML}(e.post.body_html,e.truncateAt,e.truncateTo):null),"undefined"!=typeof window&&window.history.replaceState&&("true"===(0,ev.x)("autoPlay")&&(window.history.replaceState({},document.title,(0,em.rhs)({autoPlay:null})),r.autoPlay=!0),"true"===(0,ev.x)("play_audio")&&(window.history.replaceState({},document.title,(0,em.rhs)({play_audio:null})),r.autoPlayVoiceOver=!0)),this.state=r,this.containerRef=(0,l.createRef)(),this.shareDialogRef=(0,l.createRef)(),this.podcastCommentInput=(0,l.createRef)(),this.podcastPlayer=(0,l.createRef)(),this.videoPlayer=(0,l.createRef)(),this.shouldShowRecommendCta=eX(e.pub,e.user)}}(0,n._)(eM,"contextType",W.WH),(0,n._)(eM,"displayName","Post");let eF=(0,ea.dd)((0,V.f9)((0,G.us)((0,$.fz)((0,Y.aG)(eM))))),eH=e=>{let{pub:t}=e,{iTemplate:i}=(0,$.M1)();return(0,a.BX)(a.HY,{children:[(0,a.tZ)(en.iz,{paddingTop:16}),(0,a.BX)(eo.sg,{gap:16,paddingY:32,alignItems:"center",children:[(0,a.BX)(eo.sg,{gap:8,paddingBottom:8,children:[(0,a.tZ)(es.xv.H4,{flex:"grow",align:"center",children:i(eR(),t.name)}),(0,a.tZ)(es.xv.B3,{flex:"grow",align:"center",color:"secondary",children:i(eI())})]}),(0,a.tZ)(ei.zx,{priority:"primary",onClick:()=>{(0,q.j)(q.FP.POST_END_CTA_CLICKED,{type:"cross-post"}),(0,ee.uX)((0,eb.W1P)(t,{params:{utm_source:eg.b3.postEndCta,addBase:!0}}),{local_navigation:!1})},children:i(eB(),t.name)})]})]})},ez=e=>{let{pub:t,post:i,user:n,freeSignup:o,freeSignupEmail:r,overridePledgesEnabled:s}=e,{iString:l,iTemplate:d}=(0,$.M1)(),{getSettingFor:u}=(0,G.So)(),[p,h]=(0,c.eJ)(null),m=(0,ev.x)("just_subscribed"),v="disabled"===t.payments_state&&!t.invite_only&&(u("payment_pledges_enabled")||s),b="enabled"===t.payments_state&&(null==n?void 0:n.is_free_subscribed)&&!(null==n?void 0:n.is_subscribed)?"paid_upsell":v&&(null==n?void 0:n.is_free_subscribed)&&!(null==n?void 0:n.is_pledged)?"pledge_upsell":"free_upsell",_=v&&(null==n?void 0:n.is_free_subscribed)&&!(null==n?void 0:n.is_pledged);(0,c.d4)(()=>{(0,q.j)(q.FP.POST_END_CTA_RENDERED,{pub_id:t.id,post_id:i.id,type:b})},[t.id,i.id,b,_,null==n?void 0:n.is_free_subscribed]);let f=(0,ef.getByLine)(t);return(0,a.BX)(a.HY,{children:[(0,a.tZ)(en.iz,{paddingTop:16}),(0,a.tZ)(z.Z,{onVisible:()=>{(0,q.j)(q.FP.POST_END_CTA_SEEN,{pub_id:t.id,post_id:i.id,type:b})}}),(0,a.BX)(eo.sg,{gap:16,paddingY:32,children:[(0,a.BX)(eo.sg,{gap:8,paddingBottom:8,children:[(0,a.tZ)(es.xv.H4,{flex:"grow",align:"center",children:d(v&&(null==n?void 0:n.is_free_subscribed)?eO():eD(),t.name)}),(0,a.BX)(es.xv.B3,{flex:"grow",align:"center",color:"secondary",children:[f?d(eA(),f):null,f&&t.rankingDetail?" \xb7 ":null,t.rankingDetail]}),t.hero_text&&(0,a.tZ)(es.xv.B3,{color:"primary",flex:"grow",align:"center",children:t.hero_text})]}),(0,a.tZ)(eo.sg,{alignItems:"center",gap:16,children:_?(0,a.tZ)(ei.zx,{priority:"primary",onClick:()=>{(0,q.j)(q.FP.POST_END_CTA_CLICKED,{type:"pledge"}),(0,ee.uX)((0,eb.W1P)(t,{params:{utm_source:eg.b3.postEndCta}}),{local_navigation:!1})},children:l("Pledge your support")}):(0,a.BX)(a.HY,{children:[(0,a.tZ)(D.Z,{pub:t,post:i,user:n,freeSignup:o,freeSignupEmail:r,isStatic:!1,onPrepareData:()=>{h(null)},source:"post-end-cta",className:eZ.Z.subscribeWidget}),p&&(0,a.tZ)(er.y,{align:"center",children:p}),!(null==n?void 0:n.is_free_subscribed)&&!m&&(0,a.tZ)(eo.sg,{maxWidth:400,children:(0,a.tZ)(ed.O,{includeCheckbox:!1,addSubscribePreamble:!0,color:"secondary",textAlign:"center"})})]})})]})]})},eV=e=>{let{pub:t}=e;return(0,a.BX)("div",{className:"post-silhouette",children:[(0,a.tZ)("div",{className:"post-silhouette-title"}),(0,a.tZ)("div",{className:"post-silhouette-meta ".concat(t&&t.bylines_enabled&&t.byline_images_enabled?"with-byline-image":"")}),(0,a.tZ)("div",{className:"post-silhouette-body"})]})},eW=e=>{var t,i,n,o;let r,{allowEdit:s,allowSendEmail:l,allowTruncate:c,base_url:d,children:p,className:h,hideAudience:m,hideDate:b,hideTitle:f,hidePinning:Z,noTitleLink:y,isStatic:w,isFreePreview:P,is_draft:S,onChange:k,post:R,pub:I,reaction_token:B,showComments:O,showDatetime:D,showEmailSent:A,showReactions:j,showShare:L,showAppUpsell:X,showSubtitle:U,showPhoto:F,showLabel:H,showRestack:z,showCommentRestack:V,hideAuthor:W,user:Y,utm_source:G,showUpdatedIcons:q,fromPostPage:J,onClickCommentButton:K,reactors:Q,inThreadHead:ee,publishedPost:et,compEndsSoon:ei,compEndedRecently:en,siteConfigValues:er={},eligibleForTTS:ea,showRestackModal:el,showIcon:ec,isOnPostPage:ed,showTranscriptionButton:eu,onTranscriptionClick:em,isAppMode:ev=!1,republishingPost:eZ,autoPlayVoiceOver:ey=!1,readInAppText:ew}=e,{iString:eP}=(0,$.M1)(),eS=(0,e_.tq)({checkFirst4:!0}),eC=eZ||R,ek="number"==typeof c?c:45,eN=R.title&&R.title.length>ek,ex=S?R.draft_title:R.title,eT=[(ec||"thread"===R.type)&&(0,a.tZ)(E.m,{postType:R.type,isStatic:w,height:15,className:R.type}),eN&&c?(0,ef.truncateWords)(ex,ek):ex],eE=S?R.draft_subtitle:R.subtitle;R.section_id&&I.sections&&I.sections.length&&(R.section=I.sections.find(e=>e.id===R.section_id));let eR=(0,eh.B9)({pub:I,subscriptionType:null==Y?void 0:Y.subscription_type}),eI=!["page"].includes(null==R?void 0:R.type),eB=eI&&w&&ei&&!eR&&(null==er?void 0:er.continue_support_cta_in_newsletter_emails),eO=eq(R)||ea||R.voiceoverUpload,eD=(null==R?void 0:R.type)==="adhoc_email",eA=eI&&w&&!eD&&!ev,ej=(0,ep.HD)({pub:I})&&(!!R.postTheme||["video","podcast"].includes(R.type)&&ee);r=R.post_url_override?R.post_url_override:w&&ev?v.W.POST_TITLE_APP_MODE_URL:w?v.W.POST_TITLE_URL:"".concat((0,eb.uRy)(I,R)).concat(G?"?utm_source=".concat(G):"");let eL="".concat(I.base_url+(eC.section?(0,eb.Ucy)(I,{section:eC.section}):""),"/?utm_source=").concat(eg.b3.substack,"&utm_medium=").concat(eg.lP.menu);return ej?(0,a.tZ)(M.I,{post:R,postTheme:R.postTheme,title:ex,subtitle:eE,pub:I,inThreadHead:!!ee,autoPlayVoiceOver:ey}):(0,a.BX)("div",{className:u()("post-header",h),role:"region","aria-label":eP("Post header"),children:[(0,ep.kb)({pub:I})&&(null!==(o=null===(t=R.postTags)||void 0===t?void 0:t.length)&&void 0!==o?o:0)>0&&(0,a.tZ)(eo.X2,{alignItems:"center",gap:4,paddingBottom:8,children:null===(i=R.postTags)||void 0===i?void 0:i.map((e,t)=>(0,a.BX)(a.HY,{children:[0!==t&&(0,a.tZ)(es.xv.Meta,{children:"—"}),(0,a.tZ)(es.xv.Meta,{as:"a",size:14,href:(0,eb.Mk9)(I,e),children:e.name})]}))}),H&&R.section&&(0,a.tZ)(eo.X2,{className:"post-label",children:(0,a.tZ)(es.xv.Meta,{as:"a",size:14,href:eL,children:null===(n=eC.section)||void 0===n?void 0:n.name})}),eB&&(0,a.tZ)(g.v,{post:R,compAlreadyExpired:en}),!f&&(0,a.tZ)("h1",{className:u()("post-title",R.is_published?"published":"restack"!==R.type||eZ?"adhoc_email"===R.type?"adhoc":"unpublished":"email-only-cross-post",{"post-title--the-pillar":(0,ep.kb)({pub:I})}),children:y?eT:(0,a.tZ)("a",{href:r,children:eT})}),U&&eE&&(0,a.tZ)("h3",{className:u()("subtitle",{"subtitle--the-pillar":(0,ep.kb)({pub:I})}),children:eE}),"page"===R.type?(0,a.tZ)("div",{style:{height:32}}):ed&&!w?(0,a.BX)(eo.sg,{paddingBottom:16,"aria-label":eP("Post UFI"),role:"region",children:[(0,a.tZ)(eo.sg,{paddingY:16,children:(0,a.tZ)(T.E,{post:R,pub:I})}),(0,a.tZ)(_.j,{user:Y,isMobile:eS,post:R}),eS?J&&(0,a.tZ)(x.mt,{post:R,pub:I,user:Y,isStatic:!!w,postReactionToken:B,onChange:k,allowEdit:s,hidePinning:Z,showEmailSent:A,allowSendEmail:l,hideComments:!O,onCommentsClick:K,showRestackModal:el}):(0,a.tZ)(x.Mp,{post:R,pub:I,user:Y,onChange:k,showRestackModal:el,showTranscriptionButton:eu,onTranscriptionClick:em,showClipping:"video"===R.type,postReactionToken:B})]}):(0,a.BX)(a.HY,{children:[!eI||w||et||ee?eI&&!w&&et?(0,a.tZ)(x._2,{post:R,pub:I,user:Y,style:"compressed",labelStyle:"counts-or-none",postReactionToken:B,showEmailSent:A,hideShare:!L||"restack"===R.type,hideComments:"restack"===R.type,hideSavePost:"restack"===R.type,hideReactions:"restack"===R.type,showPreamble:!0,onChange:void 0,allowEdit:s,allowSendEmail:l,editButtonIsLast:!0,preambleConfig:{showAudience:!m,showDate:!b,showDatetime:D,showAuthor:!W},isStatic:w,position:"publisher-post-list"}):ee&&!w?(0,a.tZ)(x._2,{post:R,pub:I,user:Y,style:"compressed",labelStyle:"counts-or-none",postReactionToken:B,hideSavePost:!0,showPreamble:!0,allowEdit:s,allowSendEmail:l,editButtonIsLast:!0,onChange:k,preambleConfig:{showAudience:!m,showDate:!b,showDatetime:D,showAuthor:!W},hideShare:!L,position:"publisher-post-list",isStatic:w}):eI?(0,a.tZ)(C.SP,{user:Y,pub:I,post:R,showDate:!b,showDatetime:D,showEmailSent:A,showAudience:!m,showReactions:!eA&&j,showComments:!eA&&O,showShare:!eA&&L,showRestack:!eA&&z,reaction_token:B,onChange:k,isStatic:w,isFreePreview:P,sharedShareDialog:!0,base_url:d,allowSendEmail:l,allowEdit:s,showAuthor:!W,showPhoto:F,hidePinning:Z,showUpdatedIcons:q,inThreadHead:ee,fromPostPage:J,onClickCommentButton:K,reactors:Q,isAppMode:ev}):(0,a.tZ)("div",{className:"spacer",style:{height:24}}):(0,a.tZ)(N.a,{className:"meta-subheader",pub:I,post:R,user:Y,showDate:!b,showDatetime:!!D,isStatic:!!w,postReactionToken:B,onChange:k,allowEdit:s,hidePinning:Z,showEmailSent:A,allowSendEmail:l,allowMobileFooter:J,onCommentsClick:K,showRestackModal:el}),eI&&eA&&(0,a.tZ)(x.yT,{readInAppText:ew,customization:{showShare:L,showComments:O,showReactions:j,showListen:!z&&!P&&!!eO,showSave:!z,showRestack:z,showCommentRestack:V,showAppUpsell:X}}),eD&&(0,a.tZ)("div",{className:"email-ufi-2-empty"})]}),p]})},e$=e=>{let{user:t,pub:i,post:n}=e,{iString:o,iTemplate:r}=(0,$.M1)(),s=(0,ef.getBylineUsers)(n).filter(e=>e.is_guest);return 0===s.length?null:(0,a.BX)("div",{className:"post-contributor-footer",children:[(0,a.tZ)("div",{className:"container-border"}),s.map(e=>{let n=(0,ef.guessFirstName)(e.name),s=e.primaryPublicationSubscribeUrl;s&&(null==t?void 0:t.email)&&(s=(0,em.rhs)(s,{email:t.email,autoSubmit:!0,utm_source:eg.b3.substack,utm_campaign:eg.VX.guestPostBio,utm_medium:eg.lP.web}));let l=(0,em.rhs)((0,eb.NNq)(e),{utm_campaign:eg.VX.guestPostBio,utm_medium:eg.lP.web}),c=H.ZP.hasCustomProfilePhoto(e);return(0,a.tZ)("div",{className:u()("post-contributor-bio",{"post-contributor-bio-no-text":!e.bio}),"data-user-id":e.id,children:(0,a.tZ)("table",{cellpadding:"0",cellspacing:"0",className:"post-contributor-bio-table",children:(0,a.BX)("tr",{className:"post-contributor-bio-table-row",children:[c&&(0,a.tZ)("td",{className:"post-contributor-bio-userhead-cell post-contributor-bio-userhead-cell-web",children:(0,a.tZ)(R.ProfileHoverCard,{subject:e,utmSource:"byline",children:(0,a.tZ)(H.ZP,{size:52,user:t,pub:i,subject:e})})}),(0,a.tZ)("td",{className:"post-contributor-bio-body-cell post-contributor-bio-body-cell-web",children:(0,a.BX)("div",{className:"post-contributor-bio-body",children:[e.bio&&(0,a.tZ)("div",{className:"post-contributor-bio-preamble",children:o("A guest post by")}),(0,a.tZ)("table",{cellpadding:"0",cellspacing:"0",className:"post-contributor-bio-body-table",children:(0,a.BX)("tr",{className:"post-contributor-bio-body-table-row",children:[(0,a.BX)("td",{className:"post-contributor-bio-copy-cell",children:[!e.bio&&(0,a.tZ)("div",{className:"post-contributor-bio-preamble",children:o("A guest post by")}),(0,a.BX)(eo.X2,{gap:4,alignItems:"center",paddingBottom:4,children:[(0,a.tZ)(R.ProfileHoverCard,{subject:e,utmSource:"byline",children:(0,a.tZ)("a",{className:"post-contributor-bio-title no-margin",href:l,native:!0,children:e.name})}),(0,a.tZ)(el.UserBadge,{size:"sm",tier:e.bestseller_tier,userId:e.id})]}),e.bio&&(0,a.tZ)("div",{className:"post-contributor-bio-text",children:e.bio})]}),(0,a.tZ)("td",{className:"post-contributor-bio-controls-cell post-contributor-bio-controls-cell-web",children:(0,a.tZ)("div",{className:"post-contributor-bio-controls",children:s&&(0,a.tZ)("a",{className:"post-contributor-bio-subscribe-button button primary",href:s,native:!0,children:(0,a.tZ)("span",{className:"post-contributor-bio-subscribe-button-label",children:r(ej(),n)})})})})]})})]})})]})})})})]})};function eY(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;if("undefined"==typeof window)return!1;let i=document.createElement("div");i.innerHTML=e;let n="",o=!1;for(let e=i.childNodes.length-1;e>=0;e--){let r=i.childNodes[e];if(r){if((0,ee.pv)(r,"button-wrapper")||(0,ee.pv)(r,"subscription-widget-wrap")||(0,ee.pv)(r,"subscribe-widget")){o=!0;break}if((n+=r.textContent).length>t)break}}return!o}function eG(e){let{post:t,user:i,onChange:n}=e,[s,l]=(0,c.eJ)(!1),{getExperimentVariant:d}=(0,V.jc)(),u="treatment"===d("video_email_watch_later_experiment"),{onSave:p}=(0,x.vk)({post:t,isSaved:!1});return((0,c.d4)(()=>{if("save"===new URL(location).searchParams.get("action")&&(history.replaceState({},"",(0,em.rhs)({action:null})),i)){let e=p();n({post:(0,r._)((0,o._)({},t),{is_saved:e})}),e&&u&&l(!0)}},[]),s)?(0,a.tZ)(et.X,{onClose:()=>l(!1)}):null}function eq(e){var t;return!!(null===(t=e.audio_items)||void 0===t?void 0:t.some(e=>"tts"===e.type))}function eJ(e){var t;return!!(null===(t=e.audio_items)||void 0===t?void 0:t.some(e=>"tts"===e.type&&"paywalled"===e.status))}let eK=()=>(0,a.tZ)("article",{className:u()("typography post",{"shows-post":!1}),children:(0,a.tZ)("div",{className:"container tw-p-12",children:(0,a.tZ)("p",{align:"center",children:(0,a.tZ)(es.xv,{translated:!0,as:"span",children:"This content has been withheld in your country in response to a legal requirement."})})})})},8845:function(e,t,i){i.d(t,{C:()=>c,T:()=>l});var n=i(16584),o=i(6400),r=i(30396),s=i(6070);let a=(0,o.createContext)({theme:null,setTheme:()=>void 0}),l=()=>(0,r.qp)(a),c=e=>{var t;let{pub:i,post:o,children:l}=e,[c,d]=(0,r.eJ)(null!==(t=null==o?void 0:o.postTheme)&&void 0!==t?t:null);return(0,s.HD)({pub:i})?(0,n.tZ)(a.Provider,{value:{theme:c,setTheme:d},children:l}):(0,n.tZ)(n.HY,{children:l})}},96904:function(e,t,i){i.d(t,{G:()=>m});var n=i(58865),o=i(16584),r=i(71212),s=i(33804),a=i(95441),l=i(68833),c=i(15771),d=i(6490),u=i(98248);function p(){let e=(0,n._)(["Generating ","..."]);return p=function(){return e},e}function h(){let e=(0,n._)(["Shareable ",""]);return h=function(){return e},e}function m(e){let{isOpen:t,onClose:i,isGenerating:n,finishedGram:m,noun:v,postId:b,onDownload:_}=e,{iString:f,iTemplate:g}=(0,a.M1)();return(0,o.tZ)(d.u_,{isOpen:t,onClose:i,children:(0,o.BX)(s.w,{children:[(0,o.tZ)(d.xB,{title:g(n?p():h(),v),showClose:!0,showDivider:!0,onClose:i}),(0,o.tZ)(d.fe,{children:m?(0,o.tZ)("video",{src:m.cdn_url,style:{borderRadius:12},controls:!0,download:!0,width:400}):(0,o.tZ)(u.$j,{alignItems:"center",justifyContent:"center",minHeight:220})}),m&&(0,o.tZ)(d.mz,{direction:"column",primaryButton:(0,o.tZ)(c.zx,{priority:"primary",leading:(0,o.tZ)(r.Z,{size:20}),onClick:()=>{(0,l.j)(l.FP.AUDIOGRAM_DOWNLOAD_CLICKED,{post_id:b,audiogram_id:null==m?void 0:m.id,media_upload_id:null==m?void 0:m.media_upload_id}),_(m.cdn_url)},children:f("Download")})})]})})}},78118:function(e,t,i){i.r(t),i.d(t,{ReaderOnboardingModal:()=>x,ReaderOnboardingModalWithUserContext:()=>T});var n=i(27412),o=i(7409),r=i(99282),s=i(98848),a=i(16584),l=i(98661),c=i(93666),d=i(57391),u=i(60807),p=i(68833),h=i(341),m=i(57601),v=i(64799),b=i(14861),_=i(4564),f=i(45930),g=i(76971),Z=i(48146),y=i(48450),w=i(7759),P=i(29191),S=i(76560),C=i(60308),k=i(63651),N=i(81821);class x extends c.p{componentDidMount(){super.componentDidMount(),(0,N.tq)()&&(this.context.exposeExperiment("reader_onboarding_app_first"),this.inAppExperimentTreatment())}componentWillReceiveProps(e){this.setState({skipRedirectOnExit:e.skipRedirectOnExit,zIndex:e.zIndex,entry:e.entry,onBeforeClose:e.onBeforeClose})}getDefaultStep(){return this.state.appOnboardingTreatment?S.c.APP_UPSELL:S.c.CATEGORIES}inAppExperimentTreatment(){if(this.state.appOnboardingTreatment)return this.state.appOnboardingTreatment;let e=(0,N.tq)()&&["treatment","treatment_no_skip"].includes(this.context.getExperimentVariant("reader_onboarding_app_first"));return e&&this.setState({step:S.c.APP_UPSELL,appOnboardingTreatment:!0}),e}openForPub(e,t){this.setState({pub:e,profile:t,step:t?this.props.user?S.c.CATEGORIES:S.c.PUB_SIGNUP:S.c.PUB_LANDING}),this.open()}openToPubSignup(e){this.setState({pub:e,step:S.c.PUB_SIGNUP,profile:null}),this.open()}setStep(e){if(e===S.c.APP_UPSELL&&this.state.appOnboardingTreatment&&this.state.previousStepData[S.c.APP_UPSELL]&&(e=S.c.WELCOME),(0,p.j)(p.FP.READER_ONBOARDING_STEP_CHANGED,{from_step:this.state.step,to_step:e,modal:!0}),e===S.c.EXIT){if(this.state.skipRedirectOnExit)this.close();else{var t;let e=null!==(t=this.redirect)&&void 0!==t?t:this.state.pub&&"reader2"===this.state.entry?(0,C.SVA)(this.state.pub):(0,k.E2n)();document.location.href=e}}else setTimeout(()=>this.setState({step:e}),0)}setPreviousStepData(e,t){this.setState({previousStepData:(0,r._)((0,o._)({},this.state.previousStepData),{[e]:t})})}getClassName(){return"reader-onboarding-modal wide"}onClose(){(0,p.j)(p.FP.READER_ONBOARDING_MODAL_CLOSED,{entry:this.props.entry,step:this.state.step}),this.setStep(this.getDefaultStep())}onOpen(){var e;(0,p.j)(p.FP.READER_ONBOARDING_MODAL_OPENED,{entry:this.props.entry,step:this.state.step,for_pub_id:null===(e=this.state.pub)||void 0===e?void 0:e.id})}handleError(e){let{ignore:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{step:i}=this.state;console.error("Error in reader onboarding ".concat(i," step: ").concat(e)),(0,p.j)(p.FP.READER_ONBOARDING_ERROR,{step:i,entry:this.props.entry,ignore:t}),t||this.setStep(S.c.ERROR)}renderStep(){let e=this.props,{ref:t}=e,i=(0,s._)(e,["ref"]),{step:n,open:l,pub:c,profile:d,previousStepData:u,appOnboardingTreatment:p}=this.state,C={setStep:this.setStep,handleError:this.handleError,close:this.close,setPreviousStepData:this.setPreviousStepData,appOnboardingTreatment:p};if(!l)return null;switch(n){case S.c.SIGNUP:return(0,a.tZ)(y.Z,(0,r._)((0,o._)({},i,C),{previousStepData:u}));case S.c.PUB_LANDING:return(0,a.tZ)(g.Z,(0,r._)((0,o._)({},i,C),{pub:c}));case S.c.PUB_SIGNUP:return(0,a.tZ)(Z.Z,(0,r._)((0,o._)({},i,C),{pub:c,profile:null!=d?d:null}));case S.c.CATEGORIES:return(0,a.tZ)(_.r,(0,r._)((0,o._)({},i,C),{pub:c}));case S.c.PROFILE:return(0,a.tZ)(f.Z,(0,o._)({},i,C));case S.c.START_WRITING:return(0,a.tZ)(w.Z,(0,o._)({},i,C));case S.c.CREATE_PUBLICATION:return(0,a.tZ)(m.Z,(0,o._)({},i,C));case S.c.CREATE_PUBLICATION_SUCCESS:return(0,a.tZ)(v.Z,(0,r._)((0,o._)({},i,C),{previousStepData:u}));case S.c.ERROR:return(0,a.tZ)(b.Z,(0,o._)({},i,C));case S.c.APP_UPSELL:return(0,a.tZ)(h.Z,{onComplete:()=>{this.setPreviousStepData(S.c.APP_UPSELL,!0),p?this.setStep(S.c.CATEGORIES):this.setStep(S.c.WELCOME)}});case S.c.WELCOME:default:return(0,a.tZ)(P.Z,(0,r._)((0,o._)({},i,C),{pub:c,profile:null!=d?d:null}))}}renderChildren(){return(0,a.tZ)("div",{className:"reader-onboarding-modal-container",children:this.renderStep()})}constructor(e,t){var i;super(e,t),(0,n._)(this,"redirect",void 0),this.setStep=this.setStep.bind(this),this.state.pub=e.pub||null,this.handleError=this.handleError.bind(this),this.state.previousStepData={},this.setPreviousStepData=this.setPreviousStepData.bind(this),this.state.skipRedirectOnExit=null!==(i=e.skipRedirectOnExit)&&void 0!==i&&i,this.redirect=e.redirect&&"/"!==e.redirect?e.redirect:null,this.state.appOnboardingTreatment=!1,this.state.step=e.step||this.getDefaultStep()}}(0,n._)(x,"contextType",d.kx);let T=(0,l.forwardRef)((e,t)=>{let i=(0,u.SE)(),n=e.onBeforeClose,s=n?()=>n(i.user):void 0,l=(0,r._)((0,o._)({},e),{onBeforeClose:s,user:i.user});return(0,a.tZ)(x,(0,r._)((0,o._)({},l),{ref:t}))})},90565:function(e,t,i){i(16584),i(30396),i(94184),i(95441),i(9682),i(80026),i(69891),i(58175),i(74949),i(83010),i(50312),i(60308)},71512:function(e,t,i){i(16584),i(83034),i(95441),i(68833),i(15771),i(19081),i(15080)},3573:function(e,t,i){i(16584),i(30396),i(94184),i(78718),i(98585),i(9682),i(80026),i(91400),i(60308)},5623:function(e,t,i){i.d(t,{R5:()=>eT});var n=i(7409),o=i(99282),r=i(98848);if(/^(3154|6909)$/.test(i.j))var s=i(58865);var a=i(16584),l=i(98661),c=i(30396),d=i(94184),u=i.n(d);if(/^(3154|6909)$/.test(i.j))var p=i(18693);if(/^(3154|6909)$/.test(i.j))var h=i(84967);if(/^(3154|6909)$/.test(i.j))var m=i(49336);if(/^(3154|6909)$/.test(i.j))var v=i(71375);if(/^(3154|6909)$/.test(i.j))var b=i(8618);if(/^(3154|6909)$/.test(i.j))var _=i(7617);if(/^(3154|6909)$/.test(i.j))var f=i(31131);if(/^(3154|6909)$/.test(i.j))var g=i(13808);if(/^(3154|6909)$/.test(i.j))var Z=i(85200);if(/^(3154|6909)$/.test(i.j))var y=i(99869);if(/^(3154|6909)$/.test(i.j))var w=i(77600);if(/^(3154|6909)$/.test(i.j))var P=i(44276);if(/^(3154|6909)$/.test(i.j))var S=i(77475);if(/^(3154|6909)$/.test(i.j))var C=i(47655);if(/^(3154|6909)$/.test(i.j))var k=i(20817);if(/^(3154|6909)$/.test(i.j))var N=i(98643);if(/^(3154|6909)$/.test(i.j))var x=i(59543);if(/^(3154|6909)$/.test(i.j))var T=i(7073);var E=i(61649),R=i(59708),I=i(51455),B=i(50137),O=i(2689),D=i(9970),A=i(26582),j=i(51534),L=i(96726),X=i(56219),U=i(94442),M=i(67203),F=i(10878),H=i(75697),z=i(47851),V=i(72392),W=i(95441),$=i(93155),Y=i(40647),G=i(60807),q=i(6246),J=i(68833),K=i(48980),Q=i(7882),ee=i(21599);i(9682);var et=i(32129),ei=i(94874),en=i(15771),eo=i(19081),er=i(84370),es=i(36500),ea=i(98248),el=i(38841),ec=i(58175),ed=i(70379),eu=i(87077),ep=i(40949),eh=i(74312),em=i(81043),ev=i(65575),eb=i(44312),e_=i(32189),ef=i(39493),eg=i(61412),eZ=i(91400),ey=i(64172),ew=i(60308),eP=i(63651),eS=i(84864);if(/^(3154|6909)$/.test(i.j))var eC=i(47929);var ek=i(78691);function eN(){let e=(0,s._)(["You subscribed to "," by "," because it was recommended by ","."]);return eN=function(){return e},e}function ex(){let e=(0,s._)(["You subscribed to "," because it was recommended by ","."]);return ex=function(){return e},e}function eT(e){var t;let i=(0,em.SJ)();return(0,c.d4)(()=>()=>{var e;null===(e=i.setDrawer)||void 0===e||e.call(i,null)},[]),i.setDrawer&&null!==(t=i.setDrawer((0,a.tZ)(eR,(0,n._)({},e))))&&void 0!==t?t:null}function eE(e){var t,i,r,s,l,d,b,_,f,g,Z,y,w;let P,{postId:S,post:C,publication:k,videoPlayerRef:N,onClose:x,onPrevious:T,onNext:E,onSave:I,onArchive:B,onLike:L,onLoad:U,isArchived:M,publicationSettings:z,referringRecommendation:$,referringPub:Y}=e,[q,et]=(0,c.eJ)(!1),[es,eh]=(0,c.eJ)(!1),ef=(0,ey.Th)(),eg=(0,e_.x)({surface:"post-viewer"}),ew=(0,G.aF)(),eT=(0,eZ.XA)(),eE=(0,ed.pm)(),{iString:eR,iTemplate:eB}=(0,W.M1)(),eA=(0,c.sO)(null);(0,c.d4)(()=>{(0,J.j)(J.FP.POST_VIEWER_VIEWED,{post_id:S})},[S]);let eX=(0,ep.y)(),eU=(0,c.I4)(()=>{(0,J.j)(J.FP.POST_VIEWER_CLOSED,{post_id:S}),x()},[x,S]),eM=B&&(e=>{(0,J.j)(J.FP.POST_ARCHIVED,{post_id:e,surface:"post viewer"}),B(e)});C&&k&&z&&(P={post:C,publication:k,publicationSettings:z,referringRecommendation:$,referringPub:Y});let eF=new URLSearchParams(document.location.search),{result:eH,isLoading:ez}=(0,Q.ib)({pathname:"/api/v1/posts/by-id/".concat(S),query:{preview:null!==(b=eF.get("postPreview"))&&void 0!==b?b:void 0},deps:[S],auto:!P,initialResult:P});(0,c.d4)(()=>{eH&&ef.updatePublication(eH.publication.id,eH)},[eH]);let eV=(0,ee.S2)(null,{ignoreSafari:!0});(0,c.d4)(()=>{U&&eH&&U(eH)},[eH]),(0,c.d4)(()=>{eH&&eV.postSelection&&eV.highlightSelection()},[eH,eV.postSelection]);let eW=null!==(_=null==eH?void 0:eH.publication)&&void 0!==_?_:k,e$=null!==(f=null==eH?void 0:eH.publicationSettings)&&void 0!==f?f:{},eY=(null==eW?void 0:eW.payments_state)==="enabled",{subscription:eG,publicationUser:eq,isFreeSubscribed:eJ,isPaid:eK,isAuthor:eQ,isPledged:e0}=(0,ey.Y0)(null!==(g=null==eH?void 0:null===(t=eH.post)||void 0===t?void 0:t.publication_id)&&void 0!==g?g:0),e1=!(eY?eK:eK||eJ),[e9,e4]=(0,c.eJ)(!1),e8=(0,c.sO)(0),{setIsReading:e2}=(0,em.SJ)(),e6=async e=>{let{reportCategory:t,details:i}=e;await (0,K.rd)("/api/v1/publications/".concat(null==eW?void 0:eW.id,"/posts/").concat(S,"/report"),{method:"POST",json:{details:i,reportCategory:t}}),et(!1),eE.popToast(e=>(0,a.tZ)(ed.FN,(0,o._)((0,n._)({},e),{text:eR("We received your report"),Icon:p.Z})))},e5=eH&&(y=eH.post,w=C,(0,n._)({},y,Object.fromEntries(Object.entries(null!=w?w:{}).filter(e=>{let[t,i]=e;return null!=i})))),e3=(0,R.N1)(null!==(Z=null==eH?void 0:null===(i=eH.post)||void 0===i?void 0:i.body_html)&&void 0!==Z?Z:""),e7=eH&&(null===(r=eH.publication)||void 0===r?void 0:r.id)?null===(s=ef.result)||void 0===s?void 0:s.publicationUserMap.get(eH.publication.id):void 0,te=eH&&e7&&["admin","contributor"].includes(e7.role)?()=>{(0,J.j)(J.FP.READER_EDIT_POST_BUTTON_CLICKED,{publication_id:eH.publication.id,post_id:eH.post.id}),location.href=(0,eP.ANx)(eH.publication,eH.post.id,{addBase:!0})}:void 0,{activePost:tt,isPlaying:ti,onToggle:tn,onPlay:to}=(0,eb.G)(),tr=!!(ti&&tt&&tt.id===(null==eH?void 0:eH.post.id)),ts=(null==eH?void 0:eH.post)&&(0,X.sY)(eH.post);return(0,a.BX)(eo.hs,{id:"post-viewer",className:ek.Z.viewerContainer,padding:12*!eT,minWidth:0,children:[(0,a.tZ)(F.u,{isOpen:q,onSubmit:e6,onClose:()=>et(!1)}),(0,a.BX)(eo.tu,(0,o._)((0,n._)({className:u()(ek.Z.viewer,e9&&ek.Z.isReading),bg:"primary",flex:"grow",position:"relative",minWidth:0},eT?null:{border:"detail",radius:"md"}),{children:[(0,a.BX)(eo.tu,{className:ek.Z.viewerOffset,flex:"grow",children:[(0,a.BX)(eo.hs,{className:ek.Z.nav,justifyContent:"space-between",paddingY:16,alignItems:"center",children:[(0,a.tZ)(eo.hs,{className:ek.Z.logoContainer,justifyContent:"center",zIndex:-1,children:ez?(0,a.tZ)(ev.Vm,{size:40}):eW&&(0,a.tZ)(eo.hs,{as:"a",href:(0,eP.SVA)(eW),children:(0,a.tZ)(el.wk,{pub:eW,size:40,shadow:"sm",radius:"sm"})})}),(0,a.tZ)(eo.hs,{gap:8,children:(0,a.tZ)(eL,{onClick:eU})}),(0,a.BX)(eo.hs,{gap:8,children:[!eT&&!eQ&&eW&&(0,a.tZ)(en.zx,{priority:e1?"primary":"secondary",rounded:!0,newTab:!0,href:(0,eP.W1P)(eW,{user:ew,addBase:!0,params:{utm_source:eC.b3.substack,utm_medium:eC.lP.web,utm_campaign:eC.VX.postViewer}}),onClick:e=>{if(!ew&&eW){eg(eW)(e);return}setTimeout(()=>{ef.refetchPublication(eW.id)},5e3)},children:(0,a.tZ)(eo.gq,{alignItems:"center",gap:8,children:e1?(0,eS.getSubscribeText)(eW,{isFreeSubscribed:eJ}):"Subscribed"})}),(null==eH?void 0:eH.post)&&(0,X.a7)(eH.post)&&(0,a.tZ)(eu.u,{leading:ts?(0,a.tZ)(j.Z,{size:12}):void 0,text:ts?"Paid subscribers only":"Play audio",preferPlacement:"bottom-center",hoverOptions:{delayEnter:0,delayLeave:0},children:(0,a.tZ)(en.hU,{onClick:()=>{!ts&&(tr?tn():to({post:eH.post,publication:eH.publication}))},disabled:ts,children:ts?(0,a.tZ)(A.Z,{size:20,fill:"var(--color-fg-secondary)"}):tr?(0,a.tZ)(O.Z,{size:20}):(0,a.tZ)(D.Z,{size:20})})}),ez?(0,a.tZ)(ev.Vm,{radius:"sm",size:40}):eH&&(0,a.tZ)(ej,{post:eH.post,publication:eW,onArchive:eM,onSavePost:I,onCopyLink:()=>{eX((0,H.O1)(null,{post:C,pub:eW,user:ew,useCustomDomainOverOpen:!0}))},onReport:()=>et(!0),onEditPost:te,isArchived:M})]})]}),(0,a.BX)(eo.tu,{className:ek.Z.content,flex:"grow",children:[(E||T)&&(0,a.BX)(eo.tu,{gap:8,className:ek.Z.navArrows,children:[(0,a.tZ)(eu.u,{text:"Previous post",trailing:(0,a.tZ)(er.T,{children:"K"}),preferPlacement:"right-center",children:(0,a.tZ)(en.hU,{onClick:null!=T?T:void 0,disabled:!T,tabIndex:2,className:ek.Z.navArrow,children:(0,a.tZ)(h.Z,{size:20})})}),(0,a.tZ)(eu.u,{text:"Next post",trailing:(0,a.tZ)(er.T,{children:"J"}),preferPlacement:"right-center",children:(0,a.tZ)(en.hU,{onClick:null!=E?E:void 0,disabled:!E,tabIndex:1,className:ek.Z.navArrow,children:(0,a.tZ)(m.Z,{size:20})})})]}),(0,a.tZ)(eo.tu,{className:ek.Z.post,flex:"grow",onScroll:e=>{let t=e.currentTarget,i=t.scrollTop;i>t.scrollHeight-t.offsetHeight-100?(e4(!1),null==e2||e2(!1)):i>e8.current?(e4(!0),null==e2||e2(!0)):(e4(!1),null==e2||e2(!1)),e8.current=i},ref:eA,children:ez?(0,a.tZ)(eo.tu,{flex:"grow",alignItems:"center",justifyContent:"center",children:(0,a.tZ)(ea.$j,{})}):eH&&eH.post.id===S&&(0,a.BX)(a.HY,{children:[!es&&!!eH.referringPub&&(0,a.BX)(eo.hs,{position:"relative",className:u()(!eT&&"container",ek.Z.referringPubContainer),radius:"md",shadow:"sm",border:"detail",gap:16,padding:16,children:[(0,a.tZ)(eo.hs,{className:ek.Z.close,position:"absolute",cursor:"pointer",onClick:async()=>{await (0,K.rd)("/api/v1/publication_user_settings/user",{method:"PUT",json:{publication_id:eH.publication.id,type:"hide_referring_recommendation",value:!0}}),eh(!0)},children:(0,a.tZ)(v.Z,{size:16,strokeWidth:1})}),!eT&&(0,a.tZ)(ei.qE,{user:{id:eH.referringPub.author_id,name:eH.referringPub.author_name},photoUrl:eH.referringPub.author_photo_url,size:56}),(0,a.tZ)(eo.tu,{alignItems:"start",gap:16,className:ek.Z.referringPubTextContainer,children:(0,a.BX)(eo.tu,{gap:4,paddingRight:24,children:[(0,a.BX)(ec.xv.B3,{fontWeight:"semibold",children:[eH.publication.author_name?eB(eN(),eH.publication.name,eH.publication.author_name,eH.referringPub.author_name||eH.referringPub.name):eB(ex(),eH.publication.name,eH.referringPub.author_name||eH.referringPub.name)," ",(0,a.BX)(ec.xv.B3,{as:"span",translated:!0,children:["Manage your subscription"," ",(0,a.tZ)(ec.xv.B3,{as:"a",href:(0,eP.zRj)(eH.publication),decoration:"underline",children:"here"}),"."]})]}),(null===(l=eH.referringRecommendation)||void 0===l?void 0:l.description)&&(0,a.BX)(ec.xv.B4,{color:"secondary",children:["“",null===(d=eH.referringRecommendation)||void 0===d?void 0:d.description,"”"," ","–"," ",eH.referringPub.author_name||eH.referringPub.name]})]})})]}),(0,a.tZ)(eI,{post:e5,publication:eH.publication,publicationUser:eq,subscription:eG,publicationSettings:e$,isPledged:e0,postContainerRef:eA,videoPlayerRef:N})]})})]}),(0,a.tZ)(eo.hs,{className:ek.Z.bottomNav,justifyContent:"center",borderTop:"detail",children:(0,a.tZ)(eo.hs,{className:ek.Z.ufi,justifyContent:"space-between",alignItems:"center",gap:32,children:ez?(0,a.tZ)(eD,{}):eH&&e5&&(0,a.tZ)(eO,{publication:eH.publication,post:e5,user:ew,onLike:L})})})]}),e3&&(0,a.tZ)(V.o,{toc:e3,position:"absolute"})]}))]})}let eR=e=>{let t=(0,c.sO)(null);return(0,a.tZ)(E.BY,{postId:e.postId,videoPlayerRef:t,children:(0,a.tZ)(eE,(0,o._)((0,n._)({},e),{videoPlayerRef:t}))})};function eI(e){let{post:t,publication:r,publicationUser:s,subscription:l,publicationSettings:c,isPledged:d,postContainerRef:u,videoPlayerRef:p}=e,h=(0,Y.xR)(),m=(0,G.aF)(),v=m?(0,o._)((0,n._)({},m),{is_contributor:(null==s?void 0:s.role)==="contributor",is_admin:(null==s?void 0:s.role)==="admin",is_public_admin:!!(null==s?void 0:s.public),is_subscribed:(null==l?void 0:l.membership_state)==="subscribed",is_free_subscribed:(null==l?void 0:l.membership_state)==="free_signup",is_pledged:d}):null;return(0,a.BX)(G.dr,{defaultValue:v,children:[(0,a.tZ)(et.PostMetaTags,{post:t,publication:r,siteConfigs:h.allConfigs}),(0,a.tZ)(eh.cr,{module:"@/frontend/reader2/PostRenderer",onRequest:()=>i.e("2926").then(i.bind(i,81033)),resolve:e=>e.ReaderPost,post:t,pub:r,user:v,publicationSettings:c,postContainerRef:u,videoPlayerRef:p})]})}let eB=(0,l.forwardRef)((e,t)=>{var{count:i,children:s,tooltipText:l,tooltipTrailing:c,disabled:d}=e,u=(0,r._)(e,["count","children","tooltipText","tooltipTrailing","disabled"]);return(0,a.tZ)(eo.hs,{justifyContent:"center",alignItems:"center",ref:t,children:(0,a.tZ)(eu.u,{preferPlacement:"top-center",text:null!=l?l:"",trailing:c,disabled:d,children:(0,a.BX)(en.hU,(0,o._)((0,n._)({priority:"tertiary",disabled:d},u),{children:[s,null!=i&&i>0&&(0,a.tZ)(ec.xv.B4,{weight:"bold",color:d?"tertiary":"primary",children:null!=i?(0,q.T)(i):"0"})]}))})})});function eO(e){var t;let{publication:i,post:n,user:o,onLike:r}=e,s=(0,c.sO)(),l=!!n.reaction,d=null!==(t=n.reactions["❤"])&&void 0!==t?t:0,p=!o||!i.community_enabled,h=(0,eS.showCommentsOnPost)({publication:i,post:n});return(0,eg.B)({name:"share",action:()=>{var e;null===(e=s.current)||void 0===e||e.open()}}),(0,a.BX)(a.HY,{children:[(0,a.tZ)(eB,{className:u()(ek.Z.ufiButton,ek.Z.likeButton,l&&ek.Z.isLiked),onClick:r?()=>r(n.id,!l):void 0,count:d,disabled:p,tooltipText:"Like",tooltipTrailing:(0,a.tZ)(er.T,{children:"L"}),children:(0,a.tZ)(b.Z,{size:20})}),(0,a.tZ)(eB,{href:"profile"===i.homepage_type?(0,eP.mx9)(i,n):(0,ew.uRy)(i,n,{comments:!0,urlParams:{utm_source:eC.b3.substack,utm_medium:eC.lP.web,utm_campaign:eC.VX.postViewer}}),count:n.comment_count,newTab:"profile"!==i.homepage_type,disabled:p||!h,className:u()(ek.Z.ufiButton,ek.Z.commentButton),tooltipText:"Comment",children:(0,a.tZ)(_.Z,{size:20})}),(0,a.tZ)(eA,{pub:i,post:n}),(0,a.tZ)(M.sp,{post:n,user:o||void 0,pub:i,showClipping:!!n.videoUpload,trigger:(0,a.tZ)(eB,{className:u()(ek.Z.ufiButton,ek.Z.shareButton),tooltipText:"Share",children:(0,a.tZ)(f.Z,{height:20,strokeWidth:2})})}),(0,a.tZ)(L.h,{children:(0,a.tZ)(z.Z,{ref:s,medium:"post viewer",user:o,post:n,pub:i,onClick:e=>e.preventDefault()})})]})}function eD(){return(0,a.BX)(a.HY,{children:[(0,a.tZ)(eB,{disabled:!0,children:(0,a.tZ)(b.Z,{size:20})}),(0,a.tZ)(eB,{disabled:!0,children:(0,a.tZ)(_.Z,{size:20})}),(0,a.tZ)(eB,{disabled:!0,children:(0,a.tZ)(g.Z,{size:20})}),(0,a.tZ)(eB,{disabled:!0,children:(0,a.tZ)(f.Z,{height:20,strokeWidth:2})})]})}function eA(e){let{pub:t,post:i}=e,r=!(0,G.aF)()||!t.community_enabled,[s,l]=(0,c.eJ)(!!i.restacked),[d,p]=(0,c.eJ)(Number(i.restacks)),{canRestack:h,menuItems:m,nuxModal:v}=(0,ef.K)({pub:t,post:(0,o._)((0,n._)({},i),{restacked:s,restacks:d}),onRestack:e=>{s!==e&&p(d+(e?1:-1)),l(e)}});return h?(0,a.BX)(a.HY,{children:[v,(0,a.tZ)(es.v2,{trigger:(0,a.tZ)(eB,{className:u()(ek.Z.restackButton,ek.Z.ufiButton,s&&ek.Z.isRestacked),count:d,disabled:r,tooltipText:"Restack","aria-label":"menu",children:(0,a.tZ)(B.Z,{className:ek.Z.actionIcon})}),children:m})]}):null}function ej(e){let{post:t,publication:i,onArchive:n,onSavePost:o,onCopyLink:r,onReport:s,onEditPost:l,isArchived:c}=e,{isSaved:d,onSave:u}=(0,U.vk)({post:t}),{iString:p}=(0,W.M1)(),{openModal:h,closeModal:m}=(0,$.dd)(),{activePost:v,isPlaying:b,onToggle:_,onPlay:f}=(0,eb.G)(),E=!!(b&&v&&v.id===t.id);return(0,a.BX)(es.v2,{trigger:(0,a.tZ)(en.hU,{"aria-label":"View more",priority:"secondary",children:(0,a.tZ)(Z.Z,{size:20})}),children:[(0,a.tZ)(es.sN,{onClick:r,leading:(0,a.tZ)(y.Z,{}),children:p("Copy link")}),(0,a.tZ)(es.sN,{leading:(0,a.tZ)(w.Z,{}),onClick:()=>{h({children:(0,a.tZ)(I.I,{post:t,pub:i,onClose:m}),width:540})},children:p("Embed")}),(0,a.BX)(es.xw,{children:[(0,X.a7)(t)&&!(0,X.sY)(t)&&(0,a.tZ)(es.sN,{onClick:()=>{E?_():f({post:t,publication:i})},leading:E?(0,a.tZ)(P.Z,{}):(0,a.tZ)(S.Z,{}),trailing:(0,a.tZ)(er.T,{children:"P"}),children:p(E?"Pause audio":"Play audio")}),o&&(0,a.tZ)(es.sN,{onClick:()=>o({post:t,isSaved:u()}),target:"_blank",leading:d?(0,a.tZ)(C.Z,{}):(0,a.tZ)(g.Z,{}),trailing:(0,a.tZ)(er.T,{children:"S"}),children:p(d?"Unsave":"Save")}),n&&(c?(0,a.tZ)(es.sN,{onClick:()=>n(t.id),leading:(0,a.tZ)(k.Z,{}),trailing:(0,a.tZ)(er.T,{children:"E"}),children:p("Unarchive")}):(0,a.tZ)(es.sN,{onClick:()=>n(t.id),leading:(0,a.tZ)(N.Z,{}),trailing:(0,a.tZ)(er.T,{children:"E"}),children:p("Archive")})),l&&(0,a.tZ)(es.xw,{children:(0,a.tZ)(es.sN,{onClick:l,leading:(0,a.tZ)(x.Z,{}),children:p("Edit post")})})]}),(0,a.tZ)(es.xw,{children:s&&(0,a.tZ)(es.sN,{priority:"destructive",onClick:s,leading:(0,a.tZ)(T.Z,{}),children:p("Report")})})]})}function eL(e){let{onClick:t}=e;return(0,a.tZ)(eu.u,{text:"Close",trailing:(0,a.tZ)(er.T,{children:"ESC"}),preferPlacement:"right-center",children:(0,a.tZ)(en.hU,{onClick:t,priority:"secondary","aria-label":"Close",children:(0,a.tZ)(v.Z,{size:20,"aria-hidden":!0})})})}},82075:function(e,t,i){i(16584),i(15771),i(19081)},22029:function(e,t,i){i(16584),i(9682),i(15771),i(91400),i(33884)},88603:function(e,t,i){i(16584),i(95441),i(15771),i(63651)},7935:function(e,t,i){i(16584),i(60807),i(68833),i(7882),i(98914),i(94874),i(15771),i(19081),i(84747),i(38841),i(78096),i(70379),i(60308)},7779:function(e,t,i){i(16584),i(4473),i(15771),i(80026),i(33884),i(15080)},3:function(e,t,i){i.d(t,{r:()=>I});var n=i(16584),o=i(30396);if(/^(3154|6909)$/.test(i.j))var r=i(24840);var s=i(83320),a=i(22259),l=i(87698),c=i(46411),d=i(89320),u=i(60982),p=i(9997),h=i(890),m=i(98585),v=i(99259),b=i(36518),_=i(85095),f=i(60807),g=i(9682),Z=i(98914),y=i(80026),w=i(72260),P=i(19434),S=i(50802),C=i(3561),k=i(75419),N=i(98012),x=i(33884),T=i(63651);if(/^(3154|6909)$/.test(i.j))var E=i(47929);var R=i(15080);function I(e){var t,i;let{requireLogin:I,setDrawer:B,drawer:O,native:D}=e,A=(0,f.aF)(),{viewerProfile:j}=(0,_.Un)(),[L]=(0,g.tv)(),{activityUnreadCount:X}=(0,b.lR)(),U=(0,v.M$)().isOnDestination,[M,F]=(0,o.eJ)(null),H={urlParams:{utm_content:E.fZ.islandDesktopNavSidebar}},z=U?x.Ds:(0,T.n1t)((0,T.SVA)(),{utm_content:E.fZ.islandDesktopNavSidebar}),V=U?null:(0,T.ze_)(H);(0,o.d4)(()=>{if("undefined"!=typeof window){let e=window.localStorage.getItem("chatLastClicked");e&&F((0,N.Z)(e))}},[]);let W=(null==j?void 0:null===(t=j.publicationUsers)||void 0===t?void 0:t.find(e=>"admin"===e.role||"contributor"===e.role))||{publication:null==A?void 0:null===(i=A.dashboard_pubs)||void 0===i?void 0:i[0]},$=(0,k.i3)(),{chatUnreadCount:Y,useChatBadge:G}=(0,w.L)({chatLastClicked:M}),{open:q}=(0,m.Dr)();return(0,n.tZ)(y.sg,{role:"navigation","aria-label":"Main navigation","aria-orientation":"vertical",className:U?"":R.Z.profileSideNavContainer,children:(0,n.tZ)(y.sg,{position:"fixed",bg:"primary",className:R.Z.sideNav,children:(0,n.tZ)(y.sg,{flex:"grow",children:(0,n.BX)(y.sg,{flex:"grow",sizing:"border-box",borderRight:"detail",width:72,children:[(0,n.BX)(y.sg,{padding:8,gap:8,justifyContent:"center",flex:"grow",children:[(0,n.tZ)(C.u,{href:z,icon:(0,n.tZ)(d.Z,{}),activeIcon:(0,n.tZ)(u.Z,{}),label:"Home",native:!!D,isActive:!O&&void 0}),(0,n.tZ)(C.u,{href:U?T.Gfh:(0,T.ozY)(H),icon:(0,n.tZ)(p.Z,{}),activeIcon:(0,n.tZ)(h.Z,{}),requireLogin:I,label:"Subscriptions",native:!!D,isActive:!O&&void 0}),(0,n.tZ)(C.u,{href:U?T.Don:(0,T.Cnj)(H),icon:(0,n.tZ)(l.Z,{}),activeIcon:(0,n.tZ)(c.Z,{}),requireLogin:I,badge:Y,dot:!!G,native:!!D,label:"Chat",onClick:()=>{B&&B(null),F((0,N.Z)()),window.localStorage.setItem("chatLastClicked",(0,N.Z)().toISOString())},isActive:!O&&void 0}),(0,n.tZ)(C.u,{onClick:()=>{B?B("activity"===O?null:"activity"):V&&(0,Z.uX)(V)},isActive:"activity"===O,icon:(0,n.tZ)(s.Z,{}),activeIcon:(0,n.tZ)(a.Z,{}),requireLogin:I,badge:X,label:"Activity"}),(0,n.tZ)(C.u,{onClick:()=>{U?q():(0,Z.uX)((0,T.k7R)(H))},icon:(0,n.tZ)(r.Z,{}),label:"Search"}),(0,n.tZ)(y.sg,{alignItems:"center",paddingY:8,children:(0,n.tZ)(P.z,{onNoteClick:e=>{let{isPost:t}=e;B&&B(null),$.open({onCompose:()=>{(0,x.Z2)(L.path)?((0,Z.uX)("/inbox",{replace:!0}),setTimeout(()=>{(0,Z.uX)(x.Ds,{replace:!0})},0)):(0,Z.uX)(z)},isPost:t})},profile:j,publicationUser:W})})]}),(0,n.tZ)(y.sg,{padding:8,gap:8,justifyContent:"center",children:A&&(0,n.tZ)(S.D,{})})]})})})})}},24641:function(e,t,i){i(16584),i(95441),i(15771),i(91400)},76404:function(e,t,i){i.d(t,{I:()=>P});var n=i(16584),o=i(94184),r=i.n(o);if(/^(3154|6909)$/.test(i.j))var s=i(38464);var a=i(87698),l=i(46411),c=i(85626),d=i(89320),u=i(60982),p=i(9997),h=i(890),m=i(99259),v=i(49762),b=i(19081),_=i(72260),f=i(13434),g=i(33884),Z=i(63651);if(/^(3154|6909)$/.test(i.j))var y=i(47929);var w=i(15080);function P(e){let{requireLogin:t}=e,i=(0,m.M$)().isOnDestination,{chatUnreadCount:o}=(0,_.L)({}),P={noBase:!1,urlParams:{utm_content:y.fZ.islandDesktopNavSidebar}},S=i?g.Ds:(0,Z.n1t)((0,Z.SVA)(),{utm_content:y.fZ.islandDesktopNavSidebar});return(0,n.tZ)(b.hs,{className:w.Z.mobileNavContainer,children:(0,n.BX)(b.hs,{className:r()(w.Z.mobileNav,i?null:w.Z.mobileNavOnIsland),flex:"grow",alignItems:"center",justifyContent:"space-between",borderTop:"detail",paddingX:64,children:[(0,n.tZ)(f.P,{href:S,icon:(0,n.tZ)(d.Z,{}),activeIcon:(0,n.tZ)(u.Z,{}),requireLogin:t,native:!i}),(0,n.tZ)(f.P,{href:i?Z.Gfh:(0,Z.ozY)(P),icon:(0,n.tZ)(p.Z,{}),activeIcon:(0,n.tZ)(h.Z,{}),requireLogin:t,native:!i}),(0,n.tZ)(v.kR,{configKey:"web_reader_podcasts_tab",children:(0,n.tZ)(f.P,{href:"/podcasts-player",icon:(0,n.tZ)(s.Z,{strokeWidth:1.8*26/30,size:30,stroke:"var(--color-fg-primary)"}),activeIcon:(0,n.tZ)(c.Z,{strokeWidth:1.8*26/30,size:30,stroke:"var(--color-fg-primary)"}),requireLogin:t})}),(0,n.tZ)(f.P,{href:i?(0,Z.Cnj)():(0,Z.Cnj)(P),icon:(0,n.tZ)(a.Z,{}),activeIcon:(0,n.tZ)(l.Z,{}),requireLogin:t,badge:o,native:!i,className:w.Z.reader2MobileNavIcon})]})})}},57449:function(e,t,i){i(16584),i(58175)},33740:function(e,t,i){i(16584),i(12757)},15850:function(e,t,i){i(16584);var n=i(98661);i(30396);var o=i(23493),r=i.n(o);(0,n.createContext)({listeningProgress:{},onUpdateListeningProgress:()=>void 0});let s=e=>{let{user:t}=e;return"podcasts:listening_progress:".concat(t.id)};r()(e=>{let{allProgress:t,user:i}=e,n=s({user:i});localStorage.setItem(n,JSON.stringify(t))},1e3)},30322:function(e,t,i){i(16584),i(30396),i(94184),i(86657),i(56219),i(19081),i(81043),i(14293),i(2689),i(9970),i(20888),i(95441),i(80878);var n=i(71068);i(15771),i(36500),i(38841),i(63474),i(58175),i(2009),i(5623),i(60308),i(63651),i(84864),(0,n.zo)({display:"flex",direction:"row",flex:"grow",alignItems:"center",justifyContent:"space-between",paddingX:8,gap:16}),i(44312)},44312:function(e,t,i){i.d(t,{G:()=>s}),i(16584);var n=i(98661),o=i(30396);i(59854),i(15850);let r=(0,n.createContext)({activePodcast:null,activePost:null,activePublication:null,lastActivePost:null,lastActivePodcast:null,lastActivePublication:null,audioPlayerRef:{current:null},currentTime:0,duration:null,isPlaying:!1,listeningProgress:{},onClear:()=>void 0,onPlay:()=>void 0,onToggle:()=>void 0}),s=()=>(0,o.qp)(r)},98905:function(e,t,i){i.d(t,{K:()=>p});var n=i(7409),o=i(99282),r=i(98848),s=i(16584),a=i(98661),l=i(94184),c=i.n(l),d=i(19081),u=i(37381);let p=(0,a.forwardRef)((e,t)=>{var{className:i,error:a=!1,type:l="text",width:p,background:h,font:m,leftIcon:v,rightIcon:b}=e,_=(0,r._)(e,["className","error","type","width","background","font","leftIcon","rightIcon"]);let f=(0,s.tZ)("input",(0,o._)((0,n._)({},_),{className:c()(i,u.Z.inputWithIcons,{[u.Z.error]:a},m&&u.Z["font-".concat(m)]),style:{width:p,background:h},type:l,ref:t}));return(0,s.BX)(d.gq,{paddingX:12,className:c()(i,u.Z.inputWrapper,{[u.Z.error]:a}),style:{width:p,background:h},children:[v&&(0,s.tZ)("span",{children:v}),f,b&&(0,s.tZ)("span",{children:b})]})})}}]);